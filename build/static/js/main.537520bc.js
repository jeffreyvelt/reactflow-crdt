/*! For license information please see main.537520bc.js.LICENSE.txt */
(()=>{"use strict";var e={532:(e,t,n)=>{var r=n(261),o=n(643),i=n(766);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}var l=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),g=Symbol.for("react.consumer"),m=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),S=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var E=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var k=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function x(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=C&&e[C]||e["@@iterator"])?e:null}var _=Symbol.for("react.client.reference");function N(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===_?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case d:return"Fragment";case u:return"Portal";case f:return"Profiler";case h:return"StrictMode";case v:return"Suspense";case b:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case m:return(e.displayName||"Context")+".Provider";case g:return(e._context.displayName||"Context")+".Consumer";case y:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case w:return null!==(t=e.displayName||null)?t:N(e.type)||"Memo";case S:t=e._payload,e=e._init;try{return N(e(t))}catch(bp){}}return null}var T,A,I=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=Object.assign;function M(e){if(void 0===T)try{throw Error()}catch(bp){var t=bp.stack.trim().match(/\n( *(at )?)/);T=t&&t[1]||"",A=-1<bp.stack.indexOf("\n    at")?" (<anonymous>)":-1<bp.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+T+e+A}var P=!1;function O(e,t){if(!e||P)return"";P=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(bp){var r=bp}Reflect.construct(e,[],n)}else{try{n.call()}catch(o){r=o}e.call(n.prototype)}}else{try{throw Error()}catch(i){r=i}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),s=i[0],a=i[1];if(s&&a){var l=s.split("\n"),c=a.split("\n");for(o=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;o<c.length&&!c[o].includes("DetermineComponentFrameRoot");)o++;if(r===l.length||o===c.length)for(r=l.length-1,o=c.length-1;1<=r&&0<=o&&l[r]!==c[o];)o--;for(;1<=r&&0<=o;r--,o--)if(l[r]!==c[o]){if(1!==r||1!==o)do{if(r--,0>--o||l[r]!==c[o]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=o);break}}}finally{P=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?M(n):""}function L(e){switch(e.tag){case 26:case 27:case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 15:return e=O(e.type,!1);case 11:return e=O(e.type.render,!1);case 1:return e=O(e.type,!0);default:return""}}function R(e){try{var t="";do{t+=L(e),e=e.return}while(e);return t}catch(bp){return"\nError generating stack: "+bp.message+"\n"+bp.stack}}function z(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function F(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function V(e){if(z(e)!==e)throw Error(s(188))}function j(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=j(e)))return t;e=e.sibling}return null}var B=Array.isArray,U=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},q=[],K=-1;function W(e){return{current:e}}function G(e){0>K||(e.current=q[K],q[K]=null,K--)}function Y(e,t){K++,q[K]=e.current,e.current=t}var X=W(null),Q=W(null),Z=W(null),$=W(null);function J(e,t){switch(Y(Z,t),Y(Q,e),Y(X,null),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?Qu(t):0;break;default:if(t=(e=8===e?t.parentNode:t).tagName,e=e.namespaceURI)t=Zu(e=Qu(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}G(X),Y(X,t)}function ee(){G(X),G(Q),G(Z)}function te(e){null!==e.memoizedState&&Y($,e);var t=X.current,n=Zu(t,e.type);t!==n&&(Y(Q,e),Y(X,n))}function ne(e){Q.current===e&&(G(X),G(Q)),$.current===e&&(G($),Rd._currentValue=H)}var re=Object.prototype.hasOwnProperty,oe=r.unstable_scheduleCallback,ie=r.unstable_cancelCallback,se=r.unstable_shouldYield,ae=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,fe=r.unstable_LowPriority,pe=r.unstable_IdlePriority,ge=r.log,me=r.unstable_setDisableYieldValue,ye=null,ve=null;function be(e){if("function"===typeof ge&&me(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var we=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(Se(e)/Ee|0)|0},Se=Math.log,Ee=Math.LN2;var ke=128,Ce=4194304;function xe(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _e(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,s=e.warmLanes;e=0!==e.finishedLanes;var a=134217727&n;return 0!==a?0!==(n=a&~o)?r=xe(n):0!==(i&=a)?r=xe(i):e||0!==(s=a&~s)&&(r=xe(s)):0!==(a=n&~o)?r=xe(a):0!==i?r=xe(i):e||0!==(s=n&~s)&&(r=xe(s)),0===r?0:0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(s=t&-t)||32===o&&0!==(4194176&s))?t:r}function Ne(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Te(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ae(){var e=ke;return 0===(4194176&(ke<<=1))&&(ke=128),e}function Ie(){var e=Ce;return 0===(62914560&(Ce<<=1))&&(Ce=4194304),e}function De(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Me(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Pe(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-we(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194218&n}function Oe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-we(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}function Le(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Re(){var e=U.p;return 0!==e?e:void 0===(e=window.event)?32:Zd(e.type)}var ze=Math.random().toString(36).slice(2),Fe="__reactFiber$"+ze,Ve="__reactProps$"+ze,je="__reactContainer$"+ze,Be="__reactEvents$"+ze,Ue="__reactListeners$"+ze,He="__reactHandles$"+ze,qe="__reactResources$"+ze,Ke="__reactMarker$"+ze;function We(e){delete e[Fe],delete e[Ve],delete e[Be],delete e[Ue],delete e[He]}function Ge(e){var t=e[Fe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[je]||n[Fe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ld(e);null!==e;){if(n=e[Fe])return n;e=ld(e)}return t}n=(e=n).parentNode}return null}function Ye(e){if(e=e[Fe]||e[je]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Xe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function Qe(e){var t=e[qe];return t||(t=e[qe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ze(e){e[Ke]=!0}var $e=new Set,Je={};function et(e,t){tt(e,t),tt(e+"Capture",t)}function tt(e,t){for(Je[e]=t,e=0;e<t.length;e++)$e.add(t[e])}var nt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},it={};function st(e,t,n){if(o=t,re.call(it,o)||!re.call(ot,o)&&(rt.test(o)?it[o]=!0:(ot[o]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var o}function at(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function lt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function gt(e){return e.replace(pt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function mt(e,t,n,r,o,i,s,a){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?vt(e,s,ct(t)):null!=n?vt(e,s,ct(n)):null!=r&&e.removeAttribute("value"),null==o&&null!=i&&(e.defaultChecked=!!i),null!=o&&(e.checked=o&&"function"!==typeof o&&"symbol"!==typeof o),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ct(a):e.removeAttribute("name")}function yt(e,t,n,r,o,i,s,a){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:o)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(s(92));if(B(r)){if(1<r.length)throw Error(s(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function Et(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ct(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function xt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var o in t)r=t[o],t.hasOwnProperty(o)&&n[o]!==r&&Ct(e,o,r)}else for(var i in t)t.hasOwnProperty(i)&&Ct(e,i,t[i])}function _t(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var It=null;function Dt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Mt=null,Pt=null;function Ot(e){var t=Ye(e);if(t&&(e=t.stateNode)){var n=e[Ve]||null;e:switch(e=t.stateNode,t.type){case"input":if(mt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=r[Ve]||null;if(!o)throw Error(s(90));mt(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Lt=!1;function Rt(e,t,n){if(Lt)return e(t,n);Lt=!0;try{return e(t)}finally{if(Lt=!1,(null!==Mt||null!==Pt)&&(Fc(),Mt&&(t=Mt,e=Pt,Pt=Mt=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function zt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Ve]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ft=!1;if(nt)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Ft=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(Sh){Ft=!1}var jt=null,Bt=null,Ut=null;function Ht(){if(Ut)return Ut;var e,t,n=Bt,r=n.length,o="value"in jt?jt.value:jt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===o[i-t];t++);return Ut=o.slice(e,1<t?1-t:void 0)}function qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function Wt(){return!1}function Gt(e){function t(t,n,r,o,i){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(o):o[s]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?Kt:Wt,this.isPropagationStopped=Wt,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var Yt,Xt,Qt,Zt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$t=Gt(Zt),Jt=D({},Zt,{view:0,detail:0}),en=Gt(Jt),tn=D({},Jt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qt&&(Qt&&"mousemove"===e.type?(Yt=e.screenX-Qt.screenX,Xt=e.screenY-Qt.screenY):Xt=Yt=0,Qt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),nn=Gt(tn),rn=Gt(D({},tn,{dataTransfer:0})),on=Gt(D({},Jt,{relatedTarget:0})),sn=Gt(D({},Zt,{animationName:0,elapsedTime:0,pseudoElement:0})),an=Gt(D({},Zt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ln=Gt(D({},Zt,{data:0})),cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},un={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dn[e])&&!!t[e]}function fn(){return hn}var pn=Gt(D({},Jt,{key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?un[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fn,charCode:function(e){return"keypress"===e.type?qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Gt(D({},tn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),mn=Gt(D({},Jt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fn})),yn=Gt(D({},Zt,{propertyName:0,elapsedTime:0,pseudoElement:0})),vn=Gt(D({},tn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bn=Gt(D({},Zt,{newState:0,oldState:0})),wn=[9,13,27,32],Sn=nt&&"CompositionEvent"in window,En=null;nt&&"documentMode"in document&&(En=document.documentMode);var kn=nt&&"TextEvent"in window&&!En,Cn=nt&&(!Sn||En&&8<En&&11>=En),xn=String.fromCharCode(32),_n=!1;function Nn(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var An=!1;var In={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!In[e.type]:"textarea"===t}function Mn(e,t,n,r){Mt?Pt?Pt.push(r):Pt=[r]:Mt=r,0<(t=Ru(t,"onChange")).length&&(n=new $t("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Pn=null,On=null;function Ln(e){Tu(e,0)}function Rn(e){if(ht(Xe(e)))return e}function zn(e,t){if("change"===e)return t}var Fn=!1;if(nt){var Vn;if(nt){var jn="oninput"in document;if(!jn){var Bn=document.createElement("div");Bn.setAttribute("oninput","return;"),jn="function"===typeof Bn.oninput}Vn=jn}else Vn=!1;Fn=Vn&&(!document.documentMode||9<document.documentMode)}function Un(){Pn&&(Pn.detachEvent("onpropertychange",Hn),On=Pn=null)}function Hn(e){if("value"===e.propertyName&&Rn(On)){var t=[];Mn(t,On,e,Dt(e)),Rt(Ln,t)}}function qn(e,t,n){"focusin"===e?(Un(),On=n,(Pn=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&Un()}function Kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Rn(On)}function Wn(e,t){if("click"===e)return Rn(t)}function Gn(e,t){if("input"===e||"change"===e)return Rn(t)}var Yn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xn(e,t){if(Yn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!re.call(t,o)||!Yn(e[o],t[o]))return!1}return!0}function Qn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zn(e,t){var n,r=Qn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Qn(r)}}function $n(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?$n(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Jn(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function er(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function tr(e,t){var n=Jn(t);t=e.focusedElem;var r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&$n(t.ownerDocument.documentElement,t)){if(null!==r&&er(t))if(e=r.start,void 0===(n=r.end)&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if((n=(e=t.ownerDocument||document)&&e.defaultView||window).getSelection){n=n.getSelection();var o=t.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!n.extend&&i>r&&(o=r,r=i,i=o),o=Zn(t,i);var s=Zn(t,r);o&&s&&(1!==n.rangeCount||n.anchorNode!==o.node||n.anchorOffset!==o.offset||n.focusNode!==s.node||n.focusOffset!==s.offset)&&((e=e.createRange()).setStart(o.node,o.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),n.addRange(e)))}for(e=[],n=t;n=n.parentNode;)1===n.nodeType&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<e.length;t++)(n=e[t]).element.scrollLeft=n.left,n.element.scrollTop=n.top}}var nr=nt&&"documentMode"in document&&11>=document.documentMode,rr=null,or=null,ir=null,sr=!1;function ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;sr||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&er(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ir&&Xn(ir,r)||(ir=r,0<(r=Ru(or,"onSelect")).length&&(t=new $t("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}nt&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=hr("animationend"),pr=hr("animationiteration"),gr=hr("animationstart"),mr=hr("transitionrun"),yr=hr("transitionstart"),vr=hr("transitioncancel"),br=hr("transitionend"),wr=new Map,Sr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Er(e,t){wr.set(e,t),et(t,[e])}var kr=[],Cr=0,xr=0;function _r(){for(var e=Cr,t=xr=Cr=0;t<e;){var n=kr[t];kr[t++]=null;var r=kr[t];kr[t++]=null;var o=kr[t];kr[t++]=null;var i=kr[t];if(kr[t++]=null,null!==r&&null!==o){var s=r.pending;null===s?o.next=o:(o.next=s.next,s.next=o),r.pending=o}0!==i&&Ir(n,o,i)}}function Nr(e,t,n,r){kr[Cr++]=e,kr[Cr++]=t,kr[Cr++]=n,kr[Cr++]=r,xr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Tr(e,t,n,r){return Nr(e,t,n,r),Dr(e)}function Ar(e,t){return Nr(e,null,null,t),Dr(e)}function Ir(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var o=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(o=!0)),e=i,i=i.return;o&&null!==t&&3===e.tag&&(i=e.stateNode,o=31-we(n),null===(e=(i=i.hiddenUpdates)[o])?i[o]=[t]:e.push(t),t.lane=536870912|n)}function Dr(e){if(50<Tc)throw Tc=0,Ac=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Mr={},Pr=new WeakMap;function Or(e,t){if("object"===typeof e&&null!==e){var n=Pr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:R(t)},Pr.set(e,t),t)}return{value:e,source:t,stack:R(t)}}var Lr=[],Rr=0,zr=null,Fr=0,Vr=[],jr=0,Br=null,Ur=1,Hr="";function qr(e,t){Lr[Rr++]=Fr,Lr[Rr++]=zr,zr=e,Fr=t}function Kr(e,t,n){Vr[jr++]=Ur,Vr[jr++]=Hr,Vr[jr++]=Br,Br=e;var r=Ur;e=Hr;var o=32-we(r)-1;r&=~(1<<o),n+=1;var i=32-we(t)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,Ur=1<<32-we(t)+o|n<<o|r,Hr=i+e}else Ur=1<<i|n<<o|r,Hr=e}function Wr(e){null!==e.return&&(qr(e,1),Kr(e,1,0))}function Gr(e){for(;e===zr;)zr=Lr[--Rr],Lr[Rr]=null,Fr=Lr[--Rr],Lr[Rr]=null;for(;e===Br;)Br=Vr[--jr],Vr[jr]=null,Hr=Vr[--jr],Vr[jr]=null,Ur=Vr[--jr],Vr[jr]=null}var Yr=null,Xr=null,Qr=!1,Zr=null,$r=!1,Jr=Error(s(519));function eo(e){throw io(Or(Error(s(418,"")),e)),Jr}function to(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Fe]=e,t[Ve]=r,n){case"dialog":Au("cancel",t),Au("close",t);break;case"iframe":case"object":case"embed":Au("load",t);break;case"video":case"audio":for(n=0;n<_u.length;n++)Au(_u[n],t);break;case"source":Au("error",t);break;case"img":case"image":case"link":Au("error",t),Au("load",t);break;case"details":Au("toggle",t);break;case"input":Au("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Au("invalid",t);break;case"textarea":Au("invalid",t),St(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Uu(t.textContent,n)?(null!=r.popover&&(Au("beforetoggle",t),Au("toggle",t)),null!=r.onScroll&&Au("scroll",t),null!=r.onScrollEnd&&Au("scrollend",t),null!=r.onClick&&(t.onclick=Hu),t=!0):t=!1,t||eo(e)}function no(e){for(Yr=e.return;Yr;)switch(Yr.tag){case 3:case 27:return void($r=!0);case 5:case 13:return void($r=!1);default:Yr=Yr.return}}function ro(e){if(e!==Yr)return!1;if(!Qr)return no(e),Qr=!0,!1;var t,n=!1;if((t=3!==e.tag&&27!==e.tag)&&((t=5===e.tag)&&(t=!("form"!==(t=e.type)&&"button"!==t)||$u(e.type,e.memoizedProps)),t=!t),t&&(n=!0),n&&Xr&&eo(e),no(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){Xr=ad(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}Xr=null}}else Xr=Yr?ad(e.stateNode.nextSibling):null;return!0}function oo(){Xr=Yr=null,Qr=!1}function io(e){null===Zr?Zr=[e]:Zr.push(e)}var so=Error(s(460)),ao=Error(s(474)),lo={then:function(){}};function co(e){return"fulfilled"===(e=e.status)||"rejected"===e}function uo(){}function ho(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(uo,uo),t=n),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===so)throw Error(s(483));throw e;default:if("string"===typeof t.status)t.then(uo,uo);else{if(null!==(e=tc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===so)throw Error(s(483));throw e}throw fo=t,so}}var fo=null;function po(){if(null===fo)throw Error(s(459));var e=fo;return fo=null,e}var go=null,mo=0;function yo(e){var t=mo;return mo+=1,null===go&&(go=[]),ho(go,e,t)}function vo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function bo(e,t){if(t.$$typeof===l)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wo(e){return(0,e._init)(e._payload)}function So(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=zl(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=33554434,n):r:(t.flags|=33554434,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Ul(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n,r){var i=n.type;return i===d?p(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===S&&wo(i)===t.type)?(vo(t=o(t,n.props),n),t.return=e,t):(vo(t=Vl(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function f(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hl(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function p(e,t,n,r,i){return null===t||7!==t.tag?((t=jl(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function g(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Ul(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case c:return vo(n=Vl(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case u:return(t=Hl(t,e.mode,n)).return=e,t;case S:return g(e,t=(0,t._init)(t._payload),n)}if(B(t)||x(t))return(t=jl(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return g(e,yo(t),n);if(t.$$typeof===m)return g(e,_a(e,t),n);bo(e,t)}return null}function y(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case c:return n.key===o?h(e,t,n,r):null;case u:return n.key===o?f(e,t,n,r):null;case S:return y(e,t,n=(o=n._init)(n._payload),r)}if(B(n)||x(n))return null!==o?null:p(e,t,n,r,null);if("function"===typeof n.then)return y(e,t,yo(n),r);if(n.$$typeof===m)return y(e,t,_a(e,n),r);bo(e,n)}return null}function v(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case c:return h(t,e=e.get(null===r.key?n:r.key)||null,r,o);case u:return f(t,e=e.get(null===r.key?n:r.key)||null,r,o);case S:return v(e,t,n,r=(0,r._init)(r._payload),o)}if(B(r)||x(r))return p(t,e=e.get(n)||null,r,o,null);if("function"===typeof r.then)return v(e,t,n,yo(r),o);if(r.$$typeof===m)return v(e,t,n,_a(t,r),o);bo(t,r)}return null}function b(l,h,f,p){if("object"===typeof f&&null!==f&&f.type===d&&null===f.key&&(f=f.props.children),"object"===typeof f&&null!==f){switch(f.$$typeof){case c:e:{for(var w=f.key;null!==h;){if(h.key===w){if((w=f.type)===d){if(7===h.tag){n(l,h.sibling),(p=o(h,f.props.children)).return=l,l=p;break e}}else if(h.elementType===w||"object"===typeof w&&null!==w&&w.$$typeof===S&&wo(w)===h.type){n(l,h.sibling),vo(p=o(h,f.props),f),p.return=l,l=p;break e}n(l,h);break}t(l,h),h=h.sibling}f.type===d?((p=jl(f.props.children,l.mode,p,f.key)).return=l,l=p):(vo(p=Vl(f.type,f.key,f.props,null,l.mode,p),f),p.return=l,l=p)}return a(l);case u:e:{for(w=f.key;null!==h;){if(h.key===w){if(4===h.tag&&h.stateNode.containerInfo===f.containerInfo&&h.stateNode.implementation===f.implementation){n(l,h.sibling),(p=o(h,f.children||[])).return=l,l=p;break e}n(l,h);break}t(l,h),h=h.sibling}(p=Hl(f,l.mode,p)).return=l,l=p}return a(l);case S:return b(l,h,f=(w=f._init)(f._payload),p)}if(B(f))return function(o,s,a,l){for(var c=null,u=null,d=s,h=s=0,f=null;null!==d&&h<a.length;h++){d.index>h?(f=d,d=null):f=d.sibling;var p=y(o,d,a[h],l);if(null===p){null===d&&(d=f);break}e&&d&&null===p.alternate&&t(o,d),s=i(p,s,h),null===u?c=p:u.sibling=p,u=p,d=f}if(h===a.length)return n(o,d),Qr&&qr(o,h),c;if(null===d){for(;h<a.length;h++)null!==(d=g(o,a[h],l))&&(s=i(d,s,h),null===u?c=d:u.sibling=d,u=d);return Qr&&qr(o,h),c}for(d=r(d);h<a.length;h++)null!==(f=v(d,o,h,a[h],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?h:f.key),s=i(f,s,h),null===u?c=f:u.sibling=f,u=f);return e&&d.forEach((function(e){return t(o,e)})),Qr&&qr(o,h),c}(l,h,f,p);if(x(f)){if("function"!==typeof(w=x(f)))throw Error(s(150));return function(o,a,l,c){if(null==l)throw Error(s(151));for(var u=null,d=null,h=a,f=a=0,p=null,m=l.next();null!==h&&!m.done;f++,m=l.next()){h.index>f?(p=h,h=null):p=h.sibling;var b=y(o,h,m.value,c);if(null===b){null===h&&(h=p);break}e&&h&&null===b.alternate&&t(o,h),a=i(b,a,f),null===d?u=b:d.sibling=b,d=b,h=p}if(m.done)return n(o,h),Qr&&qr(o,f),u;if(null===h){for(;!m.done;f++,m=l.next())null!==(m=g(o,m.value,c))&&(a=i(m,a,f),null===d?u=m:d.sibling=m,d=m);return Qr&&qr(o,f),u}for(h=r(h);!m.done;f++,m=l.next())null!==(m=v(h,o,f,m.value,c))&&(e&&null!==m.alternate&&h.delete(null===m.key?f:m.key),a=i(m,a,f),null===d?u=m:d.sibling=m,d=m);return e&&h.forEach((function(e){return t(o,e)})),Qr&&qr(o,f),u}(l,h,f=w.call(f),p)}if("function"===typeof f.then)return b(l,h,yo(f),p);if(f.$$typeof===m)return b(l,h,_a(l,f),p);bo(l,f)}return"string"===typeof f&&""!==f||"number"===typeof f||"bigint"===typeof f?(f=""+f,null!==h&&6===h.tag?(n(l,h.sibling),(p=o(h,f)).return=l,l=p):(n(l,h),(p=Ul(f,l.mode,p)).return=l,l=p),a(l)):n(l,h)}return function(e,t,n,r){try{mo=0;var o=b(e,t,n,r);return go=null,o}catch(bp){if(bp===so)throw bp;var i=Ll(29,bp,null,e.mode);return i.lanes=r,i.return=e,i}}}var Eo=So(!0),ko=So(!1),Co=W(null),xo=W(0);function _o(e,t){Y(xo,e=cc),Y(Co,t),cc=e|t.baseLanes}function No(){Y(xo,cc),Y(Co,Co.current)}function To(){cc=xo.current,G(Co),G(xo)}var Ao=W(null),Io=null;function Do(e){var t=e.alternate;Y(Lo,1&Lo.current),Y(Ao,e),null===Io&&(null===t||null!==Co.current||null!==t.memoizedState)&&(Io=e)}function Mo(e){if(22===e.tag){if(Y(Lo,Lo.current),Y(Ao,e),null===Io){var t=e.alternate;null!==t&&null!==t.memoizedState&&(Io=e)}}else Po()}function Po(){Y(Lo,Lo.current),Y(Ao,Ao.current)}function Oo(e){G(Ao),Io===e&&(Io=null),G(Lo)}var Lo=W(0);function Ro(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zo="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Fo=r.unstable_scheduleCallback,Vo=r.unstable_NormalPriority,jo={$$typeof:m,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bo(){return{controller:new zo,data:new Map,refCount:0}}function Uo(e){e.refCount--,0===e.refCount&&Fo(Vo,(function(){e.controller.abort()}))}var Ho=null,qo=0,Ko=0,Wo=null;function Go(){if(0===--qo&&null!==Ho){null!==Wo&&(Wo.status="fulfilled");var e=Ho;Ho=null,Ko=0,Wo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Yo=I.S;I.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ho){var n=Ho=[];qo=0,Ko=Su(),Wo={status:"pending",value:void 0,then:function(e){n.push(e)}}}qo++,t.then(Go,Go)}(0,t),null!==Yo&&Yo(e,t)};var Xo=W(null);function Qo(){var e=Xo.current;return null!==e?e:tc.pooledCache}function Zo(e,t){Y(Xo,null===t?Xo.current:t.pool)}function $o(){var e=Qo();return null===e?null:{parent:jo._currentValue,pool:e}}var Jo=0,ei=null,ti=null,ni=null,ri=!1,oi=!1,ii=!1,si=0,ai=0,li=null,ci=0;function ui(){throw Error(s(321))}function di(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yn(e[n],t[n]))return!1;return!0}function hi(e,t,n,r,o,i){return Jo=i,ei=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=null===e||null===e.memoizedState?_s:Ns,ii=!1,i=n(r,o),ii=!1,oi&&(i=pi(t,n,r,o)),fi(e),i}function fi(e){I.H=xs;var t=null!==ti&&null!==ti.next;if(Jo=0,ni=ti=ei=null,ri=!1,ai=0,li=null,t)throw Error(s(300));null===e||qs||null!==(e=e.dependencies)&&ka(e)&&(qs=!0)}function pi(e,t,n,r){ei=e;var o=0;do{if(oi&&(li=null),ai=0,oi=!1,25<=o)throw Error(s(301));if(o+=1,ni=ti=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}I.H=Ts,i=t(n,r)}while(oi);return i}function gi(){var e=I.H,t=e.useState()[0];return t="function"===typeof t.then?Si(t):t,e=e.useState()[0],(null!==ti?ti.memoizedState:null)!==e&&(ei.flags|=1024),t}function mi(){var e=0!==si;return si=0,e}function yi(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function vi(e){if(ri){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ri=!1}Jo=0,ni=ti=ei=null,oi=!1,ai=si=0,li=null}function bi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ni?ei.memoizedState=ni=e:ni=ni.next=e,ni}function wi(){if(null===ti){var e=ei.alternate;e=null!==e?e.memoizedState:null}else e=ti.next;var t=null===ni?ei.memoizedState:ni.next;if(null!==t)ni=t,ti=e;else{if(null===e){if(null===ei.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(ti=e).memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},null===ni?ei.memoizedState=ni=e:ni=ni.next=e}return ni}function Si(e){var t=ai;return ai+=1,null===li&&(li=[]),e=ho(li,e,t),t=ei,null===(null===ni?t.memoizedState:ni.next)&&(t=t.alternate,I.H=null===t||null===t.memoizedState?_s:Ns),e}function Ei(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Si(e);if(e.$$typeof===m)return xa(e)}throw Error(s(438,String(e)))}function ki(e){var t=null,n=ei.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=ei.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},ei.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=k;return t.index++,n}function Ci(e,t){return"function"===typeof t?t(e):t}function xi(e){return _i(wi(),ti,e)}function _i(e,t,n){var r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=n;var o=e.baseQueue,i=r.pending;if(null!==i){if(null!==o){var a=o.next;o.next=i.next,i.next=a}t.baseQueue=o=i,r.pending=null}if(i=e.baseState,null===o)e.memoizedState=i;else{var l=a=null,c=null,u=t=o.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(rc&h)===h:(Jo&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Ko&&(d=!0);else{if((Jo&f)===f){u=u.next,f===Ko&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,a=i):c=c.next=h,ei.lanes|=f,dc|=f}h=u.action,ii&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,a=i):c=c.next=f,ei.lanes|=h,dc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?a=i:c.next=l,!Yn(i,e.memoizedState)&&(qs=!0,d&&null!==(n=Wo)))throw n;e.memoizedState=i,e.baseState=a,e.baseQueue=c,r.lastRenderedState=i}return null===o&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ni(e){var t=wi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var a=o=o.next;do{i=e(i,a.action),a=a.next}while(a!==o);Yn(i,t.memoizedState)||(qs=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ti(e,t,n){var r=ei,o=wi(),i=Qr;if(i){if(void 0===n)throw Error(s(407));n=n()}else n=t();var a=!Yn((ti||o).memoizedState,n);if(a&&(o.memoizedState=n,qs=!0),o=o.queue,Ji(Di.bind(null,r,o,e),[e]),o.getSnapshot!==t||a||null!==ni&&1&ni.memoizedState.tag){if(r.flags|=2048,Yi(9,Ii.bind(null,r,o,n,t),{destroy:void 0},null),null===tc)throw Error(s(349));i||0!==(60&Jo)||Ai(r,t,n)}return n}function Ai(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ei.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},ei.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ii(e,t,n,r){t.value=n,t.getSnapshot=r,Mi(t)&&Pi(e)}function Di(e,t,n){return n((function(){Mi(t)&&Pi(e)}))}function Mi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yn(e,n)}catch(r){return!0}}function Pi(e){var t=Ar(e,2);null!==t&&Mc(t,e,2)}function Oi(e){var t=bi();if("function"===typeof e){var n=e;if(e=n(),ii){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:e},t}function Li(e,t,n,r){return e.baseState=n,_i(e,ti,"function"===typeof r?r:Ci)}function Ri(e,t,n,r,o){if(Es(e))throw Error(s(485));if(null!==(e=t.action)){var i={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==I.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,zi(t,i)):(i.next=n.next,t.pending=n.next=i)}}function zi(e,t){var n=t.action,r=t.payload,o=e.state;if(t.isTransition){var i=I.T,s={};I.T=s;try{var a=n(o,r),l=I.S;null!==l&&l(s,a),Fi(e,t,a)}catch(c){ji(e,t,c)}finally{I.T=i}}else try{Fi(e,t,i=n(o,r))}catch(u){ji(e,t,u)}}function Fi(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){Vi(e,t,n)}),(function(n){return ji(e,t,n)})):Vi(e,t,n)}function Vi(e,t,n){t.status="fulfilled",t.value=n,Bi(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,zi(e,n)))}function ji(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Bi(t),t=t.next}while(t!==r)}e.action=null}function Bi(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ui(e,t){return t}function Hi(e,t){if(Qr){var n=tc.formState;if(null!==n){e:{var r=ei;if(Qr){if(Xr){t:{for(var o=Xr,i=$r;8!==o.nodeType;){if(!i){o=null;break t}if(null===(o=ad(o.nextSibling))){o=null;break t}}o="F!"===(i=o.data)||"F"===i?o:null}if(o){Xr=ad(o.nextSibling),r="F!"===o.data;break e}}eo(r)}r=!1}r&&(t=n[0])}}return(n=bi()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:t},n.queue=r,n=bs.bind(null,ei,r),r.dispatch=n,r=Oi(!1),i=Ss.bind(null,ei,!1,r.queue),o={state:t,dispatch:null,action:e,pending:null},(r=bi()).queue=o,n=Ri.bind(null,ei,o,i,n),o.dispatch=n,r.memoizedState=e,[t,n,!1]}function qi(e){return Ki(wi(),ti,e)}function Ki(e,t,n){t=_i(e,t,Ui)[0],e=xi(Ci)[0],t="object"===typeof t&&null!==t&&"function"===typeof t.then?Si(t):t;var r=wi(),o=r.queue,i=o.dispatch;return n!==r.memoizedState&&(ei.flags|=2048,Yi(9,Wi.bind(null,o,n),{destroy:void 0},null)),[t,i,e]}function Wi(e,t){e.action=t}function Gi(e){var t=wi(),n=ti;if(null!==n)return Ki(t,n,e);wi(),t=t.memoizedState;var r=(n=wi()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Yi(e,t,n,r){return e={tag:e,create:t,inst:n,deps:r,next:null},null===(t=ei.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},ei.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Xi(){return wi().memoizedState}function Qi(e,t,n,r){var o=bi();ei.flags|=e,o.memoizedState=Yi(1|t,n,{destroy:void 0},void 0===r?null:r)}function Zi(e,t,n,r){var o=wi();r=void 0===r?null:r;var i=o.memoizedState.inst;null!==ti&&null!==r&&di(r,ti.memoizedState.deps)?o.memoizedState=Yi(t,n,i,r):(ei.flags|=e,o.memoizedState=Yi(1|t,n,i,r))}function $i(e,t){Qi(8390656,8,e,t)}function Ji(e,t){Zi(2048,8,e,t)}function es(e,t){return Zi(4,2,e,t)}function ts(e,t){return Zi(4,4,e,t)}function ns(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function rs(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Zi(4,4,ns.bind(null,t,e),n)}function os(){}function is(e,t){var n=wi();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&di(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ss(e,t){var n=wi();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&di(t,r[1]))return r[0];if(r=e(),ii){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function as(e,t,n){return void 0===n||0!==(1073741824&Jo)?e.memoizedState=t:(e.memoizedState=n,e=Dc(),ei.lanes|=e,dc|=e,n)}function ls(e,t,n,r){return Yn(n,t)?n:null!==Co.current?(e=as(e,n,r),Yn(e,t)||(qs=!0),e):0===(42&Jo)?(qs=!0,e.memoizedState=n):(e=Dc(),ei.lanes|=e,dc|=e,t)}function cs(e,t,n,r,o){var i=U.p;U.p=0!==i&&8>i?i:8;var s=I.T,a={};I.T=a,Ss(e,!1,t,n);try{var l=o(),c=I.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(l,r);ws(e,t,u,Ic())}else ws(e,t,r,Ic())}catch(d){ws(e,t,{then:function(){},status:"rejected",reason:d},Ic())}finally{U.p=i,I.T=s}}function us(){}function ds(e,t,n,r){if(5!==e.tag)throw Error(s(476));var o=hs(e).queue;cs(e,o,t,H,null===n?us:function(){return fs(e),n(r)})}function hs(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:H},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function fs(e){ws(e,hs(e).next.queue,{},Ic())}function ps(){return xa(Rd)}function gs(){return wi().memoizedState}function ms(){return wi().memoizedState}function ys(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Ic(),r=Ma(t,e=Da(n),n);return null!==r&&(Mc(r,t,n),Pa(r,t,n)),t={cache:Bo()},void(e.payload=t)}t=t.return}}function vs(e,t,n){var r=Ic();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Es(e)?ks(t,n):null!==(n=Tr(e,t,n,r))&&(Mc(n,e,r),Cs(n,t,r))}function bs(e,t,n){ws(e,t,n,Ic())}function ws(e,t,n,r){var o={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Es(e))ks(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=i(s,n);if(o.hasEagerState=!0,o.eagerState=a,Yn(a,s))return Nr(e,t,o,0),null===tc&&_r(),!1}catch(l){}if(null!==(n=Tr(e,t,o,r)))return Mc(n,e,r),Cs(n,t,r),!0}return!1}function Ss(e,t,n,r){if(r={lane:2,revertLane:Su(),action:r,hasEagerState:!1,eagerState:null,next:null},Es(e)){if(t)throw Error(s(479))}else null!==(t=Tr(e,n,r,2))&&Mc(t,e,2)}function Es(e){var t=e.alternate;return e===ei||null!==t&&t===ei}function ks(e,t){oi=ri=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Cs(e,t,n){if(0!==(4194176&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}var xs={readContext:xa,use:Ei,useCallback:ui,useContext:ui,useEffect:ui,useImperativeHandle:ui,useLayoutEffect:ui,useInsertionEffect:ui,useMemo:ui,useReducer:ui,useRef:ui,useState:ui,useDebugValue:ui,useDeferredValue:ui,useTransition:ui,useSyncExternalStore:ui,useId:ui};xs.useCacheRefresh=ui,xs.useMemoCache=ui,xs.useHostTransitionStatus=ui,xs.useFormState=ui,xs.useActionState=ui,xs.useOptimistic=ui;var _s={readContext:xa,use:Ei,useCallback:function(e,t){return bi().memoizedState=[e,void 0===t?null:t],e},useContext:xa,useEffect:$i,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Qi(4194308,4,ns.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Qi(4194308,4,e,t)},useInsertionEffect:function(e,t){Qi(4,2,e,t)},useMemo:function(e,t){var n=bi();t=void 0===t?null:t;var r=e();if(ii){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=bi();if(void 0!==n){var o=n(t);if(ii){be(!0);try{n(t)}finally{be(!1)}}}else o=t;return r.memoizedState=r.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},r.queue=e,e=e.dispatch=vs.bind(null,ei,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},bi().memoizedState=e},useState:function(e){var t=(e=Oi(e)).queue,n=bs.bind(null,ei,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:os,useDeferredValue:function(e,t){return as(bi(),e,t)},useTransition:function(){var e=Oi(!1);return e=cs.bind(null,ei,e.queue,!0,!1),bi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=ei,o=bi();if(Qr){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===tc)throw Error(s(349));0!==(60&rc)||Ai(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,$i(Di.bind(null,r,i,e),[e]),r.flags|=2048,Yi(9,Ii.bind(null,r,i,n,t),{destroy:void 0},null),n},useId:function(){var e=bi(),t=tc.identifierPrefix;if(Qr){var n=Hr;t=":"+t+"R"+(n=(Ur&~(1<<32-we(Ur)-1)).toString(32)+n),0<(n=si++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ci++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return bi().memoizedState=ys.bind(null,ei)}};_s.useMemoCache=ki,_s.useHostTransitionStatus=ps,_s.useFormState=Hi,_s.useActionState=Hi,_s.useOptimistic=function(e){var t=bi();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ss.bind(null,ei,!0,n),n.dispatch=t,[e,t]};var Ns={readContext:xa,use:Ei,useCallback:is,useContext:xa,useEffect:Ji,useImperativeHandle:rs,useInsertionEffect:es,useLayoutEffect:ts,useMemo:ss,useReducer:xi,useRef:Xi,useState:function(){return xi(Ci)},useDebugValue:os,useDeferredValue:function(e,t){return ls(wi(),ti.memoizedState,e,t)},useTransition:function(){var e=xi(Ci)[0],t=wi().memoizedState;return["boolean"===typeof e?e:Si(e),t]},useSyncExternalStore:Ti,useId:gs};Ns.useCacheRefresh=ms,Ns.useMemoCache=ki,Ns.useHostTransitionStatus=ps,Ns.useFormState=qi,Ns.useActionState=qi,Ns.useOptimistic=function(e,t){return Li(wi(),0,e,t)};var Ts={readContext:xa,use:Ei,useCallback:is,useContext:xa,useEffect:Ji,useImperativeHandle:rs,useInsertionEffect:es,useLayoutEffect:ts,useMemo:ss,useReducer:Ni,useRef:Xi,useState:function(){return Ni(Ci)},useDebugValue:os,useDeferredValue:function(e,t){var n=wi();return null===ti?as(n,e,t):ls(n,ti.memoizedState,e,t)},useTransition:function(){var e=Ni(Ci)[0],t=wi().memoizedState;return["boolean"===typeof e?e:Si(e),t]},useSyncExternalStore:Ti,useId:gs};function As(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}Ts.useCacheRefresh=ms,Ts.useMemoCache=ki,Ts.useHostTransitionStatus=ps,Ts.useFormState=Gi,Ts.useActionState=Gi,Ts.useOptimistic=function(e,t){var n=wi();return null!==ti?Li(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])};var Is={isMounted:function(e){return!!(e=e._reactInternals)&&z(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ic(),o=Da(r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Ma(e,o,r))&&(Mc(t,e,r),Pa(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ic(),o=Da(r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Ma(e,o,r))&&(Mc(t,e,r),Pa(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ic(),r=Da(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Ma(e,r,n))&&(Mc(t,e,n),Pa(t,e,n))}};function Ds(e,t,n,r,o,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!Xn(n,r)||!Xn(o,i))}function Ms(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Is.enqueueReplaceState(t,t.state,null)}function Ps(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var o in n===t&&(n=D({},n)),e)void 0===n[o]&&(n[o]=e[o]);return n}var Os="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function Ls(e){Os(e)}function Rs(e){console.error(e)}function zs(e){Os(e)}function Fs(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function Vs(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function js(e,t,n){return(n=Da(n)).tag=3,n.payload={element:null},n.callback=function(){Fs(e,t)},n}function Bs(e){return(e=Da(e)).tag=3,e}function Us(e,t,n,r){var o=n.type.getDerivedStateFromError;if("function"===typeof o){var i=r.value;e.payload=function(){return o(i)},e.callback=function(){Vs(t,n,r)}}var s=n.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){Vs(t,n,r),"function"!==typeof o&&(null===Ec?Ec=new Set([this]):Ec.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Hs=Error(s(461)),qs=!1;function Ks(e,t,n,r){t.child=null===e?ko(t,null,n,r):Eo(t,e.child,n,r)}function Ws(e,t,n,r,o){n=n.render;var i=t.ref;if("ref"in r){var s={};for(var a in r)"ref"!==a&&(s[a]=r[a])}else s=r;return Ca(t),r=hi(e,t,n,s,i,o),a=mi(),null===e||qs?(Qr&&a&&Wr(t),t.flags|=1,Ks(e,t,r,o),t.child):(yi(e,t,o),ha(e,t,o))}function Gs(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||Rl(i)||void 0!==i.defaultProps||null!==n.compare?((e=Vl(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ys(e,t,i,r,o))}if(i=e.child,!fa(e,o)){var s=i.memoizedProps;if((n=null!==(n=n.compare)?n:Xn)(s,r)&&e.ref===t.ref)return ha(e,t,o)}return t.flags|=1,(e=zl(i,r)).ref=t.ref,e.return=t,t.child=e}function Ys(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(Xn(i,r)&&e.ref===t.ref){if(qs=!1,t.pendingProps=r=i,!fa(e,o))return t.lanes=e.lanes,ha(e,t,o);0!==(131072&e.flags)&&(qs=!0)}}return $s(e,t,n,r,o)}function Xs(e,t,n){var r=t.pendingProps,o=r.children,i=0!==(2&t.stateNode._pendingVisibility),s=null!==e?e.memoizedState:null;if(Zs(e,t),"hidden"===r.mode||i){if(0!==(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(o=t.child=e.child,i=0;null!==o;)i=i|o.lanes|o.childLanes,o=o.sibling;t.childLanes=i&~r}else t.childLanes=0,t.child=null;return Qs(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Qs(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Zo(0,null!==s?s.cachePool:null),null!==s?_o(t,s):No(),Mo(t)}else null!==s?(Zo(0,s.cachePool),_o(t,s),Po(),t.memoizedState=null):(null!==e&&Zo(0,null),No(),Po());return Ks(e,t,o,n),t.child}function Qs(e,t,n,r){var o=Qo();return o=null===o?null:{parent:jo._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},null!==e&&Zo(0,null),No(),Mo(t),null!==e&&Ea(e,t,r,!0),null}function Zs(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=2097664)}}function $s(e,t,n,r,o){return Ca(t),n=hi(e,t,n,r,void 0,o),r=mi(),null===e||qs?(Qr&&r&&Wr(t),t.flags|=1,Ks(e,t,n,o),t.child):(yi(e,t,o),ha(e,t,o))}function Js(e,t,n,r,o,i){return Ca(t),t.updateQueue=null,n=pi(t,r,n,o),fi(e),r=mi(),null===e||qs?(Qr&&r&&Wr(t),t.flags|=1,Ks(e,t,n,i),t.child):(yi(e,t,i),ha(e,t,i))}function ea(e,t,n,r,o){if(Ca(t),null===t.stateNode){var i=Mr,s=n.contextType;"object"===typeof s&&null!==s&&(i=xa(s)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=Is,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},Aa(t),s=n.contextType,i.context="object"===typeof s&&null!==s?xa(s):Mr,i.state=t.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(As(t,n,s,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(s=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),s!==i.state&&Is.enqueueReplaceState(i,i.state,null),za(t,r,i,o),Ra(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var a=t.memoizedProps,l=Ps(n,a);i.props=l;var c=i.context,u=n.contextType;s=Mr,"object"===typeof u&&null!==u&&(s=xa(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a||c!==s)&&Ms(t,i,r,s),Ta=!1;var h=t.memoizedState;i.state=h,za(t,r,i,o),Ra(),c=t.memoizedState,a||h!==c||Ta?("function"===typeof d&&(As(t,n,d,r),c=t.memoizedState),(l=Ta||Ds(t,n,l,r,h,c,s))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=s,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ia(e,t),u=Ps(n,s=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=Mr,"object"===typeof c&&null!==c&&(l=xa(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==d||h!==l)&&Ms(t,i,r,l),Ta=!1,h=t.memoizedState,i.state=h,za(t,r,i,o),Ra();var f=t.memoizedState;s!==d||h!==f||Ta||null!==e&&null!==e.dependencies&&ka(e.dependencies)?("function"===typeof a&&(As(t,n,a,r),f=t.memoizedState),(u=Ta||Ds(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&ka(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Zs(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=Eo(t,e.child,null,o),t.child=Eo(t,null,n,o)):Ks(e,t,n,o),t.memoizedState=i.state,e=t.child):e=ha(e,t,o),e}function ta(e,t,n,r){return oo(),t.flags|=256,Ks(e,t,n,r),t.child}var na={dehydrated:null,treeContext:null,retryLane:0};function ra(e){return{baseLanes:e,cachePool:$o()}}function oa(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=pc),e}function ia(e,t,n){var r,o=t.pendingProps,i=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Lo.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(Qr){if(i?Do(t):Po(),Qr){var l,c=Xr;if(l=c){e:{for(l=c,c=$r;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=ad(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Br?{id:Ur,overflow:Hr}:null,retryLane:536870912},(l=Ll(18,null,null,0)).stateNode=c,l.return=t,t.child=l,Yr=t,Xr=null,l=!0):l=!1}l||eo(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return"$!"===c.data?t.lanes=16:t.lanes=536870912,null;Oo(t)}return c=o.children,o=o.fallback,i?(Po(),c=aa({mode:"hidden",children:c},i=t.mode),o=jl(o,i,n,null),c.return=t,o.return=t,c.sibling=o,t.child=c,(i=t.child).memoizedState=ra(n),i.childLanes=oa(e,r,n),t.memoizedState=na,o):(Do(t),sa(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(Do(t),t.flags&=-257,t=la(e,t,n)):null!==t.memoizedState?(Po(),t.child=e.child,t.flags|=128,t=null):(Po(),i=o.fallback,c=t.mode,o=aa({mode:"visible",children:o.children},c),(i=jl(i,c,n,null)).flags|=2,o.return=t,i.return=t,o.sibling=i,t.child=o,Eo(t,e.child,null,n),(o=t.child).memoizedState=ra(n),o.childLanes=oa(e,r,n),t.memoizedState=na,t=i);else if(Do(t),"$!"===c.data){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(o=Error(s(419))).stack="",o.digest=r,io({value:o,source:null,stack:null}),t=la(e,t,n)}else if(qs||Ea(e,t,n,!1),r=0!==(n&e.childLanes),qs||r){if(null!==(r=tc)){if(0!==(42&(o=n&-n)))o=1;else switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=64;break;case 268435456:o=134217728;break;default:o=0}if(0!==(o=0!==(o&(r.suspendedLanes|n))?0:o)&&o!==l.retryLane)throw l.retryLane=o,Ar(e,o),Mc(r,e,o),Hs}"$?"===c.data||qc(),t=la(e,t,n)}else"$?"===c.data?(t.flags|=128,t.child=e.child,t=au.bind(null,e),c._reactRetry=t,t=null):(e=l.treeContext,Xr=ad(c.nextSibling),Yr=t,Qr=!0,Zr=null,$r=!1,null!==e&&(Vr[jr++]=Ur,Vr[jr++]=Hr,Vr[jr++]=Br,Ur=e.id,Hr=e.overflow,Br=t),(t=sa(t,o.children)).flags|=4096);return t}return i?(Po(),i=o.fallback,c=t.mode,u=(l=e.child).sibling,(o=zl(l,{mode:"hidden",children:o.children})).subtreeFlags=31457280&l.subtreeFlags,null!==u?i=zl(u,i):(i=jl(i,c,n,null)).flags|=2,i.return=t,o.return=t,o.sibling=i,t.child=o,o=i,i=t.child,null===(c=e.child.memoizedState)?c=ra(n):(null!==(l=c.cachePool)?(u=jo._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=$o(),c={baseLanes:c.baseLanes|n,cachePool:l}),i.memoizedState=c,i.childLanes=oa(e,r,n),t.memoizedState=na,o):(Do(t),e=(n=e.child).sibling,(n=zl(n,{mode:"visible",children:o.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function sa(e,t){return(t=aa({mode:"visible",children:t},e.mode)).return=e,e.child=t}function aa(e,t){return Bl(e,t,0,null)}function la(e,t,n){return Eo(t,e.child,null,n),(e=sa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ca(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),wa(e.return,t,n)}function ua(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function da(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(Ks(e,t,r.children,n),0!==(2&(r=Lo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ca(e,n,t);else if(19===e.tag)ca(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(Y(Lo,r),o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===Ro(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ua(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Ro(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ua(t,!0,n,null,i);break;case"together":ua(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),dc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ea(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=zl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function fa(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!ka(e))}function pa(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)qs=!0;else{if(!fa(e,n)&&0===(128&t.flags))return qs=!1,function(e,t,n){switch(t.tag){case 3:J(t,t.stateNode.containerInfo),va(t,jo,e.memoizedState.cache),oo();break;case 27:case 5:te(t);break;case 4:J(t,t.stateNode.containerInfo);break;case 10:va(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Do(t),t.flags|=128,null):0!==(n&t.child.childLanes)?ia(e,t,n):(Do(t),null!==(e=ha(e,t,n))?e.sibling:null);Do(t);break;case 19:var o=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ea(e,t,n,!1),r=0!==(n&t.childLanes)),o){if(r)return da(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Y(Lo,Lo.current),r)break;return null;case 22:case 23:return t.lanes=0,Xs(e,t,n);case 24:va(t,jo,e.memoizedState.cache)}return ha(e,t,n)}(e,t,n);qs=0!==(131072&e.flags)}else qs=!1,Qr&&0!==(1048576&t.flags)&&Kr(t,Fr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,o=r._init;if(r=o(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((o=r.$$typeof)===y){t.tag=11,t=Ws(null,t,r,e,n);break e}if(o===w){t.tag=14,t=Gs(null,t,r,e,n);break e}}throw t=N(r)||r,Error(s(306,t,""))}Rl(r)?(e=Ps(r,e),t.tag=1,t=ea(null,t,r,e,n)):(t.tag=0,t=$s(null,t,r,e,n))}return t;case 0:return $s(e,t,t.type,t.pendingProps,n);case 1:return ea(e,t,r=t.type,o=Ps(r,t.pendingProps),n);case 3:e:{if(J(t,t.stateNode.containerInfo),null===e)throw Error(s(387));var i=t.pendingProps;r=(o=t.memoizedState).element,Ia(e,t),za(t,i,null,n);var a=t.memoizedState;if(i=a.cache,va(t,jo,i),i!==o.cache&&Sa(t,[jo],n,!0),Ra(),i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=ta(e,t,i,n);break e}if(i!==r){io(r=Or(Error(s(424)),t)),t=ta(e,t,i,n);break e}for(Xr=ad(t.stateNode.containerInfo.firstChild),Yr=t,Qr=!0,Zr=null,$r=!0,n=ko(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(oo(),i===r){t=ha(e,t,n);break e}Ks(e,t,i,n)}t=t.child}return t;case 26:return Zs(e,t),null===e?(n=md(t.type,null,t.pendingProps,null))?t.memoizedState=n:Qr||(n=t.type,e=t.pendingProps,(r=Xu(Z.current).createElement(n))[Fe]=t,r[Ve]=e,Wu(r,n,e),Ze(r),t.stateNode=r):t.memoizedState=md(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return te(t),null===e&&Qr&&(r=t.stateNode=cd(t.type,t.pendingProps,Z.current),Yr=t,$r=!0,Xr=ad(r.firstChild)),r=t.pendingProps.children,null!==e||Qr?Ks(e,t,r,n):t.child=Eo(t,null,r,n),Zs(e,t),t.child;case 5:return null===e&&Qr&&((o=r=Xr)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ke])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==o.rel||e.getAttribute("href")!==(null==o.href?null:o.href)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin)||e.getAttribute("title")!==(null==o.title?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==o.src?null:o.src)||e.getAttribute("type")!==(null==o.type?null:o.type)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==o.name?null:""+o.name;if("hidden"===o.type&&e.getAttribute("name")===i)return e}if(null===(e=ad(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,$r))?(t.stateNode=r,Yr=t,Xr=ad(r.firstChild),$r=!1,o=!0):o=!1),o||eo(t)),te(t),o=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,r=i.children,$u(o,i)?r=null:null!==a&&$u(o,a)&&(t.flags|=32),null!==t.memoizedState&&(o=hi(e,t,gi,null,null,n),Rd._currentValue=o),Zs(e,t),Ks(e,t,r,n),t.child;case 6:return null===e&&Qr&&((e=n=Xr)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=ad(e.nextSibling)))return null}return e}(n,t.pendingProps,$r))?(t.stateNode=n,Yr=t,Xr=null,e=!0):e=!1),e||eo(t)),null;case 13:return ia(e,t,n);case 4:return J(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Eo(t,null,r,n):Ks(e,t,r,n),t.child;case 11:return Ws(e,t,t.type,t.pendingProps,n);case 7:return Ks(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ks(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,va(t,t.type,r.value),Ks(e,t,r.children,n),t.child;case 9:return o=t.type._context,r=t.pendingProps.children,Ca(t),r=r(o=xa(o)),t.flags|=1,Ks(e,t,r,n),t.child;case 14:return Gs(e,t,t.type,t.pendingProps,n);case 15:return Ys(e,t,t.type,t.pendingProps,n);case 19:return da(e,t,n);case 22:return Xs(e,t,n);case 24:return Ca(t),r=xa(jo),null===e?(null===(o=Qo())&&(o=tc,i=Bo(),o.pooledCache=i,i.refCount++,null!==i&&(o.pooledCacheLanes|=n),o=i),t.memoizedState={parent:r,cache:o},Aa(t),va(t,jo,o)):(0!==(e.lanes&n)&&(Ia(e,t),za(t,null,null,n),Ra()),o=e.memoizedState,i=t.memoizedState,o.parent!==r?(o={parent:r,cache:r},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),va(t,jo,r)):(r=i.cache,va(t,jo,r),r!==o.cache&&Sa(t,[jo],n,!0))),Ks(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}var ga=W(null),ma=null,ya=null;function va(e,t,n){Y(ga,t._currentValue),t._currentValue=n}function ba(e){e._currentValue=ga.current,G(ga)}function wa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t,n,r){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var i=o.dependencies;if(null!==i){var a=o.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=o;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),wa(i.return,n,e),r||(a=null);break e}i=l.next}}else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(i=a.alternate)&&(i.lanes|=n),wa(a,n,e),a=null}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===e){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}}function Ea(e,t,n,r){e=null;for(var o=t,i=!1;null!==o;){if(!i)if(0!==(524288&o.flags))i=!0;else if(0!==(262144&o.flags))break;if(10===o.tag){var a=o.alternate;if(null===a)throw Error(s(387));if(null!==(a=a.memoizedProps)){var l=o.type;Yn(o.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(o===$.current){if(null===(a=o.alternate))throw Error(s(387));a.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(Rd):e=[Rd])}o=o.return}null!==e&&Sa(t,e,n,r),t.flags|=262144}function ka(e){for(e=e.firstContext;null!==e;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ca(e){ma=e,ya=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function xa(e){return Na(ma,e)}function _a(e,t){return null===ma&&Ca(e),Na(e,t)}function Na(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ya){if(null===e)throw Error(s(308));ya=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ya=ya.next=t;return n}var Ta=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ia(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Da(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ma(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&ec)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,t=Dr(e),Ir(e,null,n),t}return Nr(e,r,t,n),Dr(e)}function Pa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194176&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}function Oa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?o=i=s:i=i.next=s,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var La=!1;function Ra(){if(La){if(null!==Wo)throw Wo}}function za(e,t,n,r){La=!1;var o=e.updateQueue;Ta=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(null!==a){o.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?i=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=o.baseState;for(s=0,u=c=l=null,a=i;;){var h=-536870913&a.lane,f=h!==a.lane;if(f?(rc&h)===h:(r&h)===h){0!==h&&h===Ko&&(La=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var p=e,g=a;h=t;var m=n;switch(g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(m,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(m,d,h):p)||void 0===h)break e;d=D({},d,h);break e;case 2:Ta=!0}}null!==(h=a.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=o.callbacks)?o.callbacks=[h]:f.push(h))}else f={lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(a=a.next)){if(null===(a=o.shared.pending))break;a=(f=a).next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null===i&&(o.shared.lanes=0),dc|=s,e.lanes=s,e.memoizedState=d}}function Fa(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function Va(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Fa(n[e],t)}function ja(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var o=r.next;n=o;do{if((n.tag&e)===e){r=void 0;var i=n.create,s=n.inst;r=i(),s.destroy=r}n=n.next}while(n!==o)}}catch(a){ru(t,t.return,a)}}function Ba(e,t,n){try{var r=t.updateQueue,o=null!==r?r.lastEffect:null;if(null!==o){var i=o.next;r=i;do{if((r.tag&e)===e){var s=r.inst,a=s.destroy;if(void 0!==a){s.destroy=void 0,o=t;var l=n;try{a()}catch(c){ru(o,l,c)}}}r=r.next}while(r!==i)}}catch(c){ru(t,t.return,c)}}function Ua(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Va(t,n)}catch(r){ru(e,e.return,r)}}}function Ha(e,t,n){n.props=Ps(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){ru(e,t,r)}}function qa(e,t){try{var n=e.ref;if(null!==n){var r=e.stateNode;switch(e.tag){case 26:case 27:case 5:var o=r;break;default:o=r}"function"===typeof n?e.refCleanup=n(o):n.current=o}}catch(i){ru(e,t,i)}}function Ka(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(o){ru(e,t,o)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){ru(e,t,i)}else n.current=null}function Wa(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(o){ru(e,e.return,o)}}function Ga(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,i=null,a=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||qu(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":i=p;break;case"name":o=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:p!==h&&qu(e,t,f,p,r,h)}}return void mt(e,a,l,c,u,d,i,o);case"select":for(i in p=a=l=f=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(i)||qu(e,t,i,null,r,c)}for(o in r)if(i=r[o],c=n[o],r.hasOwnProperty(o)&&(null!=i||null!=c))switch(o){case"value":f=i;break;case"defaultValue":l=i;break;case"multiple":a=i;default:i!==c&&qu(e,t,o,i,r,c)}return t=l,n=a,r=p,void(null!=f?bt(e,!!n,f,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(o=n[l],n.hasOwnProperty(l)&&null!=o&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:qu(e,t,l,null,r,o)}for(a in r)if(o=r[a],i=n[a],r.hasOwnProperty(a)&&(null!=o||null!=i))switch(a){case"value":f=o;break;case"defaultValue":p=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(s(91));break;default:o!==i&&qu(e,t,a,o,r,i)}return void wt(e,f,p);case"option":for(var g in n)if(f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g))if("selected"===g)e.selected=!1;else qu(e,t,g,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else qu(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m)&&qu(e,t,m,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(s(137,t));break;default:qu(e,t,u,f,r,p)}return;default:if(_t(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&Ku(e,t,y,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||Ku(e,t,d,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&qu(e,t,v,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||qu(e,t,h,f,r,p)}(r,e.type,n,t),r[Ve]=t}catch(o){ru(e,e.return,o)}}function Ya(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag||4===e.tag}function Xa(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Ya(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&27!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Qa(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Hu));else if(4!==r&&27!==r&&null!==(e=e.child))for(Qa(e,t,n),e=e.sibling;null!==e;)Qa(e,t,n),e=e.sibling}function Za(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&27!==r&&null!==(e=e.child))for(Za(e,t,n),e=e.sibling;null!==e;)Za(e,t,n),e=e.sibling}var $a=!1,Ja=!1,el=!1,tl="function"===typeof WeakSet?WeakSet:Set,nl=null,rl=!1;function ol(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:yl(e,n),4&r&&ja(5,n);break;case 1:if(yl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){ru(n,n.return,a)}else{var o=Ps(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){ru(n,n.return,l)}}64&r&&Ua(n),512&r&&qa(n,n.return);break;case 3:if(yl(e,n),64&r&&null!==(r=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:e=n.child.stateNode}try{Va(r,e)}catch(a){ru(n,n.return,a)}}break;case 26:yl(e,n),512&r&&qa(n,n.return);break;case 27:case 5:yl(e,n),null===t&&4&r&&Wa(n),512&r&&qa(n,n.return);break;case 12:default:yl(e,n);break;case 13:yl(e,n),4&r&&ul(e,n);break;case 22:if(!(o=null!==n.memoizedState||$a)){t=null!==t&&null!==t.memoizedState||Ja;var i=$a,s=Ja;$a=o,(Ja=t)&&!s?bl(e,n,0!==(8772&n.subtreeFlags)):yl(e,n),$a=i,Ja=s}512&r&&("manual"===n.memoizedProps.mode?qa(n,n.return):Ka(n,n.return))}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&We(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var sl=null,al=!1;function ll(e,t,n){for(n=n.child;null!==n;)cl(e,t,n),n=n.sibling}function cl(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(s){}switch(n.tag){case 26:Ja||Ka(n,t),ll(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Ja||Ka(n,t);var r=sl,o=al;for(sl=n.stateNode,ll(e,t,n),t=(n=n.stateNode).attributes;t.length;)n.removeAttributeNode(t[0]);We(n),sl=r,al=o;break;case 5:Ja||Ka(n,t);case 6:o=sl;var i=al;if(sl=null,ll(e,t,n),al=i,null!==(sl=o))if(al)try{e=sl,r=n.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)}catch(a){ru(n,t,a)}else try{sl.removeChild(n.stateNode)}catch(a){ru(n,t,a)}break;case 18:null!==sl&&(al?(t=sl,n=n.stateNode,8===t.nodeType?id(t.parentNode,n):1===t.nodeType&&id(t,n),gh(t)):id(sl,n.stateNode));break;case 4:r=sl,o=al,sl=n.stateNode.containerInfo,al=!0,ll(e,t,n),sl=r,al=o;break;case 0:case 11:case 14:case 15:Ja||Ba(2,n,t),Ja||Ba(4,n,t),ll(e,t,n);break;case 1:Ja||(Ka(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&Ha(n,t,r)),ll(e,t,n);break;case 21:ll(e,t,n);break;case 22:Ja||Ka(n,t),Ja=(r=Ja)||null!==n.memoizedState,ll(e,t,n),Ja=r;break;default:ll(e,t,n)}}function ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{gh(e)}catch(n){ru(t,t.return,n)}}function dl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new tl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new tl),t;default:throw Error(s(435,e.tag))}}(e);t.forEach((function(t){var r=lu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function hl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r],i=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:case 5:sl=l.stateNode,al=!1;break e;case 3:case 4:sl=l.stateNode.containerInfo,al=!0;break e}l=l.return}if(null===sl)throw Error(s(160));cl(i,a,o),sl=null,al=!1,null!==(i=o.alternate)&&(i.return=null),o.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)pl(t,e),t=t.sibling}var fl=null;function pl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:hl(t,e),gl(e),4&r&&(Ba(3,e,e.return),ja(3,e),Ba(5,e,e.return));break;case 1:hl(t,e),gl(e),512&r&&(Ja||null===n||Ka(n,n.return)),64&r&&$a&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var o=fl;if(hl(t,e),gl(e),512&r&&(Ja||null===n||Ka(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":(!(i=o.getElementsByTagName("title")[0])||i[Ke]||i[Fe]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=o.createElement(r),o.head.insertBefore(i,o.querySelector("head > title"))),Wu(i,r,n),i[Fe]=e,Ze(i),r=i;break e;case"link":var a=Nd("link","href",o).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((i=a[l]).getAttribute("href")===(null==n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}Wu(i=o.createElement(r),r,n),o.head.appendChild(i);break;case"meta":if(a=Nd("meta","content",o).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((i=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}Wu(i=o.createElement(r),r,n),o.head.appendChild(i);break;default:throw Error(s(468,r))}i[Fe]=e,Ze(i),r=i}e.stateNode=r}else Td(o,e.type,e.stateNode);else e.stateNode=Ed(o,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?Td(o,e.type,e.stateNode):Ed(o,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Ga(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(4&r&&null===e.alternate){o=e.stateNode,i=e.memoizedProps;try{for(var c=o.firstChild;c;){var u=c.nextSibling,d=c.nodeName;c[Ke]||"HEAD"===d||"BODY"===d||"SCRIPT"===d||"STYLE"===d||"LINK"===d&&"stylesheet"===c.rel.toLowerCase()||o.removeChild(c),c=u}for(var h=e.type,f=o.attributes;f.length;)o.removeAttributeNode(f[0]);Wu(o,h,i),o[Fe]=e,o[Ve]=i}catch(g){ru(e,e.return,g)}}case 5:if(hl(t,e),gl(e),512&r&&(Ja||null===n||Ka(n,n.return)),32&e.flags){o=e.stateNode;try{Et(o,"")}catch(g){ru(e,e.return,g)}}4&r&&null!=e.stateNode&&Ga(e,o=e.memoizedProps,null!==n?n.memoizedProps:o),1024&r&&(el=!0);break;case 6:if(hl(t,e),gl(e),4&r){if(null===e.stateNode)throw Error(s(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(g){ru(e,e.return,g)}}break;case 3:if(_d=null,o=fl,fl=hd(t.containerInfo),hl(t,e),fl=o,gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{gh(t.containerInfo)}catch(g){ru(e,e.return,g)}el&&(el=!1,ml(e));break;case 4:r=fl,fl=hd(e.stateNode.containerInfo),hl(t,e),gl(e),fl=r;break;case 12:hl(t,e),gl(e);break;case 13:hl(t,e),gl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(bc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,dl(e,r)));break;case 22:if(512&r&&(Ja||null===n||Ka(n,n.return)),c=null!==e.memoizedState,u=null!==n&&null!==n.memoizedState,$a=(d=$a)||c,Ja=(h=Ja)||u,hl(t,e),Ja=h,$a=d,gl(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&r&&(t._visibility=c?-2&t._visibility:1|t._visibility,c&&(t=$a||Ja,null===n||u||t||vl(e)),null===e.memoizedProps||"manual"!==e.memoizedProps.mode))e:for(n=null,t=e;;){if(5===t.tag||26===t.tag||27===t.tag){if(null===n){u=n=t;try{if(o=u.stateNode,c)"function"===typeof(i=o.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{a=u.stateNode;var p=void 0!==(l=u.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null;a.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(g){ru(u,u.return,g)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(g){ru(u,u.return,g)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,dl(e,n))));break;case 19:hl(t,e),gl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,dl(e,r)));break;case 21:break;default:hl(t,e),gl(e)}}function gl(e){var t=e.flags;if(2&t){try{if(27!==e.tag){e:{for(var n=e.return;null!==n;){if(Ya(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 27:var o=r.stateNode;Za(e,Xa(e),o);break;case 5:var i=r.stateNode;32&r.flags&&(Et(i,""),r.flags&=-33),Za(e,Xa(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;Qa(e,Xa(e),a);break;default:throw Error(s(161))}}}catch(l){ru(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ml(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;ml(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function yl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)ol(e,t.alternate,t),t=t.sibling}function vl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ba(4,t,t.return),vl(t);break;case 1:Ka(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&Ha(t,t.return,n),vl(t);break;case 26:case 27:case 5:Ka(t,t.return),vl(t);break;case 22:Ka(t,t.return),null===t.memoizedState&&vl(t);break;default:vl(t)}e=e.sibling}}function bl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,o=e,i=t,s=i.flags;switch(i.tag){case 0:case 11:case 15:bl(o,i,n),ja(4,i);break;case 1:if(bl(o,i,n),"function"===typeof(o=(r=i).stateNode).componentDidMount)try{o.componentDidMount()}catch(c){ru(r,r.return,c)}if(null!==(o=(r=i).updateQueue)){var a=r.stateNode;try{var l=o.shared.hiddenCallbacks;if(null!==l)for(o.shared.hiddenCallbacks=null,o=0;o<l.length;o++)Fa(l[o],a)}catch(c){ru(r,r.return,c)}}n&&64&s&&Ua(i),qa(i,i.return);break;case 26:case 27:case 5:bl(o,i,n),n&&null===r&&4&s&&Wa(i),qa(i,i.return);break;case 12:default:bl(o,i,n);break;case 13:bl(o,i,n),n&&4&s&&ul(o,i);break;case 22:null===i.memoizedState&&bl(o,i,n),qa(i,i.return)}t=t.sibling}}function wl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Uo(n))}function Sl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Uo(e))}function El(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)kl(e,t,n,r),t=t.sibling}function kl(e,t,n,r){var o=t.flags;switch(t.tag){case 0:case 11:case 15:El(e,t,n,r),2048&o&&ja(9,t);break;case 3:El(e,t,n,r),2048&o&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Uo(e)));break;case 12:if(2048&o){El(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,s=i.id,a=i.onPostCommit;"function"===typeof a&&a(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){ru(t,t.return,l)}}else El(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,null!==t.memoizedState?4&i._visibility?El(e,t,n,r):xl(e,t):4&i._visibility?El(e,t,n,r):(i._visibility|=4,Cl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&o&&wl(t.alternate,t);break;case 24:El(e,t,n,r),2048&o&&Sl(t.alternate,t);break;default:El(e,t,n,r)}}function Cl(e,t,n,r,o){for(o=o&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,s=t,a=n,l=r,c=s.flags;switch(s.tag){case 0:case 11:case 15:Cl(i,s,a,l,o),ja(8,s);break;case 23:break;case 22:var u=s.stateNode;null!==s.memoizedState?4&u._visibility?Cl(i,s,a,l,o):xl(i,s):(u._visibility|=4,Cl(i,s,a,l,o)),o&&2048&c&&wl(s.alternate,s);break;case 24:Cl(i,s,a,l,o),o&&2048&c&&Sl(s.alternate,s);break;default:Cl(i,s,a,l,o)}t=t.sibling}}function xl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,o=r.flags;switch(r.tag){case 22:xl(n,r),2048&o&&wl(r.alternate,r);break;case 24:xl(n,r),2048&o&&Sl(r.alternate,r);break;default:xl(n,r)}t=t.sibling}}var _l=8192;function Nl(e){if(e.subtreeFlags&_l)for(e=e.child;null!==e;)Tl(e),e=e.sibling}function Tl(e){switch(e.tag){case 26:Nl(e),e.flags&_l&&null!==e.memoizedState&&function(e,t,n){if(null===Id)throw Error(s(475));var r=Id;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var o=yd(n.href),i=e.querySelector(vd(o));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Md.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=i,void Ze(i);i=e.ownerDocument||e,n=bd(n),(o=ud.get(o))&&Cd(n,o),Ze(i=i.createElement("link"));var a=i;a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),Wu(i,"link",n),t.instance=i}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Md.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(fl,e.memoizedState,e.memoizedProps);break;case 5:default:Nl(e);break;case 3:case 4:var t=fl;fl=hd(e.stateNode.containerInfo),Nl(e),fl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=_l,_l=16777216,Nl(e),_l=t):Nl(e))}}function Al(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Il(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];nl=r,Pl(r,e)}Al(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Dl(e),e=e.sibling}function Dl(e){switch(e.tag){case 0:case 11:case 15:Il(e),2048&e.flags&&Ba(9,e,e.return);break;case 3:case 12:default:Il(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,Ml(e)):Il(e)}}function Ml(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];nl=r,Pl(r,e)}Al(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:Ba(8,t,t.return),Ml(t);break;case 22:4&(n=t.stateNode)._visibility&&(n._visibility&=-5,Ml(t));break;default:Ml(t)}e=e.sibling}}function Pl(e,t){for(;null!==nl;){var n=nl;switch(n.tag){case 0:case 11:case 15:Ba(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Uo(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,nl=r;else e:for(n=e;null!==nl;){var o=(r=nl).sibling,i=r.return;if(il(r),r===n){nl=null;break e}if(null!==o){o.return=i,nl=o;break e}nl=i}}}function Ol(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ll(e,t,n,r){return new Ol(e,t,n,r)}function Rl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zl(e,t){var n=e.alternate;return null===n?((n=Ll(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=31457280&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Fl(e,t){e.flags&=31457282;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vl(e,t,n,r,o,i){var a=0;if(r=e,"function"===typeof e)Rl(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,X.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case d:return jl(n.children,o,i,t);case h:a=8,o|=24;break;case f:return(e=Ll(12,n,t,2|o)).elementType=f,e.lanes=i,e;case v:return(e=Ll(13,n,t,o)).elementType=v,e.lanes=i,e;case b:return(e=Ll(19,n,t,o)).elementType=b,e.lanes=i,e;case E:return Bl(n,o,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case p:case m:a=10;break e;case g:a=9;break e;case y:a=11;break e;case w:a=14;break e;case S:a=16,r=null;break e}a=29,n=Error(s(130,null===e?"null":typeof e,"")),r=null}return(t=Ll(a,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function jl(e,t,n,r){return(e=Ll(7,e,r,t)).lanes=n,e}function Bl(e,t,n,r){(e=Ll(22,e,r,t)).elementType=E,e.lanes=n;var o={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=o._current;if(null===e)throw Error(s(456));if(0===(2&o._pendingVisibility)){var t=Ar(e,2);null!==t&&(o._pendingVisibility|=2,Mc(t,e,2))}},attach:function(){var e=o._current;if(null===e)throw Error(s(456));if(0!==(2&o._pendingVisibility)){var t=Ar(e,2);null!==t&&(o._pendingVisibility&=-3,Mc(t,e,2))}}};return e.stateNode=o,e}function Ul(e,t,n){return(e=Ll(6,e,null,t)).lanes=n,e}function Hl(e,t,n){return(t=Ll(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ql(e){e.flags|=4}function Kl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Ad(t)){if(null!==(t=Ao.current)&&((4194176&rc)===rc?null!==Io:(62914560&rc)!==rc&&0===(536870912&rc)||t!==Io))throw fo=lo,ao;e.flags|=8192}}function Wl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ie():536870912,e.lanes|=t,gc|=t)}function Gl(e,t){if(!Qr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Yl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=31457280&o.subtreeFlags,r|=31457280&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xl(e,t,n){var r=t.pendingProps;switch(Gr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return Yl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ba(jo),ee(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ro(t)?ql(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Zr&&(Oc(Zr),Zr=null))),Yl(t),null;case 26:return n=t.memoizedState,null===e?(ql(t),null!==n?(Yl(t),Kl(t,n)):(Yl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(ql(t),Yl(t),Kl(t,n)):(Yl(t),t.flags&=-16777217):(e.memoizedProps!==r&&ql(t),Yl(t),t.flags&=-16777217),null;case 27:ne(t),n=Z.current;var o=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ql(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Yl(t),null}e=X.current,ro(t)?to(t):(e=cd(o,r,n),t.stateNode=e,ql(t))}return Yl(t),null;case 5:if(ne(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ql(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Yl(t),null}if(e=X.current,ro(t))to(t);else{switch(o=Xu(Z.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?o.createElement(n,{is:r.is}):o.createElement(n)}}e[Fe]=t,e[Ve]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)e.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(Wu(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&ql(t)}}return Yl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ql(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(e=Z.current,ro(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(o=Yr))switch(o.tag){case 27:case 5:r=o.memoizedProps}e[Fe]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Uu(e.nodeValue,n)))||eo(t)}else(e=Xu(e).createTextNode(r))[Fe]=t,t.stateNode=e}return Yl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=ro(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[Fe]=t}else oo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Yl(t),o=!1}else null!==Zr&&(Oc(Zr),Zr=null),o=!0;if(!o)return 256&t.flags?(Oo(t),t):(Oo(t),null)}if(Oo(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){o=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(o=r.alternate.memoizedState.cachePool.pool);var i=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==o&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Wl(t,t.updateQueue),Yl(t),null;case 4:return ee(),null===e&&Mu(t.stateNode.containerInfo),Yl(t),null;case 10:return ba(t.type),Yl(t),null;case 19:if(G(Lo),null===(o=t.memoizedState))return Yl(t),null;if(r=0!==(128&t.flags),null===(i=o.rendering))if(r)Gl(o,!1);else{if(0!==uc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=Ro(e))){for(t.flags|=128,Gl(o,!1),e=i.updateQueue,t.updateQueue=e,Wl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Fl(n,e),n=n.sibling;return Y(Lo,1&Lo.current|2),t.child}e=e.sibling}null!==o.tail&&le()>wc&&(t.flags|=128,r=!0,Gl(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Ro(i))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Wl(t,e),Gl(o,!0),null===o.tail&&"hidden"===o.tailMode&&!i.alternate&&!Qr)return Yl(t),null}else 2*le()-o.renderingStartTime>wc&&536870912!==n&&(t.flags|=128,r=!0,Gl(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=o.last)?e.sibling=i:t.child=i,o.last=i)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=le(),t.sibling=null,e=Lo.current,Y(Lo,r?1&e|2:1&e),t):(Yl(t),null);case 22:case 23:return Oo(t),To(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(Yl(t),6&t.subtreeFlags&&(t.flags|=8192)):Yl(t),null!==(n=t.updateQueue)&&Wl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&G(Xo),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ba(jo),Yl(t),null;case 25:return null}throw Error(s(156,t.tag))}function Ql(e,t){switch(Gr(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ba(jo),ee(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return ne(t),null;case 13:if(Oo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));oo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return G(Lo),null;case 4:return ee(),null;case 10:return ba(t.type),null;case 22:case 23:return Oo(t),To(),null!==e&&G(Xo),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ba(jo),null;default:return null}}function Zl(e,t){switch(Gr(t),t.tag){case 3:ba(jo),ee();break;case 26:case 27:case 5:ne(t);break;case 4:ee();break;case 13:Oo(t);break;case 19:G(Lo);break;case 10:ba(t.type);break;case 22:case 23:Oo(t),To(),null!==e&&G(Xo);break;case 24:ba(jo)}}var $l={getCacheForType:function(e){var t=xa(jo),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},Jl="function"===typeof WeakMap?WeakMap:Map,ec=0,tc=null,nc=null,rc=0,oc=0,ic=null,sc=!1,ac=!1,lc=!1,cc=0,uc=0,dc=0,hc=0,fc=0,pc=0,gc=0,mc=null,yc=null,vc=!1,bc=0,wc=1/0,Sc=null,Ec=null,kc=!1,Cc=null,xc=0,_c=0,Nc=null,Tc=0,Ac=null;function Ic(){if(0!==(2&ec)&&0!==rc)return rc&-rc;if(null!==I.T){return 0!==Ko?Ko:Su()}return Re()}function Dc(){0===pc&&(pc=0===(536870912&rc)||Qr?Ae():536870912);var e=Ao.current;return null!==e&&(e.flags|=32),pc}function Mc(e,t,n){(e===tc&&2===oc||null!==e.cancelPendingCommit)&&(jc(e,0),zc(e,rc,pc,!1)),Me(e,n),0!==(2&ec)&&e===tc||(e===tc&&(0===(2&ec)&&(hc|=n),4===uc&&zc(e,rc,pc,!1)),gu(e))}function Pc(e,t,n){if(0!==(6&ec))throw Error(s(327));for(var r=!n&&0===(60&t)&&0===(t&e.expiredLanes)||Ne(e,t),o=r?function(e,t){var n=ec;ec|=2;var r=Uc(),o=Hc();tc!==e||rc!==t?(Sc=null,wc=le()+500,jc(e,t)):ac=Ne(e,t);e:for(;;)try{if(0!==oc&&null!==nc){t=nc;var i=ic;t:switch(oc){case 1:oc=0,ic=null,Qc(e,t,i,1);break;case 2:if(co(i)){oc=0,ic=null,Xc(t);break}t=function(){2===oc&&tc===e&&(oc=7),gu(e)},i.then(t,t);break e;case 3:oc=7;break e;case 4:oc=5;break e;case 7:co(i)?(oc=0,ic=null,Xc(t)):(oc=0,ic=null,Qc(e,t,i,7));break;case 5:var a=null;switch(nc.tag){case 26:a=nc.memoizedState;case 5:case 27:var l=nc;if(!a||Ad(a)){oc=0,ic=null;var c=l.sibling;if(null!==c)nc=c;else{var u=l.return;null!==u?(nc=u,Zc(u)):nc=null}break t}}oc=0,ic=null,Qc(e,t,i,5);break;case 6:oc=0,ic=null,Qc(e,t,i,6);break;case 8:Vc(),uc=6;break e;default:throw Error(s(462))}}Gc();break}catch(d){Bc(e,d)}return ya=ma=null,I.H=r,I.A=o,ec=n,null!==nc?0:(tc=null,rc=0,_r(),uc)}(e,t):Kc(e,t,!0),i=r;;){if(0===o){ac&&!r&&zc(e,t,0,!1);break}if(6===o)zc(e,t,0,!sc);else{if(n=e.current.alternate,i&&!Rc(n)){o=Kc(e,t,!1),i=!1;continue}if(2===o){if(i=t,e.errorRecoveryDisabledLanes&i)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;o=mc;var c=l.current.memoizedState.isDehydrated;if(c&&(jc(l,a).flags|=256),2!==(a=Kc(l,a,!1))){if(lc&&!c){l.errorRecoveryDisabledLanes|=i,hc|=i,o=4;break e}i=yc,yc=o,null!==i&&Oc(i)}o=a}if(i=!1,2!==o)continue}}if(1===o){jc(e,0),zc(e,t,0,!0);break}e:{switch(r=e,o){case 0:case 1:throw Error(s(345));case 4:if((4194176&t)===t){zc(r,t,pc,!sc);break e}break;case 2:yc=null;break;case 3:case 5:break;default:throw Error(s(329))}if(r.finishedWork=n,r.finishedLanes=t,(62914560&t)===t&&10<(i=bc+300-le())){if(zc(r,t,pc,!sc),0!==_e(r,0))break e;r.timeoutHandle=ed(Lc.bind(null,r,n,yc,Sc,vc,t,pc,hc,gc,sc,2,-0,0),i)}else Lc(r,n,yc,Sc,vc,t,pc,hc,gc,sc,0,-0,0)}}break}gu(e)}function Oc(e){null===yc?yc=e:yc.push.apply(yc,e)}function Lc(e,t,n,r,o,i,a,l,c,u,d,h,f){var p=t.subtreeFlags;if((8192&p||16785408===(16785408&p))&&(Id={stylesheets:null,count:0,unsuspend:Dd},Tl(t),null!==(t=function(){if(null===Id)throw Error(s(475));var e=Id;return e.stylesheets&&0===e.count&&Od(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Od(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=t(Jc.bind(null,e,n,r,o,a,l,c,1,h,f)),void zc(e,i,a,!u);Jc(e,n,r,o,a,l,c,d,h,f)}function Rc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Yn(i(),o))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zc(e,t,n,r){t&=~fc,t&=~hc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var o=t;0<o;){var i=31-we(o),s=1<<i;r[i]=-1,o&=~s}0!==n&&Pe(e,n,t)}function Fc(){return 0!==(6&ec)||(mu(0,!1),!1)}function Vc(){if(null!==nc){if(0===oc)var e=nc.return;else ya=ma=null,vi(e=nc),go=null,mo=0,e=nc;for(;null!==e;)Zl(e.alternate,e),e=e.return;nc=null}}function jc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,td(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Vc(),tc=e,nc=n=zl(e.current,null),rc=t,oc=0,ic=null,sc=!1,ac=Ne(e,t),lc=!1,gc=pc=fc=hc=dc=uc=0,yc=mc=null,vc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var o=31-we(r),i=1<<o;t|=e[o],r&=~i}return cc=t,_r(),n}function Bc(e,t){ei=null,I.H=xs,t===so?(t=po(),oc=3):t===ao?(t=po(),oc=4):oc=t===Hs?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,ic=t,null===nc&&(uc=1,Fs(e,Or(t,e.current)))}function Uc(){var e=I.H;return I.H=xs,null===e?xs:e}function Hc(){var e=I.A;return I.A=$l,e}function qc(){uc=4,sc||(4194176&rc)!==rc&&null!==Ao.current||(ac=!0),0===(134217727&dc)&&0===(134217727&hc)||null===tc||zc(tc,rc,pc,!1)}function Kc(e,t,n){var r=ec;ec|=2;var o=Uc(),i=Hc();tc===e&&rc===t||(Sc=null,jc(e,t)),t=!1;var s=uc;e:for(;;)try{if(0!==oc&&null!==nc){var a=nc,l=ic;switch(oc){case 8:Vc(),s=6;break e;case 3:case 2:case 6:null===Ao.current&&(t=!0);var c=oc;if(oc=0,ic=null,Qc(e,a,l,c),n&&ac){s=0;break e}break;default:c=oc,oc=0,ic=null,Qc(e,a,l,c)}}Wc(),s=uc;break}catch(u){Bc(e,u)}return t&&e.shellSuspendCounter++,ya=ma=null,ec=r,I.H=o,I.A=i,null===nc&&(tc=null,rc=0,_r()),s}function Wc(){for(;null!==nc;)Yc(nc)}function Gc(){for(;null!==nc&&!se();)Yc(nc)}function Yc(e){var t=pa(e.alternate,e,cc);e.memoizedProps=e.pendingProps,null===t?Zc(e):nc=t}function Xc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Js(n,t,t.pendingProps,t.type,void 0,rc);break;case 11:t=Js(n,t,t.pendingProps,t.type.render,t.ref,rc);break;case 5:vi(t);default:Zl(n,t),t=pa(n,t=nc=Fl(t,cc),cc)}e.memoizedProps=e.pendingProps,null===t?Zc(e):nc=t}function Qc(e,t,n,r){ya=ma=null,vi(t),go=null,mo=0;var o=t.return;try{if(function(e,t,n,r,o){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ea(t,n,o,!0),null!==(n=Ao.current)){switch(n.tag){case 13:return null===Io?qc():null===n.alternate&&0===uc&&(uc=3),n.flags&=-257,n.flags|=65536,n.lanes=o,r===lo?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),ou(e,r,o)),!1;case 22:return n.flags|=65536,r===lo?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),ou(e,r,o)),!1}throw Error(s(435,n.tag))}return ou(e,r,o),qc(),!1}if(Qr)return null!==(t=Ao.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,r!==Jr&&io(Or(e=Error(s(422),{cause:r}),n))):(r!==Jr&&io(Or(t=Error(s(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,r=Or(r,n),Oa(e,o=js(e.stateNode,r,o)),4!==uc&&(uc=2)),!1;var i=Error(s(520),{cause:r});if(i=Or(i,n),null===mc?mc=[i]:mc.push(i),4!==uc&&(uc=2),null===t)return!0;r=Or(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,Oa(n,e=js(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Ec||!Ec.has(i))))return n.flags|=65536,o&=-o,n.lanes|=o,Us(o=Bs(o),e,n,r),Oa(n,o),!1}n=n.return}while(null!==n);return!1}(e,o,t,n,rc))return uc=1,Fs(e,Or(n,e.current)),void(nc=null)}catch(i){if(null!==o)throw nc=o,i;return uc=1,Fs(e,Or(n,e.current)),void(nc=null)}32768&t.flags?(Qr||1===r?e=!0:ac||0!==(536870912&rc)?e=!1:(sc=e=!0,(2===r||3===r||6===r)&&(null!==(r=Ao.current)&&13===r.tag&&(r.flags|=16384))),$c(t,e)):Zc(t)}function Zc(e){var t=e;do{if(0!==(32768&t.flags))return void $c(t,sc);e=t.return;var n=Xl(t.alternate,t,cc);if(null!==n)return void(nc=n);if(null!==(t=t.sibling))return void(nc=t);nc=t=e}while(null!==t);0===uc&&(uc=5)}function $c(e,t){do{var n=Ql(e.alternate,e);if(null!==n)return n.flags&=32767,void(nc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(nc=e);nc=e=n}while(null!==e);uc=6,nc=null}function Jc(e,t,n,r,o,i,a,l,c,u){var d=I.T,h=U.p;try{U.p=2,I.T=null,function(e,t,n,r,o,i,a,l){do{tu()}while(null!==Cc);if(0!==(6&ec))throw Error(s(327));var c=e.finishedWork;if(r=e.finishedLanes,null===c)return null;if(e.finishedWork=null,e.finishedLanes=0,c===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var u=c.lanes|c.childLanes;if(function(e,t,n,r,o,i){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var u=31-we(n),d=1<<u;a[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Pe(e,r,0),0!==i&&0===o&&0!==e.tag&&(e.suspendedLanes|=i&~(s&~t))}(e,r,u|=xr,i,a,l),e===tc&&(nc=tc=null,rc=0),0===(10256&c.subtreeFlags)&&0===(10256&c.flags)||kc||(kc=!0,_c=u,Nc=n,function(e,t){oe(e,t)}(he,(function(){return tu(),null}))),n=0!==(15990&c.flags),0!==(15990&c.subtreeFlags)||n?(n=I.T,I.T=null,i=U.p,U.p=2,a=ec,ec|=4,function(e,t){if(e=e.containerInfo,Gu=qd,er(e=Jn(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(m){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==o&&3!==h.nodeType||(l=a+o),h!==i||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===o&&(l=a),f===i&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yu={focusedElem:e,selectionRange:n},qd=!1,nl=t;null!==nl;)if(e=(t=nl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,nl=e;else for(;null!==nl;){switch(i=(t=nl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,o=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var g=Ps(n.type,o,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(g,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){ru(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))sd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":sd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,nl=e;break}nl=t.return}g=rl,rl=!1}(e,c),pl(c,e),tr(Yu,e.containerInfo),qd=!!Gu,Yu=Gu=null,e.current=c,ol(e,c.alternate,c),ae(),ec=a,U.p=i,I.T=n):e.current=c,kc?(kc=!1,Cc=e,xc=r):eu(e,u),u=e.pendingLanes,0===u&&(Ec=null),function(e){if(ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,e,void 0,128===(128&e.current.flags))}catch(t){}}(c.stateNode),gu(e),null!==t)for(o=e.onRecoverableError,c=0;c<t.length;c++)u=t[c],o(u.value,{componentStack:u.stack});0!==(3&xc)&&tu(),u=e.pendingLanes,0!==(4194218&r)&&0!==(42&u)?e===Ac?Tc++:(Tc=0,Ac=e):Tc=0,mu(0,!1)}(e,t,n,r,h,o,i,a)}finally{I.T=d,U.p=h}}function eu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Uo(t)))}function tu(){if(null!==Cc){var e=Cc,t=_c;_c=0;var n=Le(xc),r=I.T,o=U.p;try{if(U.p=32>n?32:n,I.T=null,null===Cc)var i=!1;else{n=Nc,Nc=null;var a=Cc,l=xc;if(Cc=null,xc=0,0!==(6&ec))throw Error(s(331));var c=ec;if(ec|=4,Dl(a.current),kl(a,a.current,l,n),ec=c,mu(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,a)}catch(u){}i=!0}return i}finally{U.p=o,I.T=r,eu(e,t)}}return!1}function nu(e,t,n){t=Or(n,t),null!==(e=Ma(e,t=js(e.stateNode,t,2),2))&&(Me(e,2),gu(e))}function ru(e,t,n){if(3===e.tag)nu(e,e,n);else for(;null!==t;){if(3===t.tag){nu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ec||!Ec.has(r))){e=Or(n,e),null!==(r=Ma(t,n=Bs(2),2))&&(Us(n,r,t,e),Me(r,2),gu(r));break}}t=t.return}}function ou(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Jl;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(lc=!0,o.add(n),e=iu.bind(null,e,t,n),t.then(e,e))}function iu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,tc===e&&(rc&n)===n&&(4===uc||3===uc&&(62914560&rc)===rc&&300>le()-bc?0===(2&ec)&&jc(e,0):fc|=n,gc===rc&&(gc=0)),gu(e)}function su(e,t){0===t&&(t=Ie()),null!==(e=Ar(e,t))&&(Me(e,t),gu(e))}function au(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),su(e,n)}function lu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==r&&r.delete(t),su(e,n)}var cu=null,uu=null,du=!1,hu=!1,fu=!1,pu=0;function gu(e){e!==uu&&null===e.next&&(null===uu?cu=uu=e:uu=uu.next=e),hu=!0,du||(du=!0,function(e){rd((function(){0!==(6&ec)?oe(ue,e):e()}))}(yu))}function mu(e,t){if(!fu&&hu){fu=!0;do{for(var n=!1,r=cu;null!==r;){if(!t)if(0!==e){var o=r.pendingLanes;if(0===o)var i=0;else{var s=r.suspendedLanes,a=r.pingedLanes;i=(1<<31-we(42|e)+1)-1,i=201326677&(i&=o&~(s&~a))?201326677&i|1:i?2|i:0}0!==i&&(n=!0,wu(r,i))}else i=rc,0===(3&(i=_e(r,r===tc?i:0)))||Ne(r,i)||(n=!0,wu(r,i));r=r.next}}while(n);fu=!1}}function yu(){hu=du=!1;var e=0;0!==pu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==Ju&&(Ju=e,!0);return Ju=null,!1}()&&(e=pu),pu=0);for(var t=le(),n=null,r=cu;null!==r;){var o=r.next,i=vu(r,t);0===i?(r.next=null,null===n?cu=o:n.next=o,null===o&&(uu=n)):(n=r,(0!==e||0!==(3&i))&&(hu=!0)),r=o}mu(e,!1)}function vu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var s=31-we(i),a=1<<s,l=o[s];-1===l?0!==(a&n)&&0===(a&r)||(o[s]=Te(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}if(n=rc,n=_e(e,e===(t=tc)?n:0),r=e.callbackNode,0===n||e===t&&2===oc||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ie(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ne(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ie(r),Le(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=pe}return r=bu.bind(null,e),n=oe(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ie(r),e.callbackPriority=2,e.callbackNode=null,2}function bu(e,t){var n=e.callbackNode;if(tu()&&e.callbackNode!==n)return null;var r=rc;return 0===(r=_e(e,e===tc?r:0))?null:(Pc(e,r,t),vu(e,le()),null!=e.callbackNode&&e.callbackNode===n?bu.bind(null,e):null)}function wu(e,t){if(tu())return null;Pc(e,t,!0)}function Su(){return 0===pu&&(pu=Ae()),pu}function Eu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:At(""+e)}function ku(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Cu=0;Cu<Sr.length;Cu++){var xu=Sr[Cu];Er(xu.toLowerCase(),"on"+(xu[0].toUpperCase()+xu.slice(1)))}Er(fr,"onAnimationEnd"),Er(pr,"onAnimationIteration"),Er(gr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(mr,"onTransitionRun"),Er(yr,"onTransitionStart"),Er(vr,"onTransitionCancel"),Er(br,"onTransitionEnd"),tt("onMouseEnter",["mouseout","mouseover"]),tt("onMouseLeave",["mouseout","mouseover"]),tt("onPointerEnter",["pointerout","pointerover"]),tt("onPointerLeave",["pointerout","pointerover"]),et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),et("onBeforeInput",["compositionend","keypress","textInput","paste"]),et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_u));function Tu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&o.isPropagationStopped())break e;i=a,o.currentTarget=c;try{i(o)}catch(u){Os(u)}o.currentTarget=null,i=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==i&&o.isPropagationStopped())break e;i=a,o.currentTarget=c;try{i(o)}catch(u){Os(u)}o.currentTarget=null,i=l}}}}function Au(e,t){var n=t[Be];void 0===n&&(n=t[Be]=new Set);var r=e+"__bubble";n.has(r)||(Pu(t,e,2,!1),n.add(r))}function Iu(e,t,n){var r=0;t&&(r|=4),Pu(n,e,r,t)}var Du="_reactListening"+Math.random().toString(36).slice(2);function Mu(e){if(!e[Du]){e[Du]=!0,$e.forEach((function(t){"selectionchange"!==t&&(Nu.has(t)||Iu(t,!1,e),Iu(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Du]||(t[Du]=!0,Iu("selectionchange",!1,t))}}function Pu(e,t,n,r){switch(Zd(t)){case 2:var o=Kd;break;case 8:o=Wd;break;default:o=Gd}n=o.bind(null,t,n,e),o=void 0,!Ft||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Ou(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===o||8===a.nodeType&&a.parentNode===o)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;s=s.return}for(;null!==a;){if(null===(s=Ge(a)))return;if(5===(l=s.tag)||6===l||26===l||27===l){r=i=s;continue e}a=a.parentNode}}r=r.return}Rt((function(){var r=i,o=Dt(n),s=[];e:{var a=wr.get(e);if(void 0!==a){var l=$t,c=e;switch(e){case"keypress":if(0===qt(n))break e;case"keydown":case"keyup":l=pn;break;case"focusin":c="focus",l=on;break;case"focusout":c="blur",l=on;break;case"beforeblur":case"afterblur":l=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=mn;break;case fr:case pr:case gr:l=sn;break;case br:l=yn;break;case"scroll":case"scrollend":l=en;break;case"wheel":l=vn;break;case"copy":case"cut":case"paste":l=an;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=gn;break;case"toggle":case"beforetoggle":l=bn}var u=0!==(4&t),d=!u&&("scroll"===e||"scrollend"===e),h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var g=p;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===h||null!=(g=zt(p,h))&&u.push(Lu(p,g,f)),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,o),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===It||!(c=n.relatedTarget||n.fromElement)||!Ge(c)&&!c[je])&&(l||a)&&(a=o.window===o?o:(a=o.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?Ge(c):null)&&(d=z(c),u=c.tag,c!==d||5!==u&&27!==u&&6!==u)&&(c=null)):(l=null,c=r),l!==c)){if(u=nn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=gn,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:Xe(l),f=null==c?a:Xe(c),(a=new u(g,p+"leave",l,n,o)).target=d,a.relatedTarget=f,g=null,Ge(o)===r&&((u=new u(h,p+"enter",c,n,o)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,p=0,f=u=l;f;f=zu(f))p++;for(f=0,g=h;g;g=zu(g))f++;for(;0<p-f;)u=zu(u),p--;for(;0<f-p;)h=zu(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=zu(u),h=zu(h)}u=null}else u=null;null!==l&&Fu(s,a,l,u,!1),null!==c&&null!==d&&Fu(s,d,c,u,!0)}if("select"===(l=(a=r?Xe(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=zn;else if(Dn(a))if(Fn)m=Gn;else{m=Kn;var y=qn}else!(l=a.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&_t(r.elementType)&&(m=zn):m=Wn;switch(m&&(m=m(e,r))?Mn(s,m,n,o):(y&&y(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&vt(a,"number",a.value)),y=r?Xe(r):window,e){case"focusin":(Dn(y)||"true"===y.contentEditable)&&(rr=y,or=r,ir=null);break;case"focusout":ir=or=rr=null;break;case"mousedown":sr=!0;break;case"contextmenu":case"mouseup":case"dragend":sr=!1,ar(s,n,o);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":ar(s,n,o)}var v;if(Sn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else An?Nn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Cn&&"ko"!==n.locale&&(An||"onCompositionStart"!==b?"onCompositionEnd"===b&&An&&(v=Ht()):(Bt="value"in(jt=o)?jt.value:jt.textContent,An=!0)),0<(y=Ru(r,b)).length&&(b=new ln(b,e,null,n,o),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=Tn(n))&&(b.data=v))),(v=kn?function(e,t){switch(e){case"compositionend":return Tn(t);case"keypress":return 32!==t.which?null:(_n=!0,xn);case"textInput":return(e=t.data)===xn&&_n?null:e;default:return null}}(e,n):function(e,t){if(An)return"compositionend"===e||!Sn&&Nn(e,t)?(e=Ht(),Ut=Bt=jt=null,An=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(b=Ru(r,"onBeforeInput")).length&&(y=new ln("onBeforeInput","beforeinput",null,n,o),s.push({event:y,listeners:b}),y.data=v)),function(e,t,n,r,o){if("submit"===t&&n&&n.stateNode===o){var i=Eu((o[Ve]||null).action),s=r.submitter;s&&null!==(t=(t=s[Ve]||null)?Eu(t.formAction):s.getAttribute("formAction"))&&(i=t,s=null);var a=new $t("action","action",null,r,o);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==pu){var e=s?ku(o,s):new FormData(o);ds(n,{pending:!0,data:e,method:o.method,action:i},null,e)}}else"function"===typeof i&&(a.preventDefault(),e=s?ku(o,s):new FormData(o),ds(n,{pending:!0,data:e,method:o.method,action:i},i,e))},currentTarget:o}]})}}(s,e,r,n,o)}Tu(s,t)}))}function Lu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ru(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5!==(o=o.tag)&&26!==o&&27!==o||null===i||(null!=(o=zt(e,n))&&r.unshift(Lu(e,o,i)),null!=(o=zt(e,t))&&r.push(Lu(e,o,i))),e=e.return}return r}function zu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Fu(e,t,n,r,o){for(var i=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,o?null!=(c=zt(n,i))&&s.unshift(Lu(n,c,l)):o||null!=(c=zt(n,i))&&s.push(Lu(n,c,l))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Vu=/\r\n?/g,ju=/\u0000|\uFFFD/g;function Bu(e){return("string"===typeof e?e:""+e).replace(Vu,"\n").replace(ju,"")}function Uu(e,t){return t=Bu(t),Bu(e)===t}function Hu(){}function qu(e,t,n,r,o,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Et(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Et(e,""+r);break;case"className":at(e,"class",r);break;case"tabIndex":at(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":at(e,n,r);break;case"style":xt(e,r,i);break;case"data":if("object"!==t){at(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&qu(e,t,"name",o.name,o,null),qu(e,t,"formEncType",o.formEncType,o,null),qu(e,t,"formMethod",o.formMethod,o,null),qu(e,t,"formTarget",o.formTarget,o,null)):(qu(e,t,"encType",o.encType,o,null),qu(e,t,"method",o.method,o,null),qu(e,t,"target",o.target,o,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Hu);break;case"onScroll":null!=r&&Au("scroll",e);break;case"onScrollEnd":null!=r&&Au("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=At(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Au("beforetoggle",e),Au("toggle",e),st(e,"popover",r);break;case"xlinkActuate":lt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":lt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":lt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":lt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":lt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":lt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":lt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":lt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":lt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":st(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&st(e,n=Nt.get(n)||n,r)}}function Ku(e,t,n,r,o,i){switch(n){case"style":xt(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Et(e,r):("number"===typeof r||"bigint"===typeof r)&&Et(e,""+r);break;case"onScroll":null!=r&&Au("scroll",e);break;case"onScrollEnd":null!=r&&Au("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Hu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Je.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Ve]||null)?i[n]:null)&&e.removeEventListener(t,i,o),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):st(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,o)))}}function Wu(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Au("error",e),Au("load",e);var r,o=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":o=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:qu(e,t,r,a,n,null)}}return i&&qu(e,t,"srcSet",n.srcSet,n,null),void(o&&qu(e,t,"src",n.src,n,null));case"input":Au("invalid",e);var l=r=a=i=null,c=null,u=null;for(o in n)if(n.hasOwnProperty(o)){var d=n[o];if(null!=d)switch(o){case"name":i=d;break;case"type":a=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(s(137,t));break;default:qu(e,t,o,d,n,null)}}return yt(e,r,l,c,u,a,i,!1),void dt(e);case"select":for(i in Au("invalid",e),o=a=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":o=l;default:qu(e,t,i,l,n,null)}return t=r,n=a,e.multiple=!!o,void(null!=t?bt(e,!!o,t,!1):null!=n&&bt(e,!!o,n,!0));case"textarea":for(a in Au("invalid",e),r=i=o=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":o=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:qu(e,t,a,l,n,null)}return St(e,o,i,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(o=n[c]))if("selected"===c)e.selected=o&&"function"!==typeof o&&"symbol"!==typeof o;else qu(e,t,c,o,n,null);return;case"dialog":Au("cancel",e),Au("close",e);break;case"iframe":case"object":Au("load",e);break;case"video":case"audio":for(o=0;o<_u.length;o++)Au(_u[o],e);break;case"image":Au("error",e),Au("load",e);break;case"details":Au("toggle",e);break;case"embed":case"source":case"link":Au("error",e),Au("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(o=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:qu(e,t,u,o,n,null)}return;default:if(_t(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(o=n[d])&&Ku(e,t,d,o,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(o=n[l])&&qu(e,t,l,o,n,null))}var Gu=null,Yu=null;function Xu(e){return 9===e.nodeType?e:e.ownerDocument}function Qu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zu(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function $u(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Ju=null;var ed="function"===typeof setTimeout?setTimeout:void 0,td="function"===typeof clearTimeout?clearTimeout:void 0,nd="function"===typeof Promise?Promise:void 0,rd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nd?function(e){return nd.resolve(null).then(e).catch(od)}:ed;function od(e){setTimeout((function(){throw e}))}function id(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void gh(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);gh(t)}function sd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":sd(n),We(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function ad(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}function ld(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function cd(e,t,n){switch(t=Xu(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}var ud=new Map,dd=new Set;function hd(e){return"function"===typeof e.getRootNode?e.getRootNode():e.ownerDocument}var fd=U.d;U.d={f:function(){var e=fd.f(),t=Fc();return e||t},r:function(e){var t=Ye(e);null!==t&&5===t.tag&&"form"===t.type?fs(t):fd.r(e)},D:function(e){fd.D(e),gd("dns-prefetch",e,null)},C:function(e,t){fd.C(e,t),gd("preconnect",e,t)},L:function(e,t,n){fd.L(e,t,n);var r=pd;if(r&&e&&t){var o='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(o+='[imagesrcset="'+gt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(o+='[imagesizes="'+gt(n.imageSizes)+'"]')):o+='[href="'+gt(e)+'"]';var i=o;switch(t){case"style":i=yd(e);break;case"script":i=wd(e)}ud.has(i)||(e=D({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),ud.set(i,e),null!==r.querySelector(o)||"style"===t&&r.querySelector(vd(i))||"script"===t&&r.querySelector(Sd(i))||(Wu(t=r.createElement("link"),"link",e),Ze(t),r.head.appendChild(t)))}},m:function(e,t){fd.m(e,t);var n=pd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",o='link[rel="modulepreload"][as="'+gt(r)+'"][href="'+gt(e)+'"]',i=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=wd(e)}if(!ud.has(i)&&(e=D({rel:"modulepreload",href:e},t),ud.set(i,e),null===n.querySelector(o))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Sd(i)))return}Wu(r=n.createElement("link"),"link",e),Ze(r),n.head.appendChild(r)}}},X:function(e,t){fd.X(e,t);var n=pd;if(n&&e){var r=Qe(n).hoistableScripts,o=wd(e),i=r.get(o);i||((i=n.querySelector(Sd(o)))||(e=D({src:e,async:!0},t),(t=ud.get(o))&&xd(e,t),Ze(i=n.createElement("script")),Wu(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(o,i))}},S:function(e,t,n){fd.S(e,t,n);var r=pd;if(r&&e){var o=Qe(r).hoistableStyles,i=yd(e);t=t||"default";var s=o.get(i);if(!s){var a={loading:0,preload:null};if(s=r.querySelector(vd(i)))a.loading=5;else{e=D({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ud.get(i))&&Cd(e,n);var l=s=r.createElement("link");Ze(l),Wu(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){a.loading|=1})),l.addEventListener("error",(function(){a.loading|=2})),a.loading|=4,kd(s,t,r)}s={type:"stylesheet",instance:s,count:1,state:a},o.set(i,s)}}},M:function(e,t){fd.M(e,t);var n=pd;if(n&&e){var r=Qe(n).hoistableScripts,o=wd(e),i=r.get(o);i||((i=n.querySelector(Sd(o)))||(e=D({src:e,async:!0,type:"module"},t),(t=ud.get(o))&&xd(e,t),Ze(i=n.createElement("script")),Wu(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(o,i))}}};var pd="undefined"===typeof document?null:document;function gd(e,t,n){var r=pd;if(r&&"string"===typeof t&&t){var o=gt(t);o='link[rel="'+e+'"][href="'+o+'"]',"string"===typeof n&&(o+='[crossorigin="'+n+'"]'),dd.has(o)||(dd.add(o),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(o)&&(Wu(t=r.createElement("link"),"link",e),Ze(t),r.head.appendChild(t)))}}function md(e,t,n,r){var o,i,a,l,c=(c=Z.current)?hd(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=yd(n.href),(r=(n=Qe(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=yd(n.href);var u=Qe(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(vd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),ud.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ud.set(e,n),u||(o=c,i=e,a=n,l=d.state,o.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=o.createElement("link"),l.preload=i,i.addEventListener("load",(function(){return l.loading|=1})),i.addEventListener("error",(function(){return l.loading|=2})),Wu(i,"link",a),Ze(i),o.head.appendChild(i))))),t&&null===r)throw Error(s(528,""));return d}if(t&&null!==r)throw Error(s(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=wd(n),(r=(n=Qe(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function yd(e){return'href="'+gt(e)+'"'}function vd(e){return'link[rel="stylesheet"]['+e+"]"}function bd(e){return D({},e,{"data-precedence":e.precedence,precedence:null})}function wd(e){return'[src="'+gt(e)+'"]'}function Sd(e){return"script[async]"+e}function Ed(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+gt(n.href)+'"]');if(r)return t.instance=r,Ze(r),r;var o=D({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ze(r=(e.ownerDocument||e).createElement("style")),Wu(r,"style",o),kd(r,n.precedence,e),t.instance=r;case"stylesheet":o=yd(n.href);var i=e.querySelector(vd(o));if(i)return t.state.loading|=4,t.instance=i,Ze(i),i;r=bd(n),(o=ud.get(o))&&Cd(r,o),Ze(i=(e.ownerDocument||e).createElement("link"));var a=i;return a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),Wu(i,"link",r),t.state.loading|=4,kd(i,n.precedence,e),t.instance=i;case"script":return i=wd(n.src),(o=e.querySelector(Sd(i)))?(t.instance=o,Ze(o),o):(r=n,(o=ud.get(i))&&xd(r=D({},n),o),Ze(o=(e=e.ownerDocument||e).createElement("script")),Wu(o,"link",r),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,kd(r,n.precedence,e));return t.instance}function kd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,i=o,s=0;s<r.length;s++){var a=r[s];if(a.dataset.precedence===t)i=a;else if(i!==o)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Cd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function xd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var _d=null;function Nd(e,t,n){if(null===_d){var r=new Map,o=_d=new Map;o.set(n,r)}else(r=(o=_d).get(n))||(r=new Map,o.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var i=n[o];if(!(i[Ke]||i[Fe]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var s=i.getAttribute(t)||"";s=e+s;var a=r.get(s);a?a.push(i):r.set(s,[i])}}return r}function Td(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Ad(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Id=null;function Dd(){}function Md(){if(this.count--,0===this.count)if(this.stylesheets)Od(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Pd=null;function Od(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Pd=new Map,t.forEach(Ld,e),Pd=null,Md.call(e))}function Ld(e,t){if(!(4&t.state.loading)){var n=Pd.get(e);if(n)var r=n.get(null);else{n=new Map,Pd.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<o.length;i++){var s=o[i];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}s=(o=t.instance).getAttribute("data-precedence"),(i=n.get(s)||r)===r&&n.set(null,o),n.set(s,o),this.count++,r=Md.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),i?i.parentNode.insertBefore(o,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(o,e.firstChild),t.state.loading|=4}}var Rd={$$typeof:m,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function zd(e,t,n,r,o,i,s,a){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=De(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=De(0),this.hiddenUpdates=De(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=i,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Fd(e,t,n,r,o,i,s,a,l,c,u,d){return e=new zd(e,t,n,s,a,l,c,d),t=1,!0===i&&(t|=24),i=Ll(3,null,null,t),e.current=i,i.stateNode=e,(t=Bo()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},Aa(i),e}function Vd(e){return e?e=Mr:Mr}function jd(e,t,n,r,o,i){o=Vd(o),null===r.context?r.context=o:r.pendingContext=o,(r=Da(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=Ma(e,r,t))&&(Mc(n,0,t),Pa(n,e,t))}function Bd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Ud(e,t){Bd(e,t),(e=e.alternate)&&Bd(e,t)}function Hd(e){if(13===e.tag){var t=Ar(e,67108864);null!==t&&Mc(t,0,67108864),Ud(e,67108864)}}var qd=!0;function Kd(e,t,n,r){var o=I.T;I.T=null;var i=U.p;try{U.p=2,Gd(e,t,n,r)}finally{U.p=i,I.T=o}}function Wd(e,t,n,r){var o=I.T;I.T=null;var i=U.p;try{U.p=8,Gd(e,t,n,r)}finally{U.p=i,I.T=o}}function Gd(e,t,n,r){if(qd){var o=Yd(r);if(null===o)Ou(e,t,r,Xd,n),sh(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Jd=ah(Jd,e,t,n,r,o),!0;case"dragenter":return eh=ah(eh,e,t,n,r,o),!0;case"mouseover":return th=ah(th,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return nh.set(i,ah(nh.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,rh.set(i,ah(rh.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(sh(e,r),4&t&&-1<ih.indexOf(e)){for(;null!==o;){var i=Ye(o);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var s=xe(i.pendingLanes);if(0!==s){var a=i;for(a.pendingLanes|=2,a.entangledLanes|=2;s;){var l=1<<31-we(s);a.entanglements[1]|=l,s&=~l}gu(i),0===(6&ec)&&(wc=le()+500,mu(0,!1))}}break;case 13:null!==(a=Ar(i,2))&&Mc(a,0,2),Fc(),Ud(i,2)}if(null===(i=Yd(r))&&Ou(e,t,r,Xd,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Ou(e,t,r,null,n)}}function Yd(e){return Qd(e=Dt(e))}var Xd=null;function Qd(e){if(Xd=null,null!==(e=Ge(e))){var t=z(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=F(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Xd=e,null}function Zd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var $d=!1,Jd=null,eh=null,th=null,nh=new Map,rh=new Map,oh=[],ih="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sh(e,t){switch(e){case"focusin":case"focusout":Jd=null;break;case"dragenter":case"dragleave":eh=null;break;case"mouseover":case"mouseout":th=null;break;case"pointerover":case"pointerout":nh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rh.delete(t.pointerId)}}function ah(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=Ye(t))&&Hd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function lh(e){var t=Ge(e.target);if(null!==t){var n=z(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=F(n)))return e.blockedOn=t,void function(e,t){var n=U.p;try{return U.p=e,t()}finally{U.p=n}}(e.priority,(function(){if(13===n.tag){var e=Ic(),t=Ar(n,e);null!==t&&Mc(t,0,e),Ud(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function ch(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yd(e.nativeEvent);if(null!==n)return null!==(t=Ye(n))&&Hd(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);It=r,n.target.dispatchEvent(r),It=null,t.shift()}return!0}function uh(e,t,n){ch(e)&&n.delete(t)}function dh(){$d=!1,null!==Jd&&ch(Jd)&&(Jd=null),null!==eh&&ch(eh)&&(eh=null),null!==th&&ch(th)&&(th=null),nh.forEach(uh),rh.forEach(uh)}function hh(e,t){e.blockedOn===t&&(e.blockedOn=null,$d||($d=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,dh)))}var fh=null;function ph(e){fh!==e&&(fh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){fh===e&&(fh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],o=e[t+2];if("function"!==typeof r){if(null===Qd(r||n))continue;break}var i=Ye(n);null!==i&&(e.splice(t,3),t-=3,ds(i,{pending:!0,data:o,method:n.method,action:r},r,o))}})))}function gh(e){function t(t){return hh(t,e)}null!==Jd&&hh(Jd,e),null!==eh&&hh(eh,e),null!==th&&hh(th,e),nh.forEach(t),rh.forEach(t);for(var n=0;n<oh.length;n++){var r=oh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<oh.length&&null===(n=oh[0]).blockedOn;)lh(n),null===n.blockedOn&&oh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var o=n[r],i=n[r+1],s=o[Ve]||null;if("function"===typeof i)s||ph(n);else if(s){var a=null;if(i&&i.hasAttribute("formAction")){if(o=i,s=i[Ve]||null)a=s.formAction;else if(null!==Qd(o))continue}else a=s.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),ph(n)}}}function mh(e){this._internalRoot=e}function yh(e){this._internalRoot=e}yh.prototype.render=mh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));jd(t.current,Ic(),e,t,null,null)},yh.prototype.unmount=mh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;0===e.tag&&tu(),jd(e.current,2,null,e,null,null),Fc(),t[je]=null}},yh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Re();e={blockedOn:null,target:e,priority:t};for(var n=0;n<oh.length&&0!==t&&t<oh[n].priority;n++);oh.splice(n,0,e),0===n&&lh(e)}};var vh=o.version;if("19.0.0"!==vh)throw Error(s(527,vh,"19.0.0"));U.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=z(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return V(o),e;if(i===r)return V(o),t;i=i.sibling}throw Error(s(188))}if(n.return!==r.return)n=o,r=i;else{for(var a=!1,l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?j(e):null)?null:e.stateNode};var bh={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:I,findFiberByHostInstance:Ge,reconcilerVersion:"19.0.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wh.isDisabled&&wh.supportsFiber)try{ye=wh.inject(bh),ve=wh}catch(Eh){}}t.createRoot=function(e,t){if(!a(e))throw Error(s(299));var n=!1,r="",o=Ls,i=Rs,l=zs;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(o=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Fd(e,1,!1,null,0,n,r,o,i,l,0,null),e[je]=t.current,Mu(8===e.nodeType?e.parentNode:e),new mh(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(s(299));var r=!1,o="",i=Ls,l=Rs,c=zs,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Fd(e,1,!0,t,0,r,o,i,l,c,0,u)).context=Vd(null),n=t.current,(o=Da(r=Ic())).callback=null,Ma(n,o,r),t.current.lanes=r,Me(t,r),gu(t),e[je]=t.current,Mu(e),new yh(t)},t.version="19.0.0"},432:(e,t,n)=>{var r=n(643);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(o(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(o(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=n,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),o="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:o,fetchPriority:i}):"script"===n&&s.d.X(e,{crossOrigin:r,integrity:o,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);s.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.0.0"},367:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(532)},766:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(432)},935:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function o(e,t,r){var o=null;if(void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:o,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=o,t.jsxs=o},152:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,g(w,y.prototype),w.isPureReactComponent=!0;var S=Array.isArray,E={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function C(e,t,r,o,i,s){return r=s.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:s}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(){}function A(e,t,o,i,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return A((u=e._init)(e._payload),t,o,i,s)}}if(u)return s=s(e),u=""===i?"."+N(e,0):i,S(s)?(o="",null!=u&&(o=u.replace(_,"$&/")+"/"),A(s,t,o,"",(function(e){return e}))):null!=s&&(x(s)&&(l=s,c=o+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(_,"$&/")+"/")+u,s=C(l.type,c,void 0,0,0,l.props)),t.push(s)),1;u=0;var d,p=""===i?".":i+":";if(S(e))for(var g=0;g<e.length;g++)u+=A(i=e[g],t,o,a=p+N(i,g),s);else if("function"===typeof(g=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=g.call(e),g=0;!(i=e.next()).done;)u+=A(i=i.value,t,o,a=p+N(i,g++),s);else if("object"===a){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(T,T):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,o,i,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function I(e,t,n){if(null==e)return e;var r=[],o=0;return A(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function P(){}t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=s,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,t.act=function(){throw Error("act(...) is not supported in production builds of React.")},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),o=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(o=""+t.key),t)!k.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var s=Array(i),a=0;a<i;a++)s[a]=arguments[a+2];r.children=s}return C(e.type,o,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,o={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)k.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(o[r]=t[r]);var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+2];o.children=a}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===o[r]&&(o[r]=s[r]);return C(e,i,void 0,0,0,o)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=E.T,n={};E.T=n;try{var r=e(),o=E.S;null!==o&&o(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(P,M)}catch(i){M(i)}finally{E.T=t}},t.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},t.use=function(e){return E.H.use(e)},t.useActionState=function(e,t,n){return E.H.useActionState(e,t,n)},t.useCallback=function(e,t){return E.H.useCallback(e,t)},t.useContext=function(e){return E.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return E.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return E.H.useEffect(e,t)},t.useId=function(){return E.H.useId()},t.useImperativeHandle=function(e,t,n){return E.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return E.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return E.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return E.H.useMemo(e,t)},t.useOptimistic=function(e,t){return E.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return E.H.useReducer(e,t,n)},t.useRef=function(e){return E.H.useRef(e)},t.useState=function(e){return E.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return E.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return E.H.useTransition()},t.version="19.0.0"},643:(e,t,n)=>{e.exports=n(152)},507:(e,t,n)=>{e.exports=n(935)},752:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,s=o>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,n))c<o&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<o&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function S(e){if(m=!1,w(e),!g)if(null!==r(c))g=!0,D();else{var t=r(u);null!==t&&M(S,t.startTime-e)}}var E,k=!1,C=-1,x=5,_=-1;function N(){return!(t.unstable_now()-_<x)}function T(){if(k){var e=t.unstable_now();_=e;var n=!0;try{e:{g=!1,m&&(m=!1,v(C),C=-1),p=!0;var i=f;try{t:{for(w(e),h=r(c);null!==h&&!(h.expirationTime>e&&N());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,w(e),n=!0;break t}h===r(c)&&o(c),w(e)}else o(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&M(S,l.startTime-e),n=!1}}break e}finally{h=null,f=i,p=!1}n=void 0}}finally{n?E():k=!1}}}if("function"===typeof b)E=function(){b(T)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,I=A.port2;A.port1.onmessage=T,E=function(){I.postMessage(null)}}else E=function(){y(T,0)};function D(){k||(k=!0,E())}function M(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,D())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,o,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:a=i+a,sortIndex:-1},i>s?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(m?(v(C),C=-1):m=!0,M(S,i-s))):(e.sortIndex=a,n(c,e),g||p||(g=!0,D())),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},261:(e,t,n)=>{e.exports=n(752)},234:(e,t,n)=>{var r=n(643);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=r.useState,s=r.useEffect,a=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),o=r[0].inst,u=r[1];return a((function(){o.value=n,o.getSnapshot=t,c(o)&&u({inst:o})}),[e,n,t]),s((function(){return c(o)&&u({inst:o}),e((function(){c(o)&&u({inst:o})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},293:(e,t,n)=>{var r=n(643),o=n(277);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=o.useSyncExternalStore,a=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var d=a(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c((function(){function e(e){if(!l){if(l=!0,s=e,e=r(e),void 0!==o&&h.hasValue){var t=h.value;if(o(t,e))return a=t}return a=e}if(t=a,i(s,e))return t;var n=r(e);return void 0!==o&&o(t,n)?(s=e,t):(s=e,a=n)}var s,a,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,o]);var f=s(e,d[0],d[1]);return l((function(){h.hasValue=!0,h.value=f}),[f]),u(f),f}},277:(e,t,n)=>{e.exports=n(234)},755:(e,t,n)=>{e.exports=n(293)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".577f6119.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="test-app:";n.l=(r,o,i,s)=>{if(e[r])e[r].push(o);else{var a,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+i),a.src=r),e[r]=[o];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var o=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var i=new Promise(((n,r)=>o=e[t]=[n,r]));r.push(o[2]=i);var s=n.p+n.u(t),a=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",a.name="ChunkLoadError",a.type=i,a.request=s,o[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var o,i,s=r[0],a=r[1],l=r[2],c=0;if(s.some((t=>0!==e[t]))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(l)l(n)}for(t&&t(r);c<s.length;c++)i=s[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunktest_app=self.webpackChunktest_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(643),o=n(367);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function a(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var d=n(507);function h(e){if("string"===typeof e||"number"===typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,r=0;r<e.length;r++)""!==(n=h(e[r]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var f={value:()=>{}};function p(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new g(r)}function g(e){this._=e}function m(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function y(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=f,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}g.prototype=p.prototype={constructor:g,on:function(e,t){var n,r,o=this._,i=(r=o,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),s=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++s<a;)if(n=(e=i[s]).type)o[n]=y(o[n],e.name,t);else if(null==t)for(n in o)o[n]=y(o[n],e.name,null);return this}for(;++s<a;)if((n=(e=i[s]).type)&&(n=m(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new g(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};const v=p;function b(){}function w(e){return null==e?b:function(){return this.querySelector(e)}}function S(){return[]}function E(e){return null==e?S:function(){return this.querySelectorAll(e)}}function k(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}function C(e){return function(){return this.matches(e)}}function x(e){return function(t){return t.matches(e)}}var _=Array.prototype.find;function N(){return this.firstElementChild}var T=Array.prototype.filter;function A(){return Array.from(this.children)}function I(e){return new Array(e.length)}function D(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function M(e,t,n,r,o,i){for(var s,a=0,l=t.length,c=i.length;a<c;++a)(s=t[a])?(s.__data__=i[a],r[a]=s):n[a]=new D(e,i[a]);for(;a<l;++a)(s=t[a])&&(o[a]=s)}function P(e,t,n,r,o,i,s){var a,l,c,u=new Map,d=t.length,h=i.length,f=new Array(d);for(a=0;a<d;++a)(l=t[a])&&(f[a]=c=s.call(l,l.__data__,a,t)+"",u.has(c)?o[a]=l:u.set(c,l));for(a=0;a<h;++a)c=s.call(e,i[a],a,i)+"",(l=u.get(c))?(r[a]=l,l.__data__=i[a],u.delete(c)):n[a]=new D(e,i[a]);for(a=0;a<d;++a)(l=t[a])&&u.get(f[a])===l&&(o[a]=l)}function O(e){return e.__data__}function L(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function R(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}D.prototype={constructor:D,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var z="http://www.w3.org/1999/xhtml";const F={svg:"http://www.w3.org/2000/svg",xhtml:z,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function V(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),F.hasOwnProperty(t)?{space:F[t],local:e}:e}function j(e){return function(){this.removeAttribute(e)}}function B(e){return function(){this.removeAttributeNS(e.space,e.local)}}function U(e,t){return function(){this.setAttribute(e,t)}}function H(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function q(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function K(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function W(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function G(e){return function(){this.style.removeProperty(e)}}function Y(e,t,n){return function(){this.style.setProperty(e,t,n)}}function X(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Q(e,t){return e.style.getPropertyValue(t)||W(e).getComputedStyle(e,null).getPropertyValue(t)}function Z(e){return function(){delete this[e]}}function $(e,t){return function(){this[e]=t}}function J(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function ee(e){return e.trim().split(/^|\s+/)}function te(e){return e.classList||new ne(e)}function ne(e){this._node=e,this._names=ee(e.getAttribute("class")||"")}function re(e,t){for(var n=te(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function oe(e,t){for(var n=te(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function ie(e){return function(){re(this,e)}}function se(e){return function(){oe(this,e)}}function ae(e,t){return function(){(t.apply(this,arguments)?re:oe)(this,e)}}function le(){this.textContent=""}function ce(e){return function(){this.textContent=e}}function ue(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function de(){this.innerHTML=""}function he(e){return function(){this.innerHTML=e}}function fe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function pe(){this.nextSibling&&this.parentNode.appendChild(this)}function ge(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function me(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===z&&t.documentElement.namespaceURI===z?t.createElement(e):t.createElementNS(n,e)}}function ye(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ve(e){var t=V(e);return(t.local?ye:me)(t)}function be(){return null}function we(){var e=this.parentNode;e&&e.removeChild(this)}function Se(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ee(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ke(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function Ce(e,t,n){return function(){var r,o=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var s=0,a=o.length;s<a;++s)if((r=o[s]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),void(r.value=t);this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function xe(e,t,n){var r=W(e),o=r.CustomEvent;"function"===typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function _e(e,t){return function(){return xe(this,e,t)}}function Ne(e,t){return function(){return xe(this,e,t.apply(this,arguments))}}ne.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Te=[null];function Ae(e,t){this._groups=e,this._parents=t}function Ie(){return new Ae([[document.documentElement]],Te)}Ae.prototype=Ie.prototype={constructor:Ae,select:function(e){"function"!==typeof e&&(e=w(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,s,a=t[o],l=a.length,c=r[o]=new Array(l),u=0;u<l;++u)(i=a[u])&&(s=e.call(i,i.__data__,u,a))&&("__data__"in i&&(s.__data__=i.__data__),c[u]=s);return new Ae(r,this._parents)},selectAll:function(e){e="function"===typeof e?k(e):E(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var s,a=t[i],l=a.length,c=0;c<l;++c)(s=a[c])&&(r.push(e.call(s,s.__data__,c,a)),o.push(s));return new Ae(r,o)},selectChild:function(e){return this.select(null==e?N:function(e){return function(){return _.call(this.children,e)}}("function"===typeof e?e:x(e)))},selectChildren:function(e){return this.selectAll(null==e?A:function(e){return function(){return T.call(this.children,e)}}("function"===typeof e?e:x(e)))},filter:function(e){"function"!==typeof e&&(e=C(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,s=t[o],a=s.length,l=r[o]=[],c=0;c<a;++c)(i=s[c])&&e.call(i,i.__data__,c,s)&&l.push(i);return new Ae(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,O);var n=t?P:M,r=this._parents,o=this._groups;"function"!==typeof e&&(e=function(e){return function(){return e}}(e));for(var i=o.length,s=new Array(i),a=new Array(i),l=new Array(i),c=0;c<i;++c){var u=r[c],d=o[c],h=d.length,f=L(e.call(u,u&&u.__data__,c,r)),p=f.length,g=a[c]=new Array(p),m=s[c]=new Array(p);n(u,d,g,m,l[c]=new Array(h),f,t);for(var y,v,b=0,w=0;b<p;++b)if(y=g[b]){for(b>=w&&(w=b+1);!(v=m[w])&&++w<p;);y._next=v||null}}return(s=new Ae(s,r))._enter=a,s._exit=l,s},enter:function(){return new Ae(this._enter||this._groups.map(I),this._parents)},exit:function(){return new Ae(this._exit||this._groups.map(I),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,i=this.exit();return"function"===typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,s=Math.min(o,i),a=new Array(o),l=0;l<s;++l)for(var c,u=n[l],d=r[l],h=u.length,f=a[l]=new Array(h),p=0;p<h;++p)(c=u[p]||d[p])&&(f[p]=c);for(;l<o;++l)a[l]=n[l];return new Ae(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],i=o.length-1,s=o[i];--i>=0;)(r=o[i])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=R);for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s,a=n[i],l=a.length,c=o[i]=new Array(l),u=0;u<l;++u)(s=a[u])&&(c[u]=s);c.sort(t)}return new Ae(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,i=t[n],s=0,a=i.length;s<a;++s)(o=i[s])&&e.call(o,o.__data__,s,i);return this},attr:function(e,t){var n=V(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?B:j:"function"===typeof t?n.local?K:q:n.local?H:U)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?G:"function"===typeof t?X:Y)(e,t,null==n?"":n)):Q(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Z:"function"===typeof t?J:$)(e,t)):this.node()[e]},classed:function(e,t){var n=ee(e+"");if(arguments.length<2){for(var r=te(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"===typeof t?ae:t?ie:se)(n,t))},text:function(e){return arguments.length?this.each(null==e?le:("function"===typeof e?ue:ce)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?de:("function"===typeof e?fe:he)(e)):this.node().innerHTML},raise:function(){return this.each(pe)},lower:function(){return this.each(ge)},append:function(e){var t="function"===typeof e?e:ve(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:ve(e),r=null==t?be:"function"===typeof t?t:w(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(we)},clone:function(e){return this.select(e?Ee:Se)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,i=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),s=i.length;if(!(arguments.length<2)){for(a=t?Ce:ke,r=0;r<s;++r)this.each(a(i[r],t,n));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(r=0,l=a[c];r<s;++r)if((o=i[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"===typeof t?Ne:_e)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],i=0,s=o.length;i<s;++i)(r=o[i])&&(yield r)}};const De=Ie;function Me(e){return"string"===typeof e?new Ae([[document.querySelector(e)]],[document.documentElement]):new Ae([[e]],Te)}function Pe(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const Oe={passive:!1},Le={capture:!0,passive:!1};function Re(e){e.stopImmediatePropagation()}function ze(e){e.preventDefault(),e.stopImmediatePropagation()}function Fe(e){var t=e.document.documentElement,n=Me(e).on("dragstart.drag",ze,Le);"onselectstart"in t?n.on("selectstart.drag",ze,Le):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ve(e,t){var n=e.document.documentElement,r=Me(e).on("dragstart.drag",null);t&&(r.on("click.drag",ze,Le),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const je=e=>()=>e;function Be(e,t){let{sourceEvent:n,subject:r,target:o,identifier:i,active:s,x:a,y:l,dx:c,dy:u,dispatch:d}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}function Ue(e){return!e.ctrlKey&&!e.button}function He(){return this.parentNode}function qe(e,t){return null==t?{x:e.x,y:e.y}:t}function Ke(){return navigator.maxTouchPoints||"ontouchstart"in this}function We(){var e,t,n,r,o=Ue,i=He,s=qe,a=Ke,l={},c=v("start","drag","end"),u=0,d=0;function h(e){e.on("mousedown.drag",f).filter(a).on("touchstart.drag",m).on("touchmove.drag",y,Oe).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(s,a){if(!r&&o.call(this,s,a)){var l=w(this,i.call(this,s,a),s,a,"mouse");l&&(Me(s.view).on("mousemove.drag",p,Le).on("mouseup.drag",g,Le),Fe(s.view),Re(s),n=!1,e=s.clientX,t=s.clientY,l("start",s))}}function p(r){if(ze(r),!n){var o=r.clientX-e,i=r.clientY-t;n=o*o+i*i>d}l.mouse("drag",r)}function g(e){Me(e.view).on("mousemove.drag mouseup.drag",null),Ve(e.view,n),ze(e),l.mouse("end",e)}function m(e,t){if(o.call(this,e,t)){var n,r,s=e.changedTouches,a=i.call(this,e,t),l=s.length;for(n=0;n<l;++n)(r=w(this,a,e,t,s[n].identifier,s[n]))&&(Re(e),r("start",e,s[n]))}}function y(e){var t,n,r=e.changedTouches,o=r.length;for(t=0;t<o;++t)(n=l[r[t].identifier])&&(ze(e),n("drag",e,r[t]))}function b(e){var t,n,o=e.changedTouches,i=o.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<i;++t)(n=l[o[t].identifier])&&(Re(e),n("end",e,o[t]))}function w(e,t,n,r,o,i){var a,d,f,p=c.copy(),g=Pe(i||n,t);if(null!=(f=s.call(e,new Be("beforestart",{sourceEvent:n,target:h,identifier:o,active:u,x:g[0],y:g[1],dx:0,dy:0,dispatch:p}),r)))return a=f.x-g[0]||0,d=f.y-g[1]||0,function n(i,s,c){var m,y=g;switch(i){case"start":l[o]=n,m=u++;break;case"end":delete l[o],--u;case"drag":g=Pe(c||s,t),m=u}p.call(i,e,new Be(i,{sourceEvent:s,subject:f,target:h,identifier:o,active:m,x:g[0]+a,y:g[1]+d,dx:g[0]-y[0],dy:g[1]-y[1],dispatch:p}),r)}}return h.filter=function(e){return arguments.length?(o="function"===typeof e?e:je(!!e),h):o},h.container=function(e){return arguments.length?(i="function"===typeof e?e:je(e),h):i},h.subject=function(e){return arguments.length?(s="function"===typeof e?e:je(e),h):s},h.touchable=function(e){return arguments.length?(a="function"===typeof e?e:je(!!e),h):a},h.on=function(){var e=c.on.apply(c,arguments);return e===c?h:e},h.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,h):Math.sqrt(d)},h}Be.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ge(e){return((e=Math.exp(e))+1/e)/2}const Ye=function e(t,n,r){function o(e,o){var i,s,a=e[0],l=e[1],c=e[2],u=o[0],d=o[1],h=o[2],f=u-a,p=d-l,g=f*f+p*p;if(g<1e-12)s=Math.log(h/c)/t,i=function(e){return[a+e*f,l+e*p,c*Math.exp(t*e*s)]};else{var m=Math.sqrt(g),y=(h*h-c*c+r*g)/(2*c*n*m),v=(h*h-c*c-r*g)/(2*h*n*m),b=Math.log(Math.sqrt(y*y+1)-y),w=Math.log(Math.sqrt(v*v+1)-v);s=(w-b)/t,i=function(e){var r=e*s,o=Ge(b),i=c/(n*m)*(o*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*r+b)-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[a+i*f,l+i*p,c*o/Ge(t*r+b)]}}return i.duration=1e3*s*t/Math.SQRT2,i}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4);var Xe,Qe,Ze=0,$e=0,Je=0,et=0,tt=0,nt=0,rt="object"===typeof performance&&performance.now?performance:Date,ot="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function it(){return tt||(ot(st),tt=rt.now()+nt)}function st(){tt=0}function at(){this._call=this._time=this._next=null}function lt(e,t,n){var r=new at;return r.restart(e,t,n),r}function ct(){tt=(et=rt.now())+nt,Ze=$e=0;try{!function(){it(),++Ze;for(var e,t=Xe;t;)(e=tt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ze}()}finally{Ze=0,function(){var e,t,n=Xe,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Xe=t);Qe=e,dt(r)}(),tt=0}}function ut(){var e=rt.now(),t=e-et;t>1e3&&(nt-=t,et=e)}function dt(e){Ze||($e&&($e=clearTimeout($e)),e-tt>24?(e<1/0&&($e=setTimeout(ct,e-rt.now()-nt)),Je&&(Je=clearInterval(Je))):(Je||(et=rt.now(),Je=setInterval(ut,1e3)),Ze=1,ot(ct)))}function ht(e,t,n){var r=new at;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}at.prototype=lt.prototype={constructor:at,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?it():+n)+(null==t?0:+t),this._next||Qe===this||(Qe?Qe._next=this:Xe=this,Qe=this),this._call=e,this._time=n,dt()},stop:function(){this._call&&(this._call=null,this._time=1/0,dt())}};var ft=v("start","end","cancel","interrupt"),pt=[];function gt(e,t,n,r,o,i){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function i(e){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=e&&s(e-n.delay)}function s(i){var c,u,d,h;if(1!==n.state)return l();for(c in o)if((h=o[c]).name===n.name){if(3===h.state)return ht(s);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(ht((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(i))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=h);r.length=u+1}}function a(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),i=-1,s=r.length;++i<s;)r[i].call(e,o);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=lt(i,0,n.time)}(e,n,{name:t,index:r,group:o,on:ft,tween:pt,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function mt(e,t){var n=vt(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function yt(e,t){var n=vt(e,t);if(n.state>3)throw new Error("too late; already running");return n}function vt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function bt(e,t){var n,r,o,i=e.__transition,s=!0;if(i){for(o in t=null==t?null:t+"",i)(n=i[o]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[o]):s=!1;s&&delete e.__transition}}function wt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var St,Et=180/Math.PI,kt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ct(e,t,n,r,o,i){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*Et,skewX:Math.atan(l)*Et,scaleX:s,scaleY:a}}function xt(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(i,s){var a=[],l=[];return i=e(i),s=e(s),function(e,r,o,i,s,a){if(e!==o||r!==i){var l=s.push("translate(",null,t,null,n);a.push({i:l-4,x:wt(e,o)},{i:l-2,x:wt(r,i)})}else(o||i)&&s.push("translate("+o+t+i+n)}(i.translateX,i.translateY,s.translateX,s.translateY,a,l),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(o(n)+"rotate(",null,r)-2,x:wt(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}(i.rotate,s.rotate,a,l),function(e,t,n,i){e!==t?i.push({i:n.push(o(n)+"skewX(",null,r)-2,x:wt(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}(i.skewX,s.skewX,a,l),function(e,t,n,r,i,s){if(e!==n||t!==r){var a=i.push(o(i)+"scale(",null,",",null,")");s.push({i:a-4,x:wt(e,n)},{i:a-2,x:wt(t,r)})}else 1===n&&1===r||i.push(o(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,s.scaleX,s.scaleY,a,l),i=s=null,function(e){for(var t,n=-1,r=l.length;++n<r;)a[(t=l[n]).i]=t.x(e);return a.join("")}}}var _t=xt((function(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?kt:Ct(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Nt=xt((function(e){return null==e?kt:(St||(St=document.createElementNS("http://www.w3.org/2000/svg","g")),St.setAttribute("transform",e),(e=St.transform.baseVal.consolidate())?Ct((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):kt)}),", ",")",")");function Tt(e,t){var n,r;return function(){var o=yt(this,e),i=o.tween;if(i!==n)for(var s=0,a=(r=n=i).length;s<a;++s)if(r[s].name===t){(r=r.slice()).splice(s,1);break}o.tween=r}}function At(e,t,n){var r,o;if("function"!==typeof n)throw new Error;return function(){var i=yt(this,e),s=i.tween;if(s!==r){o=(r=s).slice();for(var a={name:t,value:n},l=0,c=o.length;l<c;++l)if(o[l].name===t){o[l]=a;break}l===c&&o.push(a)}i.tween=o}}function It(e,t,n){var r=e._id;return e.each((function(){var e=yt(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return vt(e,r).value[t]}}function Dt(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Mt(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Pt(){}var Ot=.7,Lt=1/Ot,Rt="\\s*([+-]?\\d+)\\s*",zt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vt=/^#([0-9a-f]{3,8})$/,jt=new RegExp("^rgb\\(".concat(Rt,",").concat(Rt,",").concat(Rt,"\\)$")),Bt=new RegExp("^rgb\\(".concat(Ft,",").concat(Ft,",").concat(Ft,"\\)$")),Ut=new RegExp("^rgba\\(".concat(Rt,",").concat(Rt,",").concat(Rt,",").concat(zt,"\\)$")),Ht=new RegExp("^rgba\\(".concat(Ft,",").concat(Ft,",").concat(Ft,",").concat(zt,"\\)$")),qt=new RegExp("^hsl\\(".concat(zt,",").concat(Ft,",").concat(Ft,"\\)$")),Kt=new RegExp("^hsla\\(".concat(zt,",").concat(Ft,",").concat(Ft,",").concat(zt,"\\)$")),Wt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Gt(){return this.rgb().formatHex()}function Yt(){return this.rgb().formatRgb()}function Xt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Vt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Qt(t):3===n?new Jt(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Zt(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Zt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=jt.exec(e))?new Jt(t[1],t[2],t[3],1):(t=Bt.exec(e))?new Jt(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Ut.exec(e))?Zt(t[1],t[2],t[3],t[4]):(t=Ht.exec(e))?Zt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=qt.exec(e))?sn(t[1],t[2]/100,t[3]/100,1):(t=Kt.exec(e))?sn(t[1],t[2]/100,t[3]/100,t[4]):Wt.hasOwnProperty(e)?Qt(Wt[e]):"transparent"===e?new Jt(NaN,NaN,NaN,0):null}function Qt(e){return new Jt(e>>16&255,e>>8&255,255&e,1)}function Zt(e,t,n,r){return r<=0&&(e=t=n=NaN),new Jt(e,t,n,r)}function $t(e,t,n,r){return 1===arguments.length?((o=e)instanceof Pt||(o=Xt(o)),o?new Jt((o=o.rgb()).r,o.g,o.b,o.opacity):new Jt):new Jt(e,t,n,null==r?1:r);var o}function Jt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function en(){return"#".concat(on(this.r)).concat(on(this.g)).concat(on(this.b))}function tn(){const e=nn(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(rn(this.r),", ").concat(rn(this.g),", ").concat(rn(this.b)).concat(1===e?")":", ".concat(e,")"))}function nn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function rn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function on(e){return((e=rn(e))<16?"0":"")+e.toString(16)}function sn(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ln(e,t,n,r)}function an(e){if(e instanceof ln)return new ln(e.h,e.s,e.l,e.opacity);if(e instanceof Pt||(e=Xt(e)),!e)return new ln;if(e instanceof ln)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,a=i-o,l=(i+o)/2;return a?(s=t===i?(n-r)/a+6*(n<r):n===i?(r-t)/a+2:(t-n)/a+4,a/=l<.5?i+o:2-i-o,s*=60):a=l>0&&l<1?0:s,new ln(s,a,l,e.opacity)}function ln(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function cn(e){return(e=(e||0)%360)<0?e+360:e}function un(e){return Math.max(0,Math.min(1,e||0))}function dn(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function hn(e,t,n,r,o){var i=e*e,s=i*e;return((1-3*e+3*i-s)*t+(4-6*i+3*s)*n+(1+3*e+3*i-3*s)*r+s*o)/6}Dt(Pt,Xt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Gt,formatHex:Gt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return an(this).formatHsl()},formatRgb:Yt,toString:Yt}),Dt(Jt,$t,Mt(Pt,{brighter(e){return e=null==e?Lt:Math.pow(Lt,e),new Jt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Ot:Math.pow(Ot,e),new Jt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Jt(rn(this.r),rn(this.g),rn(this.b),nn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:en,formatHex:en,formatHex8:function(){return"#".concat(on(this.r)).concat(on(this.g)).concat(on(this.b)).concat(on(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:tn,toString:tn})),Dt(ln,(function(e,t,n,r){return 1===arguments.length?an(e):new ln(e,t,n,null==r?1:r)}),Mt(Pt,{brighter(e){return e=null==e?Lt:Math.pow(Lt,e),new ln(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Ot:Math.pow(Ot,e),new ln(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Jt(dn(e>=240?e-240:e+120,o,r),dn(e,o,r),dn(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new ln(cn(this.h),un(this.s),un(this.l),nn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=nn(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(cn(this.h),", ").concat(100*un(this.s),"%, ").concat(100*un(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const fn=e=>()=>e;function pn(e,t){return function(n){return e+n*t}}function gn(e){return 1===(e=+e)?mn:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):fn(isNaN(t)?n:t)}}function mn(e,t){var n=t-e;return n?pn(e,n):fn(isNaN(e)?t:e)}const yn=function e(t){var n=gn(t);function r(e,t){var r=n((e=$t(e)).r,(t=$t(t)).r),o=n(e.g,t.g),i=n(e.b,t.b),s=mn(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=i(t),e.opacity=s(t),e+""}}return r.gamma=e,r}(1);function vn(e){return function(t){var n,r,o=t.length,i=new Array(o),s=new Array(o),a=new Array(o);for(n=0;n<o;++n)r=$t(t[n]),i[n]=r.r||0,s[n]=r.g||0,a[n]=r.b||0;return i=e(i),s=e(s),a=e(a),r.opacity=1,function(e){return r.r=i(e),r.g=s(e),r.b=a(e),r+""}}}vn((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],i=e[r+1],s=r>0?e[r-1]:2*o-i,a=r<t-1?e[r+2]:2*i-o;return hn((n-r/t)*t,s,o,i,a)}})),vn((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],i=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return hn((n-r/t)*t,o,i,s,a)}}));var bn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wn=new RegExp(bn.source,"g");function Sn(e,t){var n,r,o,i=bn.lastIndex=wn.lastIndex=0,s=-1,a=[],l=[];for(e+="",t+="";(n=bn.exec(e))&&(r=wn.exec(t));)(o=r.index)>i&&(o=t.slice(i,o),a[s]?a[s]+=o:a[++s]=o),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:wt(n,r)})),i=wn.lastIndex;return i<t.length&&(o=t.slice(i),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)a[(n=l[r]).i]=n.x(e);return a.join("")})}function En(e,t){var n;return("number"===typeof t?wt:t instanceof Xt?yn:(n=Xt(t))?(t=n,yn):Sn)(e,t)}function kn(e){return function(){this.removeAttribute(e)}}function Cn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xn(e,t,n){var r,o,i=n+"";return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function _n(e,t,n){var r,o,i=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function Nn(e,t,n){var r,o,i;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttribute(e))===(a=l+"")?null:s===r&&a===o?i:(o=a,i=t(r=s,l));this.removeAttribute(e)}}function Tn(e,t,n){var r,o,i;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttributeNS(e.space,e.local))===(a=l+"")?null:s===r&&a===o?i:(o=a,i=t(r=s,l));this.removeAttributeNS(e.space,e.local)}}function An(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,o)),n}return o._value=t,o}function In(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,o)),n}return o._value=t,o}function Dn(e,t){return function(){mt(this,e).delay=+t.apply(this,arguments)}}function Mn(e,t){return t=+t,function(){mt(this,e).delay=t}}function Pn(e,t){return function(){yt(this,e).duration=+t.apply(this,arguments)}}function On(e,t){return t=+t,function(){yt(this,e).duration=t}}var Ln=De.prototype.constructor;function Rn(e){return function(){this.style.removeProperty(e)}}var zn=0;function Fn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Vn(){return++zn}var jn=De.prototype;Fn.prototype=function(e){return De().transition(e)}.prototype={constructor:Fn,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=w(e));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var a,l,c=r[s],u=c.length,d=i[s]=new Array(u),h=0;h<u;++h)(a=c[h])&&(l=e.call(a,a.__data__,h,c))&&("__data__"in a&&(l.__data__=a.__data__),d[h]=l,gt(d[h],t,n,h,d,vt(a,n)));return new Fn(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=E(e));for(var r=this._groups,o=r.length,i=[],s=[],a=0;a<o;++a)for(var l,c=r[a],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var h,f=e.call(l,l.__data__,d,c),p=vt(l,n),g=0,m=f.length;g<m;++g)(h=f[g])&&gt(h,t,n,g,f,p);i.push(f),s.push(l)}return new Fn(i,s,t,n)},selectChild:jn.selectChild,selectChildren:jn.selectChildren,filter:function(e){"function"!==typeof e&&(e=C(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,s=t[o],a=s.length,l=r[o]=[],c=0;c<a;++c)(i=s[c])&&e.call(i,i.__data__,c,s)&&l.push(i);return new Fn(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),s=new Array(r),a=0;a<i;++a)for(var l,c=t[a],u=n[a],d=c.length,h=s[a]=new Array(d),f=0;f<d;++f)(l=c[f]||u[f])&&(h[f]=l);for(;a<r;++a)s[a]=t[a];return new Fn(s,this._parents,this._name,this._id)},selection:function(){return new Ln(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Vn(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s,a=r[i],l=a.length,c=0;c<l;++c)if(s=a[c]){var u=vt(s,t);gt(s,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Fn(r,this._parents,e,n)},call:jn.call,nodes:jn.nodes,node:jn.node,size:jn.size,empty:jn.empty,each:jn.each,on:function(e,t){var n=this._id;return arguments.length<2?vt(this.node(),n).on.on(e):this.each(function(e,t,n){var r,o,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?mt:yt;return function(){var s=i(this,e),a=s.on;a!==r&&(o=(r=a).copy()).on(t,n),s.on=o}}(n,e,t))},attr:function(e,t){var n=V(e),r="transform"===n?Nt:En;return this.attrTween(e,"function"===typeof t?(n.local?Tn:Nn)(n,r,It(this,"attr."+e,t)):null==t?(n.local?Cn:kn)(n):(n.local?_n:xn)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=V(e);return this.tween(n,(r.local?An:In)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?_t:En;return null==t?this.styleTween(e,function(e,t){var n,r,o;return function(){var i=Q(this,e),s=(this.style.removeProperty(e),Q(this,e));return i===s?null:i===n&&s===r?o:o=t(n=i,r=s)}}(e,r)).on("end.style."+e,Rn(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,o,i;return function(){var s=Q(this,e),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(e),l=a=Q(this,e)),s===l?null:s===r&&l===o?i:(o=l,i=t(r=s,a))}}(e,r,It(this,"style."+e,t))).each(function(e,t){var n,r,o,i,s="style."+t,a="end."+s;return function(){var l=yt(this,e),c=l.on,u=null==l.value[s]?i||(i=Rn(t)):void 0;c===n&&o===u||(r=(n=c).copy()).on(a,o=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,o,i=n+"";return function(){var s=Q(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,o;function i(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,i,n)),r}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(It(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=vt(this.node(),n).tween,i=0,s=o.length;i<s;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((null==t?Tt:At)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Dn:Mn)(t,e)):vt(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Pn:On)(t,e)):vt(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){yt(this,e).ease=t}}(t,e)):vt(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;yt(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise((function(i,s){var a={value:s},l={value:function(){0===--o&&i()}};n.each((function(){var n=yt(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),n.on=t})),0===o&&i()}))},[Symbol.iterator]:jn[Symbol.iterator]};var Bn={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Un(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}De.prototype.interrupt=function(e){return this.each((function(){bt(this,e)}))},De.prototype.transition=function(e){var t,n;e instanceof Fn?(t=e._id,e=e._name):(t=Vn(),(n=Bn).time=it(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s,a=r[i],l=a.length,c=0;c<l;++c)(s=a[c])&&gt(s,e,t,c,a,n||Un(s,t));return new Fn(r,this._parents,e,t)};const Hn=e=>()=>e;function qn(e,t){let{sourceEvent:n,target:r,transform:o,dispatch:i}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Kn(e,t,n){this.k=e,this.x=t,this.y=n}Kn.prototype={constructor:Kn,scale:function(e){return 1===e?this:new Kn(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Kn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Wn=new Kn(1,0,0);function Gn(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Wn;return e.__zoom}function Yn(e){e.stopImmediatePropagation()}function Xn(e){e.preventDefault(),e.stopImmediatePropagation()}function Qn(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function Zn(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function $n(){return this.__zoom||Wn}function Jn(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function er(){return navigator.maxTouchPoints||"ontouchstart"in this}function tr(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function nr(){var e,t,n,r=Qn,o=Zn,i=tr,s=Jn,a=er,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=Ye,h=v("start","zoom","end"),f=0,p=10;function g(e){e.property("__zoom",$n).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",x).filter(a).on("touchstart.zoom",_).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",T).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new Kn(t,e.x,e.y)}function y(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new Kn(e.k,r,o)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,t,n,r){e.on("start.zoom",(function(){S(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){S(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,i=arguments,s=S(e,i).event(r),a=o.apply(e,i),l=null==n?b(a):"function"===typeof n?n.apply(e,i):n,c=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),u=e.__zoom,h="function"===typeof t?t.apply(e,i):t,f=d(u.invert(l).concat(c/u.k),h.invert(l).concat(c/h.k));return function(e){if(1===e)e=h;else{var t=f(e),n=c/t[2];e=new Kn(n,l[0]-t[0]*n,l[1]-t[1]*n)}s.zoom(null,e)}}))}function S(e,t,n){return!n&&e.__zooming||new E(e,t)}function E(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function k(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(r.apply(this,arguments)){var a=S(this,n).event(e),u=this.__zoom,d=Math.max(l[0],Math.min(l[1],u.k*Math.pow(2,s.apply(this,arguments)))),h=Pe(e);if(a.wheel)a.mouse[0][0]===h[0]&&a.mouse[0][1]===h[1]||(a.mouse[1]=u.invert(a.mouse[0]=h)),clearTimeout(a.wheel);else{if(u.k===d)return;a.mouse=[h,u.invert(h)],bt(this),a.start()}Xn(e),a.wheel=setTimeout((function(){a.wheel=null,a.end()}),150),a.zoom("mouse",i(y(m(u,d),a.mouse[0],a.mouse[1]),a.extent,c))}}function C(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),s=1;s<t;s++)o[s-1]=arguments[s];if(!n&&r.apply(this,arguments)){var a=e.currentTarget,l=S(this,o,!0).event(e),u=Me(e.view).on("mousemove.zoom",(function(e){if(Xn(e),!l.moved){var t=e.clientX-h,n=e.clientY-p;l.moved=t*t+n*n>f}l.event(e).zoom("mouse",i(y(l.that.__zoom,l.mouse[0]=Pe(e,a),l.mouse[1]),l.extent,c))}),!0).on("mouseup.zoom",(function(e){u.on("mousemove.zoom mouseup.zoom",null),Ve(e.view,l.moved),Xn(e),l.event(e).end()}),!0),d=Pe(e,a),h=e.clientX,p=e.clientY;Fe(e.view),Yn(e),l.mouse=[d,this.__zoom.invert(d)],bt(this),l.start()}}function x(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(r.apply(this,arguments)){var a=this.__zoom,l=Pe(e.changedTouches?e.changedTouches[0]:e,this),d=a.invert(l),h=a.k*(e.shiftKey?.5:2),f=i(y(m(a,h),l,d),o.apply(this,n),c);Xn(e),u>0?Me(this).transition().duration(u).call(w,f,l,e):Me(this).call(g.transform,f,l,e)}}function _(n){for(var o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];if(r.apply(this,arguments)){var a,l,c,u,d=n.touches,h=d.length,f=S(this,i,n.changedTouches.length===h).event(n);for(Yn(n),l=0;l<h;++l)u=[u=Pe(c=d[l],this),this.__zoom.invert(u),c.identifier],f.touch0?f.touch1||f.touch0[2]===u[2]||(f.touch1=u,f.taps=0):(f.touch0=u,a=!0,f.taps=1+!!e);e&&(e=clearTimeout(e)),a&&(f.taps<2&&(t=u[0],e=setTimeout((function(){e=null}),500)),bt(this),f.start())}}function N(e){if(this.__zooming){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o,s,a,l,u=S(this,n).event(e),d=e.changedTouches,h=d.length;for(Xn(e),o=0;o<h;++o)a=Pe(s=d[o],this),u.touch0&&u.touch0[2]===s.identifier?u.touch0[0]=a:u.touch1&&u.touch1[2]===s.identifier&&(u.touch1[0]=a);if(s=u.that.__zoom,u.touch1){var f=u.touch0[0],p=u.touch0[1],g=u.touch1[0],v=u.touch1[1],b=(b=g[0]-f[0])*b+(b=g[1]-f[1])*b,w=(w=v[0]-p[0])*w+(w=v[1]-p[1])*w;s=m(s,Math.sqrt(b/w)),a=[(f[0]+g[0])/2,(f[1]+g[1])/2],l=[(p[0]+v[0])/2,(p[1]+v[1])/2]}else{if(!u.touch0)return;a=u.touch0[0],l=u.touch0[1]}u.zoom("touch",i(y(s,a,l),u.extent,c))}}function T(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];if(this.__zooming){var s,a,l=S(this,o).event(e),c=e.changedTouches,u=c.length;for(Yn(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),s=0;s<u;++s)a=c[s],l.touch0&&l.touch0[2]===a.identifier?delete l.touch0:l.touch1&&l.touch1[2]===a.identifier&&delete l.touch1;if(l.touch1&&!l.touch0&&(l.touch0=l.touch1,delete l.touch1),l.touch0)l.touch0[1]=this.__zoom.invert(l.touch0[0]);else if(l.end(),2===l.taps&&(a=Pe(a,this),Math.hypot(t[0]-a[0],t[1]-a[1])<p)){var d=Me(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return g.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",$n),e!==o?w(e,t,n,r):o.interrupt().each((function(){S(this,arguments).event(r).start().zoom(null,"function"===typeof t?t.apply(this,arguments):t).end()}))},g.scaleBy=function(e,t,n,r){g.scaleTo(e,(function(){return this.__zoom.k*("function"===typeof t?t.apply(this,arguments):t)}),n,r)},g.scaleTo=function(e,t,n,r){g.transform(e,(function(){var e=o.apply(this,arguments),r=this.__zoom,s=null==n?b(e):"function"===typeof n?n.apply(this,arguments):n,a=r.invert(s),l="function"===typeof t?t.apply(this,arguments):t;return i(y(m(r,l),s,a),e,c)}),n,r)},g.translateBy=function(e,t,n,r){g.transform(e,(function(){return i(this.__zoom.translate("function"===typeof t?t.apply(this,arguments):t,"function"===typeof n?n.apply(this,arguments):n),o.apply(this,arguments),c)}),null,r)},g.translateTo=function(e,t,n,r,s){g.transform(e,(function(){var e=o.apply(this,arguments),s=this.__zoom,a=null==r?b(e):"function"===typeof r?r.apply(this,arguments):r;return i(Wn.translate(a[0],a[1]).scale(s.k).translate("function"===typeof t?-t.apply(this,arguments):-t,"function"===typeof n?-n.apply(this,arguments):-n),e,c)}),r,s)},E.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Me(this.that).datum();h.call(e,this.that,new qn(e,{sourceEvent:this.sourceEvent,target:g,type:e,transform:this.that.__zoom,dispatch:h}),t)}},g.wheelDelta=function(e){return arguments.length?(s="function"===typeof e?e:Hn(+e),g):s},g.filter=function(e){return arguments.length?(r="function"===typeof e?e:Hn(!!e),g):r},g.touchable=function(e){return arguments.length?(a="function"===typeof e?e:Hn(!!e),g):a},g.extent=function(e){return arguments.length?(o="function"===typeof e?e:Hn([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),g):o},g.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],g):[l[0],l[1]]},g.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],g):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},g.constrain=function(e){return arguments.length?(i=e,g):i},g.duration=function(e){return arguments.length?(u=+e,g):u},g.interpolate=function(e){return arguments.length?(d=e,g):d},g.on=function(){var e=h.on.apply(h,arguments);return e===h?g:e},g.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,g):Math.sqrt(f)},g.tapDistance=function(e){return arguments.length?(p=+e,g):p},g}Gn.prototype=Kn.prototype;const rr=["inProgress"],or=()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",ir=e=>'Node type "'.concat(e,'" not found. Using fallback type "default".'),sr=()=>"The React Flow parent container needs a width and a height to render the graph.",ar=()=>"Only child nodes can use a parent extent.",lr=()=>"Can't create edge. An edge needs a source and a target.",cr=e=>'Marker type "'.concat(e,"\" doesn't exist."),ur=(e,t)=>{let{id:n,sourceHandle:r,targetHandle:o}=t;return"Couldn't create edge for ".concat(e,' handle id: "').concat("source"===e?r:o,'", edge id: ').concat(n,".")},dr=()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",hr=e=>'Edge type "'.concat(e,'" not found. Using fallback type "default".'),fr=e=>'Node with id "'.concat(e,'" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.'),pr=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],gr=["Enter"," ","Escape"];var mr,yr,vr;!function(e){e.Strict="strict",e.Loose="loose"}(mr||(mr={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(yr||(yr={})),function(e){e.Partial="partial",e.Full="full"}(vr||(vr={}));const br={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var wr,Sr,Er;!function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(wr||(wr={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(Sr||(Sr={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(Er||(Er={}));const kr={[Er.Left]:Er.Right,[Er.Right]:Er.Left,[Er.Top]:Er.Bottom,[Er.Bottom]:Er.Top};function Cr(e){return null===e?null:e?"valid":"invalid"}const xr=e=>"id"in e&&"source"in e&&"target"in e,_r=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Nr=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];const{width:r,height:o}=to(e),i=null!==(t=e.origin)&&void 0!==t?t:n,s=r*i[0],a=o*i[1];return{x:e.position.x-s,y:e.position.y-a}},Tr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach((e=>{if(void 0===t.filter||t.filter(e)){const t=Hr(e);n=Vr(n,t)}})),Br(n)},Ar=function(e,t){let[n,r,o]=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=c(c({},Qr(t,[n,r,o])),{},{width:t.width/o,height:t.height/o}),l=[];for(const c of e.values()){var u,d,h,f,p,g;const{measured:e,selectable:t=!0,hidden:n=!1}=c;if(s&&!t||n)continue;const r=null!==(u=null!==(d=null!==(h=e.width)&&void 0!==h?h:c.width)&&void 0!==d?d:c.initialWidth)&&void 0!==u?u:null,o=null!==(f=null!==(p=null!==(g=e.height)&&void 0!==g?g:c.height)&&void 0!==p?p:c.initialHeight)&&void 0!==f?f:null,m=Kr(a,Ur(c)),y=(null!==r&&void 0!==r?r:0)*(null!==o&&void 0!==o?o:0),v=i&&m>0;(!c.internals.handleBounds||v||m>=y||c.dragging)&&l.push(c)}return l};function Ir(e,t){const n=new Map,r=null!==t&&void 0!==t&&t.nodes?new Set(t.nodes.map((e=>e.id))):null;return e.forEach((e=>{!(e.measured.width&&e.measured.height&&((null===t||void 0===t?void 0:t.includeHiddenNodes)||!e.hidden))||r&&!r.has(e.id)||n.set(e.id,e)})),n}async function Dr(e,t){var n,r,o;let{nodes:i,width:s,height:a,panZoom:l,minZoom:c,maxZoom:u}=e;if(0===i.size)return Promise.resolve(!1);const d=Tr(i),h=$r(d,s,a,null!==(n=null===t||void 0===t?void 0:t.minZoom)&&void 0!==n?n:c,null!==(r=null===t||void 0===t?void 0:t.maxZoom)&&void 0!==r?r:u,null!==(o=null===t||void 0===t?void 0:t.padding)&&void 0!==o?o:.1);return await l.setViewport(h,{duration:null===t||void 0===t?void 0:t.duration}),Promise.resolve(!0)}function Mr(e){var t;let{nodeId:n,nextPosition:r,nodeLookup:o,nodeOrigin:i=[0,0],nodeExtent:s,onError:a}=e;const l=o.get(n),c=l.parentId?o.get(l.parentId):void 0,{x:u,y:d}=c?c.internals.positionAbsolute:{x:0,y:0},h=null!==(t=l.origin)&&void 0!==t?t:i;let f=s;if("parent"!==l.extent||l.expandParent)c&&eo(l.extent)&&(f=[[l.extent[0][0]+u,l.extent[0][1]+d],[l.extent[1][0]+u,l.extent[1][1]+d]]);else if(c){const e=c.measured.width,t=c.measured.height;e&&t&&(f=[[u,d],[u+e,d+t]])}else null===a||void 0===a||a("005",ar());const p=eo(f)?Lr(r,f,l.measured):r;return{position:{x:p.x-u+l.measured.width*h[0],y:p.y-d+l.measured.height*h[1]},positionAbsolute:p}}async function Pr(e){let{nodesToRemove:t=[],edgesToRemove:n=[],nodes:r,edges:o,onBeforeDelete:i}=e;const s=new Set(t.map((e=>e.id))),a=[];for(const f of r){if(!1===f.deletable)continue;const e=s.has(f.id),t=!e&&f.parentId&&a.find((e=>e.id===f.parentId));(e||t)&&a.push(f)}const l=new Set(n.map((e=>e.id))),c=o.filter((e=>!1!==e.deletable)),u=((e,t)=>{const n=new Set;return e.forEach((e=>{n.add(e.id)})),t.filter((e=>n.has(e.source)||n.has(e.target)))})(a,c),d=u;for(const f of c){l.has(f.id)&&!d.find((e=>e.id===f.id))&&d.push(f)}if(!i)return{edges:d,nodes:a};const h=await i({nodes:a,edges:d});return"boolean"===typeof h?h?{edges:d,nodes:a}:{edges:[],nodes:[]}:h}const Or=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)},Lr=function(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},r=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return{x:Or(n.x,r[0][0],r[1][0]-(null!==(e=null===o||void 0===o?void 0:o.width)&&void 0!==e?e:0)),y:Or(n.y,r[0][1],r[1][1]-(null!==(t=null===o||void 0===o?void 0:o.height)&&void 0!==t?t:0))}};function Rr(e,t,n){const{width:r,height:o}=to(n),{x:i,y:s}=n.internals.positionAbsolute;return Lr(e,[[i,s],[i+r,s+o]],t)}const zr=(e,t,n)=>e<t?Or(Math.abs(e-t),1,t)/t:e>n?-Or(Math.abs(e-n),1,t)/t:0,Fr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40;return[zr(e.x,r,t.width-r)*n,zr(e.y,r,t.height-r)*n]},Vr=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),jr=e=>{let{x:t,y:n,width:r,height:o}=e;return{x:t,y:n,x2:t+r,y2:n+o}},Br=e=>{let{x:t,y:n,x2:r,y2:o}=e;return{x:t,y:n,width:r-t,height:o-n}},Ur=function(e){var t,n,r,o,i,s,a,l;let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];const{x:u,y:d}=_r(e)?e.internals.positionAbsolute:Nr(e,c);return{x:u,y:d,width:null!==(t=null!==(n=null!==(r=null===(o=e.measured)||void 0===o?void 0:o.width)&&void 0!==r?r:e.width)&&void 0!==n?n:e.initialWidth)&&void 0!==t?t:0,height:null!==(i=null!==(s=null!==(a=null===(l=e.measured)||void 0===l?void 0:l.height)&&void 0!==a?a:e.height)&&void 0!==s?s:e.initialHeight)&&void 0!==i?i:0}},Hr=function(e){var t,n,r,o,i,s,a,l;let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];const{x:u,y:d}=_r(e)?e.internals.positionAbsolute:Nr(e,c);return{x:u,y:d,x2:u+(null!==(t=null!==(n=null!==(r=null===(o=e.measured)||void 0===o?void 0:o.width)&&void 0!==r?r:e.width)&&void 0!==n?n:e.initialWidth)&&void 0!==t?t:0),y2:d+(null!==(i=null!==(s=null!==(a=null===(l=e.measured)||void 0===l?void 0:l.height)&&void 0!==a?a:e.height)&&void 0!==s?s:e.initialHeight)&&void 0!==i?i:0)}},qr=(e,t)=>Br(Vr(jr(e),jr(t))),Kr=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Wr=e=>Gr(e.width)&&Gr(e.height)&&Gr(e.x)&&Gr(e.y),Gr=e=>!isNaN(e)&&isFinite(e),Yr=(e,t)=>{0},Xr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1];return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}},Qr=function(e,t){let{x:n,y:r}=e,[o,i,s]=t;const a={x:(n-o)/s,y:(r-i)/s};return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?Xr(a,arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1]):a},Zr=(e,t)=>{let{x:n,y:r}=e,[o,i,s]=t;return{x:n*s+o,y:r*s+i}},$r=(e,t,n,r,o,i)=>{const s=t/(e.width*(1+i)),a=n/(e.height*(1+i)),l=Math.min(s,a),c=Or(l,r,o);return{x:t/2-(e.x+e.width/2)*c,y:n/2-(e.y+e.height/2)*c,zoom:c}},Jr=()=>{var e;return"undefined"!==typeof navigator&&(null===(e=navigator)||void 0===e||null===(e=e.userAgent)||void 0===e?void 0:e.indexOf("Mac"))>=0};function eo(e){return void 0!==e&&"parent"!==e}function to(e){var t,n,r,o,i,s,a,l;return{width:null!==(t=null!==(n=null!==(r=null===(o=e.measured)||void 0===o?void 0:o.width)&&void 0!==r?r:e.width)&&void 0!==n?n:e.initialWidth)&&void 0!==t?t:0,height:null!==(i=null!==(s=null!==(a=null===(l=e.measured)||void 0===l?void 0:l.height)&&void 0!==a?a:e.height)&&void 0!==s?s:e.initialHeight)&&void 0!==i?i:0}}function no(e){var t,n,r,o,i,s;return void 0!==(null!==(t=null!==(n=null===(r=e.measured)||void 0===r?void 0:r.width)&&void 0!==n?n:e.width)&&void 0!==t?t:e.initialWidth)&&void 0!==(null!==(o=null!==(i=null===(s=e.measured)||void 0===s?void 0:s.height)&&void 0!==i?i:e.height)&&void 0!==o?o:e.initialHeight)}function ro(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:0,height:0},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;const i=c({},e),s=r.get(n);if(s){var a,l;const e=s.origin||o;i.x+=s.internals.positionAbsolute.x-(null!==(a=t.width)&&void 0!==a?a:0)*e[0],i.y+=s.internals.positionAbsolute.y-(null!==(l=t.height)&&void 0!==l?l:0)*e[1]}return i}function oo(e,t){var n,r;let{snapGrid:o=[0,0],snapToGrid:i=!1,transform:s,containerBounds:a}=t;const{x:l,y:u}=uo(e),d=Qr({x:l-(null!==(n=null===a||void 0===a?void 0:a.left)&&void 0!==n?n:0),y:u-(null!==(r=null===a||void 0===a?void 0:a.top)&&void 0!==r?r:0)},s),{x:h,y:f}=i?Xr(d,o):d;return c({xSnapped:h,ySnapped:f},d)}const io=e=>({width:e.offsetWidth,height:e.offsetHeight}),so=e=>{var t,n;return(null===(t=e.getRootNode)||void 0===t?void 0:t.call(e))||(null===(n=window)||void 0===n?void 0:n.document)},ao=["INPUT","SELECT","TEXTAREA"];function lo(e){var t,n;const r=(null===(t=e.composedPath)||void 0===t||null===(t=t.call(e))||void 0===t?void 0:t[0])||e.target;return ao.includes(null===r||void 0===r?void 0:r.nodeName)||(null===r||void 0===r||null===(n=r.hasAttribute)||void 0===n?void 0:n.call(r,"contenteditable"))||!(null===r||void 0===r||!r.closest(".nokey"))}const co=e=>"clientX"in e,uo=(e,t)=>{var n,r,o,i;const s=co(e),a=s?e.clientX:null===(n=e.touches)||void 0===n?void 0:n[0].clientX,l=s?e.clientY:null===(r=e.touches)||void 0===r?void 0:r[0].clientY;return{x:a-(null!==(o=null===t||void 0===t?void 0:t.left)&&void 0!==o?o:0),y:l-(null!==(i=null===t||void 0===t?void 0:t.top)&&void 0!==i?i:0)}},ho=(e,t,n,r,o)=>{const i=t.querySelectorAll(".".concat(e));return i&&i.length?Array.from(i).map((t=>{const i=t.getBoundingClientRect();return c({id:t.getAttribute("data-handleid"),type:e,nodeId:o,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/r,y:(i.top-n.top)/r},io(t))})):null};function fo(e){let{sourceX:t,sourceY:n,targetX:r,targetY:o,sourceControlX:i,sourceControlY:s,targetControlX:a,targetControlY:l}=e;const c=.125*t+.375*i+.375*a+.125*r,u=.125*n+.375*s+.375*l+.125*o;return[c,u,Math.abs(c-t),Math.abs(u-n)]}function po(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function go(e){let{pos:t,x1:n,y1:r,x2:o,y2:i,c:s}=e;switch(t){case Er.Left:return[n-po(n-o,s),r];case Er.Right:return[n+po(o-n,s),r];case Er.Top:return[n,r-po(r-i,s)];case Er.Bottom:return[n,r+po(i-r,s)]}}function mo(e){let{sourceX:t,sourceY:n,sourcePosition:r=Er.Bottom,targetX:o,targetY:i,targetPosition:s=Er.Top,curvature:a=.25}=e;const[l,c]=go({pos:r,x1:t,y1:n,x2:o,y2:i,c:a}),[u,d]=go({pos:s,x1:o,y1:i,x2:t,y2:n,c:a}),[h,f,p,g]=fo({sourceX:t,sourceY:n,targetX:o,targetY:i,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return["M".concat(t,",").concat(n," C").concat(l,",").concat(c," ").concat(u,",").concat(d," ").concat(o,",").concat(i),h,f,p,g]}function yo(e){let{sourceX:t,sourceY:n,targetX:r,targetY:o}=e;const i=Math.abs(r-t)/2,s=r<t?r+i:r-i,a=Math.abs(o-n)/2;return[s,o<n?o+a:o-a,i,a]}function vo(e){let{sourceNode:t,targetNode:n,width:r,height:o,transform:i}=e;const s=Vr(Hr(t),Hr(n));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const a={x:-i[0]/i[2],y:-i[1]/i[2],width:r/i[2],height:o/i[2]};return Kr(a,Br(s))>0}const bo=e=>{let{source:t,sourceHandle:n,target:r,targetHandle:o}=e;return"xy-edge__".concat(t).concat(n||"","-").concat(r).concat(o||"")},wo=(e,t)=>{if(!e.source||!e.target)return Yr(0,lr()),t;let n;return n=xr(e)?c({},e):c(c({},e),{},{id:bo(e)}),((e,t)=>t.some((t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle))))(n,t)?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n))};function So(e){let{sourceX:t,sourceY:n,targetX:r,targetY:o}=e;const[i,s,a,l]=yo({sourceX:t,sourceY:n,targetX:r,targetY:o});return["M ".concat(t,",").concat(n,"L ").concat(r,",").concat(o),i,s,a,l]}const Eo={[Er.Left]:{x:-1,y:0},[Er.Right]:{x:1,y:0},[Er.Top]:{x:0,y:-1},[Er.Bottom]:{x:0,y:1}},ko=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Co(e){let{source:t,sourcePosition:n=Er.Bottom,target:r,targetPosition:o=Er.Top,center:i,offset:s}=e;const a=Eo[n],l=Eo[o],c={x:t.x+a.x*s,y:t.y+a.y*s},u={x:r.x+l.x*s,y:r.y+l.y*s},d=(e=>{let{source:t,sourcePosition:n=Er.Bottom,target:r}=e;return n===Er.Left||n===Er.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1}})({source:c,sourcePosition:n,target:u}),h=0!==d.x?"x":"y",f=d[h];let p,g,m=[];const y={x:0,y:0},v={x:0,y:0},[b,w,S,E]=yo({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(a[h]*l[h]===-1){var k,C;p=null!==(k=i.x)&&void 0!==k?k:b,g=null!==(C=i.y)&&void 0!==C?C:w;const e=[{x:p,y:c.y},{x:p,y:u.y}],t=[{x:c.x,y:g},{x:u.x,y:g}];m=a[h]===f?"x"===h?e:t:"x"===h?t:e}else{const e=[{x:c.x,y:u.y}],i=[{x:u.x,y:c.y}];if(m="x"===h?a.x===f?i:e:a.y===f?e:i,n===o){const e=Math.abs(t[h]-r[h]);if(e<=s){const n=Math.min(s-1,s-e);a[h]===f?y[h]=(c[h]>t[h]?-1:1)*n:v[h]=(u[h]>r[h]?-1:1)*n}}if(n!==o){const t="x"===h?"y":"x",n=a[h]===l[t],r=c[t]>u[t],o=c[t]<u[t];(1===a[h]&&(!n&&r||n&&o)||1!==a[h]&&(!n&&o||n&&r))&&(m="x"===h?e:i)}const d={x:c.x+y.x,y:c.y+y.y},b={x:u.x+v.x,y:u.y+v.y};Math.max(Math.abs(d.x-m[0].x),Math.abs(b.x-m[0].x))>=Math.max(Math.abs(d.y-m[0].y),Math.abs(b.y-m[0].y))?(p=(d.x+b.x)/2,g=m[0].y):(p=m[0].x,g=(d.y+b.y)/2)}return[[t,{x:c.x+y.x,y:c.y+y.y},...m,{x:u.x+v.x,y:u.y+v.y},r],p,g,S,E]}function xo(e){let{sourceX:t,sourceY:n,sourcePosition:r=Er.Bottom,targetX:o,targetY:i,targetPosition:s=Er.Top,borderRadius:a=5,centerX:l,centerY:c,offset:u=20}=e;const[d,h,f,p,g]=Co({source:{x:t,y:n},sourcePosition:r,target:{x:o,y:i},targetPosition:s,center:{x:l,y:c},offset:u}),m=d.reduce(((e,t,n)=>{let r="";return r=n>0&&n<d.length-1?function(e,t,n,r){const o=Math.min(ko(e,t)/2,ko(t,n)/2,r),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return"L".concat(i," ").concat(s);if(e.y===s){const t=e.x<n.x?-1:1,r=e.y<n.y?1:-1;return"L ".concat(i+o*t,",").concat(s,"Q ").concat(i,",").concat(s," ").concat(i,",").concat(s+o*r)}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return"L ".concat(i,",").concat(s+o*l,"Q ").concat(i,",").concat(s," ").concat(i+o*a,",").concat(s)}(d[n-1],t,d[n+1],a):"".concat(0===n?"M":"L").concat(t.x," ").concat(t.y),e+=r}),"");return[m,h,f,p,g]}function _o(e){var t;return e&&!!(e.internals.handleBounds||null!==(t=e.handles)&&void 0!==t&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function No(e){if(!e)return null;const t=[],n=[];for(const i of e){var r,o;i.width=null!==(r=i.width)&&void 0!==r?r:1,i.height=null!==(o=i.height)&&void 0!==o?o:1,"source"===i.type?t.push(i):"target"===i.type&&n.push(i)}return{source:t,target:n}}function To(e,t){var n,r,o;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Er.Left,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=(null!==(n=null===t||void 0===t?void 0:t.x)&&void 0!==n?n:0)+e.internals.positionAbsolute.x,l=(null!==(r=null===t||void 0===t?void 0:t.y)&&void 0!==r?r:0)+e.internals.positionAbsolute.y,{width:c,height:u}=null!==t&&void 0!==t?t:to(e);if(s)return{x:a+c/2,y:l+u/2};switch(null!==(o=null===t||void 0===t?void 0:t.position)&&void 0!==o?o:i){case Er.Top:return{x:a+c/2,y:l};case Er.Right:return{x:a+c,y:l+u/2};case Er.Bottom:return{x:a+c/2,y:l+u};case Er.Left:return{x:a,y:l+u/2}}}function Ao(e,t){return e&&(t?e.find((e=>e.id===t)):e[0])||null}function Io(e,t){if(!e)return"";if("string"===typeof e)return e;const n=t?"".concat(t,"__"):"";return"".concat(n).concat(Object.keys(e).sort().map((t=>"".concat(t,"=").concat(e[t]))).join("&"))}const Do={nodeOrigin:[0,0],nodeExtent:pr,elevateNodesOnSelect:!0,defaults:{}},Mo=c(c({},Do),{},{checkEquality:!0});function Po(e,t){const n=c({},e);for(const r in t)void 0!==t[r]&&(n[r]=t[r]);return n}function Oo(e,t,n,r){const o=Po(Mo,r),i=new Map(t),s=null!==o&&void 0!==o&&o.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const h of e){var a;let e=i.get(h.id);if(o.checkEquality&&h===(null===(a=e)||void 0===a?void 0:a.internals.userNode))t.set(h.id,e);else{var l,u,d;const n=Nr(h,o.nodeOrigin),r=eo(h.extent)?h.extent:o.nodeExtent,i=Lr(n,r,to(h));e=c(c(c({},o.defaults),h),{},{measured:{width:null===(l=h.measured)||void 0===l?void 0:l.width,height:null===(u=h.measured)||void 0===u?void 0:u.height},internals:{positionAbsolute:i,handleBounds:h.measured?null===(d=e)||void 0===d?void 0:d.internals.handleBounds:void 0,z:Ro(h,s),userNode:h}}),t.set(h.id,e)}h.parentId&&Lo(e,t,n,r)}}function Lo(e,t,n,r){const{elevateNodesOnSelect:o,nodeOrigin:i,nodeExtent:s}=Po(Do,r),a=e.parentId,l=t.get(a);if(!l)return void console.warn("Parent node ".concat(a," not found. Please make sure that parent nodes are in front of their child nodes in the nodes array."));!function(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n);const u=o?1e3:0,{x:d,y:h,z:f}=function(e,t,n,r,o){var i;const{x:s,y:a}=t.internals.positionAbsolute,l=to(e),c=Nr(e,n),u=eo(e.extent)?Lr(c,e.extent,l):c;let d=Lr({x:s+u.x,y:a+u.y},r,l);"parent"===e.extent&&(d=Rr(d,l,t));const h=Ro(e,o),f=null!==(i=t.internals.z)&&void 0!==i?i:0;return{x:d.x,y:d.y,z:f>h?f:h}}(e,l,i,s,u),{positionAbsolute:p}=e.internals,g=d!==p.x||h!==p.y;(g||f!==e.internals.z)&&(e.internals=c(c({},e.internals),{},{positionAbsolute:g?{x:d,y:h}:p,z:f}))}function Ro(e,t){return(Gr(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function zo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0];const o=[],i=new Map;for(const l of e){var s,a;const e=t.get(l.parentId);if(!e)continue;const n=null!==(s=null===(a=i.get(l.parentId))||void 0===a?void 0:a.expandedRect)&&void 0!==s?s:Ur(e),r=qr(n,l.rect);i.set(l.parentId,{expandedRect:r,parent:e})}return i.size>0&&i.forEach(((t,i)=>{var s;let{expandedRect:a,parent:l}=t;const c=l.internals.positionAbsolute,u=to(l),d=null!==(s=l.origin)&&void 0!==s?s:r,h=a.x<c.x?Math.round(Math.abs(c.x-a.x)):0,f=a.y<c.y?Math.round(Math.abs(c.y-a.y)):0,p=Math.max(u.width,Math.round(a.width)),g=Math.max(u.height,Math.round(a.height)),m=(p-u.width)*d[0],y=(g-u.height)*d[1];var v;(h>0||f>0||m||y)&&(o.push({id:i,type:"position",position:{x:l.position.x-h+m,y:l.position.y-f+y}}),null===(v=n.get(i))||void 0===v||v.forEach((t=>{e.some((e=>e.id===t.id))||o.push({id:t.id,type:"position",position:{x:t.position.x+h,y:t.position.y+f}})})));(u.width<a.width||u.height<a.height||h||f)&&o.push({id:i,type:"dimensions",setAttributes:!0,dimensions:{width:p+(h?d[0]*h-m:0),height:g+(f?d[1]*f-y:0)}})})),o}function Fo(e,t,n){e.clear(),t.clear();for(const r of n){const{source:n,target:o,sourceHandle:i=null,targetHandle:s=null}=r,a="".concat(n,"-source-").concat(i),l="".concat(o,"-target-").concat(s),c=e.get(a)||new Map,u=e.get(l)||new Map,d={edgeId:r.id,source:n,target:o,sourceHandle:i,targetHandle:s};t.set(r.id,r),e.set(a,c.set("".concat(o,"-").concat(s),d)),e.set(l,u.set("".concat(n,"-").concat(i),d))}}function Vo(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return!!n&&(!!n.selected||Vo(n,t))}function jo(e,t,n){let r=e;do{var o;if(null!==(o=r)&&void 0!==o&&o.matches(t))return!0;if(r===n)return!1;r=r.parentElement}while(r);return!1}function Bo(e){var t,n;let{nodeId:r,dragItems:o,nodeLookup:i,dragging:s=!0}=e;const a=[];for(const[d,h]of o){var l;const e=null===(l=i.get(d))||void 0===l?void 0:l.internals.userNode;e&&a.push(c(c({},e),{},{position:h.position,dragging:s}))}if(!r)return[a[0],a];const u=null===(t=i.get(r))||void 0===t?void 0:t.internals.userNode;return[u?c(c({},u),{},{position:(null===(n=o.get(r))||void 0===n?void 0:n.position)||u.position,dragging:s}):a[0],a]}function Uo(e){let{onNodeMouseDown:t,getStoreItems:n,onDragStart:r,onDrag:o,onDragStop:i}=e,s={x:null,y:null},a=0,l=new Map,c=!1,u={x:0,y:0},d=null,h=!1,f=null,p=!1;return{update:function(e){let{noDragClassName:g,handleSelector:m,domNode:y,isSelectable:v,nodeId:b,nodeClickDistance:w=0}=e;function S(e,t){let{x:r,y:i}=e;const{nodeLookup:a,nodeExtent:c,snapGrid:u,snapToGrid:d,nodeOrigin:h,onNodeDrag:f,onSelectionDrag:p,onError:g,updateNodePositions:m}=n();s={x:r,y:i};let y=!1,v={x:0,y:0,x2:0,y2:0};if(l.size>1&&c){const e=Tr(l);v=jr(e)}for(const[n,o]of l){if(!a.has(n))continue;let e={x:r-o.distance.x,y:i-o.distance.y};d&&(e=Xr(e,u));let t=[[c[0][0],c[0][1]],[c[1][0],c[1][1]]];if(l.size>1&&c&&!o.extent){const{positionAbsolute:e}=o.internals,n=e.x-v.x+c[0][0],r=e.x+o.measured.width-v.x2+c[1][0];t=[[n,e.y-v.y+c[0][1]],[r,e.y+o.measured.height-v.y2+c[1][1]]]}const{position:s,positionAbsolute:f}=Mr({nodeId:n,nextPosition:e,nodeLookup:a,nodeExtent:t,nodeOrigin:h,onError:g});y=y||o.position.x!==s.x||o.position.y!==s.y,o.position=s,o.internals.positionAbsolute=f}if(y&&(m(l,!0),t&&(o||f||!b&&p))){const[e,n]=Bo({nodeId:b,dragItems:l,nodeLookup:a});null===o||void 0===o||o(t,l,e,n),null===f||void 0===f||f(t,e,n),b||null===p||void 0===p||p(t,n)}}async function E(){if(!d)return;const{transform:e,panBy:t,autoPanSpeed:r}=n(),[o,i]=Fr(u,d,r);var l,c;0===o&&0===i||(s.x=(null!==(l=s.x)&&void 0!==l?l:0)-o/e[2],s.y=(null!==(c=s.y)&&void 0!==c?c:0)-i/e[2],await t({x:o,y:i})&&S(s,null));a=requestAnimationFrame(E)}function k(e){const{nodeLookup:o,multiSelectionActive:i,nodesDraggable:a,transform:c,snapGrid:u,snapToGrid:f,selectNodesOnDrag:p,onNodeDragStart:g,onSelectionDragStart:m,unselectNodesAndEdges:y}=n();var w;(h=!0,p&&v||i||!b)||(null!==(w=o.get(b))&&void 0!==w&&w.selected||y());v&&p&&b&&(null===t||void 0===t||t(b));const S=oo(e.sourceEvent,{transform:c,snapGrid:u,snapToGrid:f,containerBounds:d});if(s=S,l=function(e,t,n,r){const o=new Map;for(const[a,l]of e)if((l.selected||l.id===r)&&(!l.parentId||!Vo(l,e))&&(l.draggable||t&&"undefined"===typeof l.draggable)){const t=e.get(a);var i,s;t&&o.set(a,{id:a,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:null!==(i=t.measured.width)&&void 0!==i?i:0,height:null!==(s=t.measured.height)&&void 0!==s?s:0}})}return o}(o,a,S,b),l.size>0&&(r||g||!b&&m)){const[t,n]=Bo({nodeId:b,dragItems:l,nodeLookup:o});null===r||void 0===r||r(e.sourceEvent,l,t,n),null===g||void 0===g||g(e.sourceEvent,t,n),b||null===m||void 0===m||m(e.sourceEvent,n)}}f=Me(y);const C=We().clickDistance(w).on("start",(e=>{const{domNode:t,nodeDragThreshold:r,transform:o,snapGrid:i,snapToGrid:a}=n();d=(null===t||void 0===t?void 0:t.getBoundingClientRect())||null,p=!1,0===r&&k(e);const l=oo(e.sourceEvent,{transform:o,snapGrid:i,snapToGrid:a,containerBounds:d});s=l,u=uo(e.sourceEvent,d)})).on("drag",(e=>{const{autoPanOnNodeDrag:t,transform:r,snapGrid:o,snapToGrid:i,nodeDragThreshold:a,nodeLookup:f}=n(),g=oo(e.sourceEvent,{transform:r,snapGrid:o,snapToGrid:i,containerBounds:d});if(("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||b&&!f.has(b))&&(p=!0),!p){if(!c&&t&&h&&(c=!0,E()),!h){var m,y;const t=g.xSnapped-(null!==(m=s.x)&&void 0!==m?m:0),n=g.ySnapped-(null!==(y=s.y)&&void 0!==y?y:0);Math.sqrt(t*t+n*n)>a&&k(e)}(s.x!==g.xSnapped||s.y!==g.ySnapped)&&l&&h&&(u=uo(e.sourceEvent,d),S(g,e.sourceEvent))}})).on("end",(e=>{if(h&&!p&&(c=!1,h=!1,cancelAnimationFrame(a),l.size>0)){const{nodeLookup:t,updateNodePositions:r,onNodeDragStop:o,onSelectionDragStop:s}=n();if(r(l,!1),i||o||!b&&s){const[n,r]=Bo({nodeId:b,dragItems:l,nodeLookup:t,dragging:!1});null===i||void 0===i||i(e.sourceEvent,l,n,r),null===o||void 0===o||o(e.sourceEvent,n,r),b||null===s||void 0===s||s(e.sourceEvent,r)}}})).filter((e=>{const t=e.target;return!e.button&&(!g||!jo(t,".".concat(g),y))&&(!m||jo(t,m,y))}));f.call(C)},destroy:function(){var e;null===(e=f)||void 0===e||e.on(".drag",null)}}}function Ho(e,t,n,r){let o=[],i=1/0;const s=function(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const i of t.values())Kr(o,Ur(i))>0&&r.push(i);return r}(e,n,t+250);for(const f of s){var a,l,u,d;const n=[...null!==(a=null===(l=f.internals.handleBounds)||void 0===l?void 0:l.source)&&void 0!==a?a:[],...null!==(u=null===(d=f.internals.handleBounds)||void 0===d?void 0:d.target)&&void 0!==u?u:[]];for(const s of n){if(r.nodeId===s.nodeId&&r.type===s.type&&r.id===s.id)continue;const{x:n,y:a}=To(f,s,s.position,!0),l=Math.sqrt(Math.pow(n-e.x,2)+Math.pow(a-e.y,2));l>t||(l<i?(o=[c(c({},s),{},{x:n,y:a})],i=l):l===i&&o.push(c(c({},s),{},{x:n,y:a})))}}if(!o.length)return null;if(o.length>1){var h;const e="source"===r.type?"target":"source";return null!==(h=o.find((t=>t.type===e)))&&void 0!==h?h:o[0]}return o[0]}function qo(e,t,n,r,o){var i,s,a,l,u,d;let h=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const f=r.get(e);if(!f)return null;const p="strict"===o?null===(i=f.internals.handleBounds)||void 0===i?void 0:i[t]:[...null!==(s=null===(a=f.internals.handleBounds)||void 0===a?void 0:a.source)&&void 0!==s?s:[],...null!==(l=null===(u=f.internals.handleBounds)||void 0===u?void 0:u.target)&&void 0!==l?l:[]],g=null!==(d=n?null===p||void 0===p?void 0:p.find((e=>e.id===n)):null===p||void 0===p?void 0:p[0])&&void 0!==d?d:null;return g&&h?c(c({},g),To(f,g,g.position,!0)):g}function Ko(e,t){return e||(null!==t&&void 0!==t&&t.classList.contains("target")?"target":null!==t&&void 0!==t&&t.classList.contains("source")?"source":null)}const Wo=()=>!0;function Go(e,t){let{handle:n,connectionMode:r,fromNodeId:o,fromHandleId:i,fromType:s,doc:a,lib:l,flowId:c,isValidConnection:u=Wo,nodeLookup:d}=t;const h="target"===s,f=n?a.querySelector(".".concat(l,'-flow__handle[data-id="').concat(c,"-").concat(null===n||void 0===n?void 0:n.nodeId,"-").concat(null===n||void 0===n?void 0:n.id,"-").concat(null===n||void 0===n?void 0:n.type,'"]')):null,{x:p,y:g}=uo(e),m=a.elementFromPoint(p,g),y=null!==m&&void 0!==m&&m.classList.contains("".concat(l,"-flow__handle"))?m:f,v={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const e=Ko(void 0,y),t=y.getAttribute("data-nodeid"),n=y.getAttribute("data-handleid"),s=y.classList.contains("connectable"),a=y.classList.contains("connectableend");if(!t||!e)return v;const l={source:h?t:o,sourceHandle:h?n:i,target:h?o:t,targetHandle:h?i:n};v.connection=l;const c=s&&a&&(r===mr.Strict?h&&"source"===e||!h&&"target"===e:t!==o||n!==i);v.isValid=c&&u(l),v.toHandle=qo(t,e,n,d,r,!1)}return v}const Yo={onPointerDown:function(e,t){let{connectionMode:n,connectionRadius:r,handleId:o,nodeId:i,edgeUpdaterType:s,isTarget:a,domNode:l,nodeLookup:d,lib:h,autoPanOnConnect:f,flowId:p,panBy:g,cancelConnection:m,onConnectStart:y,onConnect:v,onConnectEnd:b,isValidConnection:w=Wo,onReconnectEnd:S,updateConnection:E,getTransform:k,getFromHandle:C,autoPanSpeed:x}=t;const _=so(e.target);let N,T=0;const{x:A,y:I}=uo(e),D=null===_||void 0===_?void 0:_.elementFromPoint(A,I),M=Ko(s,D),P=null===l||void 0===l?void 0:l.getBoundingClientRect();if(!P||!M)return;const O=qo(i,M,o,d,n);if(!O)return;let L=uo(e,P),R=!1,z=null,F=!1,V=null;function j(){if(!f||!P)return;const[e,t]=Fr(L,P,x);g({x:e,y:t}),T=requestAnimationFrame(j)}const B=c(c({},O),{},{nodeId:i,type:M,position:O.position}),U=d.get(i),H={inProgress:!0,isValid:null,from:To(U,B,Er.Left,!0),fromHandle:B,fromPosition:B.position,fromNode:U,to:L,toHandle:null,toPosition:kr[B.position],toNode:null};E(H);let q=H;function K(e){if(!C()||!B)return void W(e);const t=k();L=uo(e,P),N=Ho(Qr(L,t,!1,[1,1]),r,d,B),R||(j(),R=!0);const s=Go(e,{handle:N,connectionMode:n,fromNodeId:i,fromHandleId:o,fromType:a?"target":"source",isValidConnection:w,doc:_,lib:h,flowId:p,nodeLookup:d});V=s.handleDomNode,z=s.connection,F=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!N,s.isValid);const l=c(c({},q),{},{isValid:F,to:N&&F?Zr({x:N.x,y:N.y},t):L,toHandle:s.toHandle,toPosition:F&&s.toHandle?s.toHandle.position:kr[B.position],toNode:s.toHandle?d.get(s.toHandle.nodeId):null});F&&N&&q.toHandle&&l.toHandle&&q.toHandle.type===l.toHandle.type&&q.toHandle.nodeId===l.toHandle.nodeId&&q.toHandle.id===l.toHandle.id&&q.to.x===l.to.x&&q.to.y===l.to.y||(E(l),q=l)}function W(e){(N||V)&&z&&F&&(null===v||void 0===v||v(z));const{inProgress:t}=q,n=c(c({},u(q,rr)),{},{toPosition:q.toHandle?q.toPosition:null});null===b||void 0===b||b(e,n),s&&(null===S||void 0===S||S(e,n)),m(),cancelAnimationFrame(T),R=!1,F=!1,z=null,V=null,_.removeEventListener("mousemove",K),_.removeEventListener("mouseup",W),_.removeEventListener("touchmove",K),_.removeEventListener("touchend",W)}null===y||void 0===y||y(e,{nodeId:i,handleId:o,handleType:M}),_.addEventListener("mousemove",K),_.addEventListener("mouseup",W),_.addEventListener("touchmove",K),_.addEventListener("touchend",W)},isValid:Go};const Xo=e=>({x:e.x,y:e.y,zoom:e.k}),Qo=e=>{let{x:t,y:n,zoom:r}=e;return Wn.translate(t,n).scale(r)},Zo=(e,t)=>e.target.closest(".".concat(t)),$o=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),Jo=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const r="number"===typeof t&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},ei=e=>{const t=e.ctrlKey&&Jr()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function ti(e){let{domNode:t,minZoom:n,maxZoom:r,paneClickDistance:o,translateExtent:i,viewport:s,onPanZoom:a,onPanZoomStart:l,onPanZoomEnd:c,onDraggingChange:u}=e;const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=t.getBoundingClientRect(),f=nr().clickDistance(!Gr(o)||o<0?0:o).scaleExtent([n,r]).translateExtent(i),p=Me(t).call(f);b({x:s.x,y:s.y,zoom:Or(s.zoom,n,r)},[[0,0],[h.width,h.height]],i);const g=p.on("wheel.zoom"),m=p.on("dblclick.zoom");function y(e,t){return p?new Promise((n=>{null===f||void 0===f||f.transform(Jo(p,null===t||void 0===t?void 0:t.duration,(()=>n(!0))),e)})):Promise.resolve(!1)}function v(){f.on("zoom",null)}async function b(e,t,n){const r=Qo(e),o=null===f||void 0===f?void 0:f.constrain()(r,t,n);return o&&await y(o),new Promise((e=>e(o)))}return f.wheelDelta(ei),{update:function(e){let{noWheelClassName:t,noPanClassName:n,onPaneContextMenu:r,userSelectionActive:o,panOnScroll:i,panOnDrag:s,panOnScrollMode:h,panOnScrollSpeed:y,preventScrolling:b,zoomOnPinch:w,zoomOnScroll:S,zoomOnDoubleClick:E,zoomActivationKeyPressed:k,lib:C,onTransformChange:x}=e;o&&!d.isZoomingOrPanning&&v();const _=i&&!k&&!o?function(e){let{zoomPanValues:t,noWheelClassName:n,d3Selection:r,d3Zoom:o,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:a,onPanZoomStart:l,onPanZoom:c,onPanZoomEnd:u}=e;return e=>{if(Zo(e,n))return!1;e.preventDefault(),e.stopImmediatePropagation();const d=r.property("__zoom").k||1;if(e.ctrlKey&&a){const t=Pe(e),n=ei(e),i=d*Math.pow(2,n);return void o.scaleTo(r,i,t,e)}const h=1===e.deltaMode?20:1;let f=i===yr.Vertical?0:e.deltaX*h,p=i===yr.Horizontal?0:e.deltaY*h;!Jr()&&e.shiftKey&&i!==yr.Vertical&&(f=e.deltaY*h,p=0),o.translateBy(r,-f/d*s,-p/d*s,{internal:!0});const g=Xo(r.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,null===l||void 0===l||l(e,g)),t.isPanScrolling&&(null===c||void 0===c||c(e,g),t.panScrollTimeout=setTimeout((()=>{null===u||void 0===u||u(e,g),t.isPanScrolling=!1}),150))}}({zoomPanValues:d,noWheelClassName:t,d3Selection:p,d3Zoom:f,panOnScrollMode:h,panOnScrollSpeed:y,zoomOnPinch:w,onPanZoomStart:l,onPanZoom:a,onPanZoomEnd:c}):function(e){let{noWheelClassName:t,preventScrolling:n,d3ZoomHandler:r}=e;return function(e,o){if(!n&&"wheel"===e.type&&!e.ctrlKey||Zo(e,t))return null;e.preventDefault(),r.call(this,e,o)}}({noWheelClassName:t,preventScrolling:b,d3ZoomHandler:g});if(p.on("wheel.zoom",_,{passive:!1}),!o){const e=function(e){let{zoomPanValues:t,onDraggingChange:n,onPanZoomStart:r}=e;return e=>{var o,i,s;if(null!==(o=e.sourceEvent)&&void 0!==o&&o.internal)return;const a=Xo(e.transform);t.mouseButton=(null===(i=e.sourceEvent)||void 0===i?void 0:i.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=a,"mousedown"===(null===(s=e.sourceEvent)||void 0===s?void 0:s.type)&&n(!0),r&&(null===r||void 0===r||r(e.sourceEvent,a))}}({zoomPanValues:d,onDraggingChange:u,onPanZoomStart:l});f.on("start",e);const t=function(e){let{zoomPanValues:t,panOnDrag:n,onPaneContextMenu:r,onTransformChange:o,onPanZoom:i}=e;return e=>{var s,a,l;t.usedRightMouseButton=!(!r||!$o(n,null!==(s=t.mouseButton)&&void 0!==s?s:0)),null!==(a=e.sourceEvent)&&void 0!==a&&a.sync||o([e.transform.x,e.transform.y,e.transform.k]),!i||null!==(l=e.sourceEvent)&&void 0!==l&&l.internal||null===i||void 0===i||i(e.sourceEvent,Xo(e.transform))}}({zoomPanValues:d,panOnDrag:s,onPaneContextMenu:!!r,onPanZoom:a,onTransformChange:x});f.on("zoom",t);const n=function(e){let{zoomPanValues:t,panOnDrag:n,panOnScroll:r,onDraggingChange:o,onPanZoomEnd:i,onPaneContextMenu:s}=e;return e=>{var a,l,c,u;if((null===(a=e.sourceEvent)||void 0===a||!a.internal)&&(t.isZoomingOrPanning=!1,s&&$o(n,null!==(l=t.mouseButton)&&void 0!==l?l:0)&&!t.usedRightMouseButton&&e.sourceEvent&&s(e.sourceEvent),t.usedRightMouseButton=!1,o(!1),i&&(c=t.prevViewport,u=e.transform,c.x!==u.x||c.y!==u.y||c.zoom!==u.k))){const n=Xo(e.transform);t.prevViewport=n,clearTimeout(t.timerId),t.timerId=setTimeout((()=>{null===i||void 0===i||i(e.sourceEvent,n)}),r?150:0)}}}({zoomPanValues:d,panOnDrag:s,panOnScroll:i,onPaneContextMenu:r,onPanZoomEnd:c,onDraggingChange:u});f.on("end",n)}const N=function(e){let{zoomActivationKeyPressed:t,zoomOnScroll:n,zoomOnPinch:r,panOnDrag:o,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:a,noWheelClassName:l,noPanClassName:c,lib:u}=e;return e=>{var d;const h=t||n,f=r&&e.ctrlKey;if(1===e.button&&"mousedown"===e.type&&(Zo(e,"".concat(u,"-flow__node"))||Zo(e,"".concat(u,"-flow__edge"))))return!0;if(!o&&!h&&!i&&!s&&!r)return!1;if(a)return!1;if(Zo(e,l)&&"wheel"===e.type)return!1;if(Zo(e,c)&&("wheel"!==e.type||i&&"wheel"===e.type&&!t))return!1;if(!r&&e.ctrlKey&&"wheel"===e.type)return!1;if(!r&&"touchstart"===e.type&&(null===(d=e.touches)||void 0===d?void 0:d.length)>1)return e.preventDefault(),!1;if(!h&&!i&&!f&&"wheel"===e.type)return!1;if(!o&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(Array.isArray(o)&&!o.includes(e.button)&&"mousedown"===e.type)return!1;const p=Array.isArray(o)&&o.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&p}}({zoomActivationKeyPressed:k,panOnDrag:s,zoomOnScroll:S,panOnScroll:i,zoomOnDoubleClick:E,zoomOnPinch:w,userSelectionActive:o,noPanClassName:n,noWheelClassName:t,lib:C});f.filter(N),E?p.on("dblclick.zoom",m):p.on("dblclick.zoom",null)},destroy:v,setViewport:async function(e,t){const n=Qo(e);return await y(n,t),new Promise((e=>e(n)))},setViewportConstrained:b,getViewport:function(){const e=p?Gn(p.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return p?new Promise((n=>{null===f||void 0===f||f.scaleTo(Jo(p,null===t||void 0===t?void 0:t.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},scaleBy:function(e,t){return p?new Promise((n=>{null===f||void 0===f||f.scaleBy(Jo(p,null===t||void 0===t?void 0:t.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},setScaleExtent:function(e){null===f||void 0===f||f.scaleExtent(e)},setTranslateExtent:function(e){null===f||void 0===f||f.translateExtent(e)},syncViewport:function(e){if(p){const t=Qo(e),n=p.property("__zoom");n.k===e.zoom&&n.x===e.x&&n.y===e.y||null===f||void 0===f||f.transform(p,t,null,{sync:!0})}},setClickDistance:function(e){const t=!Gr(e)||e<0?0:e;null===f||void 0===f||f.clickDistance(t)}}}var ni;!function(e){e.Line="line",e.Handle="handle"}(ni||(ni={}));function ri(e,t){return Math.max(0,t-e)}function oi(e,t){return Math.max(0,e-t)}function ii(e,t,n){return Math.max(0,t-e,e-n)}function si(e,t){return e?!t:t}const ai={width:0,height:0,x:0,y:0},li=c(c({},ai),{},{pointerX:0,pointerY:0,aspectRatio:1});function ci(e,t,n){var r,o;const i=t.position.x+e.position.x,s=t.position.y+e.position.y,a=null!==(r=e.measured.width)&&void 0!==r?r:0,l=null!==(o=e.measured.height)&&void 0!==o?o:0,c=n[0]*a,u=n[1]*l;return[[i-c,s-u],[i+a-c,s+l-u]]}function ui(e){let{domNode:t,nodeId:n,getStoreItems:r,onChange:o,onEnd:i}=e;const s=Me(t);return{update:function(e){let{controlPosition:t,boundaries:a,keepAspectRatio:l,onResizeStart:u,onResize:d,onResizeEnd:h,shouldResize:f}=e,p=c({},ai),g=c({},li);const m=function(e){return{isHorizontal:e.includes("right")||e.includes("left"),isVertical:e.includes("bottom")||e.includes("top"),affectsX:e.includes("left"),affectsY:e.includes("top")}}(t);let y,v,b,w,S=null,E=[];const k=We().on("start",(e=>{var t,o,i,s,a;const{nodeLookup:l,transform:d,snapGrid:h,snapToGrid:f,nodeOrigin:m,paneDomNode:k}=r();if(y=l.get(n),!y)return;S=null!==(t=null===k||void 0===k?void 0:k.getBoundingClientRect())&&void 0!==t?t:null;const{xSnapped:C,ySnapped:x}=oo(e.sourceEvent,{transform:d,snapGrid:h,snapToGrid:f,containerBounds:S});p={width:null!==(o=y.measured.width)&&void 0!==o?o:0,height:null!==(i=y.measured.height)&&void 0!==i?i:0,x:null!==(s=y.position.x)&&void 0!==s?s:0,y:null!==(a=y.position.y)&&void 0!==a?a:0},g=c(c({},p),{},{pointerX:C,pointerY:x,aspectRatio:p.width/p.height}),v=void 0,y.parentId&&("parent"===y.extent||y.expandParent)&&(v=l.get(y.parentId),b=v&&"parent"===y.extent?function(e){return[[0,0],[e.measured.width,e.measured.height]]}(v):void 0),E=[],w=void 0;for(const[r,u]of l)if(u.parentId===n&&(E.push({id:r,position:c({},u.position),extent:u.extent}),"parent"===u.extent||u.expandParent)){var _;const e=ci(u,y,null!==(_=u.origin)&&void 0!==_?_:m);w=w?[[Math.min(e[0][0],w[0][0]),Math.min(e[0][1],w[0][1])],[Math.max(e[1][0],w[1][0]),Math.max(e[1][1],w[1][1])]]:e}null===u||void 0===u||u(e,c({},p))})).on("drag",(e=>{var t;const{transform:n,snapGrid:i,snapToGrid:s,nodeOrigin:u}=r(),h=oo(e.sourceEvent,{transform:n,snapGrid:i,snapToGrid:s,containerBounds:S}),k=[];if(!y)return;const{x:C,y:x,width:_,height:N}=p,T={},A=null!==(t=y.origin)&&void 0!==t?t:u,{width:I,height:D,x:M,y:P}=function(e,t,n,r,o,i,s,a){let{affectsX:l,affectsY:c}=t;const{isHorizontal:u,isVertical:d}=t,h=u&&d,{xSnapped:f,ySnapped:p}=n,{minWidth:g,maxWidth:m,minHeight:y,maxHeight:v}=r,{x:b,y:w,width:S,height:E,aspectRatio:k}=e;let C=Math.floor(u?f-e.pointerX:0),x=Math.floor(d?p-e.pointerY:0);const _=S+(l?-C:C),N=E+(c?-x:x),T=-i[0]*S,A=-i[1]*E;let I=ii(_,g,m),D=ii(N,y,v);if(s){let e=0,t=0;l&&C<0?e=ri(b+C+T,s[0][0]):!l&&C>0&&(e=oi(b+_+T,s[1][0])),c&&x<0?t=ri(w+x+A,s[0][1]):!c&&x>0&&(t=oi(w+N+A,s[1][1])),I=Math.max(I,e),D=Math.max(D,t)}if(a){let e=0,t=0;l&&C>0?e=oi(b+C,a[0][0]):!l&&C<0&&(e=ri(b+_,a[1][0])),c&&x>0?t=oi(w+x,a[0][1]):!c&&x<0&&(t=ri(w+N,a[1][1])),I=Math.max(I,e),D=Math.max(D,t)}if(o){if(u){const e=ii(_/k,y,v)*k;if(I=Math.max(I,e),s){let e=0;e=!l&&!c||l&&!c&&h?oi(w+A+_/k,s[1][1])*k:ri(w+A+(l?C:-C)/k,s[0][1])*k,I=Math.max(I,e)}if(a){let e=0;e=!l&&!c||l&&!c&&h?ri(w+_/k,a[1][1])*k:oi(w+(l?C:-C)/k,a[0][1])*k,I=Math.max(I,e)}}if(d){const e=ii(N*k,g,m)/k;if(D=Math.max(D,e),s){let e=0;e=!l&&!c||c&&!l&&h?oi(b+N*k+T,s[1][0])/k:ri(b+(c?x:-x)*k+T,s[0][0])/k,D=Math.max(D,e)}if(a){let e=0;e=!l&&!c||c&&!l&&h?ri(b+N*k,a[1][0])/k:oi(b+(c?x:-x)*k,a[0][0])/k,D=Math.max(D,e)}}}x+=x<0?D:-D,C+=C<0?I:-I,o&&(h?_>N*k?x=(si(l,c)?-C:C)/k:C=(si(l,c)?-x:x)*k:u?(x=C/k,c=l):(C=x*k,l=c));const M=l?b+C:b,P=c?w+x:w;return{width:S+(l?-C:C),height:E+(c?-x:x),x:i[0]*C*(l?-1:1)+M,y:i[1]*x*(c?-1:1)+P}}(g,m,h,a,l,A,b,w),O=I!==_,L=D!==N,R=M!==C&&O,z=P!==x&&L;if(!R&&!z&&!O&&!L)return;if((R||z||1===A[0]||1===A[1])&&(T.x=R?M:p.x,T.y=z?P:p.y,p.x=T.x,p.y=T.y,E.length>0)){const e=M-C,t=P-x;for(const n of E)n.position={x:n.position.x-e+A[0]*(I-_),y:n.position.y-t+A[1]*(D-N)},k.push(n)}if((O||L)&&(T.width=O?I:p.width,T.height=L?D:p.height,p.width=T.width,p.height=T.height),v&&y.expandParent){var F,V;const e=A[0]*(null!==(F=T.width)&&void 0!==F?F:0);T.x&&T.x<e&&(p.x=e,g.x=g.x-(T.x-e));const t=A[1]*(null!==(V=T.height)&&void 0!==V?V:0);T.y&&T.y<t&&(p.y=t,g.y=g.y-(T.y-t))}const j=function(e){let{width:t,prevWidth:n,height:r,prevHeight:o,affectsX:i,affectsY:s}=e;const a=t-n,l=r-o,c=[a>0?1:a<0?-1:0,l>0?1:l<0?-1:0];return a&&i&&(c[0]=-1*c[0]),l&&s&&(c[1]=-1*c[1]),c}({width:p.width,prevWidth:_,height:p.height,prevHeight:N,affectsX:m.affectsX,affectsY:m.affectsY}),B=c(c({},p),{},{direction:j});!1!==(null===f||void 0===f?void 0:f(e,B))&&(null===d||void 0===d||d(e,B),o(T,k))})).on("end",(e=>{null===h||void 0===h||h(e,c({},p)),null===i||void 0===i||i()}));s.call(k)},destroy:function(){s.on(".drag",null)}}}var di=n(755);const hi=e=>{let t;const n=new Set,r=(e,r)=>{const o="function"===typeof e?e(t):e;if(!Object.is(o,t)){const e=t;t=(null!=r?r:"object"!==typeof o||null===o)?o:Object.assign({},t,o),n.forEach((n=>n(t,e)))}},o=()=>t,i={setState:r,getState:o,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},s=t=e(r,o,i);return i},fi=e=>e?hi(e):hi;const{useDebugValue:pi}=r,{useSyncExternalStoreWithSelector:gi}=di,mi=e=>e;function yi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mi,n=arguments.length>2?arguments[2]:void 0;const r=gi(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return pi(r),r}const vi=(e,t)=>{const n=fi(e),r=function(e){return yi(n,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t)};return Object.assign(r,n),r};function bi(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}n(766);const wi=["position","children","className","style"],Si=["type","position","isValidConnection","isConnectable","isConnectableStart","isConnectableEnd","id","onConnect","children","className","onMouseDown","onTouchStart"],Ei=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"],ki=["path","labelX","labelY","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","interactionWidth"],Ci=["id"],xi=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","onSelectionStart","onSelectionEnd","onBeforeDelete","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","selectionOnDrag","selectionMode","panActivationKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","nodesFocusable","nodeOrigin","edgesFocusable","edgesReconnectable","elementsSelectable","defaultViewport","minZoom","maxZoom","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneMouseEnter","onPaneMouseMove","onPaneMouseLeave","onPaneScroll","onPaneContextMenu","paneClickDistance","nodeClickDistance","children","onReconnect","onReconnectStart","onReconnectEnd","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","reconnectRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","disableKeyboardA11y","autoPanOnConnect","autoPanOnNodeDrag","autoPanSpeed","connectionRadius","isValidConnection","onError","style","id","nodeDragThreshold","viewport","onViewportChange","width","height","colorMode","debug"],_i=["children","className"],Ni=(0,r.createContext)(null),Ti=Ni.Provider,Ai=or();function Ii(e,t){const n=(0,r.useContext)(Ni);if(null===n)throw new Error(Ai);return yi(n,e,t)}function Di(){const e=(0,r.useContext)(Ni);if(null===e)throw new Error(Ai);return(0,r.useMemo)((()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe})),[e])}const Mi={display:"none"},Pi={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Oi="react-flow__node-desc",Li="react-flow__edge-desc",Ri=e=>e.ariaLiveMessage;function zi(e){let{rfId:t}=e;const n=Ii(Ri);return(0,d.jsx)("div",{id:"".concat("react-flow__aria-live","-").concat(t),"aria-live":"assertive","aria-atomic":"true",style:Pi,children:n})}function Fi(e){let{rfId:t,disableKeyboardA11y:n}=e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{id:"".concat(Oi,"-").concat(t),style:Mi,children:["Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),(0,d.jsx)("div",{id:"".concat(Li,"-").concat(t),style:Mi,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!n&&(0,d.jsx)(zi,{rfId:t})]})}const Vi=e=>e.userSelectionActive?"none":"all",ji=(0,r.forwardRef)(((e,t)=>{let{position:n="top-left",children:r,className:o,style:i}=e,s=u(e,wi);const a=Ii(Vi),l="".concat(n).split("-");return(0,d.jsx)("div",c(c({className:h(["react-flow__panel",o,...l]),style:c(c({},i),{},{pointerEvents:a}),ref:t},s),{},{children:r}))}));function Bi(e){let{proOptions:t,position:n="bottom-right"}=e;return null!==t&&void 0!==t&&t.hideAttribution?null:(0,d.jsx)(ji,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,d.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Ui=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Hi=e=>e.id;function qi(e,t){return bi(e.selectedNodes.map(Hi),t.selectedNodes.map(Hi))&&bi(e.selectedEdges.map(Hi),t.selectedEdges.map(Hi))}function Ki(e){let{onSelectionChange:t}=e;const n=Di(),{selectedNodes:o,selectedEdges:i}=Ii(Ui,qi);return(0,r.useEffect)((()=>{const e={nodes:o,edges:i};null===t||void 0===t||t(e),n.getState().onSelectionChangeHandlers.forEach((t=>t(e)))}),[o,i,t]),null}const Wi=e=>!!e.onSelectionChangeHandlers;function Gi(e){let{onSelectionChange:t}=e;const n=Ii(Wi);return t||n?(0,d.jsx)(Ki,{onSelectionChange:t}):null}const Yi=[0,0],Xi={x:0,y:0,zoom:1},Qi=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","rfId"],Zi=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),$i={translateExtent:pr,nodeOrigin:Yi,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Ji(e){const{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:a,reset:l,setDefaultNodesAndEdges:c,setPaneClickDistance:u}=Ii(Zi,bi),d=Di();(0,r.useEffect)((()=>(c(e.defaultNodes,e.defaultEdges),()=>{h.current=$i,l()})),[]);const h=(0,r.useRef)($i);return(0,r.useEffect)((()=>{for(const r of Qi){const l=e[r];l!==h.current[r]&&("undefined"!==typeof e[r]&&("nodes"===r?t(l):"edges"===r?n(l):"minZoom"===r?o(l):"maxZoom"===r?i(l):"translateExtent"===r?s(l):"nodeExtent"===r?a(l):"paneClickDistance"===r?u(l):"fitView"===r?d.setState({fitViewOnInit:l}):"fitViewOptions"===r?d.setState({fitViewOnInitOptions:l}):d.setState({[r]:l})))}h.current=e}),Qi.map((t=>e[t]))),null}function es(){return"undefined"!==typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}const ts="undefined"!==typeof document?document:null;function ns(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{target:ts,actInsideInputWithModifier:!0};const[n,o]=(0,r.useState)(!1),i=(0,r.useRef)(!1),s=(0,r.useRef)(new Set([])),[a,l]=(0,r.useMemo)((()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter((e=>"string"===typeof e)).map((e=>e.replace("+","\n").replace("\n\n","\n+").split("\n"))),n=t.reduce(((e,t)=>e.concat(...t)),[]);return[t,n]}return[[],[]]}),[e]);return(0,r.useEffect)((()=>{const n=(null===t||void 0===t?void 0:t.target)||ts;if(null!==e){const e=e=>{i.current=e.ctrlKey||e.metaKey||e.shiftKey;if((!i.current||i.current&&!t.actInsideInputWithModifier)&&lo(e))return!1;const n=os(e.code,l);s.current.add(e[n]),rs(a,s.current,!1)&&(e.preventDefault(),o(!0))},r=e=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&lo(e))return!1;const n=os(e.code,l);rs(a,s.current,!0)?(o(!1),s.current.clear()):s.current.delete(e[n]),"Meta"===e.key&&s.current.clear(),i.current=!1},c=()=>{s.current.clear(),o(!1)};return null===n||void 0===n||n.addEventListener("keydown",e),null===n||void 0===n||n.addEventListener("keyup",r),window.addEventListener("blur",c),window.addEventListener("contextmenu",c),()=>{null===n||void 0===n||n.removeEventListener("keydown",e),null===n||void 0===n||n.removeEventListener("keyup",r),window.removeEventListener("blur",c),window.removeEventListener("contextmenu",c)}}}),[e,o]),n}function rs(e,t,n){return e.filter((e=>n||e.length===t.size)).some((e=>e.every((e=>t.has(e)))))}function os(e,t){return t.includes(e)?"code":"key"}function is(e,t){const n=[],r=new Map,o=[];for(const i of e)if("add"!==i.type)if("remove"===i.type||"replace"===i.type)r.set(i.id,[i]);else{const e=r.get(i.id);e?e.push(i):r.set(i.id,[i])}else o.push(i);for(const i of t){const e=r.get(i.id);if(!e){n.push(i);continue}if("remove"===e[0].type)continue;if("replace"===e[0].type){n.push(c({},e[0].item));continue}const t=c({},i);for(const n of e)ss(n,t);n.push(t)}return o.length&&o.forEach((e=>{void 0!==e.index?n.splice(e.index,0,c({},e.item)):n.push(c({},e.item))})),n}function ss(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":"undefined"!==typeof e.position&&(t.position=e.position),"undefined"!==typeof e.dragging&&(t.dragging=e.dragging);break;case"dimensions":var n;if("undefined"!==typeof e.dimensions)null!==(n=t.measured)&&void 0!==n||(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height);"boolean"===typeof e.resizing&&(t.resizing=e.resizing)}}function as(e,t){return is(e,t)}function ls(e,t){return is(e,t)}function cs(e,t){return{id:e,type:"select",selected:t}}function us(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=[];for(const[o,i]of e){const e=t.has(o);void 0===i.selected&&!e||i.selected===e||(n&&(i.selected=e),r.push(cs(i.id,e)))}return r}function ds(e){let{items:t=[],lookup:n}=e;const r=[],o=new Map(t.map((e=>[e.id,e])));for(const[a,l]of t.entries()){var i,s;const e=n.get(l.id),t=null!==(i=null===e||void 0===e||null===(s=e.internals)||void 0===s?void 0:s.userNode)&&void 0!==i?i:e;void 0!==t&&t!==l&&r.push({id:l.id,item:l,type:"replace"}),void 0===t&&r.push({item:l,type:"add",index:a})}for(const[a]of n){void 0===o.get(a)&&r.push({id:a,type:"remove"})}return r}function hs(e){return{id:e.id,type:"remove"}}const fs=e=>(e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e))(e);function ps(e){return(0,r.forwardRef)(e)}const gs="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;function ms(e){const[t,n]=(0,r.useState)(BigInt(0)),[o]=(0,r.useState)((()=>function(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}((()=>n((e=>e+BigInt(1)))))));return gs((()=>{const t=o.get();t.length&&(e(t),o.reset())}),[t]),o}const ys=(0,r.createContext)(null);function vs(e){let{children:t}=e;const n=Di(),o=(0,r.useCallback)((e=>{const{nodes:t=[],setNodes:r,hasDefaultNodes:o,onNodesChange:i,nodeLookup:s}=n.getState();let a=t;for(const n of e)a="function"===typeof n?n(a):n;o?r(a):i&&i(ds({items:a,lookup:s}))}),[]),i=ms(o),s=ms((0,r.useCallback)((e=>{const{edges:t=[],setEdges:r,hasDefaultEdges:o,onEdgesChange:i,edgeLookup:s}=n.getState();let a=t;for(const n of e)a="function"===typeof n?n(a):n;o?r(a):i&&i(ds({items:a,lookup:s}))}),[])),a=(0,r.useMemo)((()=>({nodeQueue:i,edgeQueue:s})),[]);return(0,d.jsx)(ys.Provider,{value:a,children:t})}const bs=e=>!!e.panZoom;function ws(){const e=(()=>{const e=Di();return(0,r.useMemo)((()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:null===t||void 0===t?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:null===t||void 0===t?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:null===n||void 0===n?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{var r,o,i;const{transform:[s,a,l],panZoom:c}=e.getState();return c?(await c.setViewport({x:null!==(r=t.x)&&void 0!==r?r:s,y:null!==(o=t.y)&&void 0!==o?o:a,zoom:null!==(i=t.zoom)&&void 0!==i?i:l},{duration:null===n||void 0===n?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>{const{nodeLookup:n,minZoom:r,maxZoom:o,panZoom:i,domNode:s}=e.getState();if(!i||!s)return Promise.resolve(!1);const a=Ir(n,t),{width:l,height:c}=io(s);return Dr({nodes:a,width:l,height:c,minZoom:r,maxZoom:o,panZoom:i},t)},setCenter:async(t,n,r)=>{const{width:o,height:i,maxZoom:s,panZoom:a}=e.getState(),l="undefined"!==typeof(null===r||void 0===r?void 0:r.zoom)?r.zoom:s,c=o/2-t*l,u=i/2-n*l;return a?(await a.setViewport({x:c,y:u,zoom:l},{duration:null===r||void 0===r?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{var r;const{width:o,height:i,minZoom:s,maxZoom:a,panZoom:l}=e.getState(),c=$r(t,o,i,s,a,null!==(r=null===n||void 0===n?void 0:n.padding)&&void 0!==r?r:.1);return l?(await l.setViewport(c,{duration:null===n||void 0===n?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{snapToGrid:!0};const{transform:r,snapGrid:o,domNode:i}=e.getState();if(!i)return t;const{x:s,y:a}=i.getBoundingClientRect(),l={x:t.x-s,y:t.y-a};return Qr(l,r,n.snapToGrid,o)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:i}=r.getBoundingClientRect(),s=Zr(t,n);return{x:s.x+o,y:s.y+i}}})),[])})(),t=Di(),n=function(){const e=(0,r.useContext)(ys);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}(),o=Ii(bs),i=(0,r.useMemo)((()=>{const e=e=>t.getState().nodeLookup.get(e),r=e=>{n.nodeQueue.push(e)},o=e=>{n.edgeQueue.push(e)},i=e=>{var n,r,o,i;const{nodeLookup:s,nodeOrigin:a}=t.getState(),l=fs(e)?e:s.get(e.id),u=l.parentId?ro(l.position,l.measured,l.parentId,s,a):l.position,d=c(c({},l),{},{position:u,width:null!==(n=null===(r=l.measured)||void 0===r?void 0:r.width)&&void 0!==n?n:l.width,height:null!==(o=null===(i=l.measured)||void 0===i?void 0:i.height)&&void 0!==o?o:l.height});return Ur(d)},s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};r((r=>r.map((r=>{if(r.id===e){const e="function"===typeof t?t(r):t;return n.replace&&fs(e)?e:c(c({},r),e)}return r}))))},a=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};o((r=>r.map((r=>{if(r.id===e){const e="function"===typeof t?t(r):t;return n.replace&&xr(e)?e:c(c({},r),e)}return r}))))};return{getNodes:()=>t.getState().nodes.map((e=>c({},e))),getNode:t=>{var n;return null===(n=e(t))||void 0===n?void 0:n.internals.userNode},getInternalNode:e,getEdges:()=>{const{edges:e=[]}=t.getState();return e.map((e=>c({},e)))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:r,setEdges:o,addNodes:e=>{const t=Array.isArray(e)?e:[e];n.nodeQueue.push((e=>[...e,...t]))},addEdges:e=>{const t=Array.isArray(e)?e:[e];n.edgeQueue.push((e=>[...e,...t]))},toObject:()=>{const{nodes:e=[],edges:n=[],transform:r}=t.getState(),[o,i,s]=r;return{nodes:e.map((e=>c({},e))),edges:n.map((e=>c({},e))),viewport:{x:o,y:i,zoom:s}}},deleteElements:async e=>{let{nodes:n=[],edges:r=[]}=e;const{nodes:o,edges:i,onNodesDelete:s,onEdgesDelete:a,triggerNodeChanges:l,triggerEdgeChanges:c,onDelete:u,onBeforeDelete:d}=t.getState(),{nodes:h,edges:f}=await Pr({nodesToRemove:n,edgesToRemove:r,nodes:o,edges:i,onBeforeDelete:d}),p=f.length>0,g=h.length>0;if(p){const e=f.map(hs);null===a||void 0===a||a(f),c(e)}if(g){const e=h.map(hs);null===s||void 0===s||s(h),l(e)}return(g||p)&&(null===u||void 0===u||u({nodes:h,edges:f})),{deletedNodes:h,deletedEdges:f}},getIntersectingNodes:function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;const o=Wr(e),s=o?e:i(e),a=void 0!==r;return s?(r||t.getState().nodes).filter((r=>{const i=t.getState().nodeLookup.get(r.id);if(i&&!o&&(r.id===e.id||!i.internals.positionAbsolute))return!1;const l=Ur(a?r:i),c=Kr(l,s);return n&&c>0||c>=s.width*s.height})):[]},isNodeIntersecting:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Wr(e)?e:i(e);if(!r)return!1;const o=Kr(r,t);return n&&o>0||o>=r.width*r.height},updateNode:s,updateNodeData:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};s(e,(e=>{const r="function"===typeof t?t(e):t;return n.replace?c(c({},e),{},{data:r}):c(c({},e),{},{data:c(c({},e.data),r)})}),n)},updateEdge:a,updateEdgeData:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};a(e,(e=>{const r="function"===typeof t?t(e):t;return n.replace?c(c({},e),{},{data:r}):c(c({},e),{},{data:c(c({},e.data),r)})}),n)},getNodesBounds:e=>{const{nodeLookup:n,nodeOrigin:r}=t.getState();return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{nodeOrigin:[0,0],nodeLookup:void 0};if(0===e.length)return{x:0,y:0,width:0,height:0};const n=e.reduce(((e,n)=>{const r="string"===typeof n;let o=t.nodeLookup||r?void 0:n;t.nodeLookup&&(o=r?t.nodeLookup.get(n):_r(n)?n:t.nodeLookup.get(n.id));const i=o?Hr(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Vr(e,i)}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Br(n)}(e,{nodeLookup:n,nodeOrigin:r})},getHandleConnections:e=>{var n,r;let{type:o,id:i,nodeId:s}=e;return Array.from(null!==(n=null===(r=t.getState().connectionLookup.get("".concat(s,"-").concat(o,"-").concat(null!==i&&void 0!==i?i:null)))||void 0===r?void 0:r.values())&&void 0!==n?n:[])}}}),[]);return(0,r.useMemo)((()=>c(c(c({},i),e),{},{viewportInitialized:o})),[o])}const Ss=e=>e.selected,Es={actInsideInputWithModifier:!1},ks="undefined"!==typeof window?window:void 0;const Cs={position:"absolute",width:"100%",height:"100%",top:0,left:0},xs=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function _s(e){let{onPaneContextMenu:t,zoomOnScroll:n=!0,zoomOnPinch:o=!0,panOnScroll:i=!1,panOnScrollSpeed:s=.5,panOnScrollMode:a=yr.Free,zoomOnDoubleClick:l=!0,panOnDrag:c=!0,defaultViewport:u,translateExtent:h,minZoom:f,maxZoom:p,zoomActivationKeyCode:g,preventScrolling:m=!0,children:y,noWheelClassName:v,noPanClassName:b,onViewportChange:w,isControlledViewport:S,paneClickDistance:E}=e;const k=Di(),C=(0,r.useRef)(null),{userSelectionActive:x,lib:_}=Ii(xs,bi),N=ns(g),T=(0,r.useRef)();!function(e){const t=Di();(0,r.useEffect)((()=>{const n=()=>{if(!e.current)return!1;const n=io(e.current);var r,o;0!==n.height&&0!==n.width||null===(r=(o=t.getState()).onError)||void 0===r||r.call(o,"004",sr()),t.setState({width:n.width||500,height:n.height||500})};if(e.current){n(),window.addEventListener("resize",n);const t=new ResizeObserver((()=>n()));return t.observe(e.current),()=>{window.removeEventListener("resize",n),t&&e.current&&t.unobserve(e.current)}}}),[])}(C);const A=(0,r.useCallback)((e=>{null===w||void 0===w||w({x:e[0],y:e[1],zoom:e[2]}),S||k.setState({transform:e})}),[w,S]);return(0,r.useEffect)((()=>{if(C.current){T.current=ti({domNode:C.current,minZoom:f,maxZoom:p,translateExtent:h,viewport:u,paneClickDistance:E,onDraggingChange:e=>k.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{const{onViewportChangeStart:n,onMoveStart:r}=k.getState();null===r||void 0===r||r(e,t),null===n||void 0===n||n(t)},onPanZoom:(e,t)=>{const{onViewportChange:n,onMove:r}=k.getState();null===r||void 0===r||r(e,t),null===n||void 0===n||n(t)},onPanZoomEnd:(e,t)=>{const{onViewportChangeEnd:n,onMoveEnd:r}=k.getState();null===r||void 0===r||r(e,t),null===n||void 0===n||n(t)}});const{x:e,y:t,zoom:n}=T.current.getViewport();return k.setState({panZoom:T.current,transform:[e,t,n],domNode:C.current.closest(".react-flow")}),()=>{var e;null===(e=T.current)||void 0===e||e.destroy()}}}),[]),(0,r.useEffect)((()=>{var e;null===(e=T.current)||void 0===e||e.update({onPaneContextMenu:t,zoomOnScroll:n,zoomOnPinch:o,panOnScroll:i,panOnScrollSpeed:s,panOnScrollMode:a,zoomOnDoubleClick:l,panOnDrag:c,zoomActivationKeyPressed:N,preventScrolling:m,noPanClassName:b,userSelectionActive:x,noWheelClassName:v,lib:_,onTransformChange:A})}),[t,n,o,i,s,a,l,c,N,m,b,x,v,_,A]),(0,d.jsx)("div",{className:"react-flow__renderer",ref:C,style:Cs,children:y})}const Ns=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Ts(){const{userSelectionActive:e,userSelectionRect:t}=Ii(Ns,bi);return e&&t?(0,d.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")}}):null}const As=(e,t)=>n=>{n.target===t.current&&(null===e||void 0===e||e(n))},Is=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function Ds(e){let{isSelecting:t,selectionKeyPressed:n,selectionMode:o=vr.Full,panOnDrag:i,selectionOnDrag:s,onSelectionStart:a,onSelectionEnd:l,onPaneClick:c,onPaneContextMenu:u,onPaneScroll:f,onPaneMouseEnter:p,onPaneMouseMove:g,onPaneMouseLeave:m,children:y}=e;const v=(0,r.useRef)(null),b=Di(),w=(0,r.useRef)(0),S=(0,r.useRef)(0),E=(0,r.useRef)(),k=(0,r.useRef)(new Map),{userSelectionActive:C,elementsSelectable:x,dragging:_}=Ii(Is,bi),N=x&&(t||C),T=(0,r.useRef)(!1),A=(0,r.useRef)(!1),I=e=>{T.current?T.current=!1:(null===c||void 0===c||c(e),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1}))},D=f?e=>f(e):void 0,M=!0===i||Array.isArray(i)&&i.includes(0);return(0,d.jsxs)("div",{className:h(["react-flow__pane",{draggable:M,dragging:_,selection:t}]),onClick:N?void 0:As(I,v),onContextMenu:As((e=>{Array.isArray(i)&&null!==i&&void 0!==i&&i.includes(2)?e.preventDefault():null===u||void 0===u||u(e)}),v),onWheel:As(D,v),onPointerEnter:N?void 0:p,onPointerDown:N?e=>{var n,r;const{resetSelectedElements:o,domNode:i,edgeLookup:s}=b.getState();if(E.current=null===i||void 0===i?void 0:i.getBoundingClientRect(),!x||!t||0!==e.button||e.target!==v.current||!E.current)return;null===(n=e.target)||void 0===n||null===(r=n.setPointerCapture)||void 0===r||r.call(n,e.pointerId),A.current=!0,T.current=!1,k.current=new Map;for(const[t,a]of s){var l,c;k.current.set(a.source,(null===(l=k.current.get(a.source))||void 0===l?void 0:l.add(t))||new Set([t])),k.current.set(a.target,(null===(c=k.current.get(a.target))||void 0===c?void 0:c.add(t))||new Set([t]))}const{x:u,y:d}=uo(e.nativeEvent,E.current);o(),b.setState({userSelectionRect:{width:0,height:0,startX:u,startY:d,x:u,y:d}}),null===a||void 0===a||a(e)}:g,onPointerMove:N?e=>{const{userSelectionRect:t,edgeLookup:n,transform:r,nodeLookup:i,triggerNodeChanges:s,triggerEdgeChanges:a}=b.getState();if(!E.current||!t)return;T.current=!0;const{x:l,y:c}=uo(e.nativeEvent,E.current),{startX:u,startY:d}=t,h={startX:u,startY:d,x:l<u?l:u,y:c<d?c:d,width:Math.abs(l-u),height:Math.abs(c-d)},f=Ar(i,h,r,o===vr.Partial,!0),p=new Set,g=new Set;for(const o of f){g.add(o.id);const e=k.current.get(o.id);if(e)for(const t of e)p.add(t)}if(w.current!==g.size){w.current=g.size;s(us(i,g,!0))}if(S.current!==p.size){S.current=p.size;a(us(n,p))}b.setState({userSelectionRect:h,userSelectionActive:!0,nodesSelectionActive:!1})}:g,onPointerUp:N?e=>{var t,r;if(0!==e.button||!A.current)return;null===(t=e.target)||void 0===t||null===(r=t.releasePointerCapture)||void 0===r||r.call(t,e.pointerId);const{userSelectionRect:o}=b.getState();!C&&o&&e.target===v.current&&(null===I||void 0===I||I(e)),w.current>0&&b.setState({nodesSelectionActive:!0}),b.setState({userSelectionActive:!1,userSelectionRect:null}),w.current=0,S.current=0,null===l||void 0===l||l(e),(n||s)&&(T.current=!1),A.current=!1}:void 0,onPointerLeave:m,ref:v,style:Cs,children:[y,(0,d.jsx)(Ts,{})]})}function Ms(e){let{id:t,store:n,unselect:r=!1,nodeRef:o}=e;const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:a,nodeLookup:l,onError:c}=n.getState(),u=l.get(t);u?(n.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&a)&&(s({nodes:[u],edges:[]}),requestAnimationFrame((()=>{var e;return null===o||void 0===o||null===(e=o.current)||void 0===e?void 0:e.blur()}))):i([t])):null===c||void 0===c||c("012",fr(t))}function Ps(e){let{nodeRef:t,disabled:n=!1,noDragClassName:o,handleSelector:i,nodeId:s,isSelectable:a,nodeClickDistance:l}=e;const c=Di(),[u,d]=(0,r.useState)(!1),h=(0,r.useRef)();return(0,r.useEffect)((()=>{h.current=Uo({getStoreItems:()=>c.getState(),onNodeMouseDown:e=>{Ms({id:e,store:c,nodeRef:t})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})}),[]),(0,r.useEffect)((()=>{var e;if(n)null===(e=h.current)||void 0===e||e.destroy();else if(t.current){var r;return null===(r=h.current)||void 0===r||r.update({noDragClassName:o,handleSelector:i,domNode:t.current,isSelectable:a,nodeId:s,nodeClickDistance:l}),()=>{var e;null===(e=h.current)||void 0===e||e.destroy()}}}),[o,i,n,a,t,s]),u}function Os(){const e=Di(),t=(0,r.useCallback)((t=>{const{nodeExtent:n,snapToGrid:r,snapGrid:o,nodesDraggable:i,onError:s,updateNodePositions:a,nodeLookup:l,nodeOrigin:c}=e.getState(),u=new Map,d=(e=>t=>t.selected&&(t.draggable||e&&"undefined"===typeof t.draggable))(i),h=r?o[0]:5,f=r?o[1]:5,p=t.direction.x*h*t.factor,g=t.direction.y*f*t.factor;for(const[,e]of l){if(!d(e))continue;let t={x:e.internals.positionAbsolute.x+p,y:e.internals.positionAbsolute.y+g};r&&(t=Xr(t,o));const{position:i,positionAbsolute:a}=Mr({nodeId:e.id,nextPosition:t,nodeLookup:l,nodeExtent:n,nodeOrigin:c,onError:s});e.position=i,e.internals.positionAbsolute=a,u.set(e.id,e)}a(u)}),[]);return t}const Ls=(0,r.createContext)(null),Rs=Ls.Provider;Ls.Consumer;const zs=()=>(0,r.useContext)(Ls),Fs=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId});const Vs=(0,r.memo)(ps((function(e,t){let{type:n="source",position:r=Er.Top,isValidConnection:o,isConnectable:i=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:l,onConnect:f,children:p,className:g,onMouseDown:m,onTouchStart:y}=e,v=u(e,Si);const b=l||null,w="target"===n,S=Di(),E=zs(),{connectOnClick:k,noPanClassName:C,rfId:x}=Ii(Fs,bi),{connectingFrom:_,connectingTo:N,clickConnecting:T,isPossibleEndHandle:A,connectionInProcess:I,valid:D}=Ii(((e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:i,connection:s}=r,{fromHandle:a,toHandle:l,isValid:c}=s,u=(null===l||void 0===l?void 0:l.nodeId)===e&&(null===l||void 0===l?void 0:l.id)===t&&(null===l||void 0===l?void 0:l.type)===n;return{connectingFrom:(null===a||void 0===a?void 0:a.nodeId)===e&&(null===a||void 0===a?void 0:a.id)===t&&(null===a||void 0===a?void 0:a.type)===n,connectingTo:u,clickConnecting:(null===o||void 0===o?void 0:o.nodeId)===e&&(null===o||void 0===o?void 0:o.id)===t&&(null===o||void 0===o?void 0:o.type)===n,isPossibleEndHandle:i===mr.Strict?(null===a||void 0===a?void 0:a.type)!==n:e!==(null===a||void 0===a?void 0:a.nodeId)||t!==(null===a||void 0===a?void 0:a.id),connectionInProcess:!!a,valid:u&&c}})(E,b,n),bi);var M,P;E||null===(M=(P=S.getState()).onError)||void 0===M||M.call(P,"010",dr());const O=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=S.getState(),o=c(c({},t),e);if(r){const{edges:e,setEdges:t}=S.getState();t(wo(o,e))}null===n||void 0===n||n(o),null===f||void 0===f||f(o)},L=e=>{if(!E)return;const t=co(e.nativeEvent);if(s&&(t&&0===e.button||!t)){const t=S.getState();Yo.onPointerDown(e.nativeEvent,{autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:w,handleId:b,nodeId:E,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:O,isValidConnection:o||t.isValidConnection,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed})}t?null===m||void 0===m||m(e):null===y||void 0===y||y(e)};return(0,d.jsx)("div",c(c({"data-handleid":b,"data-nodeid":E,"data-handlepos":r,"data-id":"".concat(x,"-").concat(E,"-").concat(b,"-").concat(n),className:h(["react-flow__handle","react-flow__handle-".concat(r),"nodrag",C,g,{source:!w,target:w,connectable:i,connectablestart:s,connectableend:a,clickconnecting:T,connectingfrom:_,connectingto:N,valid:D,connectionindicator:i&&(!I||A)&&(I?a:s)}]),onMouseDown:L,onTouchStart:L,onClick:k?e=>{const{onClickConnectStart:t,onClickConnectEnd:r,connectionClickStartHandle:i,connectionMode:a,isValidConnection:l,lib:c,rfId:u,nodeLookup:d,connection:h}=S.getState();if(!E||!i&&!s)return;if(!i)return null===t||void 0===t||t(e.nativeEvent,{nodeId:E,handleId:b,handleType:n}),void S.setState({connectionClickStartHandle:{nodeId:E,type:n,id:b}});const f=so(e.target),p=o||l,{connection:g,isValid:m}=Yo.isValid(e.nativeEvent,{handle:{nodeId:E,id:b,type:n},connectionMode:a,fromNodeId:i.nodeId,fromHandleId:i.id||null,fromType:i.type,isValidConnection:p,flowId:u,doc:f,lib:c,nodeLookup:d});m&&g&&O(g);const y=structuredClone(h);delete y.inProgress,y.toPosition=y.toHandle?y.toHandle.position:null,null===r||void 0===r||r(e,y),S.setState({connectionClickStartHandle:null})}:void 0,ref:t},v),{},{children:p}))})));const js={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Bs={input:function(e){let{data:t,isConnectable:n,sourcePosition:r=Er.Bottom}=e;return(0,d.jsxs)(d.Fragment,{children:[null===t||void 0===t?void 0:t.label,(0,d.jsx)(Vs,{type:"source",position:r,isConnectable:n})]})},default:function(e){let{data:t,isConnectable:n,targetPosition:r=Er.Top,sourcePosition:o=Er.Bottom}=e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Vs,{type:"target",position:r,isConnectable:n}),null===t||void 0===t?void 0:t.label,(0,d.jsx)(Vs,{type:"source",position:o,isConnectable:n})]})},output:function(e){let{data:t,isConnectable:n,targetPosition:r=Er.Top}=e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Vs,{type:"target",position:r,isConnectable:n}),null===t||void 0===t?void 0:t.label]})},group:function(){return null}};const Us=e=>{const{width:t,height:n,x:r,y:o}=Tr(e.nodeLookup,{filter:e=>!!e.selected});return{width:Gr(t)?t:null,height:Gr(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],") translate(").concat(r,"px,").concat(o,"px)")}};function Hs(e){let{onSelectionContextMenu:t,noPanClassName:n,disableKeyboardA11y:o}=e;const i=Di(),{width:s,height:a,transformString:l,userSelectionActive:c}=Ii(Us,bi),u=Os(),f=(0,r.useRef)(null);if((0,r.useEffect)((()=>{var e;o||(null===(e=f.current)||void 0===e||e.focus({preventScroll:!0}))}),[o]),Ps({nodeRef:f}),c||!s||!a)return null;const p=t?e=>{const n=i.getState().nodes.filter((e=>e.selected));t(e,n)}:void 0;return(0,d.jsx)("div",{className:h(["react-flow__nodesselection","react-flow__container",n]),style:{transform:l},children:(0,d.jsx)("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:o?void 0:-1,onKeyDown:o?void 0:e=>{Object.prototype.hasOwnProperty.call(js,e.key)&&(e.preventDefault(),u({direction:js[e.key],factor:e.shiftKey?4:1}))},style:{width:s,height:a}})})}const qs="undefined"!==typeof window?window:void 0,Ks=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Ws(e){let{children:t,onPaneClick:n,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:l,paneClickDistance:c,deleteKeyCode:u,selectionKeyCode:h,selectionOnDrag:f,selectionMode:p,onSelectionStart:g,onSelectionEnd:m,multiSelectionKeyCode:y,panActivationKeyCode:v,zoomActivationKeyCode:b,elementsSelectable:w,zoomOnScroll:S,zoomOnPinch:E,panOnScroll:k,panOnScrollSpeed:C,panOnScrollMode:x,zoomOnDoubleClick:_,panOnDrag:N,defaultViewport:T,translateExtent:A,minZoom:I,maxZoom:D,preventScrolling:M,onSelectionContextMenu:P,noWheelClassName:O,noPanClassName:L,disableKeyboardA11y:R,onViewportChange:z,isControlledViewport:F}=e;const{nodesSelectionActive:V,userSelectionActive:j}=Ii(Ks),B=ns(h,{target:qs}),U=ns(v,{target:qs}),H=U||N,q=U||k,K=f&&!0!==H,W=B||j||K;return function(e){let{deleteKeyCode:t,multiSelectionKeyCode:n}=e;const o=Di(),{deleteElements:i}=ws(),s=ns(t,Es),a=ns(n,{target:ks});(0,r.useEffect)((()=>{if(s){const{edges:e,nodes:t}=o.getState();i({nodes:t.filter(Ss),edges:e.filter(Ss)}),o.setState({nodesSelectionActive:!1})}}),[s]),(0,r.useEffect)((()=>{o.setState({multiSelectionActive:a})}),[a])}({deleteKeyCode:u,multiSelectionKeyCode:y}),(0,d.jsx)(_s,{onPaneContextMenu:a,elementsSelectable:w,zoomOnScroll:S,zoomOnPinch:E,panOnScroll:q,panOnScrollSpeed:C,panOnScrollMode:x,zoomOnDoubleClick:_,panOnDrag:!B&&H,defaultViewport:T,translateExtent:A,minZoom:I,maxZoom:D,zoomActivationKeyCode:b,preventScrolling:M,noWheelClassName:O,noPanClassName:L,onViewportChange:z,isControlledViewport:F,paneClickDistance:c,children:(0,d.jsxs)(Ds,{onSelectionStart:g,onSelectionEnd:m,onPaneClick:n,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:l,panOnDrag:H,isSelecting:!!W,selectionMode:p,selectionKeyPressed:B,selectionOnDrag:K,children:[t,V&&(0,d.jsx)(Hs,{onSelectionContextMenu:P,noPanClassName:L,disableKeyboardA11y:R})]})})}Ws.displayName="FlowRenderer";const Gs=(0,r.memo)(Ws);function Ys(e){const t=Ii((0,r.useCallback)((e=>t=>e?Ar(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map((e=>e.id)):Array.from(t.nodeLookup.keys()))(e),[e]),bi);return t}const Xs=e=>e.updateNodeInternals;function Qs(e){var t;let{id:n,onClick:o,onMouseEnter:i,onMouseMove:s,onMouseLeave:a,onContextMenu:l,onDoubleClick:u,nodesDraggable:f,elementsSelectable:p,nodesConnectable:g,nodesFocusable:m,resizeObserver:y,noDragClassName:v,noPanClassName:b,disableKeyboardA11y:w,rfId:S,nodeTypes:E,nodeExtent:k,nodeClickDistance:C,onError:x}=e;const{node:_,internals:N,isParent:T}=Ii((e=>{const t=e.nodeLookup.get(n),r=e.parentLookup.has(n);return{node:t,internals:t.internals,isParent:r}}),bi);let A=_.type||"default",I=(null===E||void 0===E?void 0:E[A])||Bs[A];void 0===I&&(null===x||void 0===x||x("003",ir(A)),A="default",I=Bs.default);const D=!!(_.draggable||f&&"undefined"===typeof _.draggable),M=!!(_.selectable||p&&"undefined"===typeof _.selectable),P=!!(_.connectable||g&&"undefined"===typeof _.connectable),O=!!(_.focusable||m&&"undefined"===typeof _.focusable),L=Di(),R=no(_),z=function(e){let{node:t,nodeType:n,hasDimensions:o,resizeObserver:i}=e;const s=Di(),a=(0,r.useRef)(null),l=(0,r.useRef)(null),c=(0,r.useRef)(t.sourcePosition),u=(0,r.useRef)(t.targetPosition),d=(0,r.useRef)(n),h=o&&!!t.internals.handleBounds;return(0,r.useEffect)((()=>{!a.current||t.hidden||h&&l.current===a.current||(l.current&&(null===i||void 0===i||i.unobserve(l.current)),null===i||void 0===i||i.observe(a.current),l.current=a.current)}),[h,t.hidden]),(0,r.useEffect)((()=>()=>{l.current&&(null===i||void 0===i||i.unobserve(l.current),l.current=null)}),[]),(0,r.useEffect)((()=>{if(a.current){const e=d.current!==n,r=c.current!==t.sourcePosition,o=u.current!==t.targetPosition;(e||r||o)&&(d.current=n,c.current=t.sourcePosition,u.current=t.targetPosition,s.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:a.current,force:!0}]])))}}),[t.id,n,t.sourcePosition,t.targetPosition]),a}({node:_,nodeType:A,hasDimensions:R,resizeObserver:y}),F=Ps({nodeRef:z,disabled:_.hidden||!D,noDragClassName:v,handleSelector:_.dragHandle,nodeId:n,isSelectable:M,nodeClickDistance:C}),V=Os();if(_.hidden)return null;const j=to(_),B=function(e){var t,n,r,o,i,s,a,l,c,u;return void 0===e.internals.handleBounds?{width:null!==(i=null!==(s=e.width)&&void 0!==s?s:e.initialWidth)&&void 0!==i?i:null===(a=e.style)||void 0===a?void 0:a.width,height:null!==(l=null!==(c=e.height)&&void 0!==c?c:e.initialHeight)&&void 0!==l?l:null===(u=e.style)||void 0===u?void 0:u.height}:{width:null!==(t=e.width)&&void 0!==t?t:null===(n=e.style)||void 0===n?void 0:n.width,height:null!==(r=e.height)&&void 0!==r?r:null===(o=e.style)||void 0===o?void 0:o.height}}(_),U=M||D||o||i||s||a,H=i?e=>i(e,c({},N.userNode)):void 0,q=s?e=>s(e,c({},N.userNode)):void 0,K=a?e=>a(e,c({},N.userNode)):void 0,W=l?e=>l(e,c({},N.userNode)):void 0,G=u?e=>u(e,c({},N.userNode)):void 0;return(0,d.jsx)("div",{className:h(["react-flow__node","react-flow__node-".concat(A),{[b]:D},_.className,{selected:_.selected,selectable:M,parent:T,draggable:D,dragging:F}]),ref:z,style:c(c({zIndex:N.z,transform:"translate(".concat(N.positionAbsolute.x,"px,").concat(N.positionAbsolute.y,"px)"),pointerEvents:U?"all":"none",visibility:R?"visible":"hidden"},_.style),B),"data-id":n,"data-testid":"rf__node-".concat(n),onMouseEnter:H,onMouseMove:q,onMouseLeave:K,onContextMenu:W,onClick:e=>{const{selectNodesOnDrag:t,nodeDragThreshold:r}=L.getState();M&&(!t||!D||r>0)&&Ms({id:n,store:L,nodeRef:z}),o&&o(e,c({},N.userNode))},onDoubleClick:G,onKeyDown:O?e=>{if(!lo(e.nativeEvent)&&!w)if(gr.includes(e.key)&&M){const t="Escape"===e.key;Ms({id:n,store:L,unselect:t,nodeRef:z})}else D&&_.selected&&Object.prototype.hasOwnProperty.call(js,e.key)&&(e.preventDefault(),L.setState({ariaLiveMessage:"Moved selected node ".concat(e.key.replace("Arrow","").toLowerCase(),". New position, x: ").concat(~~N.positionAbsolute.x,", y: ").concat(~~N.positionAbsolute.y)}),V({direction:js[e.key],factor:e.shiftKey?4:1}))}:void 0,tabIndex:O?0:void 0,role:O?"button":void 0,"aria-describedby":w?void 0:"".concat(Oi,"-").concat(S),"aria-label":_.ariaLabel,children:(0,d.jsx)(Rs,{value:n,children:(0,d.jsx)(I,c({id:n,data:_.data,type:A,positionAbsoluteX:N.positionAbsolute.x,positionAbsoluteY:N.positionAbsolute.y,selected:_.selected,selectable:M,draggable:D,deletable:null===(t=_.deletable)||void 0===t||t,isConnectable:P,sourcePosition:_.sourcePosition,targetPosition:_.targetPosition,dragging:F,dragHandle:_.dragHandle,zIndex:N.z,parentId:_.parentId},j))})})}const Zs=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function $s(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:i,onError:s}=Ii(Zs,bi),a=Ys(e.onlyRenderVisibleElements),l=function(){const e=Ii(Xs),[t]=(0,r.useState)((()=>"undefined"===typeof ResizeObserver?null:new ResizeObserver((t=>{const n=new Map;t.forEach((e=>{const t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})})),e(n)}))));return(0,r.useEffect)((()=>()=>{null===t||void 0===t||t.disconnect()}),[t]),t}();return(0,d.jsx)("div",{className:"react-flow__nodes",style:Cs,children:a.map((r=>(0,d.jsx)(Qs,{id:r,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:s},r)))})}$s.displayName="NodeRenderer";const Js=(0,r.memo)($s);const ea={[Sr.Arrow]:e=>{let{color:t="none",strokeWidth:n=1}=e;return(0,d.jsx)("polyline",{style:{stroke:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"})},[Sr.ArrowClosed]:e=>{let{color:t="none",strokeWidth:n=1}=e;return(0,d.jsx)("polyline",{style:{stroke:t,fill:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}};const ta=e=>{let{id:t,type:n,color:o,width:i=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"}=e;const u=function(e){const t=Di();return(0,r.useMemo)((()=>{var n,r;return Object.prototype.hasOwnProperty.call(ea,e)?ea[e]:(null===(n=(r=t.getState()).onError)||void 0===n||n.call(r,"009",cr(e)),null)}),[e])}(n);return u?(0,d.jsx)("marker",{className:"react-flow__arrowhead",id:t,markerWidth:"".concat(i),markerHeight:"".concat(s),viewBox:"-10 -10 20 20",markerUnits:a,orient:c,refX:"0",refY:"0",children:(0,d.jsx)(u,{color:o,strokeWidth:l})}):null},na=e=>{let{defaultColor:t,rfId:n}=e;const o=Ii((e=>e.edges)),i=Ii((e=>e.defaultEdgeOptions)),s=(0,r.useMemo)((()=>{const e=function(e,t){let{id:n,defaultColor:r,defaultMarkerStart:o,defaultMarkerEnd:i}=t;const s=new Set;return e.reduce(((e,t)=>([t.markerStart||o,t.markerEnd||i].forEach((t=>{if(t&&"object"===typeof t){const o=Io(t,n);s.has(o)||(e.push(c({id:o,color:t.color||r},t)),s.add(o))}})),e)),[]).sort(((e,t)=>e.id.localeCompare(t.id)))}(o,{id:n,defaultColor:t,defaultMarkerStart:null===i||void 0===i?void 0:i.markerStart,defaultMarkerEnd:null===i||void 0===i?void 0:i.markerEnd});return e}),[o,i,n,t]);return s.length?(0,d.jsx)("svg",{className:"react-flow__marker",children:(0,d.jsx)("defs",{children:s.map((e=>(0,d.jsx)(ta,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id)))})}):null};na.displayName="MarkerDefinitions";var ra=(0,r.memo)(na);function oa(e){let{x:t,y:n,label:o,labelStyle:i={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:l=[2,4],labelBgBorderRadius:f=2,children:p,className:g}=e,m=u(e,Ei);const[y,v]=(0,r.useState)({x:1,y:0,width:0,height:0}),b=h(["react-flow__edge-textwrapper",g]),w=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(w.current){const e=w.current.getBBox();v({x:e.x,y:e.y,width:e.width,height:e.height})}}),[o]),"undefined"!==typeof o&&o?(0,d.jsxs)("g",c(c({transform:"translate(".concat(t-y.width/2," ").concat(n-y.height/2,")"),className:b,visibility:y.width?"visible":"hidden"},m),{},{children:[s&&(0,d.jsx)("rect",{width:y.width+2*l[0],x:-l[0],y:-l[1],height:y.height+2*l[1],className:"react-flow__edge-textbg",style:a,rx:f,ry:f}),(0,d.jsx)("text",{className:"react-flow__edge-text",y:y.height/2,dy:"0.3em",ref:w,style:i,children:o}),p]})):null}oa.displayName="EdgeText";const ia=(0,r.memo)(oa);function sa(e){let{path:t,labelX:n,labelY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:f,interactionWidth:p=20}=e,g=u(e,ki);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",c(c({},g),{},{d:t,fill:"none",className:h(["react-flow__edge-path",g.className])})),p&&(0,d.jsx)("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),o&&Gr(n)&&Gr(r)?(0,d.jsx)(ia,{x:n,y:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:f}):null]})}function aa(e){let{pos:t,x1:n,y1:r,x2:o,y2:i}=e;return t===Er.Left||t===Er.Right?[.5*(n+o),r]:[n,.5*(r+i)]}function la(e){let{sourceX:t,sourceY:n,sourcePosition:r=Er.Bottom,targetX:o,targetY:i,targetPosition:s=Er.Top}=e;const[a,l]=aa({pos:r,x1:t,y1:n,x2:o,y2:i}),[c,u]=aa({pos:s,x1:o,y1:i,x2:t,y2:n}),[d,h,f,p]=fo({sourceX:t,sourceY:n,targetX:o,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:u});return["M".concat(t,",").concat(n," C").concat(a,",").concat(l," ").concat(c,",").concat(u," ").concat(o,",").concat(i),d,h,f,p]}function ca(e){return(0,r.memo)((t=>{let{id:n,sourceX:r,sourceY:o,targetX:i,targetY:s,sourcePosition:a=Er.Bottom,targetPosition:l=Er.Top,label:c,labelStyle:u,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:y,markerStart:v,interactionWidth:b}=t;const[w,S,E]=la({sourceX:r,sourceY:o,sourcePosition:a,targetX:i,targetY:s,targetPosition:l}),k=e.isInternal?void 0:n;return(0,d.jsx)(sa,{id:k,path:w,labelX:S,labelY:E,label:c,labelStyle:u,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:y,markerStart:v,interactionWidth:b})}))}const ua=ca({isInternal:!1}),da=ca({isInternal:!0});function ha(e){return(0,r.memo)((t=>{let{id:n,sourceX:r,sourceY:o,targetX:i,targetY:s,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:f,style:p,sourcePosition:g=Er.Bottom,targetPosition:m=Er.Top,markerEnd:y,markerStart:v,pathOptions:b,interactionWidth:w}=t;const[S,E,k]=xo({sourceX:r,sourceY:o,sourcePosition:g,targetX:i,targetY:s,targetPosition:m,borderRadius:null===b||void 0===b?void 0:b.borderRadius,offset:null===b||void 0===b?void 0:b.offset}),C=e.isInternal?void 0:n;return(0,d.jsx)(sa,{id:C,path:S,labelX:E,labelY:k,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:y,markerStart:v,interactionWidth:w})}))}ua.displayName="SimpleBezierEdge",da.displayName="SimpleBezierEdgeInternal";const fa=ha({isInternal:!1}),pa=ha({isInternal:!0});function ga(e){return(0,r.memo)((t=>{var n;let{id:o}=t,i=u(t,Ci);const s=e.isInternal?void 0:o;return(0,d.jsx)(fa,c(c({},i),{},{id:s,pathOptions:(0,r.useMemo)((()=>{var e;return{borderRadius:0,offset:null===(e=i.pathOptions)||void 0===e?void 0:e.offset}}),[null===(n=i.pathOptions)||void 0===n?void 0:n.offset])}))}))}fa.displayName="SmoothStepEdge",pa.displayName="SmoothStepEdgeInternal";const ma=ga({isInternal:!1}),ya=ga({isInternal:!0});function va(e){return(0,r.memo)((t=>{let{id:n,sourceX:r,sourceY:o,targetX:i,targetY:s,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:m,interactionWidth:y}=t;const[v,b,w]=So({sourceX:r,sourceY:o,targetX:i,targetY:s}),S=e.isInternal?void 0:n;return(0,d.jsx)(sa,{id:S,path:v,labelX:b,labelY:w,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:m,interactionWidth:y})}))}ma.displayName="StepEdge",ya.displayName="StepEdgeInternal";const ba=va({isInternal:!1}),wa=va({isInternal:!0});function Sa(e){return(0,r.memo)((t=>{let{id:n,sourceX:r,sourceY:o,targetX:i,targetY:s,sourcePosition:a=Er.Bottom,targetPosition:l=Er.Top,label:c,labelStyle:u,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:y,markerStart:v,pathOptions:b,interactionWidth:w}=t;const[S,E,k]=mo({sourceX:r,sourceY:o,sourcePosition:a,targetX:i,targetY:s,targetPosition:l,curvature:null===b||void 0===b?void 0:b.curvature}),C=e.isInternal?void 0:n;return(0,d.jsx)(sa,{id:C,path:S,labelX:E,labelY:k,label:c,labelStyle:u,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:y,markerStart:v,interactionWidth:w})}))}ba.displayName="StraightEdge",wa.displayName="StraightEdgeInternal";const Ea=Sa({isInternal:!1}),ka=Sa({isInternal:!0});Ea.displayName="BezierEdge",ka.displayName="BezierEdgeInternal";const Ca={default:ka,straight:wa,step:ya,smoothstep:pa,simplebezier:da},xa={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},_a=(e,t,n)=>n===Er.Left?e-t:n===Er.Right?e+t:e,Na=(e,t,n)=>n===Er.Top?e-t:n===Er.Bottom?e+t:e,Ta="react-flow__edgeupdater";function Aa(e){let{position:t,centerX:n,centerY:r,radius:o=10,onMouseDown:i,onMouseEnter:s,onMouseOut:a,type:l}=e;return(0,d.jsx)("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:a,className:h([Ta,"".concat(Ta,"-").concat(l)]),cx:_a(n,o,t),cy:Na(r,o,t),r:o,stroke:"transparent",fill:"transparent"})}function Ia(e){let{isReconnectable:t,reconnectRadius:n,edge:r,sourceX:o,sourceY:i,targetX:s,targetY:a,sourcePosition:l,targetPosition:c,onReconnect:u,onReconnectStart:h,onReconnectEnd:f,setReconnecting:p,setUpdateHover:g}=e;const m=Di(),y=(e,t)=>{if(0!==e.button)return;const{autoPanOnConnect:n,domNode:o,isValidConnection:i,connectionMode:s,connectionRadius:a,lib:l,onConnectStart:c,onConnectEnd:d,cancelConnection:g,nodeLookup:y,rfId:v,panBy:b,updateConnection:w}=m.getState(),S="target"===t.type;p(!0),null===h||void 0===h||h(e,r,t.type);Yo.onPointerDown(e.nativeEvent,{autoPanOnConnect:n,connectionMode:s,connectionRadius:a,domNode:o,handleId:t.id,nodeId:t.nodeId,nodeLookup:y,isTarget:S,edgeUpdaterType:t.type,lib:l,flowId:v,cancelConnection:g,panBy:b,isValidConnection:i,onConnect:e=>null===u||void 0===u?void 0:u(r,e),onConnectStart:c,onConnectEnd:d,onReconnectEnd:(e,n)=>{p(!1),null===f||void 0===f||f(e,r,t.type,n)},updateConnection:w,getTransform:()=>m.getState().transform,getFromHandle:()=>m.getState().connection.fromHandle})},v=()=>g(!0),b=()=>g(!1);return(0,d.jsxs)(d.Fragment,{children:[(!0===t||"source"===t)&&(0,d.jsx)(Aa,{position:l,centerX:o,centerY:i,radius:n,onMouseDown:e=>{var t;return y(e,{nodeId:r.target,id:null!==(t=r.targetHandle)&&void 0!==t?t:null,type:"target"})},onMouseEnter:v,onMouseOut:b,type:"source"}),(!0===t||"target"===t)&&(0,d.jsx)(Aa,{position:c,centerX:s,centerY:a,radius:n,onMouseDown:e=>{var t;return y(e,{nodeId:r.source,id:null!==(t=r.sourceHandle)&&void 0!==t?t:null,type:"source"})},onMouseEnter:v,onMouseOut:b,type:"target"})]})}function Da(e){var t;let{id:n,edgesFocusable:o,edgesReconnectable:i,elementsSelectable:s,onClick:a,onDoubleClick:l,onContextMenu:u,onMouseEnter:f,onMouseMove:p,onMouseLeave:g,reconnectRadius:m,onReconnect:y,onReconnectStart:v,onReconnectEnd:b,rfId:w,edgeTypes:S,noPanClassName:E,onError:k,disableKeyboardA11y:C}=e,x=Ii((e=>e.edgeLookup.get(n)));const _=Ii((e=>e.defaultEdgeOptions));x=_?c(c({},_),x):x;let N=x.type||"default",T=(null===S||void 0===S?void 0:S[N])||Ca[N];void 0===T&&(null===k||void 0===k||k("011",hr(N)),N="default",T=Ca.default);const A=!!(x.focusable||o&&"undefined"===typeof x.focusable),I="undefined"!==typeof y&&(x.reconnectable||i&&"undefined"===typeof x.reconnectable),D=!!(x.selectable||s&&"undefined"===typeof x.selectable),M=(0,r.useRef)(null),[P,O]=(0,r.useState)(!1),[L,R]=(0,r.useState)(!1),z=Di(),{zIndex:F,sourceX:V,sourceY:j,targetX:B,targetY:U,sourcePosition:H,targetPosition:q}=Ii((0,r.useCallback)((e=>{const t=e.nodeLookup.get(x.source),r=e.nodeLookup.get(x.target);if(!t||!r)return c({zIndex:x.zIndex},xa);const o=function(e){var t,n,r,o;const{sourceNode:i,targetNode:s}=e;if(!_o(i)||!_o(s))return null;const a=i.internals.handleBounds||No(i.handles),l=s.internals.handleBounds||No(s.handles),c=Ao(null!==(t=null===a||void 0===a?void 0:a.source)&&void 0!==t?t:[],e.sourceHandle),u=Ao(e.connectionMode===mr.Strict?null!==(n=null===l||void 0===l?void 0:l.target)&&void 0!==n?n:[]:(null!==(r=null===l||void 0===l?void 0:l.target)&&void 0!==r?r:[]).concat(null!==(o=null===l||void 0===l?void 0:l.source)&&void 0!==o?o:[]),e.targetHandle);var d;if(!c||!u)return null===(d=e.onError)||void 0===d||d.call(e,"008",ur(c?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const h=(null===c||void 0===c?void 0:c.position)||Er.Bottom,f=(null===u||void 0===u?void 0:u.position)||Er.Top,p=To(i,c,h),g=To(s,u,f);return{sourceX:p.x,sourceY:p.y,targetX:g.x,targetY:g.y,sourcePosition:h,targetPosition:f}}({id:n,sourceNode:t,targetNode:r,sourceHandle:x.sourceHandle||null,targetHandle:x.targetHandle||null,connectionMode:e.connectionMode,onError:k}),i=function(e){let{sourceNode:t,targetNode:n,selected:r=!1,zIndex:o=0,elevateOnSelect:i=!1}=e;if(!i)return o;const s=r||n.selected||t.selected,a=Math.max(t.internals.z||0,n.internals.z||0,1e3);return o+(s?a:0)}({selected:x.selected,zIndex:x.zIndex,sourceNode:t,targetNode:r,elevateOnSelect:e.elevateEdgesOnSelect});return c({zIndex:i},o||xa)}),[x.source,x.target,x.sourceHandle,x.targetHandle,x.selected,x.zIndex]),bi),K=(0,r.useMemo)((()=>x.markerStart?"url('#".concat(Io(x.markerStart,w),"')"):void 0),[x.markerStart,w]),W=(0,r.useMemo)((()=>x.markerEnd?"url('#".concat(Io(x.markerEnd,w),"')"):void 0),[x.markerEnd,w]);if(x.hidden||null===V||null===j||null===B||null===U)return null;const G=l?e=>{l(e,c({},x))}:void 0,Y=u?e=>{u(e,c({},x))}:void 0,X=f?e=>{f(e,c({},x))}:void 0,Q=p?e=>{p(e,c({},x))}:void 0,Z=g?e=>{g(e,c({},x))}:void 0;return(0,d.jsx)("svg",{style:{zIndex:F},children:(0,d.jsxs)("g",{className:h(["react-flow__edge","react-flow__edge-".concat(N),x.className,E,{selected:x.selected,animated:x.animated,inactive:!D&&!a,updating:P,selectable:D}]),onClick:e=>{const{addSelectedEdges:t,unselectNodesAndEdges:r,multiSelectionActive:o}=z.getState();var i;D&&(z.setState({nodesSelectionActive:!1}),x.selected&&o?(r({nodes:[],edges:[x]}),null===(i=M.current)||void 0===i||i.blur()):t([n]));a&&a(e,x)},onDoubleClick:G,onContextMenu:Y,onMouseEnter:X,onMouseMove:Q,onMouseLeave:Z,onKeyDown:A?e=>{if(!C&&gr.includes(e.key)&&D){const{unselectNodesAndEdges:r,addSelectedEdges:o}=z.getState();var t;if("Escape"===e.key)null===(t=M.current)||void 0===t||t.blur(),r({edges:[x]});else o([n])}}:void 0,tabIndex:A?0:void 0,role:A?"button":"img","data-id":n,"data-testid":"rf__edge-".concat(n),"aria-label":null===x.ariaLabel?void 0:x.ariaLabel||"Edge from ".concat(x.source," to ").concat(x.target),"aria-describedby":A?"".concat(Li,"-").concat(w):void 0,ref:M,children:[!L&&(0,d.jsx)(T,{id:n,source:x.source,target:x.target,type:x.type,selected:x.selected,animated:x.animated,selectable:D,deletable:null===(t=x.deletable)||void 0===t||t,label:x.label,labelStyle:x.labelStyle,labelShowBg:x.labelShowBg,labelBgStyle:x.labelBgStyle,labelBgPadding:x.labelBgPadding,labelBgBorderRadius:x.labelBgBorderRadius,sourceX:V,sourceY:j,targetX:B,targetY:U,sourcePosition:H,targetPosition:q,data:x.data,style:x.style,sourceHandleId:x.sourceHandle,targetHandleId:x.targetHandle,markerStart:K,markerEnd:W,pathOptions:"pathOptions"in x?x.pathOptions:void 0,interactionWidth:x.interactionWidth}),I&&(0,d.jsx)(Ia,{edge:x,isReconnectable:I,reconnectRadius:m,onReconnect:y,onReconnectStart:v,onReconnectEnd:b,sourceX:V,sourceY:j,targetX:B,targetY:U,sourcePosition:H,targetPosition:q,setUpdateHover:O,setReconnecting:R})]})})}const Ma=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Pa(e){let{defaultMarkerColor:t,onlyRenderVisibleElements:n,rfId:o,edgeTypes:i,noPanClassName:s,onReconnect:a,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:u,onEdgeMouseLeave:h,onEdgeClick:f,reconnectRadius:p,onEdgeDoubleClick:g,onReconnectStart:m,onReconnectEnd:y,disableKeyboardA11y:v}=e;const{edgesFocusable:b,edgesReconnectable:w,elementsSelectable:S,onError:E}=Ii(Ma,bi),k=(C=n,Ii((0,r.useCallback)((e=>{if(!C)return e.edges.map((e=>e.id));const t=[];if(e.width&&e.height)for(const n of e.edges){const r=e.nodeLookup.get(n.source),o=e.nodeLookup.get(n.target);r&&o&&vo({sourceNode:r,targetNode:o,width:e.width,height:e.height,transform:e.transform})&&t.push(n.id)}return t}),[C]),bi));var C;return(0,d.jsxs)("div",{className:"react-flow__edges",children:[(0,d.jsx)(ra,{defaultColor:t,rfId:o}),k.map((e=>(0,d.jsx)(Da,{id:e,edgesFocusable:b,edgesReconnectable:w,elementsSelectable:S,noPanClassName:s,onReconnect:a,onContextMenu:l,onMouseEnter:c,onMouseMove:u,onMouseLeave:h,onClick:f,reconnectRadius:p,onDoubleClick:g,onReconnectStart:m,onReconnectEnd:y,rfId:o,onError:E,edgeTypes:i,disableKeyboardA11y:v},e)))]})}Pa.displayName="EdgeRenderer";const Oa=(0,r.memo)(Pa),La=e=>"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")");function Ra(e){let{children:t}=e;const n=Ii(La);return(0,d.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:t})}const za=e=>{var t;return null===(t=e.panZoom)||void 0===t?void 0:t.syncViewport};function Fa(e){return e.connection.inProgress?c(c({},e.connection),{},{to:Qr(e.connection.to,e.transform)}):c({},e.connection)}function Va(e){const t=function(e){if(e)return t=>{const n=Fa(t);return e(n)};return Fa}(e);return Ii(t,bi)}const ja=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Ba(e){let{containerStyle:t,style:n,type:r,component:o}=e;const{nodesConnectable:i,width:s,height:a,isValid:l,inProgress:c}=Ii(ja,bi);return!!(s&&i&&c)?(0,d.jsx)("svg",{style:t,width:s,height:a,className:"react-flow__connectionline react-flow__container",children:(0,d.jsx)("g",{className:h(["react-flow__connection",Cr(l)]),children:(0,d.jsx)(Ua,{style:n,type:r,CustomComponent:o,isValid:l})})}):null}const Ua=e=>{let{style:t,type:n=wr.Bezier,CustomComponent:r,isValid:o}=e;const{inProgress:i,from:s,fromNode:a,fromHandle:l,fromPosition:u,to:h,toNode:f,toHandle:p,toPosition:g}=Va();if(!i)return;if(r)return(0,d.jsx)(r,{connectionLineType:n,connectionLineStyle:t,fromNode:a,fromHandle:l,fromX:s.x,fromY:s.y,toX:h.x,toY:h.y,fromPosition:u,toPosition:g,connectionStatus:Cr(o),toNode:f,toHandle:p});let m="";const y={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:h.x,targetY:h.y,targetPosition:g};switch(n){case wr.Bezier:[m]=mo(y);break;case wr.SimpleBezier:[m]=la(y);break;case wr.Step:[m]=xo(c(c({},y),{},{borderRadius:0}));break;case wr.SmoothStep:[m]=xo(y);break;default:[m]=So(y)}return(0,d.jsx)("path",{d:m,fill:"none",className:"react-flow__connection-path",style:t})};Ua.displayName="ConnectionLine";const Ha={};function qa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ha;(0,r.useRef)(e),Di();(0,r.useEffect)((()=>{}),[e])}function Ka(e){let{nodeTypes:t,edgeTypes:n,onInit:o,onNodeClick:i,onEdgeClick:s,onNodeDoubleClick:a,onEdgeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:u,onNodeMouseLeave:h,onNodeContextMenu:f,onSelectionContextMenu:p,onSelectionStart:g,onSelectionEnd:m,connectionLineType:y,connectionLineStyle:v,connectionLineComponent:b,connectionLineContainerStyle:w,selectionKeyCode:S,selectionOnDrag:E,selectionMode:k,multiSelectionKeyCode:C,panActivationKeyCode:x,zoomActivationKeyCode:_,deleteKeyCode:N,onlyRenderVisibleElements:T,elementsSelectable:A,defaultViewport:I,translateExtent:D,minZoom:M,maxZoom:P,preventScrolling:O,defaultMarkerColor:L,zoomOnScroll:R,zoomOnPinch:z,panOnScroll:F,panOnScrollSpeed:V,panOnScrollMode:j,zoomOnDoubleClick:B,panOnDrag:U,onPaneClick:H,onPaneMouseEnter:q,onPaneMouseMove:K,onPaneMouseLeave:W,onPaneScroll:G,onPaneContextMenu:Y,paneClickDistance:X,nodeClickDistance:Q,onEdgeContextMenu:Z,onEdgeMouseEnter:$,onEdgeMouseMove:J,onEdgeMouseLeave:ee,reconnectRadius:te,onReconnect:ne,onReconnectStart:re,onReconnectEnd:oe,noDragClassName:ie,noWheelClassName:se,noPanClassName:ae,disableKeyboardA11y:le,nodeExtent:ce,rfId:ue,viewport:de,onViewportChange:he}=e;return qa(t),qa(n),Di(),(0,r.useRef)(!1),(0,r.useEffect)((()=>{}),[]),function(e){const t=ws(),n=(0,r.useRef)(!1);(0,r.useEffect)((()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout((()=>e(t)),1),n.current=!0)}),[e,t.viewportInitialized])}(o),function(e){const t=Ii(za),n=Di();(0,r.useEffect)((()=>{e&&(null===t||void 0===t||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))}),[e,t])}(de),(0,d.jsx)(Gs,{onPaneClick:H,onPaneMouseEnter:q,onPaneMouseMove:K,onPaneMouseLeave:W,onPaneContextMenu:Y,onPaneScroll:G,paneClickDistance:X,deleteKeyCode:N,selectionKeyCode:S,selectionOnDrag:E,selectionMode:k,onSelectionStart:g,onSelectionEnd:m,multiSelectionKeyCode:C,panActivationKeyCode:x,zoomActivationKeyCode:_,elementsSelectable:A,zoomOnScroll:R,zoomOnPinch:z,zoomOnDoubleClick:B,panOnScroll:F,panOnScrollSpeed:V,panOnScrollMode:j,panOnDrag:U,defaultViewport:I,translateExtent:D,minZoom:M,maxZoom:P,onSelectionContextMenu:p,preventScrolling:O,noDragClassName:ie,noWheelClassName:se,noPanClassName:ae,disableKeyboardA11y:le,onViewportChange:he,isControlledViewport:!!de,children:(0,d.jsxs)(Ra,{children:[(0,d.jsx)(Oa,{edgeTypes:n,onEdgeClick:s,onEdgeDoubleClick:l,onReconnect:ne,onReconnectStart:re,onReconnectEnd:oe,onlyRenderVisibleElements:T,onEdgeContextMenu:Z,onEdgeMouseEnter:$,onEdgeMouseMove:J,onEdgeMouseLeave:ee,reconnectRadius:te,defaultMarkerColor:L,noPanClassName:ae,disableKeyboardA11y:le,rfId:ue}),(0,d.jsx)(Ba,{style:v,type:y,component:b,containerStyle:w}),(0,d.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,d.jsx)(Js,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:a,onNodeMouseEnter:c,onNodeMouseMove:u,onNodeMouseLeave:h,onNodeContextMenu:f,nodeClickDistance:Q,onlyRenderVisibleElements:T,noPanClassName:ae,noDragClassName:ie,disableKeyboardA11y:le,nodeExtent:ce,rfId:ue}),(0,d.jsx)("div",{className:"react-flow__viewport-portal"})]})})}Ka.displayName="GraphView";const Wa=(0,r.memo)(Ka),Ga=function(){var e,t;let{nodes:n,edges:r,defaultNodes:o,defaultEdges:i,width:s,height:a,fitView:l,nodeOrigin:u,nodeExtent:d}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const h=new Map,f=new Map,p=new Map,g=new Map,m=null!==(e=null!==i&&void 0!==i?i:r)&&void 0!==e?e:[],y=null!==(t=null!==o&&void 0!==o?o:n)&&void 0!==t?t:[],v=null!==u&&void 0!==u?u:[0,0],b=null!==d&&void 0!==d?d:pr;Fo(p,g,m),Oo(y,h,f,{nodeOrigin:v,nodeExtent:b,elevateNodesOnSelect:!1});let w=[0,0,1];if(l&&s&&a){const e=Tr(h,{filter:e=>!(!e.width&&!e.initialWidth||!e.height&&!e.initialHeight)}),{x:t,y:n,zoom:r}=$r(e,s,a,.5,2,.1);w=[t,n,r]}return{rfId:"1",width:0,height:0,transform:w,nodes:y,nodeLookup:h,parentLookup:f,edges:m,edgeLookup:g,connectionLookup:p,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==o,hasDefaultEdges:void 0!==i,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:pr,nodeExtent:b,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:mr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:v,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:c({},br),connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:Yr,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Ya=e=>{let{nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:i,height:s,fitView:a,nodeOrigin:l,nodeExtent:u}=e;return d=(e,d)=>c(c({},Ga({nodes:t,edges:n,width:i,height:s,fitView:a,nodeOrigin:l,nodeExtent:u,defaultNodes:r,defaultEdges:o})),{},{setNodes:t=>{const{nodeLookup:n,parentLookup:r,nodeOrigin:o,elevateNodesOnSelect:i}=d();Oo(t,n,r,{nodeOrigin:o,nodeExtent:u,elevateNodesOnSelect:i,checkEquality:!0}),e({nodes:t})},setEdges:t=>{const{connectionLookup:n,edgeLookup:r}=d();Fo(n,r,t),e({edges:t})},setDefaultNodesAndEdges:(t,n)=>{if(t){const{setNodes:n}=d();n(t),e({hasDefaultNodes:!0})}if(n){const{setEdges:t}=d();t(n),e({hasDefaultEdges:!0})}},updateNodeInternals:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{triggerFitView:!0};const{triggerNodeChanges:r,nodeLookup:o,parentLookup:i,fitViewOnInit:s,fitViewDone:a,fitViewOnInitOptions:l,domNode:u,nodeOrigin:h,nodeExtent:f,debug:p,fitViewSync:g}=d(),{changes:m,updatedInternals:y}=function(e,t,n,r,o,i){const s=null===r||void 0===r?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const l=[],u=window.getComputedStyle(s),{m22:d}=new window.DOMMatrixReadOnly(u.transform),h=[];for(const f of e.values()){const e=t.get(f.id);if(e)if(e.hidden)e.internals=c(c({},e.internals),{},{handleBounds:void 0}),a=!0;else{const r=io(f.nodeElement),s=e.measured.width!==r.width||e.measured.height!==r.height;if(r.width&&r.height&&(s||!e.internals.handleBounds||f.force)){const u=f.nodeElement.getBoundingClientRect(),p=eo(e.extent)?e.extent:i;let{positionAbsolute:g}=e.internals;e.parentId&&"parent"===e.extent?g=Rr(g,r,t.get(e.parentId)):p&&(g=Lr(g,p,r)),e.measured=r,e.internals=c(c({},e.internals),{},{positionAbsolute:g,handleBounds:{source:ho("source",f.nodeElement,u,d,e.id),target:ho("target",f.nodeElement,u,d,e.id)}}),e.parentId&&Lo(e,t,n,{nodeOrigin:o}),a=!0,s&&(l.push({id:e.id,type:"dimensions",dimensions:r}),e.expandParent&&e.parentId&&h.push({id:e.id,parentId:e.parentId,rect:Ur(e,o)}))}}}if(h.length>0){const e=zo(h,t,n,o);l.push(...e)}return{changes:l,updatedInternals:a}}(t,o,i,u,h,f);if(y){if(function(e,t,n){const r=Po(Do,n);for(const o of e.values())if(o.parentId)Lo(o,e,t,r);else{const e=Nr(o,r.nodeOrigin),t=eo(o.extent)?o.extent:r.nodeExtent,n=Lr(e,t,to(o));o.internals.positionAbsolute=n}}(o,i,{nodeOrigin:h,nodeExtent:f}),n.triggerFitView){let t=a;!a&&s&&(t=g(c(c({},l),{},{nodes:null===l||void 0===l?void 0:l.nodes}))),e({fitViewDone:t})}else e({});(null===m||void 0===m?void 0:m.length)>0&&(p&&console.log("React Flow: trigger node changes",m),null===r||void 0===r||r(m))}},updateNodePositions:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=[],r=[];for(const[o,i]of e){const e=!!(null!==i&&void 0!==i&&i.expandParent&&null!==i&&void 0!==i&&i.parentId&&null!==i&&void 0!==i&&i.position),s={id:o,type:"position",position:e?{x:Math.max(0,i.position.x),y:Math.max(0,i.position.y)}:i.position,dragging:t};e&&n.push({id:o,parentId:i.parentId,rect:c(c({},i.internals.positionAbsolute),{},{width:i.measured.width,height:i.measured.height})}),r.push(s)}if(n.length>0){const{nodeLookup:e,parentLookup:t,nodeOrigin:o}=d(),i=zo(n,e,t,o);r.push(...i)}d().triggerNodeChanges(r)},triggerNodeChanges:e=>{const{onNodesChange:t,setNodes:n,nodes:r,hasDefaultNodes:o,debug:i}=d();null!==e&&void 0!==e&&e.length&&(o&&n(as(e,r)),i&&console.log("React Flow: trigger node changes",e),null===t||void 0===t||t(e))},triggerEdgeChanges:e=>{const{onEdgesChange:t,setEdges:n,edges:r,hasDefaultEdges:o,debug:i}=d();null!==e&&void 0!==e&&e.length&&(o&&n(ls(e,r)),i&&console.log("React Flow: trigger edge changes",e),null===t||void 0===t||t(e))},addSelectedNodes:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:i}=d();t?o(e.map((e=>cs(e,!0)))):(o(us(r,new Set([...e]),!0)),i(us(n)))},addSelectedEdges:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:i}=d();t?i(e.map((e=>cs(e,!0)))):(i(us(n,new Set([...e]))),o(us(r,new Set,!0)))},unselectNodesAndEdges:function(){let{nodes:e,edges:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{edges:n,nodes:r,nodeLookup:o,triggerNodeChanges:i,triggerEdgeChanges:s}=d(),a=t||n,l=(e||r).map((e=>{const t=o.get(e.id);return t&&(t.selected=!1),cs(e.id,!1)})),c=a.map((e=>cs(e.id,!1)));i(l),s(c)},setMinZoom:t=>{const{panZoom:n,maxZoom:r}=d();null===n||void 0===n||n.setScaleExtent([t,r]),e({minZoom:t})},setMaxZoom:t=>{const{panZoom:n,minZoom:r}=d();null===n||void 0===n||n.setScaleExtent([r,t]),e({maxZoom:t})},setTranslateExtent:t=>{var n;null===(n=d().panZoom)||void 0===n||n.setTranslateExtent(t),e({translateExtent:t})},setPaneClickDistance:e=>{var t;null===(t=d().panZoom)||void 0===t||t.setClickDistance(e)},resetSelectedElements:()=>{const{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:r}=d(),o=t.reduce(((e,t)=>t.selected?[...e,cs(t.id,!1)]:e),[]),i=e.reduce(((e,t)=>t.selected?[...e,cs(t.id,!1)]:e),[]);n(o),r(i)},setNodeExtent:t=>{const{nodes:n,nodeLookup:r,parentLookup:o,nodeOrigin:i,elevateNodesOnSelect:s,nodeExtent:a}=d();t[0][0]===a[0][0]&&t[0][1]===a[0][1]&&t[1][0]===a[1][0]&&t[1][1]===a[1][1]||(Oo(n,r,o,{nodeOrigin:i,nodeExtent:t,elevateNodesOnSelect:s,checkEquality:!1}),e({nodeExtent:t}))},panBy:e=>{const{transform:t,width:n,height:r,panZoom:o,translateExtent:i}=d();return async function(e){let{delta:t,panZoom:n,transform:r,translateExtent:o,width:i,height:s}=e;if(!n||!t.x&&!t.y)return Promise.resolve(!1);const a=await n.setViewportConstrained({x:r[0]+t.x,y:r[1]+t.y,zoom:r[2]},[[0,0],[i,s]],o),l=!!a&&(a.x!==r[0]||a.y!==r[1]||a.k!==r[2]);return Promise.resolve(l)}({delta:e,panZoom:o,transform:t,translateExtent:i,width:n,height:r})},fitView:e=>{const{panZoom:t,width:n,height:r,minZoom:o,maxZoom:i,nodeLookup:s}=d();return t?Dr({nodes:Ir(s,e),width:n,height:r,panZoom:t,minZoom:o,maxZoom:i},e):Promise.resolve(!1)},fitViewSync:e=>{const{panZoom:t,width:n,height:r,minZoom:o,maxZoom:i,nodeLookup:s}=d();if(!t)return!1;const a=Ir(s,e);return Dr({nodes:a,width:n,height:r,panZoom:t,minZoom:o,maxZoom:i},e),a.size>0},cancelConnection:()=>{e({connection:c({},br)})},updateConnection:t=>{e({connection:t})},reset:()=>e(c({},Ga()))}),h=Object.is,d?vi(d,h):vi;var d,h};function Xa(e){let{initialNodes:t,initialEdges:n,defaultNodes:o,defaultEdges:i,initialWidth:s,initialHeight:a,fitView:l,nodeOrigin:c,nodeExtent:u,children:h}=e;const[f]=(0,r.useState)((()=>Ya({nodes:t,edges:n,defaultNodes:o,defaultEdges:i,width:s,height:a,fitView:l,nodeOrigin:c,nodeExtent:u})));return(0,d.jsx)(Ti,{value:f,children:(0,d.jsx)(vs,{children:h})})}function Qa(e){let{children:t,nodes:n,edges:o,defaultNodes:i,defaultEdges:s,width:a,height:l,fitView:c,nodeOrigin:u,nodeExtent:h}=e;return(0,r.useContext)(Ni)?(0,d.jsx)(d.Fragment,{children:t}):(0,d.jsx)(Xa,{initialNodes:n,initialEdges:o,defaultNodes:i,defaultEdges:s,initialWidth:a,initialHeight:l,fitView:c,nodeOrigin:u,nodeExtent:h,children:t})}const Za={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var $a=ps((function(e,t){let{nodes:n,edges:o,defaultNodes:i,defaultEdges:s,className:a,nodeTypes:l,edgeTypes:f,onNodeClick:p,onEdgeClick:g,onInit:m,onMove:y,onMoveStart:v,onMoveEnd:b,onConnect:w,onConnectStart:S,onConnectEnd:E,onClickConnectStart:k,onClickConnectEnd:C,onNodeMouseEnter:x,onNodeMouseMove:_,onNodeMouseLeave:N,onNodeContextMenu:T,onNodeDoubleClick:A,onNodeDragStart:I,onNodeDrag:D,onNodeDragStop:M,onNodesDelete:P,onEdgesDelete:O,onDelete:L,onSelectionChange:R,onSelectionDragStart:z,onSelectionDrag:F,onSelectionDragStop:V,onSelectionContextMenu:j,onSelectionStart:B,onSelectionEnd:U,onBeforeDelete:H,connectionMode:q,connectionLineType:K=wr.Bezier,connectionLineStyle:W,connectionLineComponent:G,connectionLineContainerStyle:Y,deleteKeyCode:X="Backspace",selectionKeyCode:Q="Shift",selectionOnDrag:Z=!1,selectionMode:$=vr.Full,panActivationKeyCode:J="Space",multiSelectionKeyCode:ee=(Jr()?"Meta":"Control"),zoomActivationKeyCode:te=(Jr()?"Meta":"Control"),snapToGrid:ne,snapGrid:re,onlyRenderVisibleElements:oe=!1,selectNodesOnDrag:ie,nodesDraggable:se,nodesConnectable:ae,nodesFocusable:le,nodeOrigin:ce=Yi,edgesFocusable:ue,edgesReconnectable:de,elementsSelectable:he=!0,defaultViewport:fe=Xi,minZoom:pe=.5,maxZoom:ge=2,translateExtent:me=pr,preventScrolling:ye=!0,nodeExtent:ve,defaultMarkerColor:be="#b1b1b7",zoomOnScroll:we=!0,zoomOnPinch:Se=!0,panOnScroll:Ee=!1,panOnScrollSpeed:ke=.5,panOnScrollMode:Ce=yr.Free,zoomOnDoubleClick:xe=!0,panOnDrag:_e=!0,onPaneClick:Ne,onPaneMouseEnter:Te,onPaneMouseMove:Ae,onPaneMouseLeave:Ie,onPaneScroll:De,onPaneContextMenu:Me,paneClickDistance:Pe=0,nodeClickDistance:Oe=0,children:Le,onReconnect:Re,onReconnectStart:ze,onReconnectEnd:Fe,onEdgeContextMenu:Ve,onEdgeDoubleClick:je,onEdgeMouseEnter:Be,onEdgeMouseMove:Ue,onEdgeMouseLeave:He,reconnectRadius:qe=10,onNodesChange:Ke,onEdgesChange:We,noDragClassName:Ge="nodrag",noWheelClassName:Ye="nowheel",noPanClassName:Xe="nopan",fitView:Qe,fitViewOptions:Ze,connectOnClick:$e,attributionPosition:Je,proOptions:et,defaultEdgeOptions:tt,elevateNodesOnSelect:nt,elevateEdgesOnSelect:rt,disableKeyboardA11y:ot=!1,autoPanOnConnect:it,autoPanOnNodeDrag:st,autoPanSpeed:at,connectionRadius:lt,isValidConnection:ct,onError:ut,style:dt,id:ht,nodeDragThreshold:ft,viewport:pt,onViewportChange:gt,width:mt,height:yt,colorMode:vt="light",debug:bt}=e,wt=u(e,xi);const St=ht||"1",Et=function(e){var t;const[n,o]=(0,r.useState)("system"===e?null:e);return(0,r.useEffect)((()=>{if("system"!==e)return void o(e);const t=es(),n=()=>o(null!==t&&void 0!==t&&t.matches?"dark":"light");return n(),null===t||void 0===t||t.addEventListener("change",n),()=>{null===t||void 0===t||t.removeEventListener("change",n)}}),[e]),null!==n?n:null!==(t=es())&&void 0!==t&&t.matches?"dark":"light"}(vt);return(0,d.jsx)("div",c(c({"data-testid":"rf__wrapper"},wt),{},{style:c(c({},dt),Za),ref:t,className:h(["react-flow",a,Et]),id:ht,children:(0,d.jsxs)(Qa,{nodes:n,edges:o,width:mt,height:yt,fitView:Qe,nodeOrigin:ce,nodeExtent:ve,children:[(0,d.jsx)(Wa,{onInit:m,onNodeClick:p,onEdgeClick:g,onNodeMouseEnter:x,onNodeMouseMove:_,onNodeMouseLeave:N,onNodeContextMenu:T,onNodeDoubleClick:A,nodeTypes:l,edgeTypes:f,connectionLineType:K,connectionLineStyle:W,connectionLineComponent:G,connectionLineContainerStyle:Y,selectionKeyCode:Q,selectionOnDrag:Z,selectionMode:$,deleteKeyCode:X,multiSelectionKeyCode:ee,panActivationKeyCode:J,zoomActivationKeyCode:te,onlyRenderVisibleElements:oe,defaultViewport:fe,translateExtent:me,minZoom:pe,maxZoom:ge,preventScrolling:ye,zoomOnScroll:we,zoomOnPinch:Se,zoomOnDoubleClick:xe,panOnScroll:Ee,panOnScrollSpeed:ke,panOnScrollMode:Ce,panOnDrag:_e,onPaneClick:Ne,onPaneMouseEnter:Te,onPaneMouseMove:Ae,onPaneMouseLeave:Ie,onPaneScroll:De,onPaneContextMenu:Me,paneClickDistance:Pe,nodeClickDistance:Oe,onSelectionContextMenu:j,onSelectionStart:B,onSelectionEnd:U,onReconnect:Re,onReconnectStart:ze,onReconnectEnd:Fe,onEdgeContextMenu:Ve,onEdgeDoubleClick:je,onEdgeMouseEnter:Be,onEdgeMouseMove:Ue,onEdgeMouseLeave:He,reconnectRadius:qe,defaultMarkerColor:be,noDragClassName:Ge,noWheelClassName:Ye,noPanClassName:Xe,rfId:St,disableKeyboardA11y:ot,nodeExtent:ve,viewport:pt,onViewportChange:gt}),(0,d.jsx)(Ji,{nodes:n,edges:o,defaultNodes:i,defaultEdges:s,onConnect:w,onConnectStart:S,onConnectEnd:E,onClickConnectStart:k,onClickConnectEnd:C,nodesDraggable:se,nodesConnectable:ae,nodesFocusable:le,edgesFocusable:ue,edgesReconnectable:de,elementsSelectable:he,elevateNodesOnSelect:nt,elevateEdgesOnSelect:rt,minZoom:pe,maxZoom:ge,nodeExtent:ve,onNodesChange:Ke,onEdgesChange:We,snapToGrid:ne,snapGrid:re,connectionMode:q,translateExtent:me,connectOnClick:$e,defaultEdgeOptions:tt,fitView:Qe,fitViewOptions:Ze,onNodesDelete:P,onEdgesDelete:O,onDelete:L,onNodeDragStart:I,onNodeDrag:D,onNodeDragStop:M,onSelectionDrag:F,onSelectionDragStart:z,onSelectionDragStop:V,onMove:y,onMoveStart:v,onMoveEnd:b,noPanClassName:Xe,nodeOrigin:ce,rfId:St,autoPanOnConnect:it,autoPanOnNodeDrag:st,autoPanSpeed:at,onError:ut,connectionRadius:lt,isValidConnection:ct,selectNodesOnDrag:ie,nodeDragThreshold:ft,onBeforeDelete:H,paneClickDistance:Pe,debug:bt}),(0,d.jsx)(Gi,{onSelectionChange:R}),Le,(0,d.jsx)(Bi,{proOptions:et,position:Je}),(0,d.jsx)(Fi,{rfId:St,disableKeyboardA11y:ot})]})}))}));function Ja(e){let{dimensions:t,lineWidth:n,variant:r,className:o}=e;return(0,d.jsx)("path",{strokeWidth:n,d:"M".concat(t[0]/2," 0 V").concat(t[1]," M0 ").concat(t[1]/2," H").concat(t[0]),className:h(["react-flow__background-pattern",r,o])})}function el(e){let{radius:t,className:n}=e;return(0,d.jsx)("circle",{cx:t,cy:t,r:t,className:h(["react-flow__background-pattern","dots",n])})}var tl;!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(tl||(tl={}));const nl={[tl.Dots]:1,[tl.Lines]:1,[tl.Cross]:6},rl=e=>({transform:e.transform,patternId:"pattern-".concat(e.rfId)});function ol(e){let{id:t,variant:n=tl.Dots,gap:o=20,size:i,lineWidth:s=1,offset:a=0,color:l,bgColor:u,style:f,className:p,patternClassName:g}=e;const m=(0,r.useRef)(null),{transform:y,patternId:v}=Ii(rl,bi),b=i||nl[n],w=n===tl.Dots,S=n===tl.Cross,E=Array.isArray(o)?o:[o,o],k=[E[0]*y[2]||1,E[1]*y[2]||1],C=b*y[2],x=Array.isArray(a)?a:[a,a],_=S?[C,C]:k,N=[x[0]*y[2]||1+_[0]/2,x[1]*y[2]||1+_[1]/2],T="".concat(v).concat(t||"");return(0,d.jsxs)("svg",{className:h(["react-flow__background",p]),style:c(c(c({},f),Cs),{},{"--xy-background-color-props":u,"--xy-background-pattern-color-props":l}),ref:m,"data-testid":"rf__background",children:[(0,d.jsx)("pattern",{id:T,x:y[0]%k[0],y:y[1]%k[1],width:k[0],height:k[1],patternUnits:"userSpaceOnUse",patternTransform:"translate(-".concat(N[0],",-").concat(N[1],")"),children:w?(0,d.jsx)(el,{radius:C/2,className:g}):(0,d.jsx)(Ja,{dimensions:_,lineWidth:s,variant:n,className:g})}),(0,d.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(T,")")})]})}ol.displayName="Background";const il=(0,r.memo)(ol);function sl(){return(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,d.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function al(){return(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,d.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function ll(){return(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,d.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function cl(){return(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,d.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function ul(){return(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,d.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function dl(e){let{children:t,className:n}=e,r=u(e,_i);return(0,d.jsx)("button",c(c({type:"button",className:h(["react-flow__controls-button",n])},r),{},{children:t}))}const hl=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function fl(e){let{style:t,showZoom:n=!0,showFitView:r=!0,showInteractive:o=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:a,onFitView:l,onInteractiveChange:c,className:u,children:f,position:p="bottom-left",orientation:g="vertical","aria-label":m="React Flow controls"}=e;const y=Di(),{isInteractive:v,minZoomReached:b,maxZoomReached:w}=Ii(hl,bi),{zoomIn:S,zoomOut:E,fitView:k}=ws(),C="horizontal"===g?"horizontal":"vertical";return(0,d.jsxs)(ji,{className:h(["react-flow__controls",C,u]),position:p,style:t,"data-testid":"rf__controls","aria-label":m,children:[n&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(dl,{onClick:()=>{S(),null===s||void 0===s||s()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:w,children:(0,d.jsx)(sl,{})}),(0,d.jsx)(dl,{onClick:()=>{E(),null===a||void 0===a||a()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b,children:(0,d.jsx)(al,{})})]}),r&&(0,d.jsx)(dl,{className:"react-flow__controls-fitview",onClick:()=>{k(i),null===l||void 0===l||l()},title:"fit view","aria-label":"fit view",children:(0,d.jsx)(ll,{})}),o&&(0,d.jsx)(dl,{className:"react-flow__controls-interactive",onClick:()=>{y.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),null===c||void 0===c||c(!v)},title:"toggle interactivity","aria-label":"toggle interactivity",children:v?(0,d.jsx)(ul,{}):(0,d.jsx)(cl,{})}),f]})}fl.displayName="Controls";(0,r.memo)(fl);const pl=(0,r.memo)((function(e){let{id:t,x:n,y:r,width:o,height:i,style:s,color:a,strokeColor:l,strokeWidth:c,className:u,borderRadius:f,shapeRendering:p,selected:g,onClick:m}=e;const{background:y,backgroundColor:v}=s||{},b=a||y||v;return(0,d.jsx)("rect",{className:h(["react-flow__minimap-node",{selected:g},u]),x:n,y:r,rx:f,ry:f,width:o,height:i,style:{fill:b,stroke:l,strokeWidth:c},shapeRendering:p,onClick:m?e=>m(e,t):void 0})})),gl=e=>e.nodes.map((e=>e.id)),ml=e=>e instanceof Function?e:()=>e;const yl=(0,r.memo)((function(e){let{id:t,nodeColorFunc:n,nodeStrokeColorFunc:r,nodeClassNameFunc:o,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:a,NodeComponent:l,onClick:c}=e;const{node:u,x:h,y:f,width:p,height:g}=Ii((e=>{const n=e.nodeLookup.get(t),{x:r,y:o}=n.internals.positionAbsolute,{width:i,height:s}=to(n);return{node:n,x:r,y:o,width:i,height:s}}),bi);return u&&!u.hidden&&no(u)?(0,d.jsx)(l,{x:h,y:f,width:p,height:g,style:u.style,selected:!!u.selected,className:o(u),color:n(u),borderRadius:i,strokeColor:r(u),strokeWidth:s,shapeRendering:a,onClick:c,id:u.id}):null}));var vl=(0,r.memo)((function(e){let{nodeStrokeColor:t,nodeColor:n,nodeClassName:r="",nodeBorderRadius:o=5,nodeStrokeWidth:i,nodeComponent:s=pl,onClick:a}=e;const l=Ii(gl,bi),c=ml(n),u=ml(t),h=ml(r),f="undefined"===typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,d.jsx)(d.Fragment,{children:l.map((e=>(0,d.jsx)(yl,{id:e,nodeColorFunc:c,nodeStrokeColorFunc:u,nodeClassNameFunc:h,nodeBorderRadius:o,nodeStrokeWidth:i,NodeComponent:s,onClick:a,shapeRendering:f},e)))})}));const bl=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?qr(Tr(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}};function wl(e){var t,n;let{style:o,className:i,nodeStrokeColor:s,nodeColor:a,nodeClassName:l="",nodeBorderRadius:u=5,nodeStrokeWidth:f,nodeComponent:p,bgColor:g,maskColor:m,maskStrokeColor:y,maskStrokeWidth:v,position:b="bottom-right",onClick:w,onNodeClick:S,pannable:E=!1,zoomable:k=!1,ariaLabel:C="React Flow mini map",inversePan:x,zoomStep:_=10,offsetScale:N=5}=e;const T=Di(),A=(0,r.useRef)(null),{boundingRect:I,viewBB:D,rfId:M,panZoom:P,translateExtent:O,flowWidth:L,flowHeight:R}=Ii(bl,bi),z=null!==(t=null===o||void 0===o?void 0:o.width)&&void 0!==t?t:200,F=null!==(n=null===o||void 0===o?void 0:o.height)&&void 0!==n?n:150,V=I.width/z,j=I.height/F,B=Math.max(V,j),U=B*z,H=B*F,q=N*B,K=I.x-(U-I.width)/2-q,W=I.y-(H-I.height)/2-q,G=U+2*q,Y=H+2*q,X="".concat("react-flow__minimap-desc","-").concat(M),Q=(0,r.useRef)(0),Z=(0,r.useRef)();Q.current=B,(0,r.useEffect)((()=>{if(A.current&&P)return Z.current=function(e){let{domNode:t,panZoom:n,getTransform:r,getViewScale:o}=e;const i=Me(t);return{update:function(e){let{translateExtent:t,width:s,height:a,zoomStep:l=10,pannable:c=!0,zoomable:u=!0,inversePan:d=!1}=e,h=[0,0];const f=nr().on("start",(e=>{var t,n;"mousedown"!==e.sourceEvent.type&&"touchstart"!==e.sourceEvent.type||(h=[null!==(t=e.sourceEvent.clientX)&&void 0!==t?t:e.sourceEvent.touches[0].clientX,null!==(n=e.sourceEvent.clientY)&&void 0!==n?n:e.sourceEvent.touches[0].clientY])})).on("zoom",c?e=>{var i,l;const c=r();if("mousemove"!==e.sourceEvent.type&&"touchmove"!==e.sourceEvent.type||!n)return;const u=[null!==(i=e.sourceEvent.clientX)&&void 0!==i?i:e.sourceEvent.touches[0].clientX,null!==(l=e.sourceEvent.clientY)&&void 0!==l?l:e.sourceEvent.touches[0].clientY],f=[u[0]-h[0],u[1]-h[1]];h=u;const p=o()*Math.max(c[2],Math.log(c[2]))*(d?-1:1),g={x:c[0]-f[0]*p,y:c[1]-f[1]*p},m=[[0,0],[s,a]];n.setViewportConstrained({x:g.x,y:g.y,zoom:c[2]},m,t)}:null).on("zoom.wheel",u?e=>{const t=r();if("wheel"!==e.sourceEvent.type||!n)return;const o=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*l,i=t[2]*Math.pow(2,o);n.scaleTo(i)}:null);i.call(f,{})},destroy:function(){i.on("zoom",null)},pointer:Pe}}({domNode:A.current,panZoom:P,getTransform:()=>T.getState().transform,getViewScale:()=>Q.current}),()=>{var e;null===(e=Z.current)||void 0===e||e.destroy()}}),[P]),(0,r.useEffect)((()=>{var e;null===(e=Z.current)||void 0===e||e.update({translateExtent:O,width:L,height:R,inversePan:x,pannable:E,zoomStep:_,zoomable:k})}),[E,k,x,_,O,L,R]);const $=w?e=>{var t;const[n,r]=(null===(t=Z.current)||void 0===t?void 0:t.pointer(e))||[0,0];w(e,{x:n,y:r})}:void 0,J=S?(0,r.useCallback)(((e,t)=>{const n=T.getState().nodeLookup.get(t);S(e,n)}),[]):void 0;return(0,d.jsx)(ji,{position:b,style:c(c({},o),{},{"--xy-minimap-background-color-props":"string"===typeof g?g:void 0,"--xy-minimap-mask-background-color-props":"string"===typeof m?m:void 0,"--xy-minimap-mask-stroke-color-props":"string"===typeof y?y:void 0,"--xy-minimap-mask-stroke-width-props":"number"===typeof v?v*B:void 0,"--xy-minimap-node-background-color-props":"string"===typeof a?a:void 0,"--xy-minimap-node-stroke-color-props":"string"===typeof s?s:void 0,"--xy-minimap-node-stroke-width-props":"string"===typeof f?f:void 0}),className:h(["react-flow__minimap",i]),"data-testid":"rf__minimap",children:(0,d.jsxs)("svg",{width:z,height:F,viewBox:"".concat(K," ").concat(W," ").concat(G," ").concat(Y),className:"react-flow__minimap-svg",role:"img","aria-labelledby":X,ref:A,onClick:$,children:[C&&(0,d.jsx)("title",{id:X,children:C}),(0,d.jsx)(vl,{onClick:J,nodeColor:a,nodeStrokeColor:s,nodeBorderRadius:u,nodeClassName:l,nodeStrokeWidth:f,nodeComponent:p}),(0,d.jsx)("path",{className:"react-flow__minimap-mask",d:"M".concat(K-q,",").concat(W-q,"h").concat(G+2*q,"v").concat(Y+2*q,"h").concat(-G-2*q,"z\n        M").concat(D.x,",").concat(D.y,"h").concat(D.width,"v").concat(D.height,"h").concat(-D.width,"z"),fillRule:"evenodd",pointerEvents:"none"})]})})}wl.displayName="MiniMap";(0,r.memo)(wl);(0,r.memo)((function(e){let{nodeId:t,position:n,variant:o=ni.Handle,className:i,style:s={},children:a,color:l,minWidth:u=10,minHeight:f=10,maxWidth:p=Number.MAX_VALUE,maxHeight:g=Number.MAX_VALUE,keepAspectRatio:m=!1,shouldResize:y,onResizeStart:v,onResize:b,onResizeEnd:w}=e;const S=zs(),E="string"===typeof t?t:S,k=Di(),C=(0,r.useRef)(null),x=o===ni.Line?"right":"bottom-right",_=null!==n&&void 0!==n?n:x,N=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(C.current&&E)return N.current||(N.current=ui({domNode:C.current,nodeId:E,getStoreItems:()=>{const{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:o,domNode:i}=k.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:o,paneDomNode:i}},onChange:(e,t)=>{const{triggerNodeChanges:n,nodeLookup:r,parentLookup:o,nodeOrigin:i}=k.getState(),s=[],a={x:e.x,y:e.y},l=r.get(E);if(l&&l.expandParent&&l.parentId){var u,d,h,f,p;const t=null!==(u=l.origin)&&void 0!==u?u:i,n=null!==(d=e.width)&&void 0!==d?d:l.measured.width,g=null!==(h=e.height)&&void 0!==h?h:l.measured.height,m=zo([{id:l.id,parentId:l.parentId,rect:c({width:n,height:g},ro({x:null!==(f=e.x)&&void 0!==f?f:l.position.x,y:null!==(p=e.y)&&void 0!==p?p:l.position.y},{width:n,height:g},l.parentId,r,t))}],r,o,i);s.push(...m),a.x=e.x?Math.max(t[0]*n,e.x):void 0,a.y=e.y?Math.max(t[1]*g,e.y):void 0}if(void 0!==a.x&&void 0!==a.y){const e={id:E,type:"position",position:c({},a)};s.push(e)}if(void 0!==e.width&&void 0!==e.height){const t={id:E,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:e.width,height:e.height}};s.push(t)}for(const g of t){const e=c(c({},g),{},{type:"position"});s.push(e)}n(s)},onEnd:()=>{const e={id:E,type:"dimensions",resizing:!1};k.getState().triggerNodeChanges([e])}})),N.current.update({controlPosition:_,boundaries:{minWidth:u,minHeight:f,maxWidth:p,maxHeight:g},keepAspectRatio:m,onResizeStart:v,onResize:b,onResizeEnd:w,shouldResize:y}),()=>{var e;null===(e=N.current)||void 0===e||e.destroy()}}),[_,u,f,p,g,m,v,b,w,y]);const T=_.split("-"),A=o===ni.Line?"borderColor":"backgroundColor",I=l?c(c({},s),{},{[A]:l}):s;return(0,d.jsx)("div",{className:h(["react-flow__resize-control","nodrag",...T,o,i]),ref:C,style:I,children:a})}));const Sl=e=>{let t;const n=new Set,r=(e,r)=>{const o="function"===typeof e?e(t):e;if(!Object.is(o,t)){const e=t;t=(null!=r?r:"object"!==typeof o||null===o)?o:Object.assign({},t,o),n.forEach((n=>n(t,e)))}},o=()=>t,i={setState:r,getState:o,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e))},s=t=e(r,o,i);return i},El=e=>e;const kl=e=>{const t=(e=>e?Sl(e):Sl)(e),n=e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:El;const n=r.useSyncExternalStore(e.subscribe,(()=>t(e.getState())),(()=>t(e.getInitialState())));return r.useDebugValue(n),n}(t,e);return Object.assign(n,t),n},Cl=()=>new Map,xl=e=>{const t=Cl();return e.forEach(((e,n)=>{t.set(n,e)})),t},_l=(e,t,n)=>{let r=e.get(t);return void 0===r&&e.set(t,r=n()),r},Nl=()=>new Set,Tl=e=>e[e.length-1],Al=Array.from,Il=Array.isArray;class Dl{constructor(){this._observers=Cl()}on(e,t){return _l(this._observers,e,Nl).add(t),t}once(e,t){var n=this;const r=function(){n.off(e,r),t(...arguments)};this.on(e,r)}off(e,t){const n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return Al((this._observers.get(e)||Cl()).values()).forEach((e=>e(...t)))}destroy(){this._observers=Cl()}}const Ml=Math.floor,Pl=(Math.ceil,Math.abs),Ol=(Math.imul,Math.round,Math.log10,Math.log2,Math.log,Math.sqrt,(e,t)=>e<t?e:t),Ll=(e,t)=>e>t?e:t,Rl=(Number.isNaN,Math.pow,Math.sign,e=>0!==e?e<0:1/e<0),zl=128,Fl=127,Vl=2147483647,jl=(Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.isInteger||(e=>"number"===typeof e&&isFinite(e)&&Ml(e)===e)),Bl=(Number.isNaN,Number.parseInt,String.fromCharCode),Ul=(String.fromCodePoint,Bl(65535),/^\s*/g),Hl=/([A-Z])/g,ql=(e,t)=>(e=>e.replace(Ul,""))(e.replace(Hl,(e=>"".concat(t).concat((e=>e.toLowerCase())(e))))),Kl="undefined"!==typeof TextEncoder?new TextEncoder:null,Wl=Kl?e=>Kl.encode(e):e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=t.codePointAt(o);return r};let Gl="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Gl&&1===Gl.decode(new Uint8Array).length&&(Gl=null);class Yl{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Xl=()=>new Yl,Ql=e=>{const t=new Uint8Array((e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t})(e));let n=0;for(let r=0;r<e.bufs.length;r++){const o=e.bufs[r];t.set(o,n),n+=o.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},Zl=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},$l=Zl,Jl=(e,t)=>{for(;t>Fl;)Zl(e,zl|Fl&t),t=Ml(t/128);Zl(e,Fl&t)},ec=(e,t)=>{const n=Rl(t);for(n&&(t=-t),Zl(e,(t>63?zl:0)|(n?64:0)|63&t),t=Ml(t/64);t>0;)Zl(e,(t>Fl?zl:0)|Fl&t),t=Ml(t/128)},tc=new Uint8Array(3e4),nc=tc.length/3,rc=Kl&&Kl.encodeInto?(e,t)=>{if(t.length<nc){const n=Kl.encodeInto(t,tc).written||0;Jl(e,n);for(let t=0;t<n;t++)Zl(e,tc[t])}else ic(e,Wl(t))}:(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;Jl(e,r);for(let o=0;o<r;o++)Zl(e,n.codePointAt(o))},oc=(e,t)=>{const n=e.cbuf.length,r=e.cpos,o=Ol(n-r,t.length),i=t.length-o;e.cbuf.set(t.subarray(0,o),r),e.cpos+=o,i>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(Ll(2*n,i)),e.cbuf.set(t.subarray(o)),e.cpos=i)},ic=(e,t)=>{Jl(e,t.byteLength),oc(e,t)},sc=(e,t)=>{((e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*Ll(n,t)),e.cpos=0)})(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},ac=new DataView(new ArrayBuffer(4)),lc=(e,t)=>{switch(typeof t){case"string":Zl(e,119),rc(e,t);break;case"number":jl(t)&&Pl(t)<=Vl?(Zl(e,125),ec(e,t)):(n=t,ac.setFloat32(0,n),ac.getFloat32(0)===n?(Zl(e,124),((e,t)=>{sc(e,4).setFloat32(0,t,!1)})(e,t)):(Zl(e,123),((e,t)=>{sc(e,8).setFloat64(0,t,!1)})(e,t)));break;case"bigint":Zl(e,122),((e,t)=>{sc(e,8).setBigInt64(0,t,!1)})(e,t);break;case"object":if(null===t)Zl(e,126);else if(Il(t)){Zl(e,117),Jl(e,t.length);for(let n=0;n<t.length;n++)lc(e,t[n])}else if(t instanceof Uint8Array)Zl(e,116),ic(e,t);else{Zl(e,118);const n=Object.keys(t);Jl(e,n.length);for(let r=0;r<n.length;r++){const o=n[r];rc(e,o),lc(e,t[o])}}break;case"boolean":Zl(e,t?120:121);break;default:Zl(e,127)}var n};class cc extends Yl{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Jl(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const uc=e=>{e.count>0&&(ec(e.encoder,1===e.count?e.s:-e.s),e.count>1&&Jl(e.encoder,e.count-2))};class dc{constructor(){this.encoder=new Yl,this.s=0,this.count=0}write(e){this.s===e?this.count++:(uc(this),this.count=1,this.s=e)}toUint8Array(){return uc(this),Ql(this.encoder)}}const hc=e=>{if(e.count>0){const t=2*e.diff+(1===e.count?0:1);ec(e.encoder,t),e.count>1&&Jl(e.encoder,e.count-2)}};class fc{constructor(){this.encoder=new Yl,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(hc(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return hc(this),Ql(this.encoder)}}class pc{constructor(){this.sarr=[],this.s="",this.lensE=new dc}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new Yl;return this.sarr.push(this.s),this.s="",rc(e,this.sarr.join("")),oc(e,this.lensE.toUint8Array()),Ql(e)}}const gc=e=>new Error(e),mc=()=>{throw gc("Method unimplemented")},yc=()=>{throw gc("Unexpected case")};gc("Unexpected end of array"),gc("Integer out of Range");crypto.subtle;const vc=crypto.getRandomValues.bind(crypto),bc=(Math.random,()=>vc(new Uint32Array(1))[0]),wc=[1e7]+-1e3+-4e3+-8e3+-1e11,Sc=()=>wc.replace(/[018]/g,(e=>(e^bc()&15>>e/4).toString(16))),Ec=e=>new Promise(e),kc=(Promise.all.bind(Promise),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&kc(e,t,n+1)}}),Cc=e=>void 0===e?null:e;let xc=new class{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}},_c=!0;try{"undefined"!==typeof localStorage&&localStorage&&(xc=localStorage,_c=!1)}catch(Xx){}const Nc=xc,Tc="undefined"!==typeof process&&process.release&&/node|io\.js/.test(process.release.name)&&"[object process]"===Object.prototype.toString.call("undefined"!==typeof process?process:0);"undefined"!==typeof navigator&&/Mac/.test(navigator.platform);let Ac;const Ic=[],Dc=()=>{if(void 0===Ac)if(Tc){Ac=Cl();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];"-"===r[0]?(null!==t&&Ac.set(t,""),t=r):null!==t?(Ac.set(t,r),t=null):Ic.push(r)}null!==t&&Ac.set(t,"")}else"object"===typeof location?(Ac=Cl(),(location.search||"?").slice(1).split("&").forEach((e=>{if(0!==e.length){const[t,n]=e.split("=");Ac.set("--".concat(ql(t,"-")),n),Ac.set("-".concat(ql(t,"-")),n)}}))):Ac=Cl();return Ac},Mc=e=>Dc().has(e),Pc=e=>Cc(Tc?{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[e.toUpperCase().replaceAll("-","_")]:Nc.getItem(e)),Oc=e=>Mc("--"+e)||null!==Pc(e);Oc("production");const Lc=Tc&&["true","1","2"].includes({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FORCE_COLOR)||!Mc("--no-colors")&&!Oc("no-color")&&(!Tc||process.stdout.isTTY)&&(!Tc||Mc("--color")||null!==Pc("COLORTERM")||(Pc("TERM")||"").includes("color"));class Rc{constructor(e,t){this.left=e,this.right=t}}const zc=(e,t)=>new Rc(e,t),Fc="undefined"!==typeof document?document:{},Vc=("undefined"!==typeof DOMParser&&new DOMParser,Fc.ELEMENT_NODE,Fc.TEXT_NODE,Fc.CDATA_SECTION_NODE,Fc.COMMENT_NODE,Fc.DOCUMENT_NODE,Fc.DOCUMENT_TYPE_NODE,Fc.DOCUMENT_FRAGMENT_NODE,Symbol),jc=Date.now,Bc=Vc(),Uc=Vc(),Hc=Vc(),qc=Vc(),Kc=Vc(),Wc=Vc(),Gc=Vc(),Yc=Vc(),Xc=Vc();jc();const Qc={[Bc]:zc("font-weight","bold"),[Uc]:zc("font-weight","normal"),[Hc]:zc("color","blue"),[Kc]:zc("color","green"),[qc]:zc("color","grey"),[Wc]:zc("color","red"),[Gc]:zc("color","purple"),[Yc]:zc("color","orange"),[Xc]:zc("color","black")},Zc=Lc?e=>{var t;1===e.length&&(null===(t=e[0])||void 0===t?void 0:t.constructor)===Function&&(e=e[0]());const n=[],r=[],o=Cl();let i=[],s=0;for(;s<e.length;s++){const t=e[s],i=Qc[t];if(void 0!==i)o.set(i.left,i.right);else{if(void 0===t)break;if(t.constructor!==String&&t.constructor!==Number)break;{const e=((e,t)=>{const n=[];for(const[r,o]of e)n.push(t(o,r));return n})(o,((e,t)=>"".concat(t,":").concat(e,";"))).join("");s>0||e.length>0?(n.push("%c"+t),r.push(e)):n.push(t)}}}for(s>0&&(i=r,i.unshift(n.join("")));s<e.length;s++){const t=e[s];t instanceof Symbol||i.push(t)}return i}:e=>{var t;1===e.length&&(null===(t=e[0])||void 0===t?void 0:t.constructor)===Function&&(e=e[0]());const n=[],r=[];let o=0;for(;o<e.length;o++){const t=e[o];if(void 0===t)break;if(t.constructor===String||t.constructor===Number)n.push(t);else if(t.constructor===Object)break}for(o>0&&r.push(n.join(""));o<e.length;o++){const t=e[o];t instanceof Symbol||r.push(t)}return r},$c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log(...Zc(t)),eu.forEach((e=>e.print(t)))},Jc=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.warn(...Zc(t)),t.unshift(Yc),eu.forEach((e=>e.print(t)))},eu=Nl();const tu=e=>({[Symbol.iterator](){return this},next:e}),nu=(e,t)=>tu((()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}})),ru=Object.assign,ou=Object.keys,iu=e=>ou(e).length,su=(e,t)=>e===t||iu(e)===iu(t)&&((e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0})(e,((e,n)=>(void 0!==e||((e,t)=>Object.prototype.hasOwnProperty.call(e,t))(t,n))&&t[n]===e)),au=Object.freeze,lu=e=>{for(const t in e){const n=e[t];"object"!==typeof n&&"function"!==typeof n||lu(e[t])}return au(e)};class cu{constructor(e,t){this.clock=e,this.len=t}}class uu{constructor(){this.clients=new Map}}const du=(e,t,n)=>t.clients.forEach(((t,r)=>{const o=e.doc.store.clients.get(r);for(let i=0;i<t.length;i++){const r=t[i];Wu(e,o,r.clock,r.len,n)}})),hu=(e,t)=>{const n=e.clients.get(t.client);return void 0!==n&&null!==((e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const o=Ml((n+r)/2),i=e[o],s=i.clock;if(s<=t){if(t<s+i.len)return o;n=o+1}else r=o-1}return null})(n,t.clock)},fu=e=>{e.clients.forEach((e=>{let t,n;for(e.sort(((e,t)=>e.clock-t.clock)),t=1,n=1;t<e.length;t++){const r=e[n-1],o=e[t];r.clock+r.len>=o.clock?r.len=Ll(r.len,o.clock+o.len-r.clock):(n<t&&(e[n]=o),n++)}e.length=n}))},pu=(e,t,n,r)=>{_l(e.clients,t,(()=>[])).push(new cu(n,r))},gu=()=>new uu,mu=(e,t)=>{Jl(e.restEncoder,t.clients.size),Al(t.clients.entries()).sort(((e,t)=>t[0]-e[0])).forEach((t=>{let[n,r]=t;e.resetDsCurVal(),Jl(e.restEncoder,n);const o=r.length;Jl(e.restEncoder,o);for(let i=0;i<o;i++){const t=r[i];e.writeDsClock(t.clock),e.writeDsLen(t.len)}}))},yu=bc;class vu extends Dl{constructor(){let{guid:e=Sc(),collectionid:t=null,gc:n=!0,gcFilter:r=()=>!0,meta:o=null,autoLoad:i=!1,shouldLoad:s=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.gc=n,this.gcFilter=r,this.clientID=yu(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new zu,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=s,this.autoLoad=i,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Ec((e=>{this.on("load",(()=>{this.isLoaded=!0,e(this)}))}));const a=()=>Ec((e=>{const t=n=>{void 0!==n&&!0!==n||(this.off("sync",t),e())};this.on("sync",t)}));this.on("sync",(e=>{!1===e&&this.isSynced&&(this.whenSynced=a()),this.isSynced=void 0===e||!0===e,this.isSynced&&!this.isLoaded&&this.emit("load",[this])})),this.whenSynced=a()}load(){const e=this._item;null===e||this.shouldLoad||ed(e.parent.doc,(e=>{e.subdocsLoaded.add(this)}),null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Al(this.subdocs).map((e=>e.guid)))}transact(e){return ed(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dd;const n=_l(this.share,e,(()=>{const e=new t;return e._integrate(this,null),e})),r=n.constructor;if(t!==dd&&r!==t){if(r===dd){const r=new t;r._map=n._map,n._map.forEach((e=>{for(;null!==e;e=e.left)e.parent=r})),r._start=n._start;for(let e=r._start;null!==e;e=e.right)e.parent=r;return r._length=n._length,this.share.set(e,r),r._integrate(this,null),r}throw new Error("Type with the name ".concat(e," has already been defined with a different constructor"))}return n}getArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,Ad)}getText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,Gd)}getMap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,Dd)}getXmlElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,Qd)}getXmlFragment(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,Xd)}toJSON(){const e={};return this.share.forEach(((t,n)=>{e[n]=t.toJSON()})),e}destroy(){this.isDestroyed=!0,Al(this.subdocs).forEach((e=>e.destroy()));const e=this._item;if(null!==e){this._item=null;const t=e.content;t.doc=new vu(c(c({guid:this.guid},t.opts),{},{shouldLoad:!1})),t.doc._item=e,ed(e.parent.doc,(n=>{const r=t.doc;e.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class bu{constructor(){this.restEncoder=Xl()}toUint8Array(){return Ql(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Jl(this.restEncoder,e)}writeDsLen(e){Jl(this.restEncoder,e)}}class wu extends bu{writeLeftID(e){Jl(this.restEncoder,e.client),Jl(this.restEncoder,e.clock)}writeRightID(e){Jl(this.restEncoder,e.client),Jl(this.restEncoder,e.clock)}writeClient(e){Jl(this.restEncoder,e)}writeInfo(e){$l(this.restEncoder,e)}writeString(e){rc(this.restEncoder,e)}writeParentInfo(e){Jl(this.restEncoder,e?1:0)}writeTypeRef(e){Jl(this.restEncoder,e)}writeLen(e){Jl(this.restEncoder,e)}writeAny(e){lc(this.restEncoder,e)}writeBuf(e){ic(this.restEncoder,e)}writeJSON(e){rc(this.restEncoder,JSON.stringify(e))}writeKey(e){rc(this.restEncoder,e)}}class Su{constructor(){this.restEncoder=Xl(),this.dsCurrVal=0}toUint8Array(){return Ql(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,Jl(this.restEncoder,t)}writeDsLen(e){0===e&&yc(),Jl(this.restEncoder,e-1),this.dsCurrVal+=e}}class Eu extends Su{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new fc,this.clientEncoder=new dc,this.leftClockEncoder=new fc,this.rightClockEncoder=new fc,this.infoEncoder=new cc($l),this.stringEncoder=new pc,this.parentInfoEncoder=new cc($l),this.typeRefEncoder=new dc,this.lenEncoder=new dc}toUint8Array(){const e=Xl();return Jl(e,0),ic(e,this.keyClockEncoder.toUint8Array()),ic(e,this.clientEncoder.toUint8Array()),ic(e,this.leftClockEncoder.toUint8Array()),ic(e,this.rightClockEncoder.toUint8Array()),ic(e,Ql(this.infoEncoder)),ic(e,this.stringEncoder.toUint8Array()),ic(e,Ql(this.parentInfoEncoder)),ic(e,this.typeRefEncoder.toUint8Array()),ic(e,this.lenEncoder.toUint8Array()),oc(e,Ql(this.restEncoder)),Ql(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){lc(this.restEncoder,e)}writeBuf(e){ic(this.restEncoder,e)}writeJSON(e){lc(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const ku=(e,t,n)=>{const r=new Map;n.forEach(((e,n)=>{Vu(t,n)>e&&r.set(n,e)})),Fu(t).forEach(((e,t)=>{n.has(t)||r.set(t,0)})),Jl(e.restEncoder,r.size),Al(r.entries()).sort(((e,t)=>t[0]-e[0])).forEach((n=>{let[r,o]=n;((e,t,n,r)=>{r=Ll(r,t[0].id.clock);const o=Bu(t,r);Jl(e.restEncoder,t.length-o),e.writeClient(n),Jl(e.restEncoder,r);const i=t[o];i.write(e,r-i.id.clock);for(let s=o+1;s<t.length;s++)t[s].write(e,0)})(e,t.clients.get(r),r,o)}))};class Cu{constructor(){this.l=[]}}const xu=()=>new Cu,_u=(e,t)=>e.l.push(t),Nu=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter((e=>t!==e)),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Tu=(e,t,n)=>kc(e.l,[t,n]);class Au{constructor(e,t){this.client=e,this.clock=t}}const Iu=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,Du=(e,t)=>new Au(e,t),Mu=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw yc()};class Pu{constructor(e,t){this.ds=e,this.sv=t}}const Ou=(e,t)=>new Pu(e,t),Lu=(Ou(gu(),new Map),(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!hu(t.ds,e.id)),Ru=(e,t)=>{const n=_l(e.meta,Ru,Nl),r=e.doc.store;n.has(t)||(t.sv.forEach(((t,n)=>{t<Vu(r,n)&&qu(e,Du(n,t))})),du(e,t.ds,(e=>{})),n.add(t))};class zu{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Fu=e=>{const t=new Map;return e.clients.forEach(((e,n)=>{const r=e[e.length-1];t.set(n,r.id.clock+r.length)})),t},Vu=(e,t)=>{const n=e.clients.get(t);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},ju=(e,t)=>{let n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{const e=n[n.length-1];if(e.id.clock+e.length!==t.id.clock)throw yc()}n.push(t)},Bu=(e,t)=>{let n=0,r=e.length-1,o=e[r],i=o.id.clock;if(i===t)return r;let s=Ml(t/(i+o.length-1)*r);for(;n<=r;){if(o=e[s],i=o.id.clock,i<=t){if(t<i+o.length)return s;n=s+1}else r=s-1;s=Ml((n+r)/2)}throw yc()},Uu=(e,t)=>{const n=e.clients.get(t.client);return n[Bu(n,t.clock)]},Hu=(e,t,n)=>{const r=Bu(t,n),o=t[r];return o.id.clock<n&&o instanceof mh?(t.splice(r+1,0,gh(e,o,n-o.id.clock)),r+1):r},qu=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[Hu(e,n,t.clock)]},Ku=(e,t,n)=>{const r=t.clients.get(n.client),o=Bu(r,n.clock),i=r[o];return n.clock!==i.id.clock+i.length-1&&i.constructor!==Jd&&r.splice(o+1,0,gh(e,i,n.clock-i.id.clock+1)),i},Wu=(e,t,n,r,o)=>{if(0===r)return;const i=n+r;let s,a=Hu(e,t,n);do{s=t[a++],i<s.id.clock+s.length&&Hu(e,t,i),o(s)}while(a<t.length&&t[a].id.clock<i)};class Gu{constructor(e,t,n){this.doc=e,this.deleteSet=new uu,this.beforeState=Fu(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Yu=(e,t)=>!(0===t.deleteSet.clients.size&&!((e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1})(t.afterState,((e,n)=>t.beforeState.get(n)!==e)))&&(fu(t.deleteSet),((e,t)=>{ku(e,t.doc.store,t.beforeState)})(e,t),mu(e,t.deleteSet),!0),Xu=(e,t,n)=>{const r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&_l(e.changed,t,Nl).add(n)},Qu=(e,t)=>{let n=e[t],r=e[t-1],o=t;for(;o>0&&(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n));n=r,r=e[--o-1])n instanceof mh&&null!==n.parentSub&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);const i=t-o;return i&&e.splice(t+1-i,i),i},Zu=(e,t,n)=>{for(const[r,o]of e.clients.entries()){const e=t.clients.get(r);for(let r=o.length-1;r>=0;r--){const i=o[r],s=i.clock+i.len;for(let r=Bu(e,i.clock),o=e[r];r<e.length&&o.id.clock<s;o=e[++r]){const o=e[r];if(i.clock+i.len<=o.id.clock)break;o instanceof mh&&o.deleted&&!o.keep&&n(o)&&o.gc(t,!1)}}}},$u=(e,t)=>{e.clients.forEach(((e,n)=>{const r=t.clients.get(n);for(let t=e.length-1;t>=0;t--){const n=e[t];for(let e=Ol(r.length-1,1+Bu(r,n.clock+n.len-1)),t=r[e];e>0&&t.id.clock>=n.clock;t=r[e])e-=1+Qu(r,e)}}))},Ju=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,o=r.store,i=n.deleteSet,s=n._mergeStructs;try{fu(i),n.afterState=Fu(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const e=[];n.changed.forEach(((t,r)=>e.push((()=>{null!==r._item&&r._item.deleted||r._callObserver(n,t)})))),e.push((()=>{n.changedParentTypes.forEach(((e,t)=>{t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter((e=>null===e.target._item||!e.target._item.deleted))).forEach((e=>{e.currentTarget=t,e._path=null})),e.sort(((e,t)=>e.path.length-t.path.length)),Tu(t._dEH,e,n))}))})),e.push((()=>r.emit("afterTransaction",[n,r]))),kc(e,[]),n._needFormattingCleanup&&qd(n)}finally{r.gc&&Zu(i,o,r.gcFilter),$u(i,o),n.afterState.forEach(((e,t)=>{const r=n.beforeState.get(t)||0;if(r!==e){const e=o.clients.get(t),n=Ll(Bu(e,r),1);for(let t=e.length-1;t>=n;)t-=1+Qu(e,t)}}));for(let e=s.length-1;e>=0;e--){const{client:t,clock:n}=s[e].id,r=o.clients.get(t),i=Bu(r,n);i+1<r.length&&Qu(r,i+1)>1||i>0&&Qu(r,i)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||($c(Yc,Bc,"[yjs] ",Uc,Wc,"Changed the client-id because another client seems to be using it."),r.clientID=yu()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const e=new wu;Yu(e,n)&&r.emit("update",[e.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const e=new Eu;Yu(e,n)&&r.emit("updateV2",[e.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=n;(a.size>0||c.size>0||l.size>0)&&(a.forEach((e=>{e.clientID=r.clientID,null==e.collectionid&&(e.collectionid=r.collectionid),r.subdocs.add(e)})),c.forEach((e=>r.subdocs.delete(e))),r.emit("subdocs",[{loaded:l,added:a,removed:c},r,n]),c.forEach((e=>e.destroy()))),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):Ju(e,t+1)}}},ed=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=e._transactionCleanups;let i=!1,s=null;null===e._transaction&&(i=!0,e._transaction=new Gu(e,n,r),o.push(e._transaction),1===o.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{s=t(e._transaction)}finally{if(i){const t=e._transaction===o[0];e._transaction=null,t&&Ju(o,0)}}return s};const td="You must not compute changes after the event-handler fired.";class nd{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=rd(this.currentTarget,this.target))}deletes(e){return hu(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw gc(td);const e=new Map,t=this.target;this.transaction.changed.get(t).forEach((n=>{if(null!==n){const r=t._map.get(n);let o,i;if(this.adds(r)){let e=r.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(r)){if(null===e||!this.deletes(e))return;o="delete",i=Tl(e.content.getContent())}else null!==e&&this.deletes(e)?(o="update",i=Tl(e.content.getContent())):(o="add",i=void 0)}else{if(!this.deletes(r))return;o="delete",i=Tl(r.content.getContent())}e.set(n,{action:o,oldValue:i})}})),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw gc(td);const t=this.target,n=Nl(),r=Nl(),o=[];e={added:n,deleted:r,delta:o,keys:this.keys};if(this.transaction.changed.get(t).has(null)){let e=null;const i=()=>{e&&o.push(e)};for(let o=t._start;null!==o;o=o.right)o.deleted?this.deletes(o)&&!this.adds(o)&&(null!==e&&void 0!==e.delete||(i(),e={delete:0}),e.delete+=o.length,r.add(o)):this.adds(o)?(null!==e&&void 0!==e.insert||(i(),e={insert:[]}),e.insert=e.insert.concat(o.content.getContent()),n.add(o)):(null!==e&&void 0!==e.retain||(i(),e={retain:0}),e.retain+=o.length);null!==e&&void 0===e.retain&&i()}this._changes=e}return e}}const rd=(e,t)=>{const n=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{let e=0,r=t._item.parent._start;for(;r!==t._item&&null!==r;)!r.deleted&&r.countable&&(e+=r.length),r=r.right;n.unshift(e)}t=t._item.parent}return n},od=()=>{Jc("Invalid access: Add Yjs type to a document before reading data.")};let id=0;class sd{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=id++}}const ad=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=id++},ld=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;const n=0===e._searchMarker.length?null:e._searchMarker.reduce(((e,n)=>Pl(t-e.index)<Pl(t-n.index)?e:n));let r=e._start,o=0;for(null!==n&&(r=n.p,o=n.index,(e=>{e.timestamp=id++})(n));null!==r.right&&o<t;){if(!r.deleted&&r.countable){if(t<o+r.length)break;o+=r.length}r=r.right}for(;null!==r.left&&o>t;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return null!==n&&Pl(n.index-o)<r.parent.length/80?(ad(n,r,o),n):((e,t,n)=>{if(e.length>=80){const r=e.reduce(((e,t)=>e.timestamp<t.timestamp?e:t));return ad(r,t,n),r}{const r=new sd(t,n);return e.push(r),r}})(e._searchMarker,r,o)},cd=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const o=e[r];if(n>0){let t=o.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)t=t.left,t&&!t.deleted&&t.countable&&(o.index-=t.length);if(null===t||!0===t.marker){e.splice(r,1);continue}o.p=t,t.marker=!0}(t<o.index||n>0&&t===o.index)&&(o.index=Ll(t,o.index+n))}},ud=(e,t,n)=>{const r=e,o=t.changedParentTypes;for(;_l(o,e,(()=>[])).push(n),null!==e._item;)e=e._item.parent;Tu(r._eH,n,t)};class dd{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=xu(),this._dEH=xu(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw mc()}clone(){throw mc()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){_u(this._eH,e)}observeDeep(e){_u(this._dEH,e)}unobserve(e){Nu(this._eH,e)}unobserveDeep(e){Nu(this._dEH,e)}toJSON(){}}const hd=(e,t,n)=>{var r;null!==(r=e.doc)&&void 0!==r||od(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let o=n-t;const i=[];let s=e._start;for(;null!==s&&o>0;){if(s.countable&&!s.deleted){const e=s.content.getContent();if(e.length<=t)t-=e.length;else{for(let n=t;n<e.length&&o>0;n++)i.push(e[n]),o--;t=0}}s=s.right}return i},fd=e=>{var t;null!==(t=e.doc)&&void 0!==t||od();const n=[];let r=e._start;for(;null!==r;){if(r.countable&&!r.deleted){const e=r.content.getContent();for(let t=0;t<e.length;t++)n.push(e[t])}r=r.right}return n},pd=(e,t)=>{var n;let r=0,o=e._start;for(null!==(n=e.doc)&&void 0!==n||od();null!==o;){if(o.countable&&!o.deleted){const n=o.content.getContent();for(let o=0;o<n.length;o++)t(n[o],r++,e)}o=o.right}},gd=(e,t)=>{const n=[];return pd(e,((r,o)=>{n.push(t(r,o,e))})),n},md=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const e=n[r++];return n.length<=r&&(n=null),{done:!1,value:e}}}},yd=(e,t)=>{var n;null!==(n=e.doc)&&void 0!==n||od();const r=ld(e,t);let o=e._start;for(null!==r&&(o=r.p,t-=r.index);null!==o;o=o.right)if(!o.deleted&&o.countable){if(t<o.length)return o.content.getContent()[t];t-=o.length}},vd=(e,t,n,r)=>{let o=n;const i=e.doc,s=i.clientID,a=i.store,l=null===n?t._start:n.right;let c=[];const u=()=>{c.length>0&&(o=new mh(Du(s,Vu(a,s)),o,o&&o.lastId,l,l&&l.id,t,null,new ah(c)),o.integrate(e,0),c=[])};r.forEach((n=>{if(null===n)c.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(n);break;default:switch(u(),n.constructor){case Uint8Array:case ArrayBuffer:o=new mh(Du(s,Vu(a,s)),o,o&&o.lastId,l,l&&l.id,t,null,new eh(new Uint8Array(n))),o.integrate(e,0);break;case vu:o=new mh(Du(s,Vu(a,s)),o,o&&o.lastId,l,l&&l.id,t,null,new rh(n)),o.integrate(e,0);break;default:if(!(n instanceof dd))throw new Error("Unexpected content type in insert operation");o=new mh(Du(s,Vu(a,s)),o,o&&o.lastId,l,l&&l.id,t,null,new ph(n)),o.integrate(e,0)}}})),u()},bd=()=>gc("Length exceeded!"),wd=(e,t,n,r)=>{if(n>t._length)throw bd();if(0===n)return t._searchMarker&&cd(t._searchMarker,n,r.length),vd(e,t,null,r);const o=n,i=ld(t,n);let s=t._start;for(null!==i&&(s=i.p,0===(n-=i.index)&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));null!==s;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&qu(e,Du(s.id.client,s.id.clock+n));break}n-=s.length}return t._searchMarker&&cd(t._searchMarker,o,r.length),vd(e,t,s,r)},Sd=(e,t,n,r)=>{if(0===r)return;const o=n,i=r,s=ld(t,n);let a=t._start;for(null!==s&&(a=s.p,n-=s.index);null!==a&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&qu(e,Du(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&null!==a;)a.deleted||(r<a.length&&qu(e,Du(a.id.client,a.id.clock+r)),a.delete(e),r-=a.length),a=a.right;if(r>0)throw bd();t._searchMarker&&cd(t._searchMarker,o,-i+r)},Ed=(e,t,n)=>{const r=t._map.get(n);void 0!==r&&r.delete(e)},kd=(e,t,n,r)=>{const o=t._map.get(n)||null,i=e.doc,s=i.clientID;let a;if(null==r)a=new ah([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:a=new ah([r]);break;case Uint8Array:a=new eh(r);break;case vu:a=new rh(r);break;default:if(!(r instanceof dd))throw new Error("Unexpected content type");a=new ph(r)}new mh(Du(s,Vu(i.store,s)),o,o&&o.lastId,null,null,t,n,a).integrate(e,0)},Cd=(e,t)=>{var n;null!==(n=e.doc)&&void 0!==n||od();const r=e._map.get(t);return void 0===r||r.deleted?void 0:r.content.getContent()[r.length-1]},xd=e=>{var t;const n={};return null!==(t=e.doc)&&void 0!==t||od(),e._map.forEach(((e,t)=>{e.deleted||(n[t]=e.content.getContent()[e.length-1])})),n},_d=(e,t)=>{var n;null!==(n=e.doc)&&void 0!==n||od();const r=e._map.get(t);return void 0!==r&&!r.deleted},Nd=e=>{var t;return null!==(t=e.doc)&&void 0!==t||od(),((e,t)=>tu((()=>{let n;do{n=e.next()}while(!n.done&&!t(n.value));return n})))(e._map.entries(),(e=>!e[1].deleted))};class Td extends nd{}class Ad extends dd{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new Ad;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ad}clone(){const e=new Ad;return e.insert(0,this.toArray().map((e=>e instanceof dd?e.clone():e))),e}get length(){var e;return null!==(e=this.doc)&&void 0!==e||od(),this._length}_callObserver(e,t){super._callObserver(e,t),ud(this,e,new Td(this,e))}insert(e,t){null!==this.doc?ed(this.doc,(n=>{wd(n,this,e,t)})):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?ed(this.doc,(t=>{((e,t,n)=>{let r=(t._searchMarker||[]).reduce(((e,t)=>t.index>e.index?t:e),{index:0,p:t._start}).p;if(r)for(;r.right;)r=r.right;vd(e,t,r,n)})(t,this,e)})):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;null!==this.doc?ed(this.doc,(n=>{Sd(n,this,e,t)})):this._prelimContent.splice(e,t)}get(e){return yd(this,e)}toArray(){return fd(this)}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return hd(this,e,t)}toJSON(){return this.map((e=>e instanceof dd?e.toJSON():e))}map(e){return gd(this,e)}forEach(e){pd(this,e)}[Symbol.iterator](){return md(this)}_write(e){e.writeTypeRef(ch)}}class Id extends nd{constructor(e,t,n){super(e,t),this.keysChanged=n}}class Dd extends dd{constructor(e){super(),this._prelimContent=null,this._prelimContent=void 0===e?new Map:new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach(((e,t)=>{this.set(t,e)})),this._prelimContent=null}_copy(){return new Dd}clone(){const e=new Dd;return this.forEach(((t,n)=>{e.set(n,t instanceof dd?t.clone():t)})),e}_callObserver(e,t){ud(this,e,new Id(this,e,t))}toJSON(){var e;null!==(e=this.doc)&&void 0!==e||od();const t={};return this._map.forEach(((e,n)=>{if(!e.deleted){const r=e.content.getContent()[e.length-1];t[n]=r instanceof dd?r.toJSON():r}})),t}get size(){return[...Nd(this)].length}keys(){return nu(Nd(this),(e=>e[0]))}values(){return nu(Nd(this),(e=>e[1].content.getContent()[e[1].length-1]))}entries(){return nu(Nd(this),(e=>[e[0],e[1].content.getContent()[e[1].length-1]]))}forEach(e){var t;null!==(t=this.doc)&&void 0!==t||od(),this._map.forEach(((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)}))}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?ed(this.doc,(t=>{Ed(t,this,e)})):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?ed(this.doc,(n=>{kd(n,this,e,t)})):this._prelimContent.set(e,t),t}get(e){return Cd(this,e)}has(e){return _d(this,e)}clear(){null!==this.doc?ed(this.doc,(e=>{this.forEach((function(t,n,r){Ed(e,r,n)}))})):this._prelimContent.clear()}_write(e){e.writeTypeRef(uh)}}const Md=(e,t)=>e===t||"object"===typeof e&&"object"===typeof t&&e&&t&&su(e,t);class Pd{constructor(e,t,n,r){this.left=e,this.right=t,this.index=n,this.currentAttributes=r}forward(){if(null===this.right&&yc(),this.right.content.constructor===ih)this.right.deleted||zd(this.currentAttributes,this.right.content);else this.right.deleted||(this.index+=this.right.length);this.left=this.right,this.right=this.right.right}}const Od=(e,t,n)=>{for(;null!==t.right&&n>0;){if(t.right.content.constructor===ih)t.right.deleted||zd(t.currentAttributes,t.right.content);else t.right.deleted||(n<t.right.length&&qu(e,Du(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);t.left=t.right,t.right=t.right.right}return t},Ld=(e,t,n,r)=>{const o=new Map,i=r?ld(t,n):null;if(i){const t=new Pd(i.p.left,i.p,i.index,o);return Od(e,t,n-i.index)}{const r=new Pd(null,t._start,0,o);return Od(e,r,n)}},Rd=(e,t,n,r)=>{for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===ih&&Md(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=e.doc,i=o.clientID;r.forEach(((r,s)=>{const a=n.left,l=n.right,c=new mh(Du(i,Vu(o.store,i)),a,a&&a.lastId,l,l&&l.id,t,null,new ih(s,r));c.integrate(e,0),n.right=c,n.forward()}))},zd=(e,t)=>{const{key:n,value:r}=t;null===r?e.delete(n):e.set(n,r)},Fd=(e,t)=>{for(;;){var n;if(null===e.right)break;if(!(e.right.deleted||e.right.content.constructor===ih&&Md(null!==(n=t[e.right.content.key])&&void 0!==n?n:null,e.right.content.value)))break;e.forward()}},Vd=(e,t,n,r)=>{const o=e.doc,i=o.clientID,s=new Map;for(const l in r){var a;const c=r[l],u=null!==(a=n.currentAttributes.get(l))&&void 0!==a?a:null;if(!Md(u,c)){s.set(l,u);const{left:r,right:a}=n;n.right=new mh(Du(i,Vu(o.store,i)),r,r&&r.lastId,a,a&&a.id,t,null,new ih(l,c)),n.right.integrate(e,0),n.forward()}}return s},jd=(e,t,n,r,o)=>{n.currentAttributes.forEach(((e,t)=>{void 0===o[t]&&(o[t]=null)}));const i=e.doc,s=i.clientID;Fd(n,o);const a=Vd(e,t,n,o),l=r.constructor===String?new lh(r):r instanceof dd?new ph(r):new oh(r);let{left:c,right:u,index:d}=n;t._searchMarker&&cd(t._searchMarker,n.index,l.getLength()),u=new mh(Du(s,Vu(i.store,s)),c,c&&c.lastId,u,u&&u.id,t,null,l),u.integrate(e,0),n.right=u,n.index=d,n.forward(),Rd(e,t,n,a)},Bd=(e,t,n,r,o)=>{const i=e.doc,s=i.clientID;Fd(n,o);const a=Vd(e,t,n,o);e:for(;null!==n.right&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===ih));){if(!n.right.deleted)switch(n.right.content.constructor){case ih:{const{key:t,value:i}=n.right.content,s=o[t];if(void 0!==s){if(Md(s,i))a.delete(t);else{if(0===r)break e;a.set(t,i)}n.right.delete(e)}else n.currentAttributes.set(t,i);break}default:r<n.right.length&&qu(e,Du(n.right.id.client,n.right.id.clock+r)),r-=n.right.length}n.forward()}if(r>0){let o="";for(;r>0;r--)o+="\n";n.right=new mh(Du(s,Vu(i.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new lh(o)),n.right.integrate(e,0),n.forward()}Rd(e,t,n,a)},Ud=(e,t,n,r,o)=>{let i=t;const s=Cl();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===ih){const e=i.content;s.set(e.key,e)}i=i.right}let a=0,l=!1;for(;t!==i;){if(n===t&&(l=!0),!t.deleted){const n=t.content;switch(n.constructor){case ih:{var c;const{key:i,value:d}=n,h=null!==(c=r.get(i))&&void 0!==c?c:null;var u;if(s.get(i)!==n||h===d)t.delete(e),a++,l||(null!==(u=o.get(i))&&void 0!==u?u:null)!==d||h===d||(null===h?o.delete(i):o.set(i,h));l||t.deleted||zd(o,n);break}}}t=t.right}return a},Hd=e=>{let t=0;return ed(e.doc,(n=>{let r=e._start,o=e._start,i=Cl();const s=xl(i);for(;o;){if(!1===o.deleted)if(o.content.constructor===ih)zd(s,o.content);else t+=Ud(n,r,o,i,s),i=xl(s),r=o;o=o.right}})),t},qd=e=>{const t=new Set,n=e.doc;for(const[r,o]of e.afterState.entries()){const i=e.beforeState.get(r)||0;o!==i&&Wu(e,n.store.clients.get(r),i,o,(e=>{e.deleted||e.content.constructor!==ih||e.constructor===Jd||t.add(e.parent)}))}ed(n,(n=>{du(e,e.deleteSet,(e=>{if(e instanceof Jd||!e.parent._hasFormatting||t.has(e.parent))return;const r=e.parent;e.content.constructor===ih?t.add(r):((e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===ih){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}})(n,e)}));for(const e of t)Hd(e)}))},Kd=(e,t,n)=>{const r=n,o=xl(t.currentAttributes),i=t.right;for(;n>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case ph:case oh:case lh:n<t.right.length&&qu(e,Du(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e)}t.forward()}i&&Ud(e,i,t.right,o,t.currentAttributes);const s=(t.left||t.right).parent;return s._searchMarker&&cd(s._searchMarker,t.index,-r+n),t};class Wd extends nd{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach((e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)}))}get changes(){if(null===this._changes){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){const e=this.target.doc,t=[];ed(e,(e=>{const n=new Map,r=new Map;let o=this.target._start,i=null;const s={};let a="",l=0,c=0;const u=()=>{if(null!==i){let e=null;switch(i){case"delete":c>0&&(e={delete:c}),c=0;break;case"insert":("object"===typeof a||a.length>0)&&(e={insert:a},n.size>0&&(e.attributes={},n.forEach(((t,n)=>{null!==t&&(e.attributes[n]=t)})))),a="";break;case"retain":l>0&&(e={retain:l},(e=>{for(const t in e)return!1;return!0})(s)||(e.attributes=ru({},s))),l=0}e&&t.push(e),i=null}};for(;null!==o;){switch(o.content.constructor){case ph:case oh:this.adds(o)?this.deletes(o)||(u(),i="insert",a=o.content.getContent()[0],u()):this.deletes(o)?("delete"!==i&&(u(),i="delete"),c+=1):o.deleted||("retain"!==i&&(u(),i="retain"),l+=1);break;case lh:this.adds(o)?this.deletes(o)||("insert"!==i&&(u(),i="insert"),a+=o.content.str):this.deletes(o)?("delete"!==i&&(u(),i="delete"),c+=o.length):o.deleted||("retain"!==i&&(u(),i="retain"),l+=o.length);break;case ih:{const{key:t,value:a}=o.content;if(this.adds(o)){if(!this.deletes(o)){var d;const l=null!==(d=n.get(t))&&void 0!==d?d:null;var h;if(Md(l,a))null!==a&&o.delete(e);else"retain"===i&&u(),Md(a,null!==(h=r.get(t))&&void 0!==h?h:null)?delete s[t]:s[t]=a}}else if(this.deletes(o)){var f;r.set(t,a);const e=null!==(f=n.get(t))&&void 0!==f?f:null;Md(e,a)||("retain"===i&&u(),s[t]=e)}else if(!o.deleted){r.set(t,a);const n=s[t];void 0!==n&&(Md(n,a)?null!==n&&o.delete(e):("retain"===i&&u(),null===a?delete s[t]:s[t]=a))}o.deleted||("insert"===i&&u(),zd(n,o.content));break}}o=o.right}for(u();t.length>0;){const e=t[t.length-1];if(void 0===e.retain||void 0!==e.attributes)break;t.pop()}})),this._delta=t}return this._delta}}class Gd extends dd{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){var e;return null!==(e=this.doc)&&void 0!==e||od(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach((e=>e()))}catch(Xx){console.error(Xx)}this._pending=null}_copy(){return new Gd}clone(){const e=new Gd;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const n=new Wd(this,e,t);ud(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){var e;null!==(e=this.doc)&&void 0!==e||od();let t="",n=this._start;for(;null!==n;)!n.deleted&&n.countable&&n.content.constructor===lh&&(t+=n.content.str),n=n.right;return t}toJSON(){return this.toString()}applyDelta(e){let{sanitize:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!==this.doc?ed(this.doc,(n=>{const r=new Pd(null,this._start,0,new Map);for(let o=0;o<e.length;o++){const i=e[o];if(void 0!==i.insert){const s=t||"string"!==typeof i.insert||o!==e.length-1||null!==r.right||"\n"!==i.insert.slice(-1)?i.insert:i.insert.slice(0,-1);("string"!==typeof s||s.length>0)&&jd(n,this,r,s,i.attributes||{})}else void 0!==i.retain?Bd(n,this,r,i.retain,i.attributes||{}):void 0!==i.delete&&Kd(n,r,i.delete)}})):this._pending.push((()=>this.applyDelta(e)))}toDelta(e,t,n){var r;null!==(r=this.doc)&&void 0!==r||od();const o=[],i=new Map,s=this.doc;let a="",l=this._start;function c(){if(a.length>0){const e={};let t=!1;i.forEach(((n,r)=>{t=!0,e[r]=n}));const n={insert:a};t&&(n.attributes=e),o.push(n),a=""}}const u=()=>{for(;null!==l;){if(Lu(l,e)||void 0!==t&&Lu(l,t))switch(l.content.constructor){case lh:{const r=i.get("ychange");void 0===e||Lu(l,e)?void 0===t||Lu(l,t)?void 0!==r&&(c(),i.delete("ychange")):void 0!==r&&r.user===l.id.client&&"added"===r.type||(c(),i.set("ychange",n?n("added",l.id):{type:"added"})):void 0!==r&&r.user===l.id.client&&"removed"===r.type||(c(),i.set("ychange",n?n("removed",l.id):{type:"removed"})),a+=l.content.str;break}case ph:case oh:{c();const e={insert:l.content.getContent()[0]};if(i.size>0){const t={};e.attributes=t,i.forEach(((e,n)=>{t[n]=e}))}o.push(e);break}case ih:Lu(l,e)&&(c(),zd(i,l.content))}l=l.right}c()};return e||t?ed(s,(n=>{e&&Ru(n,e),t&&Ru(n,t),u()}),"cleanup"):u(),o}insert(e,t,n){if(t.length<=0)return;const r=this.doc;null!==r?ed(r,(r=>{const o=Ld(r,this,e,!n);n||(n={},o.currentAttributes.forEach(((e,t)=>{n[t]=e}))),jd(r,this,o,t,n)})):this._pending.push((()=>this.insert(e,t,n)))}insertEmbed(e,t,n){const r=this.doc;null!==r?ed(r,(r=>{const o=Ld(r,this,e,!n);jd(r,this,o,t,n||{})})):this._pending.push((()=>this.insertEmbed(e,t,n||{})))}delete(e,t){if(0===t)return;const n=this.doc;null!==n?ed(n,(n=>{Kd(n,Ld(n,this,e,!0),t)})):this._pending.push((()=>this.delete(e,t)))}format(e,t,n){if(0===t)return;const r=this.doc;null!==r?ed(r,(r=>{const o=Ld(r,this,e,!1);null!==o.right&&Bd(r,this,o,t,n)})):this._pending.push((()=>this.format(e,t,n)))}removeAttribute(e){null!==this.doc?ed(this.doc,(t=>{Ed(t,this,e)})):this._pending.push((()=>this.removeAttribute(e)))}setAttribute(e,t){null!==this.doc?ed(this.doc,(n=>{kd(n,this,e,t)})):this._pending.push((()=>this.setAttribute(e,t)))}getAttribute(e){return Cd(this,e)}getAttributes(){return xd(this)}_write(e){e.writeTypeRef(dh)}}class Yd{constructor(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,null!==(t=e.doc)&&void 0!==t||od()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==Qd&&t.constructor!==Xd||null===t._start)for(;null!==e;){if(null!==e.right){e=e.right;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Xd extends dd{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Xd}clone(){const e=new Xd;return e.insert(0,this.toArray().map((e=>e instanceof dd?e.clone():e))),e}get length(){var e;return null!==(e=this.doc)&&void 0!==e||od(),null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new Yd(this,e)}querySelector(e){e=e.toUpperCase();const t=new Yd(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),Al(new Yd(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)))}_callObserver(e,t){ud(this,e,new Zd(this,t,e))}toString(){return gd(this,(e=>e.toString())).join("")}toJSON(){return this.toString()}toDOM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=e.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),pd(this,(o=>{r.insertBefore(o.toDOM(e,t,n),null)})),r}insert(e,t){null!==this.doc?ed(this.doc,(n=>{wd(n,this,e,t)})):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)ed(this.doc,(n=>{const r=e&&e instanceof dd?e._item:e;vd(n,this,r,t)}));else{const n=this._prelimContent,r=null===e?0:n.findIndex((t=>t===e))+1;if(0===r&&null!==e)throw gc("Reference item not found");n.splice(r,0,...t)}}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;null!==this.doc?ed(this.doc,(n=>{Sd(n,this,e,t)})):this._prelimContent.splice(e,t)}toArray(){return fd(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return yd(this,e)}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return hd(this,e,t)}forEach(e){pd(this,e)}_write(e){e.writeTypeRef(fh)}}class Qd extends Xd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"UNDEFINED";super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach(((e,t)=>{this.setAttribute(t,e)})),this._prelimAttrs=null}_copy(){return new Qd(this.nodeName)}clone(){const e=new Qd(this.nodeName);return((e,t)=>{for(const n in e)t(e[n],n)})(this.getAttributes(),((t,n)=>{"string"===typeof t&&e.setAttribute(n,t)})),e.insert(0,this.toArray().map((e=>e instanceof dd?e.clone():e))),e}toString(){const e=this.getAttributes(),t=[],n=[];for(const s in e)n.push(s);n.sort();const r=n.length;for(let s=0;s<r;s++){const r=n[s];t.push(r+'="'+e[r]+'"')}const o=this.nodeName.toLocaleLowerCase(),i=t.length>0?" "+t.join(" "):"";return"<".concat(o).concat(i,">").concat(super.toString(),"</").concat(o,">")}removeAttribute(e){null!==this.doc?ed(this.doc,(t=>{Ed(t,this,e)})):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?ed(this.doc,(n=>{kd(n,this,e,t)})):this._prelimAttrs.set(e,t)}getAttribute(e){return Cd(this,e)}hasAttribute(e){return _d(this,e)}getAttributes(e){return e?((e,t)=>{const n={};return e._map.forEach(((e,r)=>{let o=e;for(;null!==o&&(!t.sv.has(o.id.client)||o.id.clock>=(t.sv.get(o.id.client)||0));)o=o.left;null!==o&&Lu(o,t)&&(n[r]=o.content.getContent()[o.length-1])})),n})(this,e):xd(this)}toDOM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=e.createElement(this.nodeName),o=this.getAttributes();for(const i in o){const e=o[i];"string"===typeof e&&r.setAttribute(i,e)}return pd(this,(o=>{r.appendChild(o.toDOM(e,t,n))})),void 0!==n&&n._createAssociation(r,this),r}_write(e){e.writeTypeRef(hh),e.writeKey(this.nodeName)}}class Zd extends nd{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach((e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)}))}}class $d{constructor(e,t){this.id=e,this.length=t}get deleted(){throw mc()}mergeWith(e){return!1}write(e,t,n){throw mc()}integrate(e,t){throw mc()}}class Jd extends $d{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),ju(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class eh{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new eh(this.content)}splice(e){throw mc()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class th{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new th(this.len)}splice(e){const t=new th(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){pu(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const nh=(e,t)=>new vu(c(c({guid:e},t),{},{shouldLoad:t.shouldLoad||t.autoLoad||!1}));class rh{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new rh(nh(this.doc.guid,this.opts))}splice(e){throw mc()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class oh{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new oh(this.embed)}splice(e){throw mc()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class ih{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new ih(this.key,this.value)}splice(e){throw mc()}mergeWith(e){return!1}integrate(e,t){const n=t.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const sh="development"===Pc("node_env");class ah{constructor(e){this.arr=e,sh&&lu(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new ah(this.arr)}splice(e){const t=new ah(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeAny(t)}}getRef(){return 8}}class lh{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new lh(this.str)}splice(e){const t=new lh(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"\ufffd",t.str="\ufffd"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}const ch=0,uh=1,dh=2,hh=3,fh=4;class ph{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new ph(this.type._copy())}splice(e){throw mc()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach((t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)})),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach((t=>{for(;null!==t;)t.gc(e,!0),t=t.left})),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const gh=(e,t,n)=>{const{client:r,clock:o}=t.id,i=new mh(Du(r,o+n),t,Du(r,o+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&i.markDeleted(),t.keep&&(i.keep=!0),null!==t.redone&&(i.redone=Du(t.redone.client,t.redone.clock+n)),t.right=i,null!==i.right&&(i.right.left=i),e._mergeStructs.push(i),null!==i.parentSub&&null===i.right&&i.parent._map.set(i.parentSub,i),t.length=n,i};class mh extends $d{constructor(e,t,n,r,o,i,s,a){super(e,a.getLength()),this.origin=n,this.left=t,this.right=r,this.rightOrigin=o,this.parent=i,this.parentSub=s,this.redone=null,this.content=a,this.info=this.content.isCountable()?2:0}set marker(e){(8&this.info)>0!==e&&(this.info^=8)}get marker(){return(8&this.info)>0}get keep(){return(1&this.info)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(2&this.info)>0}get deleted(){return(4&this.info)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Vu(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Vu(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Au&&this.id.client!==this.parent.client&&this.parent.clock>=Vu(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Ku(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=qu(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Jd||this.right&&this.right.constructor===Jd)this.parent=null;else if(this.parent){if(this.parent.constructor===Au){const e=Uu(t,this.parent);e.constructor===Jd?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===mh&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===mh&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=Ku(e,e.doc.store,Du(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,n=this.left;if(null!==n)t=n.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;const r=new Set,o=new Set;for(;null!==t&&t!==this.right;){if(o.add(t),r.add(t),Iu(this.origin,t.origin)){if(t.id.client<this.id.client)n=t,r.clear();else if(Iu(this.rightOrigin,t.rightOrigin))break}else{if(null===t.origin||!o.has(Uu(e.doc.store,t.origin)))break;r.has(Uu(e.doc.store,t.origin))||(n=t,r.clear())}t=t.right}this.left=n}if(null!==this.left){const e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),ju(e.doc.store,this),this.content.integrate(e,this),Xu(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new Jd(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:Du(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Iu(e.origin,this.lastId)&&this.right===e&&Iu(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach((t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))})),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),pu(e.deleteSet,this.id.client,this.id.clock,this.length),Xu(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw yc();this.content.gc(e),t?((e,t,n)=>{const r=e.clients.get(t.id.client);r[Bu(r,t.id.clock)]=n})(e,this,new Jd(this.id,this.length)):this.content=new th(this.length)}write(e,t){const n=t>0?Du(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,o=this.parentSub,i=31&this.content.getRef()|(null===n?0:zl)|(null===r?0:64)|(null===o?0:32);if(e.writeInfo(i),null!==n&&e.writeLeftID(n),null!==r&&e.writeRightID(r),null===n&&null===r){const t=this.parent;if(void 0!==t._item){const n=t._item;if(null===n){const n=Mu(t);e.writeParentInfo(!0),e.writeString(n)}else e.writeParentInfo(!1),e.writeLeftID(n.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===Au?(e.writeParentInfo(!1),e.writeLeftID(t)):yc();null!==o&&e.writeString(o)}this.content.write(e,t)}}const yh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},vh="__ $YJS$ __";!0===yh[vh]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),yh[vh]=!0;const bh=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296===(64512&o)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},wh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<e.length;o+=3){const t=e[o],i=o+1<e.length,s=i?e[o+1]:0,a=o+2<e.length,l=a?e[o+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;a||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(bh(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const i=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&i)}else if(o>239&&o<365){const i=((7&o)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<e.length;){const t=n[e.charAt(o++)],i=o<e.length?n[e.charAt(o)]:0;++o;const s=o<e.length?n[e.charAt(o)]:64;++o;const a=o<e.length?n[e.charAt(o)]:64;if(++o,null==t||null==i||null==s||null==a)throw new Sh;const l=t<<2|i>>4;if(r.push(l),64!==s){const e=i<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Sh extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Eh=function(e){return function(e){const t=bh(e);return wh.encodeByteArray(t,!0)}(e).replace(/\./g,"")};const kh=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ch=()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Xx){return}const t=e&&function(e){try{return wh.decodeString(e,!0)}catch(Xx){console.error("base64Decode failed: ",Xx)}return null}(e[1]);return t&&JSON.parse(t)},xh=()=>{try{return kh()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||Ch()}catch(Xx){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Xx))}},_h=e=>{const t=(e=>{var t,n;return null===(n=null===(t=xh())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Nh=()=>{var e;return null===(e=xh())||void 0===e?void 0:e.config};class Th{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}class Ah extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ah.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ih.prototype.create)}}class Ih{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],o=r?function(e,t){return e.replace(Dh,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",i="".concat(this.serviceName,": ").concat(o," (").concat(n,").");return new Ah(n,i,t)}}const Dh=/\{\$([^}]+)}/g;function Mh(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const o of n){if(!r.includes(o))return!1;const n=e[o],i=t[o];if(Ph(n)&&Ph(i)){if(!Mh(n,i))return!1}else if(n!==i)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Ph(e){return null!==e&&"object"===typeof e}function Oh(e){return e&&e._delegate?e._delegate:e}class Lh{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Rh="[DEFAULT]";class zh{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Th;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Xx){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Xx){if(r)return null;throw Xx}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Rh})}catch(Xx){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Xx){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rh;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rh;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rh;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(o)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),o=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;o.add(e),this.onInitCallbacks.set(r,o);const i=this.instances.get(r);return i&&e(i,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const o of n)try{o(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(o=t,o===Rh?void 0:o),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var o;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rh;return this.component?this.component.multipleInstances?e:Rh:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fh{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new zh(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Vh;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Vh||(Vh={}));const jh={debug:Vh.DEBUG,verbose:Vh.VERBOSE,info:Vh.INFO,warn:Vh.WARN,error:Vh.ERROR,silent:Vh.SILENT},Bh=Vh.INFO,Uh={[Vh.DEBUG]:"log",[Vh.VERBOSE]:"log",[Vh.INFO]:"info",[Vh.WARN]:"warn",[Vh.ERROR]:"error"},Hh=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Uh[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var o=arguments.length,i=new Array(o>2?o-2:0),s=2;s<o;s++)i[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class qh{constructor(e){this.name=e,this._logLevel=Bh,this._logHandler=Hh,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Vh))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?jh[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Vh.DEBUG,...t),this._logHandler(this,Vh.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Vh.VERBOSE,...t),this._logHandler(this,Vh.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Vh.INFO,...t),this._logHandler(this,Vh.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Vh.WARN,...t),this._logHandler(this,Vh.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Vh.ERROR,...t),this._logHandler(this,Vh.ERROR,...t)}}let Kh,Wh;const Gh=new WeakMap,Yh=new WeakMap,Xh=new WeakMap,Qh=new WeakMap,Zh=new WeakMap;let $h={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Yh.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Xh.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tf(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Jh(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Wh||(Wh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(nf(this),n),tf(Gh.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return tf(e.apply(nf(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];const i=e.call(nf(this),t,...r);return Xh.set(i,t.sort?t.sort():[t]),tf(i)}}function ef(e){return"function"===typeof e?Jh(e):(e instanceof IDBTransaction&&function(e){if(Yh.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));Yh.set(e,t)}(e),((e,t)=>t.some((t=>e instanceof t)))(e,Kh||(Kh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,$h):e)}function tf(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(tf(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&Gh.set(t,e)})).catch((()=>{})),Zh.set(t,e),t}(e);if(Qh.has(e))return Qh.get(e);const t=ef(e);return t!==e&&(Qh.set(e,t),Zh.set(t,e)),t}const nf=e=>Zh.get(e);const rf=["get","getKey","getAll","getAllKeys","count"],of=["put","add","delete","clear"],sf=new Map;function af(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(sf.get(t))return sf.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=of.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!rf.includes(n))return;const i=async function(e){const t=this.transaction(e,o?"readwrite":"readonly");let i=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(i=i.index(a.shift())),(await Promise.all([i[n](...a),o&&t.done]))[0]};return sf.set(t,i),i}$h=(e=>c(c({},e),{},{get:(t,n,r)=>af(t,n)||e.get(t,n,r),has:(t,n)=>!!af(t,n)||e.has(t,n)}))($h);class lf{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const cf="@firebase/app",uf="0.9.13",df=new qh("@firebase/app"),hf="@firebase/app-compat",ff="@firebase/analytics-compat",pf="@firebase/analytics",gf="@firebase/app-check-compat",mf="@firebase/app-check",yf="@firebase/auth",vf="@firebase/auth-compat",bf="@firebase/database",wf="@firebase/database-compat",Sf="@firebase/functions",Ef="@firebase/functions-compat",kf="@firebase/installations",Cf="@firebase/installations-compat",xf="@firebase/messaging",_f="@firebase/messaging-compat",Nf="@firebase/performance",Tf="@firebase/performance-compat",Af="@firebase/remote-config",If="@firebase/remote-config-compat",Df="@firebase/storage",Mf="@firebase/storage-compat",Pf="@firebase/firestore",Of="@firebase/firestore-compat",Lf="firebase",Rf="[DEFAULT]",zf={[cf]:"fire-core",[hf]:"fire-core-compat",[pf]:"fire-analytics",[ff]:"fire-analytics-compat",[mf]:"fire-app-check",[gf]:"fire-app-check-compat",[yf]:"fire-auth",[vf]:"fire-auth-compat",[bf]:"fire-rtdb",[wf]:"fire-rtdb-compat",[Sf]:"fire-fn",[Ef]:"fire-fn-compat",[kf]:"fire-iid",[Cf]:"fire-iid-compat",[xf]:"fire-fcm",[_f]:"fire-fcm-compat",[Nf]:"fire-perf",[Tf]:"fire-perf-compat",[Af]:"fire-rc",[If]:"fire-rc-compat",[Df]:"fire-gcs",[Mf]:"fire-gcs-compat",[Pf]:"fire-fst",[Of]:"fire-fst-compat","fire-js":"fire-js",[Lf]:"fire-js-all"},Ff=new Map,Vf=new Map;function jf(e,t){try{e.container.addComponent(t)}catch(Xx){df.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Xx)}}function Bf(e){const t=e.name;if(Vf.has(t))return df.debug("There were multiple attempts to register component ".concat(t,".")),!1;Vf.set(t,e);for(const n of Ff.values())jf(n,e);return!0}const Uf=new Ih("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Hf{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Lh("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Uf.create("app-deleted",{appName:this._name})}}function qf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Rf,automaticDataCollectionEnabled:!1},t),o=r.name;if("string"!==typeof o||!o)throw Uf.create("bad-app-name",{appName:String(o)});if(n||(n=Nh()),!n)throw Uf.create("no-options");const i=Ff.get(o);if(i){if(Mh(n,i.options)&&Mh(r,i.config))return i;throw Uf.create("duplicate-app",{appName:o})}const s=new Fh(o);for(const l of Vf.values())s.addComponent(l);const a=new Hf(n,r,s);return Ff.set(o,a),a}function Kf(e,t,n){var r;let o=null!==(r=zf[e])&&void 0!==r?r:e;n&&(o+="-".concat(n));const i=o.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const e=['Unable to register library "'.concat(o,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(o,'" contains illegal characters (whitespace or "/")')),i&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void df.warn(e.join(" "))}Bf(new Lh("".concat(o,"-version"),(()=>({library:o,version:t})),"VERSION"))}const Wf="firebase-heartbeat-store";let Gf=null;function Yf(){return Gf||(Gf=function(e,t){let{blocked:n,upgrade:r,blocking:o,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=tf(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(tf(s.result),e.oldVersion,e.newVersion,tf(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{i&&e.addEventListener("close",(()=>i())),o&&e.addEventListener("versionchange",(e=>o(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Wf)}}).catch((e=>{throw Uf.create("idb-open",{originalErrorMessage:e.message})}))),Gf}async function Xf(e,t){try{const n=(await Yf()).transaction(Wf,"readwrite"),r=n.objectStore(Wf);await r.put(t,Qf(e)),await n.done}catch(Xx){if(Xx instanceof Ah)df.warn(Xx.message);else{const t=Uf.create("idb-set",{originalErrorMessage:null===Xx||void 0===Xx?void 0:Xx.message});df.warn(t.message)}}}function Qf(e){return"".concat(e.name,"!").concat(e.options.appId)}class Zf{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Jf(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=$f();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=$f(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const o of e){const e=n.find((e=>e.agent===o.agent));if(e){if(e.dates.push(o.date),ep(n)>t){e.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),ep(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=Eh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function $f(){return(new Date).toISOString().substring(0,10)}class Jf{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(Xx){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var e;t((null===(e=o.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Yf();return await t.transaction(Wf).objectStore(Wf).get(Qf(e))}catch(Xx){if(Xx instanceof Ah)df.warn(Xx.message);else{const t=Uf.create("idb-get",{originalErrorMessage:null===Xx||void 0===Xx?void 0:Xx.message});df.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Xf(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Xf(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ep(e){return Eh(JSON.stringify({version:2,heartbeats:e})).length}var tp;tp="",Bf(new Lh("platform-logger",(e=>new lf(e)),"PRIVATE")),Bf(new Lh("heartbeat",(e=>new Zf(e)),"PRIVATE")),Kf(cf,uf,tp),Kf(cf,uf,"esm2017"),Kf("fire-js","");var np,rp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},op=op||{},ip=rp||self;function sp(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ap(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function lp(e,t,n){return e.call.apply(e.bind,arguments)}function cp(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function up(e,t,n){return(up=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?lp:cp).apply(null,arguments)}function dp(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function hp(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return t.prototype[n].apply(e,o)}}function fp(){this.s=this.s,this.o=this.o}fp.prototype.s=!1,fp.prototype.sa=function(){!this.s&&(this.s=!0,this.N())},fp.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const pp=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function gp(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function mp(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(sp(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let o=0;o<r;o++)e[n+o]=t[o]}else e.push(t)}}function yp(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}yp.prototype.h=function(){this.defaultPrevented=!0};var vp=function(){if(!ip.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{ip.addEventListener("test",(()=>{}),t),ip.removeEventListener("test",(()=>{}),t)}catch(n){}return e}();function bp(e){return/^[\s\xa0]*$/.test(e)}function wp(){var e=ip.navigator;return e&&(e=e.userAgent)?e:""}function Sp(e){return-1!=wp().indexOf(e)}function Ep(e){return Ep[" "](e),e}Ep[" "]=function(){};var kp,Cp,xp=Sp("Opera"),_p=Sp("Trident")||Sp("MSIE"),Np=Sp("Edge"),Tp=Np||_p,Ap=Sp("Gecko")&&!(-1!=wp().toLowerCase().indexOf("webkit")&&!Sp("Edge"))&&!(Sp("Trident")||Sp("MSIE"))&&!Sp("Edge"),Ip=-1!=wp().toLowerCase().indexOf("webkit")&&!Sp("Edge");function Dp(){var e=ip.document;return e?e.documentMode:void 0}e:{var Mp="",Pp=function(){var e=wp();return Ap?/rv:([^\);]+)(\)|;)/.exec(e):Np?/Edge\/([\d\.]+)/.exec(e):_p?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ip?/WebKit\/(\S+)/.exec(e):xp?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Pp&&(Mp=Pp?Pp[1]:""),_p){var Op=Dp();if(null!=Op&&Op>parseFloat(Mp)){kp=String(Op);break e}}kp=Mp}if(ip.document&&_p){var Lp=Dp();Cp=Lp||(parseInt(kp,10)||void 0)}else Cp=void 0;var Rp=Cp;function zp(e,t){if(yp.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ap){e:{try{Ep(t.nodeName);var o=!0;break e}catch(i){}o=!1}o||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Fp[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&zp.$.h.call(this)}}hp(zp,yp);var Fp={2:"touch",3:"pen",4:"mouse"};zp.prototype.h=function(){zp.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Vp="closure_listenable_"+(1e6*Math.random()|0),jp=0;function Bp(e,t,n,r,o){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=o,this.key=++jp,this.fa=this.ia=!1}function Up(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Hp(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function qp(e){const t={};for(const n in e)t[n]=e[n];return t}const Kp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wp(e,t){let n,r;for(let o=1;o<arguments.length;o++){for(n in r=arguments[o],r)e[n]=r[n];for(let t=0;t<Kp.length;t++)n=Kp[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Gp(e){this.src=e,this.g={},this.h=0}function Yp(e,t){var n=t.type;if(n in e.g){var r,o=e.g[n],i=pp(o,t);(r=0<=i)&&Array.prototype.splice.call(o,i,1),r&&(Up(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Xp(e,t,n,r){for(var o=0;o<e.length;++o){var i=e[o];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==r)return o}return-1}Gp.prototype.add=function(e,t,n,r,o){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var s=Xp(e,t,r,o);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new Bp(t,this.src,i,!!r,o)).ia=n,e.push(t)),t};var Qp="closure_lm_"+(1e6*Math.random()|0),Zp={};function $p(e,t,n,r,o){if(Array.isArray(t)){for(var i=0;i<t.length;i++)$p(e,t[i],n,r,o);return null}return n=ig(n),e&&e[Vp]?e.O(t,n,!!ap(r)&&!!r.capture,o):function(e,t,n,r,o,i){if(!t)throw Error("Invalid event type");var s=ap(o)?!!o.capture:!!o,a=rg(e);if(a||(e[Qp]=a=new Gp(e)),n=a.add(t,n,r,s,i),n.proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ng;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)vp||(o=s),void 0===o&&(o=!1),e.addEventListener(t.toString(),r,o);else if(e.attachEvent)e.attachEvent(tg(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,o)}function Jp(e,t,n,r,o){if(Array.isArray(t))for(var i=0;i<t.length;i++)Jp(e,t[i],n,r,o);else r=ap(r)?!!r.capture:!!r,n=ig(n),e&&e[Vp]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Xp(i=e.g[t],n,r,o))&&(Up(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=rg(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Xp(t,n,r,o)),(n=-1<e?t[e]:null)&&eg(n))}function eg(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Vp])Yp(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(tg(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=rg(t))?(Yp(n,e),0==n.h&&(n.src=null,t[Qp]=null)):Up(e)}}}function tg(e){return e in Zp?Zp[e]:Zp[e]="on"+e}function ng(e,t){if(e.fa)e=!0;else{t=new zp(t,this);var n=e.listener,r=e.la||e.src;e.ia&&eg(e),e=n.call(r,t)}return e}function rg(e){return(e=e[Qp])instanceof Gp?e:null}var og="__closure_events_fn_"+(1e9*Math.random()>>>0);function ig(e){return"function"===typeof e?e:(e[og]||(e[og]=function(t){return e.handleEvent(t)}),e[og])}function sg(){fp.call(this),this.i=new Gp(this),this.S=this,this.J=null}function ag(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new yp(t,e);else if(t instanceof yp)t.target=t.target||e;else{var o=t;Wp(t=new yp(r,e),o)}if(o=!0,n)for(var i=n.length-1;0<=i;i--){var s=t.g=n[i];o=lg(s,r,!0,t)&&o}if(o=lg(s=t.g=e,r,!0,t)&&o,o=lg(s,r,!1,t)&&o,n)for(i=0;i<n.length;i++)o=lg(s=t.g=n[i],r,!1,t)&&o}function lg(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var o=!0,i=0;i<t.length;++i){var s=t[i];if(s&&!s.fa&&s.capture==n){var a=s.listener,l=s.la||s.src;s.ia&&Yp(e.i,s),o=!1!==a.call(l,r)&&o}}return o&&!r.defaultPrevented}hp(sg,fp),sg.prototype[Vp]=!0,sg.prototype.removeEventListener=function(e,t,n,r){Jp(this,e,t,n,r)},sg.prototype.N=function(){if(sg.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Up(n[r]);delete t.g[e],t.h--}}this.J=null},sg.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},sg.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var cg=ip.JSON.stringify;function ug(){var e=yg;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var dg=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new hg),(e=>e.reset()));class hg{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function fg(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function pg(e){ip.setTimeout((()=>{throw e}),0)}let gg,mg=!1,yg=new class{constructor(){this.h=this.g=null}add(e,t){const n=dg.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},vg=()=>{const e=ip.Promise.resolve(void 0);gg=()=>{e.then(bg)}};var bg=()=>{for(var e;e=ug();){try{e.h.call(e.g)}catch(n){pg(n)}var t=dg;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}mg=!1};function wg(e,t){sg.call(this),this.h=e||1,this.g=t||ip,this.j=up(this.qb,this),this.l=Date.now()}function Sg(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Eg(e,t,n){if("function"===typeof e)n&&(e=up(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=up(e.handleEvent,e)}return 2147483647<Number(t)?-1:ip.setTimeout(e,t||0)}function kg(e){e.g=Eg((()=>{e.g=null,e.i&&(e.i=!1,kg(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}hp(wg,sg),(np=wg.prototype).ga=!1,np.T=null,np.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ag(this,"tick"),this.ga&&(Sg(this),this.start()))}},np.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},np.N=function(){wg.$.N.call(this),Sg(this),delete this.g};class Cg extends fp{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:kg(this)}N(){super.N(),this.g&&(ip.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xg(e){fp.call(this),this.h=e,this.g={}}hp(xg,fp);var _g=[];function Ng(e,t,n,r){Array.isArray(n)||(n&&(_g[0]=n.toString()),n=_g);for(var o=0;o<n.length;o++){var i=$p(t,n[o],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function Tg(e){Hp(e.g,(function(e,t){this.g.hasOwnProperty(t)&&eg(e)}),e),e.g={}}function Ag(){this.g=!0}function Ig(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var i=o[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var s=1;s<o.length;s++)o[s]=""}}}return cg(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}xg.prototype.N=function(){xg.$.N.call(this),Tg(this)},xg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ag.prototype.Ea=function(){this.g=!1},Ag.prototype.info=function(){};var Dg={},Mg=null;function Pg(){return Mg=Mg||new sg}function Og(e){yp.call(this,Dg.Ta,e)}function Lg(e){const t=Pg();ag(t,new Og(t))}function Rg(e,t){yp.call(this,Dg.STAT_EVENT,e),this.stat=t}function zg(e){const t=Pg();ag(t,new Rg(t,e))}function Fg(e,t){yp.call(this,Dg.Ua,e),this.size=t}function Vg(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return ip.setTimeout((function(){e()}),t)}Dg.Ta="serverreachability",hp(Og,yp),Dg.STAT_EVENT="statevent",hp(Rg,yp),Dg.Ua="timingevent",hp(Fg,yp);var jg={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Bg={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ug(){}function Hg(e){return e.h||(e.h=e.i())}function qg(){}Ug.prototype.h=null;var Kg,Wg={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Gg(){yp.call(this,"d")}function Yg(){yp.call(this,"c")}function Xg(){}function Qg(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new xg(this),this.P=$g,e=Tp?125:void 0,this.V=new wg(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Zg}function Zg(){this.i=null,this.g="",this.h=!1}hp(Gg,yp),hp(Yg,yp),hp(Xg,Ug),Xg.prototype.g=function(){return new XMLHttpRequest},Xg.prototype.i=function(){return{}},Kg=new Xg;var $g=45e3,Jg={},em={};function tm(e,t,n){e.L=1,e.v=wm(gm(t)),e.s=n,e.S=!0,nm(e,null)}function nm(e,t){e.G=Date.now(),sm(e),e.A=gm(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Pm(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Zg,e.g=Oy(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Cg(up(e.Pa,e,e.g),e.O)),Ng(e.U,e.g,"readystatechange",e.nb),t=e.I?qp(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Lg(),function(e,t,n,r,o,i){e.info((function(){if(e.g)if(i)for(var s="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&"type"==d[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=i;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function rm(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function om(e,t,n){let r,o=!0;for(;!e.J&&e.C<n.length;){if(r=im(e,n),r==em){4==t&&(e.o=4,zg(14),o=!1),Ig(e.j,e.m,null,"[Incomplete Response]");break}if(r==Jg){e.o=4,zg(15),Ig(e.j,e.m,n,"[Invalid Chunk]"),o=!1;break}Ig(e.j,e.m,r,null),dm(e,r)}rm(e)&&r!=em&&r!=Jg&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,zg(16),o=!1),e.i=e.i&&o,o?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),_y(t),t.M=!0,zg(11))):(Ig(e.j,e.m,n,"[Invalid Chunked Response]"),um(e),cm(e))}function im(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?em:(n=Number(t.substring(n,r)),isNaN(n)?Jg:(r+=1)+n>t.length?em:(t=t.slice(r,r+n),e.C=r+n,t))}function sm(e){e.Y=Date.now()+e.P,am(e,e.P)}function am(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Vg(up(e.lb,e),t)}function lm(e){e.B&&(ip.clearTimeout(e.B),e.B=null)}function cm(e){0==e.l.H||e.J||Ay(e.l,e)}function um(e){lm(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Sg(e.V),Tg(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function dm(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||jm(n.i,e)))if(!e.K&&jm(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ty(n),vy(n)}xy(n),zg(18)}}else n.Fa=o[1],0<n.Fa-n.V&&37500>o[2]&&n.G&&0==n.A&&!n.v&&(n.v=Vg(up(n.ib,n),6e3));if(1>=Vm(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Dy(n,11)}else if((e.K||n.g==e)&&Ty(n),!bp(t))for(o=n.Ja.g.parse(t),t=0;t<o.length;t++){let c=o[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const o=c[4];null!=o&&(n.Ga=o,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.i;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Bm(i,i.h),i.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,bm(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=Py(r,r.J?r.pa:null,r.Y),s.K){Um(r.i,s);var a=s,l=r.L;l&&a.setTimeout(l),a.B&&(lm(a),sm(a)),r.g=s}else Cy(r);0<n.j.length&&wy(n)}else"stop"!=c[0]&&"close"!=c[0]||Dy(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Dy(n,7):yy(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Lg()}catch(c){}}function hm(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(sp(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(sp(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(sp(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),o=r.length,i=0;i<o;i++)t.call(void 0,r[i],n&&n[i],e)}(np=Qg.prototype).setTimeout=function(e){this.P=e},np.nb=function(e){e=e.target;const t=this.M;t&&3==dy(e)?t.l():this.Pa(e)},np.Pa=function(e){try{if(e==this.g)e:{const u=dy(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Tp||this.g&&(this.h.h||this.g.ja()||hy(this.g)))){this.J||4!=u||7==t||Lg(),lm(this);var n=this.g.da();this.ca=n;t:if(rm(this)){var r=hy(this.g);e="";var o=r.length,i=4==dy(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){um(this),cm(this);var s="";break t}this.h.i=new ip.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:i&&t==o-1});r.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,o,i,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+t+"\n"+n+"\n"+i+" "+s}))}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bp(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,zg(12),um(this),cm(this);break e}Ig(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dm(this,n)}this.S?(om(this,u,s),Tp&&this.i&&3==u&&(Ng(this.U,this.V,"tick",this.mb),this.V.start())):(Ig(this.j,this.m,s,null),dm(this,s)),4==u&&um(this),this.i&&!this.J&&(4==u?Ay(this.l,this):(this.i=!1,sm(this)))}else(function(e){const t={};e=(e.g&&2<=dy(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(bp(e[r]))continue;var n=fg(e[r]);const o=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[o]||[];t[o]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.o=3,zg(12)):(this.o=0,zg(13)),um(this),cm(this)}}}catch(u){}},np.mb=function(){if(this.g){var e=dy(this.g),t=this.g.ja();this.C<t.length&&(lm(this),om(this,e,t),this.i&&4!=e&&sm(this))}},np.cancel=function(){this.J=!0,um(this)},np.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Lg(),zg(17)),um(this),this.o=2,cm(this)):am(this,this.Y-e)};var fm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pm(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof pm){this.h=e.h,mm(this,e.j),this.s=e.s,this.g=e.g,ym(this,e.m),this.l=e.l;var t=e.i,n=new Am;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),vm(this,n),this.o=e.o}else e&&(t=String(e).match(fm))?(this.h=!1,mm(this,t[1]||"",!0),this.s=Sm(t[2]||""),this.g=Sm(t[3]||"",!0),ym(this,t[4]),this.l=Sm(t[5]||"",!0),vm(this,t[6]||"",!0),this.o=Sm(t[7]||"")):(this.h=!1,this.i=new Am(null,this.h))}function gm(e){return new pm(e)}function mm(e,t,n){e.j=n?Sm(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ym(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function vm(e,t,n){t instanceof Am?(e.i=t,function(e,t){t&&!e.j&&(Im(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Dm(this,t),Pm(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Em(t,Nm)),e.i=new Am(t,e.h))}function bm(e,t,n){e.i.set(t,n)}function wm(e){return bm(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Sm(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Em(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,km),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function km(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}pm.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Em(t,Cm,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Em(t,Cm,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Em(n,"/"==n.charAt(0)?_m:xm,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Em(n,Tm)),e.join("")};var Cm=/[#\/\?@]/g,xm=/[#\?:]/g,_m=/[#\?]/g,Nm=/[#\?@]/g,Tm=/#/g;function Am(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Im(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),o=null;if(0<=r){var i=e[n].substring(0,r);o=e[n].substring(r+1)}else i=e[n];t(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Dm(e,t){Im(e),t=Om(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Mm(e,t){return Im(e),t=Om(e,t),e.g.has(t)}function Pm(e,t,n){Dm(e,t),0<n.length&&(e.i=null,e.g.set(Om(e,t),gp(n)),e.h+=n.length)}function Om(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(np=Am.prototype).add=function(e,t){Im(this),this.i=null,e=Om(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},np.forEach=function(e,t){Im(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},np.ta=function(){Im(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const o=e[r];for(let e=0;e<o.length;e++)n.push(t[r])}return n},np.Z=function(e){Im(this);let t=[];if("string"===typeof e)Mm(this,e)&&(t=t.concat(this.g.get(Om(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},np.set=function(e,t){return Im(this),this.i=null,Mm(this,e=Om(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},np.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},np.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var o=i;""!==s[r]&&(o+="="+encodeURIComponent(String(s[r]))),e.push(o)}}return this.i=e.join("&")};var Lm=class{constructor(e,t){this.g=e,this.map=t}};function Rm(e){this.l=e||zm,ip.PerformanceNavigationTiming?e=0<(e=ip.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(ip.g&&ip.g.Ka&&ip.g.Ka()&&ip.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var zm=10;function Fm(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Vm(e){return e.h?1:e.g?e.g.size:0}function jm(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Bm(e,t){e.g?e.g.add(t):e.h=t}function Um(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Hm(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return gp(e.i)}Rm.prototype.cancel=function(){if(this.i=Hm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var qm,Km=class{stringify(e){return ip.JSON.stringify(e,void 0)}parse(e){return ip.JSON.parse(e,void 0)}};function Wm(){this.g=new Km}function Gm(e,t,n){const r=n||"";try{hm(e,(function(e,n){let o=e;ap(e)&&(o=cg(e)),t.push(r+n+"="+encodeURIComponent(o))}))}catch(Xx){throw t.push(r+"type="+encodeURIComponent("_badmap")),Xx}}function Ym(e,t,n,r,o){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,o(r)}catch(i){}}function Xm(e){this.l=e.fc||null,this.j=e.ob||!1}function Qm(e,t){sg.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Zm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}hp(Xm,Ug),Xm.prototype.g=function(){return new Qm(this.l,this.j)},Xm.prototype.i=(qm={},function(){return qm}),hp(Qm,sg);var Zm=0;function $m(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Jm(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ey(e)}function ey(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(np=Qm.prototype).open=function(e,t){if(this.readyState!=Zm)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ey(this)},np.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||ip).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},np.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Jm(this)),this.readyState=Zm},np.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ey(this)),this.g&&(this.readyState=3,ey(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof ip.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$m(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},np.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Jm(this):ey(this),3==this.readyState&&$m(this)}},np.Za=function(e){this.g&&(this.response=this.responseText=e,Jm(this))},np.Ya=function(e){this.g&&(this.response=e,Jm(this))},np.ka=function(){this.g&&Jm(this)},np.setRequestHeader=function(e,t){this.v.append(e,t)},np.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},np.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Qm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ty=ip.JSON.parse;function ny(e){sg.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ry,this.L=this.M=!1}hp(ny,sg);var ry="",oy=/^https?$/i,iy=["POST","PUT"];function sy(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ay(e),cy(e)}function ay(e){e.F||(e.F=!0,ag(e,"complete"),ag(e,"error"))}function ly(e){if(e.h&&"undefined"!=typeof op&&(!e.C[1]||4!=dy(e)||2!=e.da()))if(e.v&&4==dy(e))Eg(e.La,0,e);else if(ag(e,"readystatechange"),4==dy(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var o=String(e.I).match(fm)[1]||null;!o&&ip.self&&ip.self.location&&(o=ip.self.location.protocol.slice(0,-1)),r=!oy.test(o?o.toLowerCase():"")}n=r}if(n)ag(e,"complete"),ag(e,"success");else{e.m=6;try{var i=2<dy(e)?e.g.statusText:""}catch(s){i=""}e.j=i+" ["+e.da()+"]",ay(e)}}finally{cy(e)}}}function cy(e,t){if(e.g){uy(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ag(e,"ready");try{n.onreadystatechange=r}catch(Xx){}}}function uy(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(ip.clearTimeout(e.A),e.A=null)}function dy(e){return e.g?e.g.readyState:0}function hy(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case ry:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(mv){return null}}function fy(e){let t="";return Hp(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function py(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=fy(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):bm(e,t,n))}function gy(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function my(e){this.Ga=0,this.j=[],this.l=new Ag,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=gy("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=gy("baseRetryDelayMs",5e3,e),this.hb=gy("retryDelaySeedMs",1e4,e),this.eb=gy("forwardChannelMaxRetries",2,e),this.xa=gy("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Rm(e&&e.concurrentRequestLimit),this.Ja=new Wm,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function yy(e){if(by(e),3==e.H){var t=e.W++,n=gm(e.I);if(bm(n,"SID",e.K),bm(n,"RID",t),bm(n,"TYPE","terminate"),Ey(e,n),(t=new Qg(e,e.l,t)).L=2,t.v=wm(gm(n)),n=!1,ip.navigator&&ip.navigator.sendBeacon)try{n=ip.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&ip.Image&&((new Image).src=t.v,n=!0),n||(t.g=Oy(t.l,null),t.g.ha(t.v)),t.G=Date.now(),sm(t)}My(e)}function vy(e){e.g&&(_y(e),e.g.cancel(),e.g=null)}function by(e){vy(e),e.u&&(ip.clearTimeout(e.u),e.u=null),Ty(e),e.i.cancel(),e.m&&("number"===typeof e.m&&ip.clearTimeout(e.m),e.m=null)}function wy(e){if(!Fm(e.i)&&!e.m){e.m=!0;var t=e.Na;gg||vg(),mg||(gg(),mg=!0),yg.add(t,e),e.C=0}}function Sy(e,t){var n;n=t?t.m:e.W++;const r=gm(e.I);bm(r,"SID",e.K),bm(r,"RID",n),bm(r,"AID",e.V),Ey(e,r),e.o&&e.s&&py(r,e.o,e.s),n=new Qg(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=ky(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Bm(e.i,n),tm(n,r,t)}function Ey(e,t){e.na&&Hp(e.na,(function(e,n){bm(t,n,e)})),e.h&&hm({},(function(e,n){bm(t,n,e)}))}function ky(e,t,n){n=Math.min(e.j.length,n);var r=e.h?up(e.h.Va,e.h,e):null;e:{var o=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=o[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let s=0;s<n;s++){let n=o[s].g;const a=o[s].map;if(n-=t,0>n)t=Math.max(0,o[s].g-100),i=!1;else try{Gm(a,e,"req"+n+"_")}catch(Nv){r&&r(a)}}if(i){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Cy(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;gg||vg(),mg||(gg(),mg=!0),yg.add(t,e),e.A=0}}function xy(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Vg(up(e.Ma,e),Iy(e,e.A)),e.A++,!0)}function _y(e){null!=e.B&&(ip.clearTimeout(e.B),e.B=null)}function Ny(e){e.g=new Qg(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=gm(e.wa);bm(t,"RID","rpc"),bm(t,"SID",e.K),bm(t,"AID",e.V),bm(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&bm(t,"TO",e.qa),bm(t,"TYPE","xmlhttp"),Ey(e,t),e.o&&e.s&&py(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=wm(gm(t)),n.s=null,n.S=!0,nm(n,e)}function Ty(e){null!=e.v&&(ip.clearTimeout(e.v),e.v=null)}function Ay(e,t){var n=null;if(e.g==t){Ty(e),_y(e),e.g=null;var r=2}else{if(!jm(e.i,t))return;n=t.F,Um(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var o=e.C;ag(r=Pg(),new Fg(r,n)),wy(e)}else Cy(e);else if(3==(o=t.o)||0==o&&0<t.ca||!(1==r&&function(e,t){return!(Vm(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Vg(up(e.Na,e,t),Iy(e,e.C)),e.C++,!0))}(e,t)||2==r&&xy(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),o){case 1:Dy(e,5);break;case 4:Dy(e,10);break;case 3:Dy(e,6);break;default:Dy(e,2)}}function Iy(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Dy(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=up(e.pb,e);n||(n=new pm("//www.google.com/images/cleardot.gif"),ip.location&&"http"==ip.location.protocol||mm(n,"https"),wm(n)),function(e,t){const n=new Ag;if(ip.Image){const r=new Image;r.onload=dp(Ym,n,r,"TestLoadImage: loaded",!0,t),r.onerror=dp(Ym,n,r,"TestLoadImage: error",!1,t),r.onabort=dp(Ym,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=dp(Ym,n,r,"TestLoadImage: timeout",!1,t),ip.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else zg(2);e.H=0,e.h&&e.h.za(t),My(e),by(e)}function My(e){if(e.H=0,e.ma=[],e.h){const t=Hm(e.i);0==t.length&&0==e.j.length||(mp(e.ma,t),mp(e.ma,e.j),e.i.i.length=0,gp(e.j),e.j.length=0),e.h.ya()}}function Py(e,t,n){var r=n instanceof pm?gm(n):new pm(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ym(r,r.m);else{var o=ip.location;r=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var i=new pm(null);r&&mm(i,r),t&&(i.g=t),o&&ym(i,o),n&&(i.l=n),r=i}return n=e.F,t=e.Da,n&&t&&bm(r,n,t),bm(r,"VER",e.ra),Ey(e,r),r}function Oy(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new ny(new Xm({ob:!0})):new ny(e.va)).Oa(e.J),t}function Ly(){}function Ry(){if(_p&&!(10<=Number(Rp)))throw Error("Environmental error: no available transport.")}function zy(e,t){sg.call(this),this.g=new my(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!bp(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!bp(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new jy(this)}function Fy(e){Gg.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Vy(){Yg.call(this),this.status=1}function jy(e){this.g=e}function By(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Uy(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var o=0;16>o;++o)r[o]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(o=0;16>o;++o)r[o]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],o=e.g[2];var i=e.g[3],s=t+(i^n&(o^i))+r[0]+3614090360&4294967295;s=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=n+(s<<7&4294967295|s>>>25))+((s=i+(o^t&(n^o))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=o+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^o&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^n&(o^i))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=i+(o^t&(n^o))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=o+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^o&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^n&(o^i))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=i+(o^t&(n^o))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=o+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^o&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^n&(o^i))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=i+(o^t&(n^o))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=o+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^o&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^i&(n^o))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=i+(n^o&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=o+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(i^t&(o^i))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(o^i&(n^o))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=i+(n^o&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=o+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(i^t&(o^i))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(o^i&(n^o))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=i+(n^o&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=o+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(i^t&(o^i))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(o^i&(n^o))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=i+(n^o&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=o+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(i^t&(o^i))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^o^i)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=i+(t^n^o)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=o+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(o^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^o^i)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=i+(t^n^o)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=o+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(o^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^o^i)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=i+(t^n^o)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=o+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(o^i^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^o^i)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=i+(t^n^o)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=o+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(o^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(o^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=i+(n^(t|~o))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=o+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(i^(o|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(o^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=i+(n^(t|~o))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=o+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(i^(o|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(o^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=i+(n^(t|~o))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=o+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(i^(o|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((i=(t=n+((s=t+(o^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=i+(n^(t|~o))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((o=i+((s=o+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(o+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+o&4294967295,e.g[3]=e.g[3]+i&4294967295}function Hy(e,t){this.h=t;for(var n=[],r=!0,o=e.length-1;0<=o;o--){var i=0|e[o];r&&i==t||(n[o]=i,r=!1)}this.g=n}(np=ny.prototype).Oa=function(e){this.M=e},np.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Kg.g(),this.C=this.u?Hg(this.u):Hg(Kg),this.g.onreadystatechange=up(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){return void sy(this,i)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),o=ip.FormData&&e instanceof ip.FormData,!(0<=pp(iy,t))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{uy(this),0<this.B&&((this.L=function(e){return _p&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=up(this.ua,this)):this.A=Eg(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){sy(this,i)}},np.ua=function(){"undefined"!=typeof op&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ag(this,"timeout"),this.abort(8))},np.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ag(this,"complete"),ag(this,"abort"),cy(this))},np.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cy(this,!0)),ny.$.N.call(this)},np.La=function(){this.s||(this.G||this.v||this.l?ly(this):this.kb())},np.kb=function(){ly(this)},np.isActive=function(){return!!this.g},np.da=function(){try{return 2<dy(this)?this.g.status:-1}catch(qm){return-1}},np.ja=function(){try{return this.g?this.g.responseText:""}catch(qm){return""}},np.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ty(t)}},np.Ia=function(){return this.m},np.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(np=my.prototype).ra=8,np.H=1,np.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const o=new Qg(this,this.l,e);let i=this.s;if(this.U&&(i?(i=qp(i),Wp(i,this.U)):i=this.U),null!==this.o||this.O||(o.I=i,i=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=ky(this,o,t),bm(n=gm(this.I),"RID",e),bm(n,"CVER",22),this.F&&bm(n,"X-HTTP-Session-Id",this.F),Ey(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(fy(i)))+"&"+t:this.o&&py(n,this.o,i)),Bm(this.i,o),this.bb&&bm(n,"TYPE","init"),this.P?(bm(n,"$req",t),bm(n,"SID","null"),o.aa=!0,tm(o,n,null)):tm(o,n,t),this.H=2}}else 3==this.H&&(e?Sy(this,e):0==this.j.length||Fm(this.i)||Sy(this))},np.Ma=function(){if(this.u=null,Ny(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Vg(up(this.jb,this),e)}},np.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,zg(10),vy(this),Ny(this))},np.ib=function(){null!=this.v&&(this.v=null,vy(this),xy(this),zg(19))},np.pb=function(e){e?(this.l.info("Successfully pinged google.com"),zg(2)):(this.l.info("Failed to ping google.com"),zg(1))},np.isActive=function(){return!!this.h&&this.h.isActive(this)},(np=Ly.prototype).Ba=function(){},np.Aa=function(){},np.za=function(){},np.ya=function(){},np.isActive=function(){return!0},np.Va=function(){},Ry.prototype.g=function(e,t){return new zy(e,t)},hp(zy,sg),zy.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;zg(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Py(e,null,e.Y),wy(e)},zy.prototype.close=function(){yy(this.g)},zy.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=cg(e),e=n);t.j.push(new Lm(t.fb++,e)),3==t.H&&wy(t)},zy.prototype.N=function(){this.g.h=null,delete this.j,yy(this.g),delete this.g,zy.$.N.call(this)},hp(Fy,Gg),hp(Vy,Yg),hp(jy,Ly),jy.prototype.Ba=function(){ag(this.g,"a")},jy.prototype.Aa=function(e){ag(this.g,new Fy(e))},jy.prototype.za=function(e){ag(this.g,new Vy)},jy.prototype.ya=function(){ag(this.g,"b")},hp(By,(function(){this.blockSize=-1})),By.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},By.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,o=this.h,i=0;i<t;){if(0==o)for(;i<=n;)Uy(this,e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(r[o++]=e.charCodeAt(i++),o==this.blockSize){Uy(this,r),o=0;break}}else for(;i<t;)if(r[o++]=e[i++],o==this.blockSize){Uy(this,r),o=0;break}}this.h=o,this.i+=t},By.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var qy={};function Ky(e){return-128<=e&&128>e?function(e,t){var n=qy;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Hy([0|e],0>e?-1:0)})):new Hy([0|e],0>e?-1:0)}function Wy(e){if(isNaN(e)||!isFinite(e))return Yy;if(0>e)return Jy(Wy(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Gy;return new Hy(t,0)}var Gy=4294967296,Yy=Ky(0),Xy=Ky(1),Qy=Ky(16777216);function Zy(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function $y(e){return-1==e.h}function Jy(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Hy(n,~e.h).add(Xy)}function ev(e,t){return e.add(Jy(t))}function tv(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function nv(e,t){this.g=e,this.h=t}function rv(e,t){if(Zy(t))throw Error("division by zero");if(Zy(e))return new nv(Yy,Yy);if($y(e))return t=rv(Jy(e),t),new nv(Jy(t.g),Jy(t.h));if($y(t))return t=rv(e,Jy(t)),new nv(Jy(t.g),t.h);if(30<e.g.length){if($y(e)||$y(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Xy,r=t;0>=r.X(e);)n=ov(n),r=ov(r);var o=iv(n,1),i=iv(r,1);for(r=iv(r,2),n=iv(n,2);!Zy(r);){var s=i.add(r);0>=s.X(e)&&(o=o.add(n),i=s),r=iv(r,1),n=iv(n,1)}return t=ev(e,o.R(t)),new nv(o,t)}for(o=Yy;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(i=Wy(n)).R(t);$y(s)||0<s.X(e);)s=(i=Wy(n-=r)).R(t);Zy(i)&&(i=Xy),o=o.add(i),e=ev(e,s)}return new nv(o,e)}function ov(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Hy(n,e.h)}function iv(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,o=[],i=0;i<r;i++)o[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new Hy(o,e.h)}(np=Hy.prototype).ea=function(){if($y(this))return-Jy(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Gy+r)*t,t*=Gy}return e},np.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Zy(this))return"0";if($y(this))return"-"+Jy(this).toString(e);for(var t=Wy(Math.pow(e,6)),n=this,r="";;){var o=rv(n,t).g,i=((0<(n=ev(n,o.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Zy(n=o))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},np.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},np.X=function(e){return $y(e=ev(this,e))?-1:Zy(e)?0:1},np.abs=function(){return $y(this)?Jy(this):this},np.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,o=0;o<=t;o++){var i=r+(65535&this.D(o))+(65535&e.D(o)),s=(i>>>16)+(this.D(o)>>>16)+(e.D(o)>>>16);r=s>>>16,i&=65535,s&=65535,n[o]=s<<16|i}return new Hy(n,-2147483648&n[n.length-1]?-1:0)},np.R=function(e){if(Zy(this)||Zy(e))return Yy;if($y(this))return $y(e)?Jy(this).R(Jy(e)):Jy(Jy(this).R(e));if($y(e))return Jy(this.R(Jy(e)));if(0>this.X(Qy)&&0>e.X(Qy))return Wy(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var o=0;o<e.g.length;o++){var i=this.D(r)>>>16,s=65535&this.D(r),a=e.D(o)>>>16,l=65535&e.D(o);n[2*r+2*o]+=s*l,tv(n,2*r+2*o),n[2*r+2*o+1]+=i*l,tv(n,2*r+2*o+1),n[2*r+2*o+1]+=s*a,tv(n,2*r+2*o+1),n[2*r+2*o+2]+=i*a,tv(n,2*r+2*o+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Hy(n,0)},np.gb=function(e){return rv(this,e).h},np.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Hy(n,this.h&e.h)},np.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Hy(n,this.h|e.h)},np.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Hy(n,this.h^e.h)},Ry.prototype.createWebChannel=Ry.prototype.g,zy.prototype.send=zy.prototype.u,zy.prototype.open=zy.prototype.m,zy.prototype.close=zy.prototype.close,jg.NO_ERROR=0,jg.TIMEOUT=8,jg.HTTP_ERROR=6,Bg.COMPLETE="complete",qg.EventType=Wg,Wg.OPEN="a",Wg.CLOSE="b",Wg.ERROR="c",Wg.MESSAGE="d",sg.prototype.listen=sg.prototype.O,ny.prototype.listenOnce=ny.prototype.P,ny.prototype.getLastError=ny.prototype.Sa,ny.prototype.getLastErrorCode=ny.prototype.Ia,ny.prototype.getStatus=ny.prototype.da,ny.prototype.getResponseJson=ny.prototype.Wa,ny.prototype.getResponseText=ny.prototype.ja,ny.prototype.send=ny.prototype.ha,ny.prototype.setWithCredentials=ny.prototype.Oa,By.prototype.digest=By.prototype.l,By.prototype.reset=By.prototype.reset,By.prototype.update=By.prototype.j,Hy.prototype.add=Hy.prototype.add,Hy.prototype.multiply=Hy.prototype.R,Hy.prototype.modulo=Hy.prototype.gb,Hy.prototype.compare=Hy.prototype.X,Hy.prototype.toNumber=Hy.prototype.ea,Hy.prototype.toString=Hy.prototype.toString,Hy.prototype.getBits=Hy.prototype.D,Hy.fromNumber=Wy,Hy.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Jy(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Wy(Math.pow(n,8)),o=Yy,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),a=parseInt(t.substring(i,i+s),n);8>s?(s=Wy(Math.pow(n,s)),o=o.R(s).add(Wy(a))):o=(o=o.R(r)).add(Wy(a))}return o};var sv=jg,av=Bg,lv=Dg,cv=10,uv=11,dv=Xm,hv=qg,fv=ny,pv=By,gv=Hy;const mv="@firebase/firestore";class yv{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yv.UNAUTHENTICATED=new yv(null),yv.GOOGLE_CREDENTIALS=new yv("google-credentials-uid"),yv.FIRST_PARTY=new yv("first-party-uid"),yv.MOCK_USER=new yv("mock-user");let vv="9.23.0";const bv=new qh("@firebase/firestore");function wv(){return bv.logLevel}function Sv(e){if(bv.logLevel<=Vh.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(Cv);bv.debug("Firestore (".concat(vv,"): ").concat(e),...o)}}function Ev(e){if(bv.logLevel<=Vh.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(Cv);bv.error("Firestore (".concat(vv,"): ").concat(e),...o)}}function kv(e){if(bv.logLevel<=Vh.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(Cv);bv.warn("Firestore (".concat(vv,"): ").concat(e),...o)}}function Cv(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function xv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(vv,") INTERNAL ASSERTION FAILED: ")+e;throw Ev(t),new Error(t)}function _v(e,t){e||xv()}function Nv(e,t){return e}const Tv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Av extends Ah{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Iv{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Dv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Mv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(yv.UNAUTHENTICATED)))}shutdown(){}}class Pv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Ov{constructor(e){this.t=e,this.currentUser=yv.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let o=new Iv;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Iv,e.enqueueRetryable((()=>r(this.currentUser)))};const i=()=>{const t=o;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{Sv("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),i()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Sv("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Iv)}}),0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Sv("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(_v("string"==typeof t.accessToken),new Dv(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return _v(null===e||"string"==typeof e),new yv(e)}}class Lv{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=yv.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Rv{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Lv(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(yv.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Fv{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&Sv("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,Sv("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Sv("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):Sv("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(_v("string"==typeof e.token),this.T=e.token,new zv(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Vv(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class jv{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Vv(40);for(let o=0;o<r.length;++o)n.length<20&&r[o]<t&&(n+=e.charAt(r[o]%62))}return n}}function Bv(e,t){return e<t?-1:e>t?1:0}function Uv(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class Hv{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Av(Tv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Av(Tv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Av(Tv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Av(Tv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Hv.fromMillis(Date.now())}static fromDate(e){return Hv.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Hv(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bv(this.nanoseconds,e.nanoseconds):Bv(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qv{constructor(e){this.timestamp=e}static fromTimestamp(e){return new qv(e)}static min(){return new qv(new Hv(0,0))}static max(){return new qv(new Hv(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Kv{constructor(e,t,n){void 0===t?t=0:t>e.length&&xv(),void 0===n?n=e.length-t:n>e.length-t&&xv(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Kv.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Kv?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),o=t.get(r);if(n<o)return-1;if(n>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Wv extends Kv{construct(e,t,n){return new Wv(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const o of n){if(o.indexOf("//")>=0)throw new Av(Tv.INVALID_ARGUMENT,"Invalid segment (".concat(o,"). Paths must not contain // in them."));e.push(...o.split("/").filter((e=>e.length>0)))}return new Wv(e)}static emptyPath(){return new Wv([])}}const Gv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yv extends Kv{construct(e,t,n){return new Yv(e,t,n)}static isValidIdentifier(e){return Gv.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yv.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Yv(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const o=()=>{if(0===n.length)throw new Av(Tv.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Av(Tv.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Av(Tv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(o(),r++)}if(o(),i)throw new Av(Tv.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yv(t)}static emptyPath(){return new Yv([])}}class Xv{constructor(e){this.path=e}static fromPath(e){return new Xv(Wv.fromString(e))}static fromName(e){return new Xv(Wv.fromString(e).popFirst(5))}static empty(){return new Xv(Wv.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wv.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Wv.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xv(new Wv(e.slice()))}}function Qv(e){return new Zv(e.readTime,e.key,-1)}class Zv{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Zv(qv.min(),Xv.empty(),-1)}static max(){return new Zv(qv.max(),Xv.empty(),-1)}}function $v(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Xv.comparator(e.documentKey,t.documentKey),0!==n?n:Bv(e.largestBatchId,t.largestBatchId))}class Jv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function eb(e){if(e.code!==Tv.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;Sv("LocalStore","Unexpectedly lost primary lease")}class tb{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xv(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new tb(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof tb?t:tb.resolve(t)}catch(e){return tb.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):tb.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):tb.reject(t)}static resolve(e){return new tb(((t,n)=>{t(e)}))}static reject(e){return new tb(((t,n)=>{n(e)}))}static waitFor(e){return new tb(((t,n)=>{let r=0,o=0,i=!1;e.forEach((e=>{++r,e.next((()=>{++o,i&&o===r&&t()}),(e=>n(e)))})),i=!0,o===r&&t()}))}static or(e){let t=tb.resolve(!1);for(const n of e)t=t.next((e=>e?tb.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new tb(((n,r)=>{const o=e.length,i=new Array(o);let s=0;for(let a=0;a<o;a++){const l=a;t(e[l]).next((e=>{i[l]=e,++s,s===o&&n(i)}),(e=>r(e)))}}))}static doWhile(e,t){return new tb(((n,r)=>{const o=()=>{!0===e()?t().next((()=>{o()}),r):n()};o()}))}}function nb(e){return"IndexedDbTransactionError"===e.name}class rb{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function ob(e){return null==e}function ib(e){return 0===e&&1/e==-1/0}function sb(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ab(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function lb(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}rb.ct=-1;class cb{constructor(e,t){this.comparator=e,this.root=t||db.EMPTY}insert(e,t){return new cb(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,db.BLACK,null,null))}remove(e){return new cb(this.comparator,this.root.remove(e,this.comparator).copy(null,null,db.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ub(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ub(this.root,e,this.comparator,!1)}getReverseIterator(){return new ub(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ub(this.root,e,this.comparator,!0)}}class ub{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class db{constructor(e,t,n,r,o){this.key=e,this.value=t,this.color=null!=n?n:db.RED,this.left=null!=r?r:db.EMPTY,this.right=null!=o?o:db.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,o){return new db(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const o=n(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===o?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return db.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return db.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,db.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,db.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xv();if(this.right.isRed())throw xv();const e=this.left.check();if(e!==this.right.check())throw xv();return e+(this.isRed()?0:1)}}db.EMPTY=null,db.RED=!0,db.BLACK=!1,db.EMPTY=new class{constructor(){this.size=0}get key(){throw xv()}get value(){throw xv()}get color(){throw xv()}get left(){throw xv()}get right(){throw xv()}copy(e,t,n,r,o){return this}insert(e,t,n){return new db(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hb{constructor(e){this.comparator=e,this.data=new cb(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fb(this.data.getIterator())}getIteratorFrom(e){return new fb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof hb))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new hb(this.comparator);return t.data=e,t}}class fb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class pb{constructor(e){this.fields=e,e.sort(Yv.comparator)}static empty(){return new pb([])}unionWith(e){let t=new hb(Yv.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new pb(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uv(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class gb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class mb{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new gb("Invalid base64 string: "+e):e}}(e);return new mb(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new mb(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bv(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mb.EMPTY_BYTE_STRING=new mb("");const yb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vb(e){if(_v(!!e),"string"==typeof e){let t=0;const n=yb.exec(e);if(_v(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:bb(e.seconds),nanos:bb(e.nanos)}}function bb(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function wb(e){return"string"==typeof e?mb.fromBase64String(e):mb.fromUint8Array(e)}function Sb(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Eb(e){const t=e.mapValue.fields.__previous_value__;return Sb(t)?Eb(t):t}function kb(e){const t=vb(e.mapValue.fields.__local_write_time__.timestampValue);return new Hv(t.seconds,t.nanos)}class Cb{constructor(e,t,n,r,o,i,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=o,this.forceLongPolling=i,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}class xb{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new xb("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof xb&&e.projectId===this.projectId&&e.database===this.database}}const _b={fields:{__type__:{stringValue:"__max__"}}};function Nb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Sb(e)?4:function(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}(e)?9007199254740991:10:xv()}function Tb(e,t){if(e===t)return!0;const n=Nb(e);if(n!==Nb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return kb(e).isEqual(kb(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=vb(e.timestampValue),r=vb(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return wb(e.bytesValue).isEqual(wb(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return bb(e.geoPointValue.latitude)===bb(t.geoPointValue.latitude)&&bb(e.geoPointValue.longitude)===bb(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return bb(e.integerValue)===bb(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=bb(e.doubleValue),r=bb(t.doubleValue);return n===r?ib(n)===ib(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Uv(e.arrayValue.values||[],t.arrayValue.values||[],Tb);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(sb(n)!==sb(r))return!1;for(const o in n)if(n.hasOwnProperty(o)&&(void 0===r[o]||!Tb(n[o],r[o])))return!1;return!0}(e,t);default:return xv()}}function Ab(e,t){return void 0!==(e.values||[]).find((e=>Tb(e,t)))}function Ib(e,t){if(e===t)return 0;const n=Nb(e),r=Nb(t);if(n!==r)return Bv(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Bv(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=bb(e.integerValue||e.doubleValue),r=bb(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Db(e.timestampValue,t.timestampValue);case 4:return Db(kb(e),kb(t));case 5:return Bv(e.stringValue,t.stringValue);case 6:return function(e,t){const n=wb(e),r=wb(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let o=0;o<n.length&&o<r.length;o++){const e=Bv(n[o],r[o]);if(0!==e)return e}return Bv(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Bv(bb(e.latitude),bb(t.latitude));return 0!==n?n:Bv(bb(e.longitude),bb(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let o=0;o<n.length&&o<r.length;++o){const e=Ib(n[o],r[o]);if(e)return e}return Bv(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===_b&&t===_b)return 0;if(e===_b)return 1;if(t===_b)return-1;const n=e.fields||{},r=Object.keys(n),o=t.fields||{},i=Object.keys(o);r.sort(),i.sort();for(let s=0;s<r.length&&s<i.length;++s){const e=Bv(r[s],i[s]);if(0!==e)return e;const t=Ib(n[r[s]],o[i[s]]);if(0!==t)return t}return Bv(r.length,i.length)}(e.mapValue,t.mapValue);default:throw xv()}}function Db(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Bv(e,t);const n=vb(e),r=vb(t),o=Bv(n.seconds,r.seconds);return 0!==o?o:Bv(n.nanos,r.nanos)}function Mb(e){return Pb(e)}function Pb(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=vb(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?wb(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Xv.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Pb(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const o of t)r?r=!1:n+=",",n+="".concat(o,":").concat(Pb(e.fields[o]));return n+"}"}(e.mapValue):xv();var t,n}function Ob(e){return!!e&&"integerValue"in e}function Lb(e){return!!e&&"arrayValue"in e}function Rb(e){return!!e&&"nullValue"in e}function zb(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Fb(e){return!!e&&"mapValue"in e}function Vb(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ab(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Vb(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Vb(e.arrayValue.values[n]);return t}return Object.assign({},e)}class jb{constructor(e){this.value=e}static empty(){return new jb({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Fb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vb(t)}setAll(e){let t=Yv.emptyPath(),n={},r=[];e.forEach(((e,o)=>{if(!t.isImmediateParentOf(o)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=o.popLast()}e?n[o.lastSegment()]=Vb(e):r.push(o.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,n,r)}delete(e){const t=this.field(e.popLast());Fb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tb(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Fb(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ab(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new jb(Vb(this.value))}}function Bb(e){const t=[];return ab(e.fields,((e,n)=>{const r=new Yv([e]);if(Fb(n)){const e=Bb(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new pb(t)}class Ub{constructor(e,t,n,r,o,i,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=o,this.data=i,this.documentState=s}static newInvalidDocument(e){return new Ub(e,0,qv.min(),qv.min(),qv.min(),jb.empty(),0)}static newFoundDocument(e,t,n,r){return new Ub(e,1,t,qv.min(),n,r,0)}static newNoDocument(e,t){return new Ub(e,2,t,qv.min(),qv.min(),jb.empty(),0)}static newUnknownDocument(e,t){return new Ub(e,3,t,qv.min(),qv.min(),jb.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qv.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jb.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jb.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qv.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ub&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ub(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Hb{constructor(e,t){this.position=e,this.inclusive=t}}function qb(e,t,n){let r=0;for(let o=0;o<e.position.length;o++){const i=t[o],s=e.position[o];if(r=i.field.isKeyField()?Xv.comparator(Xv.fromName(s.referenceValue),n.key):Ib(s,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function Kb(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Tb(e.position[n],t.position[n]))return!1;return!0}class Wb{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Gb(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Yb{}class Xb extends Yb{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new nw(e,t,n):"array-contains"===t?new sw(e,n):"in"===t?new aw(e,n):"not-in"===t?new lw(e,n):"array-contains-any"===t?new cw(e,n):new Xb(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new rw(e,n):new ow(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ib(t,this.value)):null!==t&&Nb(this.value)===Nb(t)&&this.matchesComparison(Ib(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xv()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Qb extends Yb{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Qb(e,t)}matches(e){return Zb(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((e=>e.isInequality()));return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Zb(e){return"and"===e.op}function $b(e){return function(e){for(const t of e.filters)if(t instanceof Qb)return!1;return!0}(e)&&Zb(e)}function Jb(e){if(e instanceof Xb)return e.field.canonicalString()+e.op.toString()+Mb(e.value);if($b(e))return e.filters.map((e=>Jb(e))).join(",");{const t=e.filters.map((e=>Jb(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function ew(e,t){return e instanceof Xb?function(e,t){return t instanceof Xb&&e.op===t.op&&e.field.isEqual(t.field)&&Tb(e.value,t.value)}(e,t):e instanceof Qb?function(e,t){return t instanceof Qb&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&ew(n,t.filters[r])),!0)}(e,t):void xv()}function tw(e){return e instanceof Xb?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Mb(e.value))}(e):e instanceof Qb?function(e){return e.op.toString()+" {"+e.getFilters().map(tw).join(" ,")+"}"}(e):"Filter"}class nw extends Xb{constructor(e,t,n){super(e,t,n),this.key=Xv.fromName(n.referenceValue)}matches(e){const t=Xv.comparator(e.key,this.key);return this.matchesComparison(t)}}class rw extends Xb{constructor(e,t){super(e,"in",t),this.keys=iw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ow extends Xb{constructor(e,t){super(e,"not-in",t),this.keys=iw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function iw(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Xv.fromName(e.referenceValue)))}class sw extends Xb{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Lb(t)&&Ab(t.arrayValue,this.value)}}class aw extends Xb{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ab(this.value.arrayValue,t)}}class lw extends Xb{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ab(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ab(this.value.arrayValue,t)}}class cw extends Xb{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Lb(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Ab(this.value.arrayValue,e)))}}class uw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=o,this.startAt=i,this.endAt=s,this.dt=null}}function dw(e){return new uw(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function hw(e){const t=Nv(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Jb(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),ob(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Mb(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Mb(e))).join(",")),t.dt=e}return t.dt}function fw(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Gb(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ew(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Kb(e.startAt,t.startAt)&&Kb(e.endAt,t.endAt)}function pw(e){return Xv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class gw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=o,this.limitType=i,this.startAt=s,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function mw(e){return new gw(e)}function yw(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function vw(e){const t=Nv(e);if(null===t.wt){t.wt=[];const e=function(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}(t),n=function(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new Wb(e)),t.wt.push(new Wb(Yv.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Wb(Yv.keyField(),e))}}}return t.wt}function bw(e){const t=Nv(e);if(!t._t)if("F"===t.limitType)t._t=dw(t.path,t.collectionGroup,vw(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const o of vw(t)){const t="desc"===o.dir?"asc":"desc";e.push(new Wb(o.field,t))}const n=t.endAt?new Hb(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hb(t.startAt.position,t.startAt.inclusive):null;t._t=dw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function ww(e,t,n){return new gw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Sw(e,t){return fw(bw(e),bw(t))&&e.limitType===t.limitType}function Ew(e){return"".concat(hw(bw(e)),"|lt:").concat(e.limitType)}function kw(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>tw(e))).join(", "),"]")),ob(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Mb(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Mb(e))).join(",")),"Target(".concat(t,")")}(bw(e)),"; limitType=").concat(e.limitType,")")}function Cw(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Xv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of vw(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=qb(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,vw(e),t))&&!(e.endAt&&!function(e,t,n){const r=qb(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,vw(e),t))}(e,t)}function xw(e){return(t,n)=>{let r=!1;for(const o of vw(e)){const e=_w(o,t,n);if(0!==e)return e;r=r||o.field.isKeyField()}return 0}}function _w(e,t,n){const r=e.field.isKeyField()?Xv.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),o=n.data.field(e);return null!==r&&null!==o?Ib(r,o):xv()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return xv()}}class Nw{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,o]of n)if(this.equalsFn(r,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ab(this.inner,((t,n)=>{for(const[r,o]of n)e(r,o)}))}isEmpty(){return lb(this.inner)}size(){return this.innerSize}}const Tw=new cb(Xv.comparator);function Aw(){return Tw}const Iw=new cb(Xv.comparator);function Dw(){let e=Iw;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const o of n)e=e.insert(o.key,o);return e}function Mw(e){let t=Iw;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Pw(){return Lw()}function Ow(){return Lw()}function Lw(){return new Nw((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Rw=new cb(Xv.comparator),zw=new hb(Xv.comparator);function Fw(){let e=zw;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const o of n)e=e.add(o);return e}const Vw=new hb(Bv);function jw(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ib(t)?"-0":t}}function Bw(e){return{integerValue:""+e}}function Uw(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!ib(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?Bw(t):jw(e,t)}class Hw{constructor(){this._=void 0}}function qw(e,t,n){return e instanceof Gw?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Sb(t)&&(t=Eb(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Yw?Xw(e,t):e instanceof Qw?Zw(e,t):function(e,t){const n=Ww(e,t),r=Jw(n)+Jw(e.gt);return Ob(n)&&Ob(e.gt)?Bw(r):jw(e.serializer,r)}(e,t)}function Kw(e,t,n){return e instanceof Yw?Xw(e,t):e instanceof Qw?Zw(e,t):n}function Ww(e,t){return e instanceof $w?Ob(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Gw extends Hw{}class Yw extends Hw{constructor(e){super(),this.elements=e}}function Xw(e,t){const n=eS(t);for(const r of e.elements)n.some((e=>Tb(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Qw extends Hw{constructor(e){super(),this.elements=e}}function Zw(e,t){let n=eS(t);for(const r of e.elements)n=n.filter((e=>!Tb(e,r)));return{arrayValue:{values:n}}}class $w extends Hw{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Jw(e){return bb(e.integerValue||e.doubleValue)}function eS(e){return Lb(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class tS{constructor(e,t){this.version=e,this.transformResults=t}}class nS{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nS}static exists(e){return new nS(void 0,e)}static updateTime(e){return new nS(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rS(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class oS{}function iS(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new gS(e.key,nS.none()):new uS(e.key,e.data,nS.none());{const n=e.data,r=jb.empty();let o=new hb(Yv.comparator);for(let e of t.fields)if(!o.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),o=o.add(e)}return new dS(e.key,r,new pb(o.toArray()),nS.none())}}function sS(e,t,n){e instanceof uS?function(e,t,n){const r=e.value.clone(),o=fS(e.fieldTransforms,t,n.transformResults);r.setAll(o),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof dS?function(e,t,n){if(!rS(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=fS(e.fieldTransforms,t,n.transformResults),o=t.data;o.setAll(hS(e)),o.setAll(r),t.convertToFoundDocument(n.version,o).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function aS(e,t,n,r){return e instanceof uS?function(e,t,n,r){if(!rS(e.precondition,t))return n;const o=e.value.clone(),i=pS(e.fieldTransforms,r,t);return o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null}(e,t,n,r):e instanceof dS?function(e,t,n,r){if(!rS(e.precondition,t))return n;const o=pS(e.fieldTransforms,r,t),i=t.data;return i.setAll(hS(e)),i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return rS(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function lS(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),o=Ww(r.transform,e||null);null!=o&&(null===n&&(n=jb.empty()),n.set(r.field,o))}return n||null}function cS(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Uv(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Yw&&t instanceof Yw||e instanceof Qw&&t instanceof Qw?Uv(e.elements,t.elements,Tb):e instanceof $w&&t instanceof $w?Tb(e.gt,t.gt):e instanceof Gw&&t instanceof Gw}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class uS extends oS{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class dS extends oS{constructor(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function hS(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function fS(e,t,n){const r=new Map;_v(e.length===n.length);for(let o=0;o<n.length;o++){const i=e[o],s=i.transform,a=t.data.field(i.field);r.set(i.field,Kw(s,a,n[o]))}return r}function pS(e,t,n){const r=new Map;for(const o of e){const e=o.transform,i=n.data.field(o.field);r.set(o.field,qw(e,i,t))}return r}class gS extends oS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mS extends oS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class yS{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&sS(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=aS(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=aS(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ow();return this.mutations.forEach((r=>{const o=e.get(r.key),i=o.overlayedDocument;let s=this.applyToLocalView(i,o.mutatedFields);s=t.has(r.key)?null:s;const a=iS(i,s);null!==a&&n.set(r.key,a),i.isValidDocument()||i.convertToNoDocument(qv.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fw())}isEqual(e){return this.batchId===e.batchId&&Uv(this.mutations,e.mutations,((e,t)=>cS(e,t)))&&Uv(this.baseMutations,e.baseMutations,((e,t)=>cS(e,t)))}}class vS{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){_v(e.mutations.length===n.length);let r=Rw;const o=e.mutations;for(let i=0;i<o.length;i++)r=r.insert(o[i].key,n[i].version);return new vS(e,t,n,r)}}class bS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class wS{constructor(e,t){this.count=e,this.unchangedNames=t}}var SS,ES;function kS(e){if(void 0===e)return Ev("GRPC error has no .code"),Tv.UNKNOWN;switch(e){case SS.OK:return Tv.OK;case SS.CANCELLED:return Tv.CANCELLED;case SS.UNKNOWN:return Tv.UNKNOWN;case SS.DEADLINE_EXCEEDED:return Tv.DEADLINE_EXCEEDED;case SS.RESOURCE_EXHAUSTED:return Tv.RESOURCE_EXHAUSTED;case SS.INTERNAL:return Tv.INTERNAL;case SS.UNAVAILABLE:return Tv.UNAVAILABLE;case SS.UNAUTHENTICATED:return Tv.UNAUTHENTICATED;case SS.INVALID_ARGUMENT:return Tv.INVALID_ARGUMENT;case SS.NOT_FOUND:return Tv.NOT_FOUND;case SS.ALREADY_EXISTS:return Tv.ALREADY_EXISTS;case SS.PERMISSION_DENIED:return Tv.PERMISSION_DENIED;case SS.FAILED_PRECONDITION:return Tv.FAILED_PRECONDITION;case SS.ABORTED:return Tv.ABORTED;case SS.OUT_OF_RANGE:return Tv.OUT_OF_RANGE;case SS.UNIMPLEMENTED:return Tv.UNIMPLEMENTED;case SS.DATA_LOSS:return Tv.DATA_LOSS;default:return xv()}}(ES=SS||(SS={}))[ES.OK=0]="OK",ES[ES.CANCELLED=1]="CANCELLED",ES[ES.UNKNOWN=2]="UNKNOWN",ES[ES.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ES[ES.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ES[ES.NOT_FOUND=5]="NOT_FOUND",ES[ES.ALREADY_EXISTS=6]="ALREADY_EXISTS",ES[ES.PERMISSION_DENIED=7]="PERMISSION_DENIED",ES[ES.UNAUTHENTICATED=16]="UNAUTHENTICATED",ES[ES.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ES[ES.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ES[ES.ABORTED=10]="ABORTED",ES[ES.OUT_OF_RANGE=11]="OUT_OF_RANGE",ES[ES.UNIMPLEMENTED=12]="UNIMPLEMENTED",ES[ES.INTERNAL=13]="INTERNAL",ES[ES.UNAVAILABLE=14]="UNAVAILABLE",ES[ES.DATA_LOSS=15]="DATA_LOSS";class CS{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return xS}static getOrCreateInstance(){return null===xS&&(xS=new CS),xS}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let xS=null;const _S=new gv([4294967295,4294967295],0);function NS(e){const t=(new TextEncoder).encode(e),n=new pv;return n.update(t),new Uint8Array(n.digest())}function TS(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new gv([n,r],0),new gv([o,i],0)]}class AS{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new IS("Invalid padding: ".concat(t));if(n<0)throw new IS("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new IS("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new IS("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=gv.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(gv.fromNumber(n)));return 1===r.compare(_S)&&(r=new gv([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=NS(e),[n,r]=TS(t);for(let o=0;o<this.hashCount;o++){const e=this.Et(n,r,o);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),i=new AS(o,r,t);return n.forEach((e=>i.insert(e))),i}insert(e){if(0===this.It)return;const t=NS(e),[n,r]=TS(t);for(let o=0;o<this.hashCount;o++){const e=this.Et(n,r,o);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class IS extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class DS{constructor(e,t,n,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,MS.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new DS(qv.min(),r,new cb(Bv),Aw(),Fw())}}class MS{constructor(e,t,n,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new MS(n,t,Fw(),Fw(),Fw())}}class PS{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class OS{constructor(e,t){this.targetId=e,this.Vt=t}}class LS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mb.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class RS{constructor(){this.St=0,this.Dt=VS(),this.Ct=mb.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Fw(),t=Fw(),n=Fw();return this.Dt.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:xv()}})),new MS(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=VS()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class zS{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Aw(),this.zt=FS(),this.Wt=new cb(Bv)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,(t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:xv()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach(((e,n)=>{this.te(n)&&t(n)}))}ne(e){var t;const n=e.targetId,r=e.Vt.count,o=this.se(n);if(o){const i=o.target;if(pw(i))if(0===r){const e=new Xv(i.path);this.Yt(n,e,Ub.newNoDocument(e,qv.min()))}else _v(1===r);else{const o=this.ie(n);if(o!==r){const r=this.re(e,o);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=CS.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,o,i,s,a,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(s=null===(i=null===(o=null==u?void 0:u.bits)||void 0===o?void 0:o.bitmap)||void 0===i?void 0:i.length)&&void 0!==s?s:0,padding:null!==(l=null===(a=null==u?void 0:u.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),c}(r,o,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:o="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=wb(o).toUint8Array()}catch(e){if(e instanceof gb)return kv("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new AS(a,i,s)}catch(e){return kv(e instanceof IS?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const o=this.Gt.ue(),i="projects/".concat(o.projectId,"/databases/").concat(o.database,"/documents/").concat(n.path.canonicalString());t.vt(i)||(this.Yt(e,n,null),r++)})),r}ce(e){const t=new Map;this.Qt.forEach(((n,r)=>{const o=this.se(r);if(o){if(n.current&&pw(o.target)){const t=new Xv(o.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,Ub.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}}));let n=Fw();this.zt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.jt.forEach(((t,n)=>n.setReadTime(e)));const r=new DS(e,t,this.Wt,this.jt,n);return this.jt=Aw(),this.zt=FS(),this.Wt=new cb(Bv),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new RS,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new hb(Bv),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Sv("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new RS),this.Gt.getRemoteKeysForTarget(e).forEach((t=>{this.Yt(e,t,null)}))}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function FS(){return new cb(Xv.comparator)}function VS(){return new cb(Xv.comparator)}const jS={asc:"ASCENDING",desc:"DESCENDING"},BS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},US={and:"AND",or:"OR"};class HS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qS(e,t){return e.useProto3Json||ob(t)?t:{value:t}}function KS(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function WS(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function GS(e,t){return KS(e,t.toTimestamp())}function YS(e){return _v(!!e),qv.fromTimestamp(function(e){const t=vb(e);return new Hv(t.seconds,t.nanos)}(e))}function XS(e,t){return function(e){return new Wv(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function QS(e){const t=Wv.fromString(e);return _v(pE(t)),t}function ZS(e,t){return XS(e.databaseId,t.path)}function $S(e,t){const n=QS(t);if(n.get(1)!==e.databaseId.projectId)throw new Av(Tv.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Av(Tv.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Xv(tE(n))}function JS(e,t){return XS(e.databaseId,t)}function eE(e){return new Wv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function tE(e){return _v(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function nE(e,t,n){return{name:ZS(e,t),fields:n.value.mapValue.fields}}function rE(e,t){return{documents:[JS(e,t.path)]}}function oE(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=JS(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=JS(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(e){if(0!==e.length)return hE(Qb.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const i=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:uE(e.field),direction:aE(e.dir)}}(e)))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const s=qS(e,t.limit);var a;return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function iE(e){let t=function(e){const t=QS(e);return 4===t.length?Wv.emptyPath():tE(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){_v(1===r);const e=n.from[0];e.allDescendants?o=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=sE(e);return t instanceof Qb&&$b(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map((e=>function(e){return new Wb(dE(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,ob(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Hb(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Hb(n,t)}(n.endAt)),function(e,t,n,r,o,i,s,a){return new gw(e,t,n,r,o,i,s,a)}(t,o,s,i,a,"F",l,c)}function sE(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=dE(e.unaryFilter.field);return Xb.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=dE(e.unaryFilter.field);return Xb.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=dE(e.unaryFilter.field);return Xb.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=dE(e.unaryFilter.field);return Xb.create(o,"!=",{nullValue:"NULL_VALUE"});default:return xv()}}(e):void 0!==e.fieldFilter?function(e){return Xb.create(dE(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xv()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Qb.create(e.compositeFilter.filters.map((e=>sE(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return xv()}}(e.compositeFilter.op))}(e):xv()}function aE(e){return jS[e]}function lE(e){return BS[e]}function cE(e){return US[e]}function uE(e){return{fieldPath:e.canonicalString()}}function dE(e){return Yv.fromServerFormat(e.fieldPath)}function hE(e){return e instanceof Xb?function(e){if("=="===e.op){if(zb(e.value))return{unaryFilter:{field:uE(e.field),op:"IS_NAN"}};if(Rb(e.value))return{unaryFilter:{field:uE(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(zb(e.value))return{unaryFilter:{field:uE(e.field),op:"IS_NOT_NAN"}};if(Rb(e.value))return{unaryFilter:{field:uE(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uE(e.field),op:lE(e.op),value:e.value}}}(e):e instanceof Qb?function(e){const t=e.getFilters().map((e=>hE(e)));return 1===t.length?t[0]:{compositeFilter:{op:cE(e.op),filters:t}}}(e):xv()}function fE(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function pE(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class gE{constructor(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:qv.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:qv.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:mb.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new gE(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gE(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gE(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gE(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class mE{constructor(e){this.fe=e}}function yE(e){const t=iE({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ww(t,t.limit,"L"):t}class vE{constructor(){this.rn=new bE}addToCollectionParentIndex(e,t){return this.rn.add(t),tb.resolve()}getCollectionParents(e,t){return tb.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return tb.resolve()}deleteFieldIndex(e,t){return tb.resolve()}getDocumentsMatchingTarget(e,t){return tb.resolve(null)}getIndexType(e,t){return tb.resolve(0)}getFieldIndexes(e,t){return tb.resolve([])}getNextCollectionGroupToUpdate(e){return tb.resolve(null)}getMinOffset(e,t){return tb.resolve(Zv.min())}getMinOffsetFromCollectionGroup(e,t){return tb.resolve(Zv.min())}updateCollectionGroup(e,t,n){return tb.resolve()}updateIndexEntries(e,t){return tb.resolve()}}class bE{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new hb(Wv.comparator),o=!r.has(n);return this.index[t]=r.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new hb(Wv.comparator)).toArray()}}class wE{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new wE(0)}static Mn(){return new wE(-1)}}class SE{constructor(){this.changes=new Nw((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ub.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?tb.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class EE{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class kE{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&aS(n.mutation,e,pb.empty(),Hv.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Fw()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fw();const r=Pw();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Dw();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Pw();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Fw())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let o=Aw();const i=Lw(),s=Lw();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof dS)?o=o.insert(t.key,t):void 0!==s?(i.set(t.key,s.mutation.getFieldMask()),aS(s.mutation,t,s.mutation.getFieldMask(),Hv.now())):i.set(t.key,pb.empty())})),this.recalculateAndSaveOverlays(e,o).next((e=>(e.forEach(((e,t)=>i.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new EE(t,null!==(n=i.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=Lw();let r=new cb(((e,t)=>e-t)),o=Fw();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const o of e)o.keys().forEach((e=>{const i=t.get(e);if(null===i)return;let s=n.get(e)||pb.empty();s=o.applyToLocalView(i,s),n.set(e,s);const a=(r.get(o.batchId)||Fw()).add(e);r=r.insert(o.batchId,a)}))})).next((()=>{const i=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,c=Ow();l.forEach((e=>{if(!o.has(e)){const r=iS(t.get(e),n.get(e));null!==r&&c.set(e,r),o=o.add(e)}})),i.push(this.documentOverlayCache.saveOverlays(e,a,c))}return tb.waitFor(i)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return Xv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):function(e){return null!==e.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((o=>{const i=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-o.size):tb.resolve(Pw());let s=-1,a=o;return i.next((t=>tb.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),o.get(t)?tb.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,o))).next((()=>this.computeViews(e,a,t,Fw()))).next((e=>({batchId:s,changes:Mw(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xv(t)).next((e=>{let t=Dw();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let o=Dw();return this.indexManager.getCollectionParents(e,r).next((i=>tb.forEach(i,(i=>{const s=function(e,t){return new gw(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,i.child(r));return this.getDocumentsMatchingCollectionQuery(e,s,n).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)))).next((e=>{r.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ub.newInvalidDocument(r)))}));let n=Dw();return e.forEach(((e,o)=>{const i=r.get(e);void 0!==i&&aS(i.mutation,o,pb.empty(),Hv.now()),Cw(t,o)&&(n=n.insert(e,o))})),n}))}}class CE{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return tb.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:YS(n.createTime)}),tb.resolve()}getNamedQuery(e,t){return tb.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:yE(e.bundledQuery),readTime:YS(e.readTime)}}(t)),tb.resolve()}}class xE{constructor(){this.overlays=new cb(Xv.comparator),this.ls=new Map}getOverlay(e,t){return tb.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Pw();return tb.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.we(e,t,r)})),tb.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.ls.delete(n)),tb.resolve()}getOverlaysForCollection(e,t,n){const r=Pw(),o=t.length+1,i=new Xv(t.child("")),s=this.overlays.getIteratorFrom(i);for(;s.hasNext();){const e=s.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===o&&e.largestBatchId>n&&r.set(e.getKey(),e)}return tb.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let o=new cb(((e,t)=>e-t));const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=o.get(e.largestBatchId);null===t&&(t=Pw(),o=o.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=Pw(),a=o.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return tb.resolve(s)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new bS(t,n));let o=this.ls.get(t);void 0===o&&(o=Fw(),this.ls.set(t,o)),this.ls.set(t,o.add(n.key))}}class _E{constructor(){this.fs=new hb(NE.ds),this.ws=new hb(NE._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new NE(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ys(new NE(e,t))}ps(e,t){e.forEach((e=>this.removeReference(e,t)))}Is(e){const t=new Xv(new Wv([])),n=new NE(t,e),r=new NE(t,e+1),o=[];return this.ws.forEachInRange([n,r],(e=>{this.ys(e),o.push(e.key)})),o}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Xv(new Wv([])),n=new NE(t,e),r=new NE(t,e+1);let o=Fw();return this.ws.forEachInRange([n,r],(e=>{o=o.add(e.key)})),o}containsKey(e){const t=new NE(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class NE{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Xv.comparator(e.key,t.key)||Bv(e.As,t.As)}static _s(e,t){return Bv(e.As,t.As)||Xv.comparator(e.key,t.key)}}class TE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new hb(NE.ds)}checkEmpty(e){return tb.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const o=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new yS(o,t,n,r);this.mutationQueue.push(i);for(const s of r)this.Rs=this.Rs.add(new NE(s.key,o)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return tb.resolve(i)}lookupMutationBatch(e,t){return tb.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),o=r<0?0:r;return tb.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return tb.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return tb.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new NE(t,0),r=new NE(t,Number.POSITIVE_INFINITY),o=[];return this.Rs.forEachInRange([n,r],(e=>{const t=this.Ps(e.As);o.push(t)})),tb.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new hb(Bv);return t.forEach((e=>{const t=new NE(e,0),r=new NE(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],(e=>{n=n.add(e.As)}))})),tb.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let o=n;Xv.isDocumentKey(o)||(o=o.child(""));const i=new NE(new Xv(o),0);let s=new hb(Bv);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.As)),!0)}),i),tb.resolve(this.Vs(s))}Vs(e){const t=[];return e.forEach((e=>{const n=this.Ps(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){_v(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return tb.forEach(t.mutations,(r=>{const o=new NE(r.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Rs=n}))}Cn(e){}containsKey(e,t){const n=new NE(t,0),r=this.Rs.firstAfterOrEqual(n);return tb.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,tb.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class AE{constructor(e){this.Ds=e,this.docs=new cb(Xv.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),o=r?r.size:0,i=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return tb.resolve(n?n.document.mutableCopy():Ub.newInvalidDocument(t))}getEntries(e,t){let n=Aw();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ub.newInvalidDocument(e))})),tb.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let o=Aw();const i=t.path,s=new Xv(i.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||$v(Qv(s),n)<=0||(r.has(s.key)||Cw(t,s))&&(o=o.insert(s.key,s.mutableCopy()))}return tb.resolve(o)}getAllFromCollectionGroup(e,t,n,r){xv()}Cs(e,t){return tb.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new IE(this)}getSize(e){return tb.resolve(this.size)}}class IE extends SE{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)})),tb.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class DE{constructor(e){this.persistence=e,this.xs=new Nw((e=>hw(e)),fw),this.lastRemoteSnapshotVersion=qv.min(),this.highestTargetId=0,this.Ns=0,this.ks=new _E,this.targetCount=0,this.Ms=wE.kn()}forEachTarget(e,t){return this.xs.forEach(((e,n)=>t(n))),tb.resolve()}getLastRemoteSnapshotVersion(e){return tb.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return tb.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),tb.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),tb.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new wE(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,tb.resolve()}updateTargetData(e,t){return this.Fn(t),tb.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,tb.resolve()}removeTargets(e,t,n){let r=0;const o=[];return this.xs.forEach(((i,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.xs.delete(i),o.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),tb.waitFor(o).next((()=>r))}getTargetCount(e){return tb.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return tb.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),tb.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach((t=>{o.push(r.markPotentiallyOrphaned(e,t))})),tb.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),tb.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return tb.resolve(n)}containsKey(e,t){return tb.resolve(this.ks.containsKey(t))}}class ME{constructor(e,t){this.$s={},this.overlays={},this.Os=new rb(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new DE(this),this.indexManager=new vE,this.remoteDocumentCache=function(e){return new AE(e)}((e=>this.referenceDelegate.Ls(e))),this.serializer=new mE(t),this.qs=new CE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new TE(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){Sv("MemoryPersistence","Starting transaction:",e);const r=new PE(this.Os.next());return this.referenceDelegate.Us(),n(r).next((e=>this.referenceDelegate.Ks(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gs(e,t){return tb.or(Object.values(this.$s).map((n=>()=>n.containsKey(e,t))))}}class PE extends Jv{constructor(e){super(),this.currentSequenceNumber=e}}class OE{constructor(e){this.persistence=e,this.Qs=new _E,this.js=null}static zs(e){return new OE(e)}get Ws(){if(this.js)return this.js;throw xv()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),tb.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),tb.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),tb.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach((e=>this.Ws.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ws.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tb.forEach(this.Ws,(n=>{const r=Xv.fromPath(n);return this.Hs(e,r).next((e=>{e||t.removeEntry(r,qv.min())}))})).next((()=>(this.js=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hs(e,t).next((e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())}))}Ls(e){return 0}Hs(e,t){return tb.or([()=>tb.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class LE{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=Fw(),r=Fw();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new LE(e,t.fromCache,n,r)}}class RE{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next((o=>o||this.Gi(e,t,r,n))).next((n=>n||this.Qi(e,t)))}Ki(e,t){if(yw(t))return tb.resolve(null);let n=bw(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=ww(t,null,"F"),n=bw(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const o=Fw(...r);return this.Ui.getDocuments(e,o).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const i=this.ji(t,r);return this.zi(t,i,o,n.readTime)?this.Ki(e,ww(t,null,"F")):this.Wi(e,i,t,n)}))))})))))}Gi(e,t,n,r){return yw(t)||r.isEqual(qv.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((o=>{const i=this.ji(t,o);return this.zi(t,i,n,r)?this.Qi(e,t):(wv()<=Vh.DEBUG&&Sv("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),kw(t)),this.Wi(e,i,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,o=qv.fromTimestamp(1e9===r?new Hv(n+1,0):new Hv(n,r));return new Zv(o,Xv.empty(),t)}(r,-1)))}))}ji(e,t){let n=new hb(xw(e));return t.forEach(((t,r)=>{Cw(e,r)&&(n=n.add(r))})),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Qi(e,t){return wv()<=Vh.DEBUG&&Sv("QueryEngine","Using full collection scan to execute query:",kw(t)),this.Ui.getDocumentsMatchingQuery(e,t,Zv.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class zE{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new cb(Bv),this.Yi=new Nw((e=>hw(e)),fw),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kE(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}async function FE(e,t){const n=Nv(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((o=>(r=o,n.tr(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const o=[],i=[];let s=Fw();for(const e of r){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({er:e,removedBatchIds:o,addedBatchIds:i})))}))}))}function VE(e){const t=Nv(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Bs.getLastRemoteSnapshotVersion(e)))}function jE(e,t){const n=Nv(e),r=t.snapshotVersion;let o=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const i=n.Zi.newChangeBuffer({trackRemovals:!0});o=n.Ji;const s=[];t.targetChanges.forEach(((i,a)=>{const l=o.get(a);if(!l)return;s.push(n.Bs.removeMatchingKeys(e,i.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(e,i.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(mb.EMPTY_BYTE_STRING,qv.min()).withLastLimboFreeSnapshotVersion(qv.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),o=o.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,i)&&s.push(n.Bs.updateTargetData(e,c))}));let a=Aw(),l=Fw();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(function(e,t,n){let r=Fw(),o=Fw();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Aw();return n.forEach(((n,i)=>{const s=e.get(n);i.isFoundDocument()!==s.isFoundDocument()&&(o=o.add(n)),i.isNoDocument()&&i.version.isEqual(qv.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!s.isValidDocument()||i.version.compareTo(s.version)>0||0===i.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Sv("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",i.version)})),{nr:r,sr:o}}))}(e,i,t.documentUpdates).next((e=>{a=e.nr,l=e.sr}))),!r.isEqual(qv.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next((t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return tb.waitFor(s).next((()=>i.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ji=o,e)))}function BE(e,t){const n=Nv(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}async function UE(e,t,n){const r=Nv(e),o=r.Ji.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(e=>r.persistence.referenceDelegate.removeTarget(e,o)))}catch(e){if(!nb(e))throw e;Sv("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ji=r.Ji.remove(t),r.Yi.delete(o.target)}function HE(e,t,n){const r=Nv(e);let o=qv.min(),i=Fw();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=Nv(e),o=r.Yi.get(n);return void 0!==o?tb.resolve(r.Ji.get(o)):r.Bs.getTargetData(t,n)}(r,e,bw(t)).next((t=>{if(t)return o=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{i=e}))})).next((()=>r.Hi.getDocumentsMatchingQuery(e,t,n?o:qv.min(),n?i:Fw()))).next((e=>(function(e,t,n){let r=e.Xi.get(t)||qv.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,ir:i})))))}class qE{constructor(){this.activeTargetIds=Vw}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KE{constructor(){this.Hr=new qE,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new qE,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class WE{Yr(e){}shutdown(){}}class GE{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Sv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Sv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let YE=null;function XE(){return null===YE?YE=268435456+Math.round(2147483648*Math.random()):YE++,"0x"+YE.toString(16)}const QE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZE{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const $E="WebChannelConnection";class JE extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,o){const i=XE(),s=this.To(e,t);Sv("RestConnection","Sending RPC '".concat(e,"' ").concat(i,":"),s,n);const a={};return this.Eo(a,r,o),this.Ao(e,s,a,n).then((t=>(Sv("RestConnection","Received RPC '".concat(e,"' ").concat(i,": "),t),t)),(t=>{throw kv("RestConnection","RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",s,"request:",n),t}))}vo(e,t,n,r,o,i){return this.Io(e,t,n,r,o)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+vv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}To(e,t){const n=QE[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const o=XE();return new Promise(((i,s)=>{const a=new fv;a.setWithCredentials(!0),a.listenOnce(av.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case sv.NO_ERROR:const t=a.getResponseJson();Sv($E,"XHR for RPC '".concat(e,"' ").concat(o," received:"),JSON.stringify(t)),i(t);break;case sv.TIMEOUT:Sv($E,"RPC '".concat(e,"' ").concat(o," timed out")),s(new Av(Tv.DEADLINE_EXCEEDED,"Request time out"));break;case sv.HTTP_ERROR:const n=a.getStatus();if(Sv($E,"RPC '".concat(e,"' ").concat(o," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Tv).indexOf(t)>=0?t:Tv.UNKNOWN}(t.status);s(new Av(e,t.message))}else s(new Av(Tv.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new Av(Tv.UNAVAILABLE,"Connection failed."));break;default:xv()}}finally{Sv($E,"RPC '".concat(e,"' ").concat(o," completed."))}}));const l=JSON.stringify(r);Sv($E,"RPC '".concat(e,"' ").concat(o," sending request:"),r),a.send(t,"POST",l,n,15)}))}Ro(e,t,n){const r=XE(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=new Ry,s=Pg(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new dv({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=o.join("");Sv($E,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=i.createWebChannel(c,a);let d=!1,h=!1;const f=new ZE({ro:t=>{h?Sv($E,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Sv($E,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Sv($E,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,hv.EventType.OPEN,(()=>{h||Sv($E,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,hv.EventType.CLOSE,(()=>{h||(h=!0,Sv($E,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.wo())})),p(u,hv.EventType.ERROR,(t=>{h||(h=!0,kv($E,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.wo(new Av(Tv.UNAVAILABLE,"The operation could not be completed")))})),p(u,hv.EventType.MESSAGE,(t=>{var n;if(!h){const o=t.data[0];_v(!!o);const i=o,s=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(s){Sv($E,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=SS[e];if(void 0!==t)return kS(t)}(t),o=s.message;void 0===n&&(n=Tv.INTERNAL,o="Unknown error status: "+t+" with message "+s.message),h=!0,f.wo(new Av(n,o)),u.close()}else Sv($E,"RPC '".concat(e,"' stream ").concat(r," received:"),o),f._o(o)}})),p(s,lv.STAT_EVENT,(t=>{t.stat===cv?Sv($E,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===uv&&Sv($E,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function ek(){return"undefined"!=typeof document?document:null}function tk(e){return new HS(e,!0)}class nk{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=o,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&Sv("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class rk{constructor(e,t,n,r,o,i,s,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=o,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new nk(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===Tv.RESOURCE_EXHAUSTED?(Ev(t.toString()),Ev("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===Tv.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)}),(t=>{e((()=>{const e=new Av(Tv.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)}))}))}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((e=>{n((()=>this.tu(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return Sv("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.Fo===e?t():(Sv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ok extends rk{constructor(e,t,n,r,o,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=o}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:xv()}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(_v(void 0===t||"string"==typeof t),mb.fromBase64String(t||"")):(_v(void 0===t||t instanceof Uint8Array),mb.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?Tv.UNKNOWN:kS(e.code);return new Av(t,e.message||"")}(s);n=new LS(r,o,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=$S(e,r.document.name),i=YS(r.document.updateTime),s=r.document.createTime?YS(r.document.createTime):qv.min(),a=new jb({mapValue:{fields:r.document.fields}}),l=Ub.newFoundDocument(o,i,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new PS(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=$S(e,r.document),i=r.readTime?YS(r.readTime):qv.min(),s=Ub.newNoDocument(o,i),a=r.removedTargetIds||[];n=new PS([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=$S(e,r.document),i=r.removedTargetIds||[];n=new PS([],i,o,null)}else{if(!("filter"in t))return xv();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:o}=e,i=new wS(r,o),s=e.targetId;n=new OS(s,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return qv.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?qv.min():t.readTime?YS(t.readTime):qv.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=eE(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=pw(r)?{documents:rE(e,r)}:{query:oE(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=WS(e,t.resumeToken);const r=qS(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(qv.min())>0){n.readTime=KS(e,t.snapshotVersion.toTimestamp());const r=qS(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xv()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=eE(this.serializer),t.removeTarget=e,this.Wo(t)}}class ik extends rk{constructor(e,t,n,r,o,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=o,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(_v(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(_v(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?YS(e.updateTime):YS(t);return n.isEqual(qv.min())&&(n=YS(t)),new tS(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=YS(e.commitTime);return this.listener.cu(n,t)}return _v(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=eE(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof uS)n={update:nE(e,t.key,t.value)};else if(t instanceof gS)n={delete:ZS(e,t.key)};else if(t instanceof dS)n={update:nE(e,t.key,t.data),updateMask:fE(t.fieldMask)};else{if(!(t instanceof mS))return xv();n={verify:ZS(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Gw)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Yw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Qw)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof $w)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw xv()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:GS(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:xv()}(e,t.precondition)),n}(this.serializer,e)))};this.Wo(t)}}class sk extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Av(Tv.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[o,i]=r;return this.connection.Io(e,t,n,o,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Tv.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Av(Tv.UNKNOWN,e.toString())}))}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[i,s]=o;return this.connection.vo(e,t,n,i,s,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Tv.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Av(Tv.UNKNOWN,e.toString())}))}terminate(){this.lu=!0}}class ak{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Ev(t),this.mu=!1):Sv("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class lk{constructor(e,t,n,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=o,this.Pu.Yr((e=>{n.enqueueAndForget((async()=>{yk(this)&&(Sv("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Nv(e);t.vu.add(4),await uk(t),t.bu.set("Unknown"),t.vu.delete(4),await ck(t)}(this))}))})),this.bu=new ak(n,r)}}async function ck(e){if(yk(e))for(const t of e.Ru)await t(!0)}async function uk(e){for(const t of e.Ru)await t(!1)}function dk(e,t){const n=Nv(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),mk(n)?gk(n):Ok(n).Ko()&&fk(n,t))}function hk(e,t){const n=Nv(e),r=Ok(n);n.Au.delete(t),r.Ko()&&pk(n,t),0===n.Au.size&&(r.Ko()?r.jo():yk(n)&&n.bu.set("Unknown"))}function fk(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(qv.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ok(e).su(t)}function pk(e,t){e.Vu.qt(t),Ok(e).iu(t)}function gk(e){e.Vu=new zS({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),Ok(e).start(),e.bu.gu()}function mk(e){return yk(e)&&!Ok(e).Uo()&&e.Au.size>0}function yk(e){return 0===Nv(e).vu.size}function vk(e){e.Vu=void 0}async function bk(e){e.Au.forEach(((t,n)=>{fk(e,t)}))}async function wk(e,t){vk(e),mk(e)?(e.bu.Iu(t),gk(e)):e.bu.set("Unknown")}async function Sk(e,t,n){if(e.bu.set("Online"),t instanceof LS&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){Sv("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Ek(e,n)}else if(t instanceof PS?e.Vu.Ht(t):t instanceof OS?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(qv.min()))try{const t=await VE(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const o=e.Au.get(r);o&&e.Au.set(r,o.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(mb.EMPTY_BYTE_STRING,r.snapshotVersion)),pk(e,t);const o=new gE(r.target,t,n,r.sequenceNumber);fk(e,o)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Sv("RemoteStore","Failed to raise snapshot:",t),await Ek(e,t)}}async function Ek(e,t,n){if(!nb(t))throw t;e.vu.add(1),await uk(e),e.bu.set("Offline"),n||(n=()=>VE(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Sv("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await ck(e)}))}function kk(e,t){return t().catch((n=>Ek(e,n,t)))}async function Ck(e){const t=Nv(e),n=Lk(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;xk(t);)try{const e=await BE(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,_k(t,e)}catch(e){await Ek(t,e)}Nk(t)&&Tk(t)}function xk(e){return yk(e)&&e.Eu.length<10}function _k(e,t){e.Eu.push(t);const n=Lk(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function Nk(e){return yk(e)&&!Lk(e).Uo()&&e.Eu.length>0}function Tk(e){Lk(e).start()}async function Ak(e){Lk(e).hu()}async function Ik(e){const t=Lk(e);for(const n of e.Eu)t.uu(n.mutations)}async function Dk(e,t,n){const r=e.Eu.shift(),o=vS.from(r,t,n);await kk(e,(()=>e.remoteSyncer.applySuccessfulWrite(o))),await Ck(e)}async function Mk(e,t){t&&Lk(e).ou&&await async function(e,t){if(function(e){switch(e){default:return xv();case Tv.CANCELLED:case Tv.UNKNOWN:case Tv.DEADLINE_EXCEEDED:case Tv.RESOURCE_EXHAUSTED:case Tv.INTERNAL:case Tv.UNAVAILABLE:case Tv.UNAUTHENTICATED:return!1;case Tv.INVALID_ARGUMENT:case Tv.NOT_FOUND:case Tv.ALREADY_EXISTS:case Tv.PERMISSION_DENIED:case Tv.FAILED_PRECONDITION:case Tv.ABORTED:case Tv.OUT_OF_RANGE:case Tv.UNIMPLEMENTED:case Tv.DATA_LOSS:return!0}}(n=t.code)&&n!==Tv.ABORTED){const n=e.Eu.shift();Lk(e).Qo(),await kk(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Ck(e)}var n}(e,t),Nk(e)&&Tk(e)}async function Pk(e,t){const n=Nv(e);n.asyncQueue.verifyOperationInProgress(),Sv("RemoteStore","RemoteStore received new credentials");const r=yk(n);n.vu.add(3),await uk(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await ck(n)}function Ok(e){return e.Su||(e.Su=function(e,t,n){const r=Nv(e);return r.fu(),new ok(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:bk.bind(null,e),ao:wk.bind(null,e),nu:Sk.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Qo(),mk(e)?gk(e):e.bu.set("Unknown")):(await e.Su.stop(),vk(e))}))),e.Su}function Lk(e){return e.Du||(e.Du=function(e,t,n){const r=Nv(e);return r.fu(),new ik(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Ak.bind(null,e),ao:Mk.bind(null,e),au:Ik.bind(null,e),cu:Dk.bind(null,e)}),e.Ru.push((async t=>{t?(e.Du.Qo(),await Ck(e)):(await e.Du.stop(),e.Eu.length>0&&(Sv("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))}))),e.Du}class Rk{constructor(e,t,n,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=o,this.deferred=new Iv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,o){const i=Date.now()+n,s=new Rk(e,t,i,r,o);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Av(Tv.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zk(e,t){if(Ev("AsyncQueue","".concat(t,": ").concat(e)),nb(e))return new Av(Tv.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Fk{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Xv.comparator(t.key,n.key):(e,t)=>Xv.comparator(e.key,t.key),this.keyedMap=Dw(),this.sortedSet=new cb(this.comparator)}static emptySet(e){return new Fk(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fk))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Fk;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Vk{constructor(){this.Cu=new cb(Xv.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):xv():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class jk{constructor(e,t,n,r,o,i,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=o,this.fromCache=i,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,o){const i=[];return t.forEach((e=>{i.push({type:0,doc:e})})),new jk(e,t,Fk.emptySet(t),i,n,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Bk{constructor(){this.Nu=void 0,this.listeners=[]}}class Uk{constructor(){this.queries=new Nw((e=>Ew(e)),Sw),this.onlineState="Unknown",this.ku=new Set}}async function Hk(e,t){const n=Nv(e),r=t.query;let o=!1,i=n.queries.get(r);if(i||(o=!0,i=new Bk),o)try{i.Nu=await n.onListen(r)}catch(e){const n=zk(e,"Initialization of query '".concat(kw(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,i),i.listeners.push(t),t.Mu(n.onlineState),i.Nu&&t.$u(i.Nu)&&Gk(n)}async function qk(e,t){const n=Nv(e),r=t.query;let o=!1;const i=n.queries.get(r);if(i){const e=i.listeners.indexOf(t);e>=0&&(i.listeners.splice(e,1),o=0===i.listeners.length)}if(o)return n.queries.delete(r),n.onUnlisten(r)}function Kk(e,t){const n=Nv(e);let r=!1;for(const o of t){const e=o.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(o)&&(r=!0);t.Nu=o}}r&&Gk(n)}function Wk(e,t,n){const r=Nv(e),o=r.queries.get(t);if(o)for(const i of o.listeners)i.onError(n);r.queries.delete(t)}function Gk(e){e.ku.forEach((e=>{e.next()}))}class Yk{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new jk(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=jk.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Xk{constructor(e){this.key=e}}class Qk{constructor(e){this.key=e}}class Zk{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Fw(),this.mutatedKeys=Fw(),this.tc=xw(e),this.ec=new Fk(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new Vk,r=t?t.ec:this.ec;let o=t?t.mutatedKeys:this.mutatedKeys,i=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Cw(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.rc(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.tc(u,a)>0||l&&this.tc(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(s=!0)),f&&(u?(i=i.add(u),o=h?o.add(e):o.delete(e)):(i=i.delete(e),o=o.delete(e)))})),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),o=o.delete(e.key),n.track({type:1,doc:e})}return{ec:i,ic:n,zi:s,mutatedKeys:o}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const o=e.ic.xu();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xv()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc))),this.oc(n);const i=t?this.uc():[],s=0===this.Zu.size&&this.current?1:0,a=s!==this.Xu;return this.Xu=s,0!==o.length||a?{snapshot:new jk(this.query,e.ec,r,o,e.mutatedKeys,0===s,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:i}:{cc:i}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Vk,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((e=>this.Yu=this.Yu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Yu=this.Yu.delete(e))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Fw(),this.ec.forEach((e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))}));const t=[];return e.forEach((e=>{this.Zu.has(e)||t.push(new Qk(e))})),this.Zu.forEach((n=>{e.has(n)||t.push(new Xk(n))})),t}hc(e){this.Yu=e.ir,this.Zu=Fw();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return jk.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class $k{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Jk{constructor(e){this.key=e,this.fc=!1}}class eC{constructor(e,t,n,r,o,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=i,this.dc={},this.wc=new Nw((e=>Ew(e)),Sw),this._c=new Map,this.mc=new Set,this.gc=new cb(Xv.comparator),this.yc=new Map,this.Ic=new _E,this.Tc={},this.Ec=new Map,this.Ac=wE.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function tC(e,t){const n=function(e){const t=Nv(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=oC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=sC.bind(null,t),t.dc.nu=Kk.bind(null,t.eventManager),t.dc.Pc=Wk.bind(null,t.eventManager),t}(e);let r,o;const i=n.wc.get(t);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),o=i.view.lc();else{const e=await function(e,t){const n=Nv(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Bs.getTargetData(e,t).next((o=>o?(r=o,tb.resolve(r)):n.Bs.allocateTargetId(e).next((o=>(r=new gE(t,o,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}(n.localStore,bw(t)),i=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,o=await async function(e,t,n,r,o){e.Rc=(t,n,r)=>async function(e,t,n,r){let o=t.view.sc(n);o.zi&&(o=await HE(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.sc(n,o)})));const i=r&&r.targetChanges.get(t.targetId),s=t.view.applyChanges(o,e.isPrimaryClient,i);return fC(e,t.targetId,s.cc),s.snapshot}(e,t,n,r);const i=await HE(e.localStore,t,!0),s=new Zk(t,i.ir),a=s.sc(i.documents),l=MS.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,o),c=s.applyChanges(a,e.isPrimaryClient,l);fC(e,n,c.cc);const u=new $k(t,n,s);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}(n,t,r,"current"===i,e.resumeToken),n.isPrimaryClient&&dk(n.remoteStore,e)}return o}async function nC(e,t){const n=Nv(e),r=n.wc.get(t),o=n._c.get(r.targetId);if(o.length>1)return n._c.set(r.targetId,o.filter((e=>!Sw(e,t)))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await UE(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),hk(n.remoteStore,r.targetId),dC(n,r.targetId)})).catch(eb)):(dC(n,r.targetId),await UE(n.localStore,r.targetId,!0))}async function rC(e,t,n){const r=function(e){const t=Nv(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=aC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=lC.bind(null,t),t}(e);try{const e=await function(e,t){const n=Nv(e),r=Hv.now(),o=t.reduce(((e,t)=>e.add(t.key)),Fw());let i,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Aw(),l=Fw();return n.Zi.getEntries(e,o).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((o=>{i=o;const s=[];for(const e of t){const t=lS(e,i.get(e.key).overlayedDocument);null!=t&&s.push(new dS(e.key,t,Bb(t.value.mapValue),nS.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:Mw(i)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new cb(Bv)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await mC(r,e.changes),await Ck(r.remoteStore)}catch(e){const t=zk(e,"Failed to persist write");n.reject(t)}}async function oC(e,t){const n=Nv(e);try{const e=await jE(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.yc.get(t);r&&(_v(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?_v(r.fc):e.removedDocuments.size>0&&(_v(r.fc),r.fc=!1))})),await mC(n,e,t)}catch(e){await eb(e)}}function iC(e,t,n){const r=Nv(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach(((n,r)=>{const o=r.view.Mu(t);o.snapshot&&e.push(o.snapshot)})),function(e,t){const n=Nv(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const o of n.listeners)o.Mu(t)&&(r=!0)})),r&&Gk(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function sC(e,t,n){const r=Nv(e);r.sharedClientState.updateQueryState(t,"rejected",n);const o=r.yc.get(t),i=o&&o.key;if(i){let e=new cb(Xv.comparator);e=e.insert(i,Ub.newNoDocument(i,qv.min()));const n=Fw().add(i),o=new DS(qv.min(),new Map,new cb(Bv),e,n);await oC(r,o),r.gc=r.gc.remove(i),r.yc.delete(t),gC(r)}else await UE(r.localStore,t,!1).then((()=>dC(r,t,n))).catch(eb)}async function aC(e,t){const n=Nv(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Nv(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),o=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const o=n.batch,i=o.keys();let s=tb.resolve();return i.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const i=n.docVersions.get(e);_v(null!==i),t.version.compareTo(i)<0&&(o.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,o)))}(n,e,t,o).next((()=>o.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Fw();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);uC(n,r,null),cC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mC(n,e)}catch(e){await eb(e)}}async function lC(e,t,n){const r=Nv(e);try{const e=await function(e,t){const n=Nv(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(_v(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);uC(r,t,n),cC(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await mC(r,e)}catch(n){await eb(n)}}function cC(e,t){(e.Ec.get(t)||[]).forEach((e=>{e.resolve()})),e.Ec.delete(t)}function uC(e,t,n){const r=Nv(e);let o=r.Tc[r.currentUser.toKey()];if(o){const e=o.get(t);e&&(n?e.reject(n):e.resolve(),o=o.remove(t)),r.Tc[r.currentUser.toKey()]=o}}function dC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((t=>{e.Ic.containsKey(t)||hC(e,t)}))}function hC(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(hk(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),gC(e))}function fC(e,t,n){for(const r of n)r instanceof Xk?(e.Ic.addReference(r.key,t),pC(e,r)):r instanceof Qk?(Sv("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||hC(e,r.key)):xv()}function pC(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Sv("SyncEngine","New document in limbo: "+n),e.mc.add(r),gC(e))}function gC(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new Xv(Wv.fromString(t)),r=e.Ac.next();e.yc.set(r,new Jk(n)),e.gc=e.gc.insert(n,r),dk(e.remoteStore,new gE(bw(mw(n.path)),r,"TargetPurposeLimboResolution",rb.ct))}}async function mC(e,t,n){const r=Nv(e),o=[],i=[],s=[];r.wc.isEmpty()||(r.wc.forEach(((e,a)=>{s.push(r.Rc(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){o.push(e);const t=LE.Li(a.targetId,e);i.push(t)}})))})),await Promise.all(s),r.dc.nu(o),await async function(e,t){const n=Nv(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>tb.forEach(t,(t=>tb.forEach(t.Fi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>tb.forEach(t.Bi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!nb(e))throw e;Sv("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,o=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,o)}}}(r.localStore,i))}async function yC(e,t){const n=Nv(e);if(!n.currentUser.isEqual(t)){Sv("SyncEngine","User change. New user:",t.toKey());const e=await FE(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach((e=>{e.forEach((e=>{e.reject(new Av(Tv.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await mC(n,e.er)}}function vC(e,t){const n=Nv(e),r=n.yc.get(t);if(r&&r.fc)return Fw().add(r.key);{let e=Fw();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}class bC{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=tk(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function(e,t,n,r){return new zE(e,t,n,r)}(this.persistence,new RE,e.initialUser,this.serializer)}createPersistence(e){return new ME(OE.zs,this.serializer)}createSharedClientState(e){return new KE}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class wC{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>iC(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=yC.bind(null,this.syncEngine),await async function(e,t){const n=Nv(e);t?(n.vu.delete(2),await ck(n)):t||(n.vu.add(2),await uk(n),n.bu.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Uk}createDatastore(e){const t=tk(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new JE(r));var r;return function(e,t,n,r){return new sk(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,o=e=>iC(this.syncEngine,e,0),i=GE.D()?new GE:new WE,new lk(t,n,r,o,i);var t,n,r,o,i}createSyncEngine(e,t){return function(e,t,n,r,o,i,s){const a=new eC(e,t,n,r,o,i);return s&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Nv(e);Sv("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await uk(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class SC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ev("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class EC{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=yv.UNAUTHENTICATED,this.clientId=jv.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Sv("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Sv("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Av(Tv.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Iv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Xx){const n=zk(Xx,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function kC(e,t){e.asyncQueue.verifyOperationInProgress(),Sv("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await FE(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function CC(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Sv("FirestoreClient","Using user provided OfflineComponentProvider");try{await kC(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(e){return"FirebaseError"===e.name?e.code===Tv.FAILED_PRECONDITION||e.code===Tv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(r))throw r;kv("Error using user provided cache. Falling back to memory cache: "+r),await kC(e,new bC)}}else Sv("FirestoreClient","Using default OfflineComponentProvider"),await kC(e,new bC);return e._offlineComponents}(e);Sv("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>Pk(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Pk(t.remoteStore,n))),e._onlineComponents=t}async function xC(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Sv("FirestoreClient","Using user provided OnlineComponentProvider"),await CC(e,e._uninitializedComponentsProvider._online)):(Sv("FirestoreClient","Using default OnlineComponentProvider"),await CC(e,new wC))),e._onlineComponents}async function _C(e){const t=await xC(e),n=t.eventManager;return n.onListen=tC.bind(null,t.syncEngine),n.onUnlisten=nC.bind(null,t.syncEngine),n}function NC(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const TC=new Map;function AC(e){if(!Xv.isDocumentKey(e))throw new Av(Tv.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function IC(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":xv()}function DC(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Av(Tv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=IC(e);throw new Av(Tv.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class MC{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Av(Tv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Av(Tv.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Av(Tv.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NC(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Av(Tv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Av(Tv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Av(Tv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class PC{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MC({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Av(Tv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Av(Tv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MC(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Mv;switch(e.type){case"firstParty":return new Rv(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Av(Tv.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=TC.get(e);t&&(Sv("ComponentProvider","Removing Datastore"),TC.delete(e),t.terminate())}(this),Promise.resolve()}}function OC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var o;const i=(e=DC(e,PC))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==i.host&&i.host!==s&&kv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=yv.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Eh(JSON.stringify({alg:"none",type:"JWT"})),Eh(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(o=e._app)||void 0===o?void 0:o.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Av(Tv.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new yv(i)}e._authCredentials=new Pv(new Dv(t,n))}}class LC{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zC(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new LC(this.firestore,e,this._key)}}class RC{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new RC(this.firestore,e,this._query)}}class zC extends RC{constructor(e,t,n){super(e,t,mw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new LC(this.firestore,null,new Xv(e))}withConverter(e){return new zC(this.firestore,e,this._path)}}function FC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if(e=Oh(e),1===arguments.length&&(t=jv.A()),function(e,t,n){if(!n)throw new Av(Tv.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}("doc","path",t),e instanceof PC){const n=Wv.fromString(t,...r);return AC(n),new LC(e,null,new Xv(n))}{if(!(e instanceof LC||e instanceof zC))throw new Av(Tv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Wv.fromString(t,...r));return AC(n),new LC(e.firestore,e instanceof zC?e.converter:null,new Xv(n))}}class VC{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new nk(this,"async_queue_retry"),this.Xc=()=>{const e=ek();e&&Sv("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=ek();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=ek();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new Iv;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!nb(e))throw e;Sv("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ev("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=Rk.createAndSchedule(this,e,t,n,(e=>this.na(e)));return this.zc.push(r),r}Zc(){this.Wc&&xv()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function jC(e){return function(e){if("object"!=typeof e||null===e)return!1;const t=e;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(e)}class BC extends PC{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new VC,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||HC(this),this._firestoreClient.terminate()}}function UC(e){return e._firestoreClient||HC(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function HC(e){var t,n,r;const o=e._freezeSettings(),i=function(e,t,n,r){return new Cb(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,NC(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,o);e._firestoreClient=new EC(e._authCredentials,e._appCheckCredentials,e._queue,i),(null===(n=o.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=o.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.cache.kind,_offline:o.cache._offlineComponentProvider,_online:o.cache._onlineComponentProvider})}class qC{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qC(mb.fromBase64String(e))}catch(e){throw new Av(Tv.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new qC(mb.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class KC{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Av(Tv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yv(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class WC{constructor(e){this._methodName=e}}class GC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Av(Tv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Av(Tv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bv(this._lat,e._lat)||Bv(this._long,e._long)}}const YC=/^__.*__$/;class XC{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new dS(e,this.data,this.fieldMask,t,this.fieldTransforms):new uS(e,this.data,t,this.fieldTransforms)}}function QC(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xv()}}class ZC{constructor(e,t,n,r,o,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===o&&this.ua(),this.fieldTransforms=o||[],this.fieldMask=i||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new ZC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return lx(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(QC(this.ca)&&YC.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class $C{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||tk(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ZC({ca:e,methodName:t,ga:n,path:Yv.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function JC(e){const t=e._freezeSettings(),n=tk(e._databaseId);return new $C(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ex(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.ya(i.merge||i.mergeFields?2:0,t,n,o);ox("Data must be an object, but it was:",s,r);const a=nx(r,s);let l,c;if(i.merge)l=new pb(s.fieldMask),c=s.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const o=ix(t,r,n);if(!s.contains(o))throw new Av(Tv.INVALID_ARGUMENT,"Field '".concat(o,"' is specified in your field mask but missing from your input data."));cx(e,o)||e.push(o)}l=new pb(e),c=s.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=s.fieldTransforms;return new XC(new jb(a),l,c)}function tx(e,t){if(rx(e=Oh(e)))return ox("Unsupported field value:",t,e),nx(e,t);if(e instanceof WC)return function(e,t){if(!QC(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const o of e){let e=tx(o,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Oh(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Uw(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Hv.fromDate(e);return{timestampValue:KS(t.serializer,n)}}if(e instanceof Hv){const n=new Hv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:KS(t.serializer,n)}}if(e instanceof GC)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof qC)return{bytesValue:WS(t.serializer,e._byteString)};if(e instanceof LC){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:XS(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(IC(e)))}(e,t)}function nx(e,t){const n={};return lb(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ab(e,((e,r)=>{const o=tx(r,t.ha(e));null!=o&&(n[e]=o)})),{mapValue:{fields:n}}}function rx(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Hv||e instanceof GC||e instanceof qC||e instanceof LC||e instanceof WC)}function ox(e,t,n){if(!rx(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=IC(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function ix(e,t,n){if((t=Oh(t))instanceof KC)return t._internalPath;if("string"==typeof t)return ax(e,t);throw lx("Field path arguments must be of type string or ",e,!1,void 0,n)}const sx=new RegExp("[~\\*/\\[\\]]");function ax(e,t,n){if(t.search(sx)>=0)throw lx("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new KC(...t.split("."))._internalPath}catch(r){throw lx("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function lx(e,t,n,r,o){const i=r&&!r.isEmpty(),s=void 0!==o;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||s)&&(l+=" (found",i&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(o)),l+=")"),new Av(Tv.INVALID_ARGUMENT,a+e+l)}function cx(e,t){return e.some((e=>e.isEqual(t)))}class ux{constructor(e,t,n,r,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new LC(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new dx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class dx extends ux{data(){return super.data()}}function hx(e,t){return"string"==typeof t?ax(e,t):t instanceof KC?t._internalPath:t._delegate._internalPath}class fx{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Nb(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bb(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wb(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw xv()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ab(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new GC(bb(e.latitude),bb(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Eb(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(kb(e));default:return null}}convertTimestamp(e){const t=vb(e);return new Hv(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Wv.fromString(e);_v(pE(n));const r=new xb(n.get(1),n.get(3)),o=new Xv(n.popFirst(5));return r.isEqual(t)||Ev("Document ".concat(o," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),o}}class px{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gx extends ux{constructor(e,t,n,r,o,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new mx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(hx("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class mx extends gx{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class yx{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new px(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new mx(this._firestore,this._userDataWriter,n.key,n,new px(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Av(Tv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new mx(e._firestore,e._userDataWriter,n.doc.key,n.doc,new px(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new mx(e._firestore,e._userDataWriter,t.doc.key,t.doc,new px(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let o=-1,i=-1;return 0!==t.type&&(o=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:vx(t.type),doc:r,oldIndex:o,newIndex:i}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function vx(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xv()}}function bx(e){e=DC(e,LC);const t=DC(e.firestore,BC);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Iv;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,o){const i=new SC({next:i=>{t.enqueueAndForget((()=>qk(e,s)));const a=i.docs.has(n);!a&&i.fromCache?o.reject(new Av(Tv.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&i.fromCache&&r&&"server"===r.source?o.reject(new Av(Tv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):o.resolve(i)},error:e=>o.reject(e)}),s=new Yk(mw(n.path),i,{includeMetadataChanges:!0,Ku:!0});return Hk(e,s)}(await _C(e),e.asyncQueue,t,n,r))),r.promise}(UC(t),e._key).then((n=>kx(t,e,n)))}class wx extends fx{constructor(e){super(),this.firestore=e}convertBytes(e){return new qC(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new LC(this.firestore,null,t)}}function Sx(e,t,n){e=DC(e,LC);const r=DC(e.firestore,BC),o=function(e,t,n){let r;return r=e?n.merge||n.mergeFields?e.toFirestore(t,n):e.toFirestore(t):t,r}(e.converter,t,n);return function(e,t){return function(e,t){const n=new Iv;return e.asyncQueue.enqueueAndForget((async()=>rC(await function(e){return xC(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}(UC(e),t)}(r,[ex(JC(r),"setDoc",e._key,o,null!==e.converter,n).toMutation(e._key,nS.none())])}function Ex(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o,i,s;e=Oh(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||jC(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(jC(n[l])){const e=n[l];n[l]=null===(o=e.next)||void 0===o?void 0:o.bind(e),n[l+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[l+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let u,d,h;if(e instanceof LC)d=DC(e.firestore,BC),h=mw(e._key.path),u={next:t=>{n[l]&&n[l](kx(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=DC(e,RC);d=DC(t.firestore,BC),h=t._query;const r=new wx(d);u={next:e=>{n[l]&&n[l](new yx(d,r,t,e))},error:n[l+1],complete:n[l+2]},function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Av(Tv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query)}return function(e,t,n,r){const o=new SC(r),i=new Yk(t,o,n);return e.asyncQueue.enqueueAndForget((async()=>Hk(await _C(e),i))),()=>{o.Dc(),e.asyncQueue.enqueueAndForget((async()=>qk(await _C(e),i)))}}(UC(d),h,c,u)}function kx(e,t,n){const r=n.docs.get(t._key),o=new wx(e);return new gx(e,o,t._key,r,new px(n.hasPendingWrites,n.fromCache),t.converter)}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){vv=e}("9.23.0"),Bf(new Lh("firestore",((e,n)=>{let{instanceIdentifier:r,options:o}=n;const i=e.getProvider("app").getImmediate(),s=new BC(new Ov(e.getProvider("auth-internal")),new Fv(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Av(Tv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xb(e.options.projectId,t)}(i,r),i);return o=Object.assign({useFetchStreams:t},o),s._setSettings(o),s}),"PUBLIC").setMultipleInstances(!0)),Kf(mv,"3.13.0",e),Kf(mv,"3.13.0","esm2017")}();Kf("firebase","9.23.0","app");const Cx=function(e){const t="object"==typeof e?e:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rf;const t=Ff.get(e);if(!t&&e===Rf&&Nh())return qf();if(!t)throw Uf.create("no-app",{appName:e});return t}(),n="string"==typeof e?e:"(default)",r=function(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}(t,"firestore").getImmediate({identifier:n});if(!r._initialized){const e=_h("firestore");e&&OC(r,...e)}return r}(qf({apiKey:"AIzaSyAceVHD-tXQ6f-A_8HF3kMcSFodXaIoQcI",authDomain:"velt-crdt.firebaseapp.com",databaseURL:"https://velt-crdt-default-rtdb.firebaseio.com",projectId:"velt-crdt",storageBucket:"velt-crdt.firebasestorage.app",messagingSenderId:"1094250118122",appId:"1:1094250118122:web:c6776e1005f6ff84d5d093",measurementId:"G-ESD362FBHE"})),xx=(new vu).getMap("flow-state");let _x=!1;async function Nx(e,t,n){const r=FC(Cx,"flowState",e);await Sx(r,{data:t,lastModifiedBy:n},{merge:!0})}function Tx(e,t,n){Ex(FC(Cx,"flowState",e),(r=>{if(r.exists()){const o=r.data().data;if(r.data().lastModifiedBy!==n){const n=xx.get(e),r=t.getState()[e];JSON.stringify(o)!==JSON.stringify(n)&&(xx.set(e,o),JSON.stringify(o)!==JSON.stringify(r)&&t.setState({[e]:o}))}}}))}function Ax(e){return Array.isArray(e)?e:[]}async function Ix(e){const t=FC(Cx,"flowState",e),n=await bx(t);if(n.exists()){return Ax(n.data().data)}return[]}function Dx(e){return e.map((e=>c(c({},e),{},{position:{x:e.position.x,y:e.position.y},data:c({},e.data)})))}function Mx(e){return Ax(e).map((e=>c(c({},e),{},{position:{x:e.position.x,y:e.position.y},data:c({},e.data)})))}function Px(e){return e.map((e=>c({},e)))}function Ox(e){return Ax(e).map((e=>c({},e)))}const Lx=(e,t,n)=>{const r=(o=(r,o)=>{const i=async function(e,t){if(!_x){_x=!0;const[n,r]=await Promise.all([Ix("nodes"),Ix("edges")]),o=n||e,i=r||t;return 0===xx.size&&(xx.set("nodes",o),xx.set("edges",i)),{nodes:o,edges:i}}return{nodes:xx.get("nodes")||[],edges:xx.get("edges")||[]}}(e,t);return i.then((e=>{r(e)})),{nodes:[],edges:[],onNodesChange:e=>{const t=xx.get("nodes")?Mx(xx.get("nodes")):[],o=as(e,t),i=e.reduce(((e,t)=>"add"===t.type?[...e,t.item]:e),o);JSON.stringify(i)!==JSON.stringify(t)&&(xx.set("nodes",Dx(i)),r({nodes:i}),Nx("nodes",Dx(i),n))},onEdgesChange:e=>{const t=xx.get("edges")?Ox(xx.get("edges")):[],o=ls(e,t);JSON.stringify(o)!==JSON.stringify(t)&&(xx.set("edges",Px(o)),r({edges:o}),Nx("edges",Px(o),n))},onConnect:e=>{const t=xx.get("edges")?Ox(xx.get("edges")):[],o=wo(e,t);JSON.stringify(o)!==JSON.stringify(t)&&(xx.set("edges",Px(o)),r({edges:o}),Nx("edges",Px(o),n))},setNodes:e=>{xx.set("nodes",Dx(e)),r({nodes:e}),Nx("nodes",Dx(e),n)},setEdges:e=>{xx.set("edges",Px(e)),r({edges:e}),Nx("edges",Px(e),n)}}},o?kl(o):kl);var o;return xx.observe((e=>{e.changes.keys.forEach(((e,t)=>{if("add"===e.action||"update"===e.action){let e=xx.get(t);"nodes"===t?e=Mx(e):"edges"===t&&(e=Ox(e)),JSON.stringify(e)!==JSON.stringify(r.getState()[t])&&r.setState({[t]:e})}}))})),Tx("nodes",r,n),Tx("edges",r,n),r},Rx=e=>Symbol.iterator in e,zx=e=>"entries"in e,Fx=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[o,i]of n)if(!Object.is(i,r.get(o)))return!1;return!0};function Vx(e,t){return!!Object.is(e,t)||"object"===typeof e&&null!==e&&"object"===typeof t&&null!==t&&(Rx(e)&&Rx(t)?zx(e)&&zx(t)?Fx(e,t):((e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let o=n.next(),i=r.next();for(;!o.done&&!i.done;){if(!Object.is(o.value,i.value))return!1;o=n.next(),i=r.next()}return!!o.done&&!!i.done})(e,t):Fx({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}))}const jx=e=>({nodes:e.nodes,edges:e.edges,onNodesChange:e.onNodesChange,onEdgesChange:e.onEdgesChange,onConnect:e.onConnect,setNodes:e.setNodes,setEdges:e.setEdges}),Bx=[{id:"0",type:"input",data:{label:"Node"},position:{x:0,y:50}}],Ux=[],Hx=Math.floor(100*Math.random())+1;let qx=9;const Kx=[.5,0],Wx=()=>{const e="user"+Hx,t=(0,r.useRef)(Lx(Bx,Ux,e)),{nodes:n,edges:o,onNodesChange:i,onEdgesChange:s,onConnect:a,setNodes:l,setEdges:c}=t.current(function(e){const t=r.useRef(void 0);return n=>{const r=e(n);return Vx(t.current,r)?t.current:t.current=r}}(jx)),u=(0,r.useRef)(null),{screenToFlowPosition:h}=ws(),f=(0,r.useCallback)(((e,t)=>{if(!t.isValid){const n="".concat(qx++),{clientX:r,clientY:o}="changedTouches"in e?e.changedTouches[0]:e,a={id:n,position:h({x:r,y:o}),data:{label:"Node ".concat(n)},origin:[.5,0]};i([{type:"add",item:a}]);const l={id:n,source:t.fromNode.id,target:n};s([{type:"add",item:l}])}}),[h,i,s]);return(0,d.jsx)("div",{className:"wrapper",ref:u,children:(0,d.jsx)($a,{style:{backgroundColor:"#F7F9FB"},nodes:n,edges:o,onNodesChange:i,onEdgesChange:s,onConnect:a,onConnectEnd:f,fitView:!0,fitViewOptions:{padding:2},nodeOrigin:Kx,children:(0,d.jsx)(il,{})})})},Gx=()=>(0,d.jsx)(Xa,{children:(0,d.jsx)(Wx,{})}),Yx=e=>{e&&e instanceof Function&&n.e(714).then(n.bind(n,714)).then((t=>{let{getCLS:n,getFID:r,getFCP:o,getLCP:i,getTTFB:s}=t;n(e),r(e),o(e),i(e),s(e)}))};o.createRoot(document.getElementById("app")).render((0,d.jsx)(r.StrictMode,{children:(0,d.jsx)(Gx,{})})),Yx()})();
//# sourceMappingURL=main.537520bc.js.map