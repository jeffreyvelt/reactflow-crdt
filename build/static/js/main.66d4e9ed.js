/*! For license information please see main.66d4e9ed.js.LICENSE.txt */
(()=>{"use strict";var e={532:(e,t,n)=>{var r=n(261),i=n(643),o=n(766);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}var l=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),g=Symbol.for("react.consumer"),m=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),_=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var S=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var C=Symbol.for("react.memo_cache_sentinel"),E=Symbol.iterator;function k(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=E&&e[E]||e["@@iterator"])?e:null}var x=Symbol.for("react.client.reference");function T(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===x?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case h:return"Fragment";case u:return"Portal";case f:return"Profiler";case d:return"StrictMode";case v:return"Suspense";case w:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case m:return(e.displayName||"Context")+".Provider";case g:return(e._context.displayName||"Context")+".Consumer";case y:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case b:return null!==(t=e.displayName||null)?t:T(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return T(e(t))}catch(Yg){}}return null}var N,I,D=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,A=Object.assign;function P(e){if(void 0===N)try{throw Error()}catch(Yg){var t=Yg.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||"",I=-1<Yg.stack.indexOf("\n    at")?" (<anonymous>)":-1<Yg.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+N+e+I}var M=!1;function R(e,t){if(!e||M)return"";M=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(Yg){var r=Yg}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(o){r=o}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),s=o[0],a=o[1];if(s&&a){var l=s.split("\n"),c=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{M=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?P(n):""}function O(e){switch(e.tag){case 26:case 27:case 5:return P(e.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 15:return e=R(e.type,!1);case 11:return e=R(e.type.render,!1);case 1:return e=R(e.type,!0);default:return""}}function L(e){try{var t="";do{t+=O(e),e=e.return}while(e);return t}catch(Yg){return"\nError generating stack: "+Yg.message+"\n"+Yg.stack}}function F(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function z(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function V(e){if(F(e)!==e)throw Error(s(188))}function j(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=j(e)))return t;e=e.sibling}return null}var U=Array.isArray,B=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},H=[],W=-1;function K(e){return{current:e}}function Y(e){0>W||(e.current=H[W],H[W]=null,W--)}function G(e,t){W++,H[W]=e.current,e.current=t}var Q=K(null),X=K(null),Z=K(null),$=K(null);function J(e,t){switch(G(Z,t),G(X,e),G(Q,null),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?Xu(t):0;break;default:if(t=(e=8===e?t.parentNode:t).tagName,e=e.namespaceURI)t=Zu(e=Xu(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Y(Q),G(Q,t)}function ee(){Y(Q),Y(X),Y(Z)}function te(e){null!==e.memoizedState&&G($,e);var t=Q.current,n=Zu(t,e.type);t!==n&&(G(X,e),G(Q,n))}function ne(e){X.current===e&&(Y(Q),Y(X)),$.current===e&&(Y($),Lh._currentValue=q)}var re=Object.prototype.hasOwnProperty,ie=r.unstable_scheduleCallback,oe=r.unstable_cancelCallback,se=r.unstable_shouldYield,ae=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,he=r.unstable_UserBlockingPriority,de=r.unstable_NormalPriority,fe=r.unstable_LowPriority,pe=r.unstable_IdlePriority,ge=r.log,me=r.unstable_setDisableYieldValue,ye=null,ve=null;function we(e){if("function"===typeof ge&&me(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var be=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(_e(e)/Se|0)|0},_e=Math.log,Se=Math.LN2;var Ce=128,Ee=4194304;function ke(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function xe(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=e.warmLanes;e=0!==e.finishedLanes;var a=134217727&n;return 0!==a?0!==(n=a&~i)?r=ke(n):0!==(o&=a)?r=ke(o):e||0!==(s=a&~s)&&(r=ke(s)):0!==(a=n&~i)?r=ke(a):0!==o?r=ke(o):e||0!==(s=n&~s)&&(r=ke(s)),0===r?0:0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||32===i&&0!==(4194176&s))?t:r}function Te(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ne(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ie(){var e=Ce;return 0===(4194176&(Ce<<=1))&&(Ce=128),e}function De(){var e=Ee;return 0===(62914560&(Ee<<=1))&&(Ee=4194304),e}function Ae(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pe(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Me(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-be(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194218&n}function Re(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-be(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Oe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Le(){var e=B.p;return 0!==e?e:void 0===(e=window.event)?32:Zh(e.type)}var Fe=Math.random().toString(36).slice(2),ze="__reactFiber$"+Fe,Ve="__reactProps$"+Fe,je="__reactContainer$"+Fe,Ue="__reactEvents$"+Fe,Be="__reactListeners$"+Fe,qe="__reactHandles$"+Fe,He="__reactResources$"+Fe,We="__reactMarker$"+Fe;function Ke(e){delete e[ze],delete e[Ve],delete e[Ue],delete e[Be],delete e[qe]}function Ye(e){var t=e[ze];if(t)return t;for(var n=e.parentNode;n;){if(t=n[je]||n[ze]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=lh(e);null!==e;){if(n=e[ze])return n;e=lh(e)}return t}n=(e=n).parentNode}return null}function Ge(e){if(e=e[ze]||e[je]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function Xe(e){var t=e[He];return t||(t=e[He]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ze(e){e[We]=!0}var $e=new Set,Je={};function et(e,t){tt(e,t),tt(e+"Capture",t)}function tt(e,t){for(Je[e]=t,e=0;e<t.length;e++)$e.add(t[e])}var nt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),it={},ot={};function st(e,t,n){if(i=t,re.call(ot,i)||!re.call(it,i)&&(rt.test(i)?ot[i]=!0:(it[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function at(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function lt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ht(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function dt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function gt(e){return e.replace(pt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function mt(e,t,n,r,i,o,s,a){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?vt(e,s,ct(t)):null!=n?vt(e,s,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=o&&(e.defaultChecked=!!o),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ct(a):e.removeAttribute("name")}function yt(e,t,n,r,i,o,s,a){if(null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.type=o),null!=t||null!=n){if(!("submit"!==o&&"reset"!==o||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function bt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function _t(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(s(92));if(U(r)){if(1<r.length)throw Error(s(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Ct=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Ct.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function kt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Et(e,i,r)}else for(var o in t)t.hasOwnProperty(o)&&Et(e,o,t[o])}function xt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function It(e){return Nt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Dt=null;function At(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Mt=null;function Rt(e){var t=Ge(e);if(t&&(e=t.stateNode)){var n=e[Ve]||null;e:switch(e=t.stateNode,t.type){case"input":if(mt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Ve]||null;if(!i)throw Error(s(90));mt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&dt(r)}break e;case"textarea":bt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var Ot=!1;function Lt(e,t,n){if(Ot)return e(t,n);Ot=!0;try{return e(t)}finally{if(Ot=!1,(null!==Pt||null!==Mt)&&(zc(),Pt&&(t=Pt,e=Mt,Mt=Pt=null,Rt(t),e)))for(t=0;t<e.length;t++)Rt(e[t])}}function Ft(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Ve]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var zt=!1;if(nt)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){zt=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(_d){zt=!1}var jt=null,Ut=null,Bt=null;function qt(){if(Bt)return Bt;var e,t,n=Ut,r=n.length,i="value"in jt?jt.value:jt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Bt=i.slice(e,1<t?1-t:void 0)}function Ht(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Wt(){return!0}function Kt(){return!1}function Yt(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Wt:Kt,this.isPropagationStopped=Kt,this}return A(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Wt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Wt)},persist:function(){},isPersistent:Wt}),t}var Gt,Qt,Xt,Zt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$t=Yt(Zt),Jt=A({},Zt,{view:0,detail:0}),en=Yt(Jt),tn=A({},Jt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xt&&(Xt&&"mousemove"===e.type?(Gt=e.screenX-Xt.screenX,Qt=e.screenY-Xt.screenY):Qt=Gt=0,Xt=e),Gt)},movementY:function(e){return"movementY"in e?e.movementY:Qt}}),nn=Yt(tn),rn=Yt(A({},tn,{dataTransfer:0})),on=Yt(A({},Jt,{relatedTarget:0})),sn=Yt(A({},Zt,{animationName:0,elapsedTime:0,pseudoElement:0})),an=Yt(A({},Zt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ln=Yt(A({},Zt,{data:0})),cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},un={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function fn(){return dn}var pn=Yt(A({},Jt,{key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ht(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?un[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fn,charCode:function(e){return"keypress"===e.type?Ht(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ht(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Yt(A({},tn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),mn=Yt(A({},Jt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fn})),yn=Yt(A({},Zt,{propertyName:0,elapsedTime:0,pseudoElement:0})),vn=Yt(A({},tn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Yt(A({},Zt,{newState:0,oldState:0})),bn=[9,13,27,32],_n=nt&&"CompositionEvent"in window,Sn=null;nt&&"documentMode"in document&&(Sn=document.documentMode);var Cn=nt&&"TextEvent"in window&&!Sn,En=nt&&(!_n||Sn&&8<Sn&&11>=Sn),kn=String.fromCharCode(32),xn=!1;function Tn(e,t){switch(e){case"keyup":return-1!==bn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var In=!1;var Dn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function An(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Dn[e.type]:"textarea"===t}function Pn(e,t,n,r){Pt?Mt?Mt.push(r):Mt=[r]:Pt=r,0<(t=Lu(t,"onChange")).length&&(n=new $t("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mn=null,Rn=null;function On(e){Nu(e,0)}function Ln(e){if(dt(Qe(e)))return e}function Fn(e,t){if("change"===e)return t}var zn=!1;if(nt){var Vn;if(nt){var jn="oninput"in document;if(!jn){var Un=document.createElement("div");Un.setAttribute("oninput","return;"),jn="function"===typeof Un.oninput}Vn=jn}else Vn=!1;zn=Vn&&(!document.documentMode||9<document.documentMode)}function Bn(){Mn&&(Mn.detachEvent("onpropertychange",qn),Rn=Mn=null)}function qn(e){if("value"===e.propertyName&&Ln(Rn)){var t=[];Pn(t,Rn,e,At(e)),Lt(On,t)}}function Hn(e,t,n){"focusin"===e?(Bn(),Rn=n,(Mn=t).attachEvent("onpropertychange",qn)):"focusout"===e&&Bn()}function Wn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ln(Rn)}function Kn(e,t){if("click"===e)return Ln(t)}function Yn(e,t){if("input"===e||"change"===e)return Ln(t)}var Gn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Qn(e,t){if(Gn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!re.call(t,i)||!Gn(e[i],t[i]))return!1}return!0}function Xn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zn(e,t){var n,r=Xn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Xn(r)}}function $n(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?$n(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Jn(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function er(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function tr(e,t){var n=Jn(t);t=e.focusedElem;var r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&$n(t.ownerDocument.documentElement,t)){if(null!==r&&er(t))if(e=r.start,void 0===(n=r.end)&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if((n=(e=t.ownerDocument||document)&&e.defaultView||window).getSelection){n=n.getSelection();var i=t.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!n.extend&&o>r&&(i=r,r=o,o=i),i=Zn(t,o);var s=Zn(t,r);i&&s&&(1!==n.rangeCount||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==s.node||n.focusOffset!==s.offset)&&((e=e.createRange()).setStart(i.node,i.offset),n.removeAllRanges(),o>r?(n.addRange(e),n.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),n.addRange(e)))}for(e=[],n=t;n=n.parentNode;)1===n.nodeType&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<e.length;t++)(n=e[t]).element.scrollLeft=n.left,n.element.scrollTop=n.top}}var nr=nt&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,or=null,sr=!1;function ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;sr||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&er(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&Qn(or,r)||(or=r,0<(r=Lu(ir,"onSelect")).length&&(t=new $t("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},hr={};function dr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in hr)return ur[e]=n[t];return e}nt&&(hr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=dr("animationend"),pr=dr("animationiteration"),gr=dr("animationstart"),mr=dr("transitionrun"),yr=dr("transitionstart"),vr=dr("transitioncancel"),wr=dr("transitionend"),br=new Map,_r="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Sr(e,t){br.set(e,t),et(t,[e])}var Cr=[],Er=0,kr=0;function xr(){for(var e=Er,t=kr=Er=0;t<e;){var n=Cr[t];Cr[t++]=null;var r=Cr[t];Cr[t++]=null;var i=Cr[t];Cr[t++]=null;var o=Cr[t];if(Cr[t++]=null,null!==r&&null!==i){var s=r.pending;null===s?i.next=i:(i.next=s.next,s.next=i),r.pending=i}0!==o&&Dr(n,i,o)}}function Tr(e,t,n,r){Cr[Er++]=e,Cr[Er++]=t,Cr[Er++]=n,Cr[Er++]=r,kr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Nr(e,t,n,r){return Tr(e,t,n,r),Ar(e)}function Ir(e,t){return Tr(e,null,null,t),Ar(e)}function Dr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(i=!0)),e=o,o=o.return;i&&null!==t&&3===e.tag&&(o=e.stateNode,i=31-be(n),null===(e=(o=o.hiddenUpdates)[i])?o[i]=[t]:e.push(t),t.lane=536870912|n)}function Ar(e){if(50<Nc)throw Nc=0,Ic=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Pr={},Mr=new WeakMap;function Rr(e,t){if("object"===typeof e&&null!==e){var n=Mr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:L(t)},Mr.set(e,t),t)}return{value:e,source:t,stack:L(t)}}var Or=[],Lr=0,Fr=null,zr=0,Vr=[],jr=0,Ur=null,Br=1,qr="";function Hr(e,t){Or[Lr++]=zr,Or[Lr++]=Fr,Fr=e,zr=t}function Wr(e,t,n){Vr[jr++]=Br,Vr[jr++]=qr,Vr[jr++]=Ur,Ur=e;var r=Br;e=qr;var i=32-be(r)-1;r&=~(1<<i),n+=1;var o=32-be(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Br=1<<32-be(t)+i|n<<i|r,qr=o+e}else Br=1<<o|n<<i|r,qr=e}function Kr(e){null!==e.return&&(Hr(e,1),Wr(e,1,0))}function Yr(e){for(;e===Fr;)Fr=Or[--Lr],Or[Lr]=null,zr=Or[--Lr],Or[Lr]=null;for(;e===Ur;)Ur=Vr[--jr],Vr[jr]=null,qr=Vr[--jr],Vr[jr]=null,Br=Vr[--jr],Vr[jr]=null}var Gr=null,Qr=null,Xr=!1,Zr=null,$r=!1,Jr=Error(s(519));function ei(e){throw oi(Rr(Error(s(418,"")),e)),Jr}function ti(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ze]=e,t[Ve]=r,n){case"dialog":Iu("cancel",t),Iu("close",t);break;case"iframe":case"object":case"embed":Iu("load",t);break;case"video":case"audio":for(n=0;n<xu.length;n++)Iu(xu[n],t);break;case"source":Iu("error",t);break;case"img":case"image":case"link":Iu("error",t),Iu("load",t);break;case"details":Iu("toggle",t);break;case"input":Iu("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ht(t);break;case"select":Iu("invalid",t);break;case"textarea":Iu("invalid",t),_t(t,r.value,r.defaultValue,r.children),ht(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Bu(t.textContent,n)?(null!=r.popover&&(Iu("beforetoggle",t),Iu("toggle",t)),null!=r.onScroll&&Iu("scroll",t),null!=r.onScrollEnd&&Iu("scrollend",t),null!=r.onClick&&(t.onclick=qu),t=!0):t=!1,t||ei(e)}function ni(e){for(Gr=e.return;Gr;)switch(Gr.tag){case 3:case 27:return void($r=!0);case 5:case 13:return void($r=!1);default:Gr=Gr.return}}function ri(e){if(e!==Gr)return!1;if(!Xr)return ni(e),Xr=!0,!1;var t,n=!1;if((t=3!==e.tag&&27!==e.tag)&&((t=5===e.tag)&&(t=!("form"!==(t=e.type)&&"button"!==t)||$u(e.type,e.memoizedProps)),t=!t),t&&(n=!0),n&&Qr&&ei(e),ni(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){Qr=ah(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}Qr=null}}else Qr=Gr?ah(e.stateNode.nextSibling):null;return!0}function ii(){Qr=Gr=null,Xr=!1}function oi(e){null===Zr?Zr=[e]:Zr.push(e)}var si=Error(s(460)),ai=Error(s(474)),li={then:function(){}};function ci(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ui(){}function hi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(ui,ui),t=n),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===si)throw Error(s(483));throw e;default:if("string"===typeof t.status)t.then(ui,ui);else{if(null!==(e=tc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===si)throw Error(s(483));throw e}throw di=t,si}}var di=null;function fi(){if(null===di)throw Error(s(459));var e=di;return di=null,e}var pi=null,gi=0;function mi(e){var t=gi;return gi+=1,null===pi&&(pi=[]),hi(pi,e,t)}function yi(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function vi(e,t){if(t.$$typeof===l)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Fl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=33554434,n):r:(t.flags|=33554434,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Bl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n,r){var o=n.type;return o===h?p(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===_&&wi(o)===t.type)?(yi(t=i(t,n.props),n),t.return=e,t):(yi(t=Vl(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function f(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ql(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,o){return null===t||7!==t.tag?((t=jl(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function g(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Bl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case c:return yi(n=Vl(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case u:return(t=ql(t,e.mode,n)).return=e,t;case _:return g(e,t=(0,t._init)(t._payload),n)}if(U(t)||k(t))return(t=jl(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return g(e,mi(t),n);if(t.$$typeof===m)return g(e,xa(e,t),n);vi(e,t)}return null}function y(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case c:return n.key===i?d(e,t,n,r):null;case u:return n.key===i?f(e,t,n,r):null;case _:return y(e,t,n=(i=n._init)(n._payload),r)}if(U(n)||k(n))return null!==i?null:p(e,t,n,r,null);if("function"===typeof n.then)return y(e,t,mi(n),r);if(n.$$typeof===m)return y(e,t,xa(e,n),r);vi(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case c:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case u:return f(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return v(e,t,n,r=(0,r._init)(r._payload),i)}if(U(r)||k(r))return p(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return v(e,t,n,mi(r),i);if(r.$$typeof===m)return v(e,t,n,xa(t,r),i);vi(t,r)}return null}function w(l,d,f,p){if("object"===typeof f&&null!==f&&f.type===h&&null===f.key&&(f=f.props.children),"object"===typeof f&&null!==f){switch(f.$$typeof){case c:e:{for(var b=f.key;null!==d;){if(d.key===b){if((b=f.type)===h){if(7===d.tag){n(l,d.sibling),(p=i(d,f.props.children)).return=l,l=p;break e}}else if(d.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===_&&wi(b)===d.type){n(l,d.sibling),yi(p=i(d,f.props),f),p.return=l,l=p;break e}n(l,d);break}t(l,d),d=d.sibling}f.type===h?((p=jl(f.props.children,l.mode,p,f.key)).return=l,l=p):(yi(p=Vl(f.type,f.key,f.props,null,l.mode,p),f),p.return=l,l=p)}return a(l);case u:e:{for(b=f.key;null!==d;){if(d.key===b){if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){n(l,d.sibling),(p=i(d,f.children||[])).return=l,l=p;break e}n(l,d);break}t(l,d),d=d.sibling}(p=ql(f,l.mode,p)).return=l,l=p}return a(l);case _:return w(l,d,f=(b=f._init)(f._payload),p)}if(U(f))return function(i,s,a,l){for(var c=null,u=null,h=s,d=s=0,f=null;null!==h&&d<a.length;d++){h.index>d?(f=h,h=null):f=h.sibling;var p=y(i,h,a[d],l);if(null===p){null===h&&(h=f);break}e&&h&&null===p.alternate&&t(i,h),s=o(p,s,d),null===u?c=p:u.sibling=p,u=p,h=f}if(d===a.length)return n(i,h),Xr&&Hr(i,d),c;if(null===h){for(;d<a.length;d++)null!==(h=g(i,a[d],l))&&(s=o(h,s,d),null===u?c=h:u.sibling=h,u=h);return Xr&&Hr(i,d),c}for(h=r(h);d<a.length;d++)null!==(f=v(h,i,d,a[d],l))&&(e&&null!==f.alternate&&h.delete(null===f.key?d:f.key),s=o(f,s,d),null===u?c=f:u.sibling=f,u=f);return e&&h.forEach((function(e){return t(i,e)})),Xr&&Hr(i,d),c}(l,d,f,p);if(k(f)){if("function"!==typeof(b=k(f)))throw Error(s(150));return function(i,a,l,c){if(null==l)throw Error(s(151));for(var u=null,h=null,d=a,f=a=0,p=null,m=l.next();null!==d&&!m.done;f++,m=l.next()){d.index>f?(p=d,d=null):p=d.sibling;var w=y(i,d,m.value,c);if(null===w){null===d&&(d=p);break}e&&d&&null===w.alternate&&t(i,d),a=o(w,a,f),null===h?u=w:h.sibling=w,h=w,d=p}if(m.done)return n(i,d),Xr&&Hr(i,f),u;if(null===d){for(;!m.done;f++,m=l.next())null!==(m=g(i,m.value,c))&&(a=o(m,a,f),null===h?u=m:h.sibling=m,h=m);return Xr&&Hr(i,f),u}for(d=r(d);!m.done;f++,m=l.next())null!==(m=v(d,i,f,m.value,c))&&(e&&null!==m.alternate&&d.delete(null===m.key?f:m.key),a=o(m,a,f),null===h?u=m:h.sibling=m,h=m);return e&&d.forEach((function(e){return t(i,e)})),Xr&&Hr(i,f),u}(l,d,f=b.call(f),p)}if("function"===typeof f.then)return w(l,d,mi(f),p);if(f.$$typeof===m)return w(l,d,xa(l,f),p);vi(l,f)}return"string"===typeof f&&""!==f||"number"===typeof f||"bigint"===typeof f?(f=""+f,null!==d&&6===d.tag?(n(l,d.sibling),(p=i(d,f)).return=l,l=p):(n(l,d),(p=Bl(f,l.mode,p)).return=l,l=p),a(l)):n(l,d)}return function(e,t,n,r){try{gi=0;var i=w(e,t,n,r);return pi=null,i}catch(Yg){if(Yg===si)throw Yg;var o=Ol(29,Yg,null,e.mode);return o.lanes=r,o.return=e,o}}}var _i=bi(!0),Si=bi(!1),Ci=K(null),Ei=K(0);function ki(e,t){G(Ei,e=cc),G(Ci,t),cc=e|t.baseLanes}function xi(){G(Ei,cc),G(Ci,Ci.current)}function Ti(){cc=Ei.current,Y(Ci),Y(Ei)}var Ni=K(null),Ii=null;function Di(e){var t=e.alternate;G(Ri,1&Ri.current),G(Ni,e),null===Ii&&(null===t||null!==Ci.current||null!==t.memoizedState)&&(Ii=e)}function Ai(e){if(22===e.tag){if(G(Ri,Ri.current),G(Ni,e),null===Ii){var t=e.alternate;null!==t&&null!==t.memoizedState&&(Ii=e)}}else Pi()}function Pi(){G(Ri,Ri.current),G(Ni,Ni.current)}function Mi(e){Y(Ni),Ii===e&&(Ii=null),Y(Ri)}var Ri=K(0);function Oi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Li="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Fi=r.unstable_scheduleCallback,zi=r.unstable_NormalPriority,Vi={$$typeof:m,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ji(){return{controller:new Li,data:new Map,refCount:0}}function Ui(e){e.refCount--,0===e.refCount&&Fi(zi,(function(){e.controller.abort()}))}var Bi=null,qi=0,Hi=0,Wi=null;function Ki(){if(0===--qi&&null!==Bi){null!==Wi&&(Wi.status="fulfilled");var e=Bi;Bi=null,Hi=0,Wi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Yi=D.S;D.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Bi){var n=Bi=[];qi=0,Hi=_u(),Wi={status:"pending",value:void 0,then:function(e){n.push(e)}}}qi++,t.then(Ki,Ki)}(0,t),null!==Yi&&Yi(e,t)};var Gi=K(null);function Qi(){var e=Gi.current;return null!==e?e:tc.pooledCache}function Xi(e,t){G(Gi,null===t?Gi.current:t.pool)}function Zi(){var e=Qi();return null===e?null:{parent:Vi._currentValue,pool:e}}var $i=0,Ji=null,eo=null,to=null,no=!1,ro=!1,io=!1,oo=0,so=0,ao=null,lo=0;function co(){throw Error(s(321))}function uo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gn(e[n],t[n]))return!1;return!0}function ho(e,t,n,r,i,o){return $i=o,Ji=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=null===e||null===e.memoizedState?xs:Ts,io=!1,o=n(r,i),io=!1,ro&&(o=po(t,n,r,i)),fo(e),o}function fo(e){D.H=ks;var t=null!==eo&&null!==eo.next;if($i=0,to=eo=Ji=null,no=!1,so=0,ao=null,t)throw Error(s(300));null===e||Hs||null!==(e=e.dependencies)&&Ca(e)&&(Hs=!0)}function po(e,t,n,r){Ji=e;var i=0;do{if(ro&&(ao=null),so=0,ro=!1,25<=i)throw Error(s(301));if(i+=1,to=eo=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}D.H=Ns,o=t(n,r)}while(ro);return o}function go(){var e=D.H,t=e.useState()[0];return t="function"===typeof t.then?_o(t):t,e=e.useState()[0],(null!==eo?eo.memoizedState:null)!==e&&(Ji.flags|=1024),t}function mo(){var e=0!==oo;return oo=0,e}function yo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function vo(e){if(no){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}no=!1}$i=0,to=eo=Ji=null,ro=!1,so=oo=0,ao=null}function wo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Ji.memoizedState=to=e:to=to.next=e,to}function bo(){if(null===eo){var e=Ji.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Ji.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e){if(null===Ji.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Ji.memoizedState=to=e:to=to.next=e}return to}function _o(e){var t=so;return so+=1,null===ao&&(ao=[]),e=hi(ao,e,t),t=Ji,null===(null===to?t.memoizedState:to.next)&&(t=t.alternate,D.H=null===t||null===t.memoizedState?xs:Ts),e}function So(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return _o(e);if(e.$$typeof===m)return ka(e)}throw Error(s(438,String(e)))}function Co(e){var t=null,n=Ji.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Ji.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Ji.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=C;return t.index++,n}function Eo(e,t){return"function"===typeof t?t(e):t}function ko(e){return xo(bo(),eo,e)}function xo(e,t,n){var r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=n;var i=e.baseQueue,o=r.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}t.baseQueue=i=o,r.pending=null}if(o=e.baseState,null===i)e.memoizedState=o;else{var l=a=null,c=null,u=t=i.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(rc&d)===d:($i&d)===d){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===Hi&&(h=!0);else{if(($i&f)===f){u=u.next,f===Hi&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,a=o):c=c.next=d,Ji.lanes|=f,hc|=f}d=u.action,io&&n(o,d),o=u.hasEagerState?u.eagerState:n(o,d)}else f={lane:d,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,a=o):c=c.next=f,Ji.lanes|=d,hc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?a=o:c.next=l,!Gn(o,e.memoizedState)&&(Hs=!0,h&&null!==(n=Wi)))throw n;e.memoizedState=o,e.baseState=a,e.baseQueue=c,r.lastRenderedState=o}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function To(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);Gn(o,t.memoizedState)||(Hs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function No(e,t,n){var r=Ji,i=bo(),o=Xr;if(o){if(void 0===n)throw Error(s(407));n=n()}else n=t();var a=!Gn((eo||i).memoizedState,n);if(a&&(i.memoizedState=n,Hs=!0),i=i.queue,Jo(Ao.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==to&&1&to.memoizedState.tag){if(r.flags|=2048,Go(9,Do.bind(null,r,i,n,t),{destroy:void 0},null),null===tc)throw Error(s(349));o||0!==(60&$i)||Io(r,t,n)}return n}function Io(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Ji.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Ji.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Po(t)&&Mo(e)}function Ao(e,t,n){return n((function(){Po(t)&&Mo(e)}))}function Po(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gn(e,n)}catch(r){return!0}}function Mo(e){var t=Ir(e,2);null!==t&&Pc(t,e,2)}function Ro(e){var t=wo();if("function"===typeof e){var n=e;if(e=n(),io){we(!0);try{n()}finally{we(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:e},t}function Oo(e,t,n,r){return e.baseState=n,xo(e,eo,"function"===typeof r?r:Eo)}function Lo(e,t,n,r,i){if(Ss(e))throw Error(s(485));if(null!==(e=t.action)){var o={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==D.T?n(!0):o.isTransition=!1,r(o),null===(n=t.pending)?(o.next=t.pending=o,Fo(t,o)):(o.next=n.next,t.pending=n.next=o)}}function Fo(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var o=D.T,s={};D.T=s;try{var a=n(i,r),l=D.S;null!==l&&l(s,a),zo(e,t,a)}catch(c){jo(e,t,c)}finally{D.T=o}}else try{zo(e,t,o=n(i,r))}catch(u){jo(e,t,u)}}function zo(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){Vo(e,t,n)}),(function(n){return jo(e,t,n)})):Vo(e,t,n)}function Vo(e,t,n){t.status="fulfilled",t.value=n,Uo(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Fo(e,n)))}function jo(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Uo(t),t=t.next}while(t!==r)}e.action=null}function Uo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Bo(e,t){return t}function qo(e,t){if(Xr){var n=tc.formState;if(null!==n){e:{var r=Ji;if(Xr){if(Qr){t:{for(var i=Qr,o=$r;8!==i.nodeType;){if(!o){i=null;break t}if(null===(i=ah(i.nextSibling))){i=null;break t}}i="F!"===(o=i.data)||"F"===o?i:null}if(i){Qr=ah(i.nextSibling),r="F!"===i.data;break e}}ei(r)}r=!1}r&&(t=n[0])}}return(n=wo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bo,lastRenderedState:t},n.queue=r,n=ws.bind(null,Ji,r),r.dispatch=n,r=Ro(!1),o=_s.bind(null,Ji,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=wo()).queue=i,n=Lo.bind(null,Ji,i,o,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function Ho(e){return Wo(bo(),eo,e)}function Wo(e,t,n){t=xo(e,t,Bo)[0],e=ko(Eo)[0],t="object"===typeof t&&null!==t&&"function"===typeof t.then?_o(t):t;var r=bo(),i=r.queue,o=i.dispatch;return n!==r.memoizedState&&(Ji.flags|=2048,Go(9,Ko.bind(null,i,n),{destroy:void 0},null)),[t,o,e]}function Ko(e,t){e.action=t}function Yo(e){var t=bo(),n=eo;if(null!==n)return Wo(t,n,e);bo(),t=t.memoizedState;var r=(n=bo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Go(e,t,n,r){return e={tag:e,create:t,inst:n,deps:r,next:null},null===(t=Ji.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Ji.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Qo(){return bo().memoizedState}function Xo(e,t,n,r){var i=wo();Ji.flags|=e,i.memoizedState=Go(1|t,n,{destroy:void 0},void 0===r?null:r)}function Zo(e,t,n,r){var i=bo();r=void 0===r?null:r;var o=i.memoizedState.inst;null!==eo&&null!==r&&uo(r,eo.memoizedState.deps)?i.memoizedState=Go(t,n,o,r):(Ji.flags|=e,i.memoizedState=Go(1|t,n,o,r))}function $o(e,t){Xo(8390656,8,e,t)}function Jo(e,t){Zo(2048,8,e,t)}function es(e,t){return Zo(4,2,e,t)}function ts(e,t){return Zo(4,4,e,t)}function ns(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function rs(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Zo(4,4,ns.bind(null,t,e),n)}function is(){}function os(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&uo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ss(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&uo(t,r[1]))return r[0];if(r=e(),io){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[r,t],r}function as(e,t,n){return void 0===n||0!==(1073741824&$i)?e.memoizedState=t:(e.memoizedState=n,e=Ac(),Ji.lanes|=e,hc|=e,n)}function ls(e,t,n,r){return Gn(n,t)?n:null!==Ci.current?(e=as(e,n,r),Gn(e,t)||(Hs=!0),e):0===(42&$i)?(Hs=!0,e.memoizedState=n):(e=Ac(),Ji.lanes|=e,hc|=e,t)}function cs(e,t,n,r,i){var o=B.p;B.p=0!==o&&8>o?o:8;var s=D.T,a={};D.T=a,_s(e,!1,t,n);try{var l=i(),c=D.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(l,r);bs(e,t,u,Dc())}else bs(e,t,r,Dc())}catch(h){bs(e,t,{then:function(){},status:"rejected",reason:h},Dc())}finally{B.p=o,D.T=s}}function us(){}function hs(e,t,n,r){if(5!==e.tag)throw Error(s(476));var i=ds(e).queue;cs(e,i,t,q,null===n?us:function(){return fs(e),n(r)})}function ds(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:q},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function fs(e){bs(e,ds(e).next.queue,{},Dc())}function ps(){return ka(Lh)}function gs(){return bo().memoizedState}function ms(){return bo().memoizedState}function ys(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Dc(),r=Pa(t,e=Aa(n),n);return null!==r&&(Pc(r,t,n),Ma(r,t,n)),t={cache:ji()},void(e.payload=t)}t=t.return}}function vs(e,t,n){var r=Dc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ss(e)?Cs(t,n):null!==(n=Nr(e,t,n,r))&&(Pc(n,e,r),Es(n,t,r))}function ws(e,t,n){bs(e,t,n,Dc())}function bs(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ss(e))Cs(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Gn(a,s))return Tr(e,t,i,0),null===tc&&xr(),!1}catch(l){}if(null!==(n=Nr(e,t,i,r)))return Pc(n,e,r),Es(n,t,r),!0}return!1}function _s(e,t,n,r){if(r={lane:2,revertLane:_u(),action:r,hasEagerState:!1,eagerState:null,next:null},Ss(e)){if(t)throw Error(s(479))}else null!==(t=Nr(e,n,r,2))&&Pc(t,e,2)}function Ss(e){var t=e.alternate;return e===Ji||null!==t&&t===Ji}function Cs(e,t){ro=no=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Es(e,t,n){if(0!==(4194176&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Re(e,n)}}var ks={readContext:ka,use:So,useCallback:co,useContext:co,useEffect:co,useImperativeHandle:co,useLayoutEffect:co,useInsertionEffect:co,useMemo:co,useReducer:co,useRef:co,useState:co,useDebugValue:co,useDeferredValue:co,useTransition:co,useSyncExternalStore:co,useId:co};ks.useCacheRefresh=co,ks.useMemoCache=co,ks.useHostTransitionStatus=co,ks.useFormState=co,ks.useActionState=co,ks.useOptimistic=co;var xs={readContext:ka,use:So,useCallback:function(e,t){return wo().memoizedState=[e,void 0===t?null:t],e},useContext:ka,useEffect:$o,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Xo(4194308,4,ns.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xo(4194308,4,e,t)},useInsertionEffect:function(e,t){Xo(4,2,e,t)},useMemo:function(e,t){var n=wo();t=void 0===t?null:t;var r=e();if(io){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=wo();if(void 0!==n){var i=n(t);if(io){we(!0);try{n(t)}finally{we(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=vs.bind(null,Ji,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},wo().memoizedState=e},useState:function(e){var t=(e=Ro(e)).queue,n=ws.bind(null,Ji,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:is,useDeferredValue:function(e,t){return as(wo(),e,t)},useTransition:function(){var e=Ro(!1);return e=cs.bind(null,Ji,e.queue,!0,!1),wo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Ji,i=wo();if(Xr){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===tc)throw Error(s(349));0!==(60&rc)||Io(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,$o(Ao.bind(null,r,o,e),[e]),r.flags|=2048,Go(9,Do.bind(null,r,o,n,t),{destroy:void 0},null),n},useId:function(){var e=wo(),t=tc.identifierPrefix;if(Xr){var n=qr;t=":"+t+"R"+(n=(Br&~(1<<32-be(Br)-1)).toString(32)+n),0<(n=oo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=lo++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return wo().memoizedState=ys.bind(null,Ji)}};xs.useMemoCache=Co,xs.useHostTransitionStatus=ps,xs.useFormState=qo,xs.useActionState=qo,xs.useOptimistic=function(e){var t=wo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=_s.bind(null,Ji,!0,n),n.dispatch=t,[e,t]};var Ts={readContext:ka,use:So,useCallback:os,useContext:ka,useEffect:Jo,useImperativeHandle:rs,useInsertionEffect:es,useLayoutEffect:ts,useMemo:ss,useReducer:ko,useRef:Qo,useState:function(){return ko(Eo)},useDebugValue:is,useDeferredValue:function(e,t){return ls(bo(),eo.memoizedState,e,t)},useTransition:function(){var e=ko(Eo)[0],t=bo().memoizedState;return["boolean"===typeof e?e:_o(e),t]},useSyncExternalStore:No,useId:gs};Ts.useCacheRefresh=ms,Ts.useMemoCache=Co,Ts.useHostTransitionStatus=ps,Ts.useFormState=Ho,Ts.useActionState=Ho,Ts.useOptimistic=function(e,t){return Oo(bo(),0,e,t)};var Ns={readContext:ka,use:So,useCallback:os,useContext:ka,useEffect:Jo,useImperativeHandle:rs,useInsertionEffect:es,useLayoutEffect:ts,useMemo:ss,useReducer:To,useRef:Qo,useState:function(){return To(Eo)},useDebugValue:is,useDeferredValue:function(e,t){var n=bo();return null===eo?as(n,e,t):ls(n,eo.memoizedState,e,t)},useTransition:function(){var e=To(Eo)[0],t=bo().memoizedState;return["boolean"===typeof e?e:_o(e),t]},useSyncExternalStore:No,useId:gs};function Is(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:A({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}Ns.useCacheRefresh=ms,Ns.useMemoCache=Co,Ns.useHostTransitionStatus=ps,Ns.useFormState=Yo,Ns.useActionState=Yo,Ns.useOptimistic=function(e,t){var n=bo();return null!==eo?Oo(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])};var Ds={isMounted:function(e){return!!(e=e._reactInternals)&&F(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Dc(),i=Aa(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Pa(e,i,r))&&(Pc(t,e,r),Ma(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Dc(),i=Aa(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Pa(e,i,r))&&(Pc(t,e,r),Ma(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Dc(),r=Aa(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Pa(e,r,n))&&(Pc(t,e,n),Ma(t,e,n))}};function As(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!Qn(n,r)||!Qn(i,o))}function Ps(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ds.enqueueReplaceState(t,t.state,null)}function Ms(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=A({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var Rs="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function Os(e){Rs(e)}function Ls(e){console.error(e)}function Fs(e){Rs(e)}function zs(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function Vs(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function js(e,t,n){return(n=Aa(n)).tag=3,n.payload={element:null},n.callback=function(){zs(e,t)},n}function Us(e){return(e=Aa(e)).tag=3,e}function Bs(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var o=r.value;e.payload=function(){return i(o)},e.callback=function(){Vs(t,n,r)}}var s=n.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){Vs(t,n,r),"function"!==typeof i&&(null===Sc?Sc=new Set([this]):Sc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var qs=Error(s(461)),Hs=!1;function Ws(e,t,n,r){t.child=null===e?Si(t,null,n,r):_i(t,e.child,n,r)}function Ks(e,t,n,r,i){n=n.render;var o=t.ref;if("ref"in r){var s={};for(var a in r)"ref"!==a&&(s[a]=r[a])}else s=r;return Ea(t),r=ho(e,t,n,s,o,i),a=mo(),null===e||Hs?(Xr&&a&&Kr(t),t.flags|=1,Ws(e,t,r,i),t.child):(yo(e,t,i),da(e,t,i))}function Ys(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Ll(o)||void 0!==o.defaultProps||null!==n.compare?((e=Vl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Gs(e,t,o,r,i))}if(o=e.child,!fa(e,i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:Qn)(s,r)&&e.ref===t.ref)return da(e,t,i)}return t.flags|=1,(e=Fl(o,r)).ref=t.ref,e.return=t,t.child=e}function Gs(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(Qn(o,r)&&e.ref===t.ref){if(Hs=!1,t.pendingProps=r=o,!fa(e,i))return t.lanes=e.lanes,da(e,t,i);0!==(131072&e.flags)&&(Hs=!0)}}return $s(e,t,n,r,i)}function Qs(e,t,n){var r=t.pendingProps,i=r.children,o=0!==(2&t.stateNode._pendingVisibility),s=null!==e?e.memoizedState:null;if(Zs(e,t),"hidden"===r.mode||o){if(0!==(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,o=0;null!==i;)o=o|i.lanes|i.childLanes,i=i.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return Xs(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Xs(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Xi(0,null!==s?s.cachePool:null),null!==s?ki(t,s):xi(),Ai(t)}else null!==s?(Xi(0,s.cachePool),ki(t,s),Pi(),t.memoizedState=null):(null!==e&&Xi(0,null),xi(),Pi());return Ws(e,t,i,n),t.child}function Xs(e,t,n,r){var i=Qi();return i=null===i?null:{parent:Vi._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Xi(0,null),xi(),Ai(t),null!==e&&Sa(e,t,r,!0),null}function Zs(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=2097664)}}function $s(e,t,n,r,i){return Ea(t),n=ho(e,t,n,r,void 0,i),r=mo(),null===e||Hs?(Xr&&r&&Kr(t),t.flags|=1,Ws(e,t,n,i),t.child):(yo(e,t,i),da(e,t,i))}function Js(e,t,n,r,i,o){return Ea(t),t.updateQueue=null,n=po(t,r,n,i),fo(e),r=mo(),null===e||Hs?(Xr&&r&&Kr(t),t.flags|=1,Ws(e,t,n,o),t.child):(yo(e,t,o),da(e,t,o))}function ea(e,t,n,r,i){if(Ea(t),null===t.stateNode){var o=Pr,s=n.contextType;"object"===typeof s&&null!==s&&(o=ka(s)),o=new n(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=Ds,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},Ia(t),s=n.contextType,o.context="object"===typeof s&&null!==s?ka(s):Pr,o.state=t.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(Is(t,n,s,r),o.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(s=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),s!==o.state&&Ds.enqueueReplaceState(o,o.state,null),Fa(t,r,o,i),La(),o.state=t.memoizedState),"function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var a=t.memoizedProps,l=Ms(n,a);o.props=l;var c=o.context,u=n.contextType;s=Pr,"object"===typeof u&&null!==u&&(s=ka(u));var h=n.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a||c!==s)&&Ps(t,o,r,s),Na=!1;var d=t.memoizedState;o.state=d,Fa(t,r,o,i),La(),c=t.memoizedState,a||d!==c||Na?("function"===typeof h&&(Is(t,n,h,r),c=t.memoizedState),(l=Na||As(t,n,l,r,d,c,s))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=s,r=l):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Da(e,t),u=Ms(n,s=t.memoizedProps),o.props=u,h=t.pendingProps,d=o.context,c=n.contextType,l=Pr,"object"===typeof c&&null!==c&&(l=ka(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||d!==l)&&Ps(t,o,r,l),Na=!1,d=t.memoizedState,o.state=d,Fa(t,r,o,i),La();var f=t.memoizedState;s!==h||d!==f||Na||null!==e&&null!==e.dependencies&&Ca(e.dependencies)?("function"===typeof a&&(Is(t,n,a,r),f=t.memoizedState),(u=Na||As(t,n,u,r,d,f,l)||null!==e&&null!==e.dependencies&&Ca(e.dependencies))?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,Zs(e,t),r=0!==(128&t.flags),o||r?(o=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=_i(t,e.child,null,i),t.child=_i(t,null,n,i)):Ws(e,t,n,i),t.memoizedState=o.state,e=t.child):e=da(e,t,i),e}function ta(e,t,n,r){return ii(),t.flags|=256,Ws(e,t,n,r),t.child}var na={dehydrated:null,treeContext:null,retryLane:0};function ra(e){return{baseLanes:e,cachePool:Zi()}}function ia(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=pc),e}function oa(e,t,n){var r,i=t.pendingProps,o=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Ri.current)),r&&(o=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(Xr){if(o?Di(t):Pi(),Xr){var l,c=Qr;if(l=c){e:{for(l=c,c=$r;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=ah(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Ur?{id:Br,overflow:qr}:null,retryLane:536870912},(l=Ol(18,null,null,0)).stateNode=c,l.return=t,t.child=l,Gr=t,Qr=null,l=!0):l=!1}l||ei(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return"$!"===c.data?t.lanes=16:t.lanes=536870912,null;Mi(t)}return c=i.children,i=i.fallback,o?(Pi(),c=aa({mode:"hidden",children:c},o=t.mode),i=jl(i,o,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(o=t.child).memoizedState=ra(n),o.childLanes=ia(e,r,n),t.memoizedState=na,i):(Di(t),sa(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(Di(t),t.flags&=-257,t=la(e,t,n)):null!==t.memoizedState?(Pi(),t.child=e.child,t.flags|=128,t=null):(Pi(),o=i.fallback,c=t.mode,i=aa({mode:"visible",children:i.children},c),(o=jl(o,c,n,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,_i(t,e.child,null,n),(i=t.child).memoizedState=ra(n),i.childLanes=ia(e,r,n),t.memoizedState=na,t=o);else if(Di(t),"$!"===c.data){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(s(419))).stack="",i.digest=r,oi({value:i,source:null,stack:null}),t=la(e,t,n)}else if(Hs||Sa(e,t,n,!1),r=0!==(n&e.childLanes),Hs||r){if(null!==(r=tc)){if(0!==(42&(i=n&-n)))i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=64;break;case 268435456:i=134217728;break;default:i=0}if(0!==(i=0!==(i&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane)throw l.retryLane=i,Ir(e,i),Pc(r,e,i),qs}"$?"===c.data||Hc(),t=la(e,t,n)}else"$?"===c.data?(t.flags|=128,t.child=e.child,t=au.bind(null,e),c._reactRetry=t,t=null):(e=l.treeContext,Qr=ah(c.nextSibling),Gr=t,Xr=!0,Zr=null,$r=!1,null!==e&&(Vr[jr++]=Br,Vr[jr++]=qr,Vr[jr++]=Ur,Br=e.id,qr=e.overflow,Ur=t),(t=sa(t,i.children)).flags|=4096);return t}return o?(Pi(),o=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=Fl(l,{mode:"hidden",children:i.children})).subtreeFlags=31457280&l.subtreeFlags,null!==u?o=Fl(u,o):(o=jl(o,c,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,null===(c=e.child.memoizedState)?c=ra(n):(null!==(l=c.cachePool)?(u=Vi._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Zi(),c={baseLanes:c.baseLanes|n,cachePool:l}),o.memoizedState=c,o.childLanes=ia(e,r,n),t.memoizedState=na,i):(Di(t),e=(n=e.child).sibling,(n=Fl(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function sa(e,t){return(t=aa({mode:"visible",children:t},e.mode)).return=e,e.child=t}function aa(e,t){return Ul(e,t,0,null)}function la(e,t,n){return _i(t,e.child,null,n),(e=sa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ca(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ba(e.return,t,n)}function ua(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function ha(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ws(e,t,r.children,n),0!==(2&(r=Ri.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ca(e,n,t);else if(19===e.tag)ca(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(G(Ri,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Oi(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ua(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Oi(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ua(t,!0,n,null,o);break;case"together":ua(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function da(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),hc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Sa(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Fl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function fa(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ca(e))}function pa(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Hs=!0;else{if(!fa(e,n)&&0===(128&t.flags))return Hs=!1,function(e,t,n){switch(t.tag){case 3:J(t,t.stateNode.containerInfo),va(t,Vi,e.memoizedState.cache),ii();break;case 27:case 5:te(t);break;case 4:J(t,t.stateNode.containerInfo);break;case 10:va(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Di(t),t.flags|=128,null):0!==(n&t.child.childLanes)?oa(e,t,n):(Di(t),null!==(e=da(e,t,n))?e.sibling:null);Di(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Sa(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return ha(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),G(Ri,Ri.current),r)break;return null;case 22:case 23:return t.lanes=0,Qs(e,t,n);case 24:va(t,Vi,e.memoizedState.cache)}return da(e,t,n)}(e,t,n);Hs=0!==(131072&e.flags)}else Hs=!1,Xr&&0!==(1048576&t.flags)&&Wr(t,zr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===y){t.tag=11,t=Ks(null,t,r,e,n);break e}if(i===b){t.tag=14,t=Ys(null,t,r,e,n);break e}}throw t=T(r)||r,Error(s(306,t,""))}Ll(r)?(e=Ms(r,e),t.tag=1,t=ea(null,t,r,e,n)):(t.tag=0,t=$s(null,t,r,e,n))}return t;case 0:return $s(e,t,t.type,t.pendingProps,n);case 1:return ea(e,t,r=t.type,i=Ms(r,t.pendingProps),n);case 3:e:{if(J(t,t.stateNode.containerInfo),null===e)throw Error(s(387));var o=t.pendingProps;r=(i=t.memoizedState).element,Da(e,t),Fa(t,o,null,n);var a=t.memoizedState;if(o=a.cache,va(t,Vi,o),o!==i.cache&&_a(t,[Vi],n,!0),La(),o=a.element,i.isDehydrated){if(i={element:o,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=ta(e,t,o,n);break e}if(o!==r){oi(r=Rr(Error(s(424)),t)),t=ta(e,t,o,n);break e}for(Qr=ah(t.stateNode.containerInfo.firstChild),Gr=t,Xr=!0,Zr=null,$r=!0,n=Si(t,null,o,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ii(),o===r){t=da(e,t,n);break e}Ws(e,t,o,n)}t=t.child}return t;case 26:return Zs(e,t),null===e?(n=mh(t.type,null,t.pendingProps,null))?t.memoizedState=n:Xr||(n=t.type,e=t.pendingProps,(r=Qu(Z.current).createElement(n))[ze]=t,r[Ve]=e,Ku(r,n,e),Ze(r),t.stateNode=r):t.memoizedState=mh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return te(t),null===e&&Xr&&(r=t.stateNode=ch(t.type,t.pendingProps,Z.current),Gr=t,$r=!0,Qr=ah(r.firstChild)),r=t.pendingProps.children,null!==e||Xr?Ws(e,t,r,n):t.child=_i(t,null,r,n),Zs(e,t),t.child;case 5:return null===e&&Xr&&((i=r=Qr)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[We])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==i.rel||e.getAttribute("href")!==(null==i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===o)return e}if(null===(e=ah(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,$r))?(t.stateNode=r,Gr=t,Qr=ah(r.firstChild),$r=!1,i=!0):i=!1),i||ei(t)),te(t),i=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,r=o.children,$u(i,o)?r=null:null!==a&&$u(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=ho(e,t,go,null,null,n),Lh._currentValue=i),Zs(e,t),Ws(e,t,r,n),t.child;case 6:return null===e&&Xr&&((e=n=Qr)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=ah(e.nextSibling)))return null}return e}(n,t.pendingProps,$r))?(t.stateNode=n,Gr=t,Qr=null,e=!0):e=!1),e||ei(t)),null;case 13:return oa(e,t,n);case 4:return J(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_i(t,null,r,n):Ws(e,t,r,n),t.child;case 11:return Ks(e,t,t.type,t.pendingProps,n);case 7:return Ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ws(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,va(t,t.type,r.value),Ws(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ea(t),r=r(i=ka(i)),t.flags|=1,Ws(e,t,r,n),t.child;case 14:return Ys(e,t,t.type,t.pendingProps,n);case 15:return Gs(e,t,t.type,t.pendingProps,n);case 19:return ha(e,t,n);case 22:return Qs(e,t,n);case 24:return Ea(t),r=ka(Vi),null===e?(null===(i=Qi())&&(i=tc,o=ji(),i.pooledCache=o,o.refCount++,null!==o&&(i.pooledCacheLanes|=n),i=o),t.memoizedState={parent:r,cache:i},Ia(t),va(t,Vi,i)):(0!==(e.lanes&n)&&(Da(e,t),Fa(t,null,null,n),La()),i=e.memoizedState,o=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),va(t,Vi,r)):(r=o.cache,va(t,Vi,r),r!==i.cache&&_a(t,[Vi],n,!0))),Ws(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}var ga=K(null),ma=null,ya=null;function va(e,t,n){G(ga,t._currentValue),t._currentValue=n}function wa(e){e._currentValue=ga.current,Y(ga)}function ba(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _a(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var o=i.dependencies;if(null!==o){var a=i.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),ba(o.return,n,e),r||(a=null);break e}o=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(s(341));a.lanes|=n,null!==(o=a.alternate)&&(o.lanes|=n),ba(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function Sa(e,t,n,r){e=null;for(var i=t,o=!1;null!==i;){if(!o)if(0!==(524288&i.flags))o=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(s(387));if(null!==(a=a.memoizedProps)){var l=i.type;Gn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===$.current){if(null===(a=i.alternate))throw Error(s(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Lh):e=[Lh])}i=i.return}null!==e&&_a(t,e,n,r),t.flags|=262144}function Ca(e){for(e=e.firstContext;null!==e;){if(!Gn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ea(e){ma=e,ya=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function ka(e){return Ta(ma,e)}function xa(e,t){return null===ma&&Ea(e),Ta(e,t)}function Ta(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ya){if(null===e)throw Error(s(308));ya=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ya=ya.next=t;return n}var Na=!1;function Ia(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Aa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Pa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&ec)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Ar(e),Dr(e,null,n),t}return Tr(e,r,t,n),Ar(e)}function Ma(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194176&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Re(e,n)}}function Ra(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Oa=!1;function La(){if(Oa){if(null!==Wi)throw Wi}}function Fa(e,t,n,r){Oa=!1;var i=e.updateQueue;Na=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(s=0,u=c=l=null,a=o;;){var d=-536870913&a.lane,f=d!==a.lane;if(f?(rc&d)===d:(r&d)===d){0!==d&&d===Hi&&(Oa=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var p=e,g=a;d=t;var m=n;switch(g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(m,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(m,h,d):p)||void 0===d)break e;h=A({},h,d);break e;case 2:Na=!0}}null!==(d=a.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=i.callbacks)?i.callbacks=[d]:f.push(d))}else f={lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,s|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(f=a).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===o&&(i.shared.lanes=0),hc|=s,e.lanes=s,e.memoizedState=h}}function za(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function Va(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)za(n[e],t)}function ja(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var o=n.create,s=n.inst;r=o(),s.destroy=r}n=n.next}while(n!==i)}}catch(a){ru(t,t.return,a)}}function Ua(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var o=i.next;r=o;do{if((r.tag&e)===e){var s=r.inst,a=s.destroy;if(void 0!==a){s.destroy=void 0,i=t;var l=n;try{a()}catch(c){ru(i,l,c)}}}r=r.next}while(r!==o)}}catch(c){ru(t,t.return,c)}}function Ba(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Va(t,n)}catch(r){ru(e,e.return,r)}}}function qa(e,t,n){n.props=Ms(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){ru(e,t,r)}}function Ha(e,t){try{var n=e.ref;if(null!==n){var r=e.stateNode;switch(e.tag){case 26:case 27:case 5:var i=r;break;default:i=r}"function"===typeof n?e.refCleanup=n(i):n.current=i}}catch(o){ru(e,t,o)}}function Wa(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){ru(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(o){ru(e,t,o)}else n.current=null}function Ka(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){ru(e,e.return,i)}}function Ya(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,o=null,a=null,l=null,c=null,u=null,h=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&null!=d)switch(p){case"checked":case"value":break;case"defaultValue":c=d;default:r.hasOwnProperty(p)||Hu(e,t,p,null,r,d)}}for(var f in r){var p=r[f];if(d=n[f],r.hasOwnProperty(f)&&(null!=p||null!=d))switch(f){case"type":o=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":h=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:p!==d&&Hu(e,t,f,p,r,d)}}return void mt(e,a,l,c,u,h,o,i);case"select":for(o in p=a=l=f=null,n)if(c=n[o],n.hasOwnProperty(o)&&null!=c)switch(o){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(o)||Hu(e,t,o,null,r,c)}for(i in r)if(o=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=o||null!=c))switch(i){case"value":f=o;break;case"defaultValue":l=o;break;case"multiple":a=o;default:o!==c&&Hu(e,t,i,o,r,c)}return t=l,n=a,r=p,void(null!=f?wt(e,!!n,f,!1):!!r!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Hu(e,t,l,null,r,i)}for(a in r)if(i=r[a],o=n[a],r.hasOwnProperty(a)&&(null!=i||null!=o))switch(a){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(s(91));break;default:i!==o&&Hu(e,t,a,i,r,o)}return void bt(e,f,p);case"option":for(var g in n)if(f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g))if("selected"===g)e.selected=!1;else Hu(e,t,g,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Hu(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m)&&Hu(e,t,m,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(s(137,t));break;default:Hu(e,t,u,f,r,p)}return;default:if(xt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&Wu(e,t,y,void 0,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||void 0===f&&void 0===p||Wu(e,t,h,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&Hu(e,t,v,null,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||null==f&&null==p||Hu(e,t,d,f,r,p)}(r,e.type,n,t),r[Ve]=t}catch(i){ru(e,e.return,i)}}function Ga(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag||4===e.tag}function Qa(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Ga(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&27!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Xa(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=qu));else if(4!==r&&27!==r&&null!==(e=e.child))for(Xa(e,t,n),e=e.sibling;null!==e;)Xa(e,t,n),e=e.sibling}function Za(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&27!==r&&null!==(e=e.child))for(Za(e,t,n),e=e.sibling;null!==e;)Za(e,t,n),e=e.sibling}var $a=!1,Ja=!1,el=!1,tl="function"===typeof WeakSet?WeakSet:Set,nl=null,rl=!1;function il(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:yl(e,n),4&r&&ja(5,n);break;case 1:if(yl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){ru(n,n.return,a)}else{var i=Ms(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){ru(n,n.return,l)}}64&r&&Ba(n),512&r&&Ha(n,n.return);break;case 3:if(yl(e,n),64&r&&null!==(r=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:e=n.child.stateNode}try{Va(r,e)}catch(a){ru(n,n.return,a)}}break;case 26:yl(e,n),512&r&&Ha(n,n.return);break;case 27:case 5:yl(e,n),null===t&&4&r&&Ka(n),512&r&&Ha(n,n.return);break;case 12:default:yl(e,n);break;case 13:yl(e,n),4&r&&ul(e,n);break;case 22:if(!(i=null!==n.memoizedState||$a)){t=null!==t&&null!==t.memoizedState||Ja;var o=$a,s=Ja;$a=i,(Ja=t)&&!s?wl(e,n,0!==(8772&n.subtreeFlags)):yl(e,n),$a=o,Ja=s}512&r&&("manual"===n.memoizedProps.mode?Ha(n,n.return):Wa(n,n.return))}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ke(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var sl=null,al=!1;function ll(e,t,n){for(n=n.child;null!==n;)cl(e,t,n),n=n.sibling}function cl(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(s){}switch(n.tag){case 26:Ja||Wa(n,t),ll(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Ja||Wa(n,t);var r=sl,i=al;for(sl=n.stateNode,ll(e,t,n),t=(n=n.stateNode).attributes;t.length;)n.removeAttributeNode(t[0]);Ke(n),sl=r,al=i;break;case 5:Ja||Wa(n,t);case 6:i=sl;var o=al;if(sl=null,ll(e,t,n),al=o,null!==(sl=i))if(al)try{e=sl,r=n.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)}catch(a){ru(n,t,a)}else try{sl.removeChild(n.stateNode)}catch(a){ru(n,t,a)}break;case 18:null!==sl&&(al?(t=sl,n=n.stateNode,8===t.nodeType?oh(t.parentNode,n):1===t.nodeType&&oh(t,n),gd(t)):oh(sl,n.stateNode));break;case 4:r=sl,i=al,sl=n.stateNode.containerInfo,al=!0,ll(e,t,n),sl=r,al=i;break;case 0:case 11:case 14:case 15:Ja||Ua(2,n,t),Ja||Ua(4,n,t),ll(e,t,n);break;case 1:Ja||(Wa(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&qa(n,t,r)),ll(e,t,n);break;case 21:ll(e,t,n);break;case 22:Ja||Wa(n,t),Ja=(r=Ja)||null!==n.memoizedState,ll(e,t,n),Ja=r;break;default:ll(e,t,n)}}function ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{gd(e)}catch(n){ru(t,t.return,n)}}function hl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new tl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new tl),t;default:throw Error(s(435,e.tag))}}(e);t.forEach((function(t){var r=lu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function dl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:case 5:sl=l.stateNode,al=!1;break e;case 3:case 4:sl=l.stateNode.containerInfo,al=!0;break e}l=l.return}if(null===sl)throw Error(s(160));cl(o,a,i),sl=null,al=!1,null!==(o=i.alternate)&&(o.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)pl(t,e),t=t.sibling}var fl=null;function pl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:dl(t,e),gl(e),4&r&&(Ua(3,e,e.return),ja(3,e),Ua(5,e,e.return));break;case 1:dl(t,e),gl(e),512&r&&(Ja||null===n||Wa(n,n.return)),64&r&&$a&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=fl;if(dl(t,e),gl(e),512&r&&(Ja||null===n||Wa(n,n.return)),4&r){var o=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(o=i.getElementsByTagName("title")[0])||o[We]||o[ze]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=i.createElement(r),i.head.insertBefore(o,i.querySelector("head > title"))),Ku(o,r,n),o[ze]=e,Ze(o),r=o;break e;case"link":var a=Th("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((o=a[l]).getAttribute("href")===(null==n.href?null:n.href)&&o.getAttribute("rel")===(null==n.rel?null:n.rel)&&o.getAttribute("title")===(null==n.title?null:n.title)&&o.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}Ku(o=i.createElement(r),r,n),i.head.appendChild(o);break;case"meta":if(a=Th("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((o=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&o.getAttribute("name")===(null==n.name?null:n.name)&&o.getAttribute("property")===(null==n.property?null:n.property)&&o.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&o.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}Ku(o=i.createElement(r),r,n),i.head.appendChild(o);break;default:throw Error(s(468,r))}o[ze]=e,Ze(o),r=o}e.stateNode=r}else Nh(i,e.type,e.stateNode);else e.stateNode=Sh(i,r,e.memoizedProps);else o!==r?(null===o?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):o.count--,null===r?Nh(i,e.type,e.stateNode):Sh(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Ya(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(4&r&&null===e.alternate){i=e.stateNode,o=e.memoizedProps;try{for(var c=i.firstChild;c;){var u=c.nextSibling,h=c.nodeName;c[We]||"HEAD"===h||"BODY"===h||"SCRIPT"===h||"STYLE"===h||"LINK"===h&&"stylesheet"===c.rel.toLowerCase()||i.removeChild(c),c=u}for(var d=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Ku(i,d,o),i[ze]=e,i[Ve]=o}catch(g){ru(e,e.return,g)}}case 5:if(dl(t,e),gl(e),512&r&&(Ja||null===n||Wa(n,n.return)),32&e.flags){i=e.stateNode;try{St(i,"")}catch(g){ru(e,e.return,g)}}4&r&&null!=e.stateNode&&Ya(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(el=!0);break;case 6:if(dl(t,e),gl(e),4&r){if(null===e.stateNode)throw Error(s(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(g){ru(e,e.return,g)}}break;case 3:if(xh=null,i=fl,fl=dh(t.containerInfo),dl(t,e),fl=i,gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{gd(t.containerInfo)}catch(g){ru(e,e.return,g)}el&&(el=!1,ml(e));break;case 4:r=fl,fl=dh(e.stateNode.containerInfo),dl(t,e),gl(e),fl=r;break;case 12:dl(t,e),gl(e);break;case 13:dl(t,e),gl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(wc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,hl(e,r)));break;case 22:if(512&r&&(Ja||null===n||Wa(n,n.return)),c=null!==e.memoizedState,u=null!==n&&null!==n.memoizedState,$a=(h=$a)||c,Ja=(d=Ja)||u,dl(t,e),Ja=d,$a=h,gl(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&r&&(t._visibility=c?-2&t._visibility:1|t._visibility,c&&(t=$a||Ja,null===n||u||t||vl(e)),null===e.memoizedProps||"manual"!==e.memoizedProps.mode))e:for(n=null,t=e;;){if(5===t.tag||26===t.tag||27===t.tag){if(null===n){u=n=t;try{if(i=u.stateNode,c)"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{a=u.stateNode;var p=void 0!==(l=u.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null;a.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(g){ru(u,u.return,g)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(g){ru(u,u.return,g)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,hl(e,n))));break;case 19:dl(t,e),gl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,hl(e,r)));break;case 21:break;default:dl(t,e),gl(e)}}function gl(e){var t=e.flags;if(2&t){try{if(27!==e.tag){e:{for(var n=e.return;null!==n;){if(Ga(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 27:var i=r.stateNode;Za(e,Qa(e),i);break;case 5:var o=r.stateNode;32&r.flags&&(St(o,""),r.flags&=-33),Za(e,Qa(e),o);break;case 3:case 4:var a=r.stateNode.containerInfo;Xa(e,Qa(e),a);break;default:throw Error(s(161))}}}catch(l){ru(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ml(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;ml(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function yl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)il(e,t.alternate,t),t=t.sibling}function vl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ua(4,t,t.return),vl(t);break;case 1:Wa(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&qa(t,t.return,n),vl(t);break;case 26:case 27:case 5:Wa(t,t.return),vl(t);break;case 22:Wa(t,t.return),null===t.memoizedState&&vl(t);break;default:vl(t)}e=e.sibling}}function wl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,o=t,s=o.flags;switch(o.tag){case 0:case 11:case 15:wl(i,o,n),ja(4,o);break;case 1:if(wl(i,o,n),"function"===typeof(i=(r=o).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){ru(r,r.return,c)}if(null!==(i=(r=o).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)za(l[i],a)}catch(c){ru(r,r.return,c)}}n&&64&s&&Ba(o),Ha(o,o.return);break;case 26:case 27:case 5:wl(i,o,n),n&&null===r&&4&s&&Ka(o),Ha(o,o.return);break;case 12:default:wl(i,o,n);break;case 13:wl(i,o,n),n&&4&s&&ul(i,o);break;case 22:null===o.memoizedState&&wl(i,o,n),Ha(o,o.return)}t=t.sibling}}function bl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ui(n))}function _l(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ui(e))}function Sl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Cl(e,t,n,r),t=t.sibling}function Cl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Sl(e,t,n,r),2048&i&&ja(9,t);break;case 3:Sl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ui(e)));break;case 12:if(2048&i){Sl(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,s=o.id,a=o.onPostCommit;"function"===typeof a&&a(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){ru(t,t.return,l)}}else Sl(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,null!==t.memoizedState?4&o._visibility?Sl(e,t,n,r):kl(e,t):4&o._visibility?Sl(e,t,n,r):(o._visibility|=4,El(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&bl(t.alternate,t);break;case 24:Sl(e,t,n,r),2048&i&&_l(t.alternate,t);break;default:Sl(e,t,n,r)}}function El(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,s=t,a=n,l=r,c=s.flags;switch(s.tag){case 0:case 11:case 15:El(o,s,a,l,i),ja(8,s);break;case 23:break;case 22:var u=s.stateNode;null!==s.memoizedState?4&u._visibility?El(o,s,a,l,i):kl(o,s):(u._visibility|=4,El(o,s,a,l,i)),i&&2048&c&&bl(s.alternate,s);break;case 24:El(o,s,a,l,i),i&&2048&c&&_l(s.alternate,s);break;default:El(o,s,a,l,i)}t=t.sibling}}function kl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:kl(n,r),2048&i&&bl(r.alternate,r);break;case 24:kl(n,r),2048&i&&_l(r.alternate,r);break;default:kl(n,r)}t=t.sibling}}var xl=8192;function Tl(e){if(e.subtreeFlags&xl)for(e=e.child;null!==e;)Nl(e),e=e.sibling}function Nl(e){switch(e.tag){case 26:Tl(e),e.flags&xl&&null!==e.memoizedState&&function(e,t,n){if(null===Dh)throw Error(s(475));var r=Dh;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=yh(n.href),o=e.querySelector(vh(i));if(o)return null!==(e=o._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Ph.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=o,void Ze(o);o=e.ownerDocument||e,n=wh(n),(i=uh.get(i))&&Eh(n,i),Ze(o=o.createElement("link"));var a=o;a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),Ku(o,"link",n),t.instance=o}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Ph.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(fl,e.memoizedState,e.memoizedProps);break;case 5:default:Tl(e);break;case 3:case 4:var t=fl;fl=dh(e.stateNode.containerInfo),Tl(e),fl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=xl,xl=16777216,Tl(e),xl=t):Tl(e))}}function Il(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Dl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];nl=r,Ml(r,e)}Il(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Al(e),e=e.sibling}function Al(e){switch(e.tag){case 0:case 11:case 15:Dl(e),2048&e.flags&&Ua(9,e,e.return);break;case 3:case 12:default:Dl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,Pl(e)):Dl(e)}}function Pl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];nl=r,Ml(r,e)}Il(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:Ua(8,t,t.return),Pl(t);break;case 22:4&(n=t.stateNode)._visibility&&(n._visibility&=-5,Pl(t));break;default:Pl(t)}e=e.sibling}}function Ml(e,t){for(;null!==nl;){var n=nl;switch(n.tag){case 0:case 11:case 15:Ua(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ui(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,nl=r;else e:for(n=e;null!==nl;){var i=(r=nl).sibling,o=r.return;if(ol(r),r===n){nl=null;break e}if(null!==i){i.return=o,nl=i;break e}nl=o}}}function Rl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(e,t,n,r){return new Rl(e,t,n,r)}function Ll(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fl(e,t){var n=e.alternate;return null===n?((n=Ol(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=31457280&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zl(e,t){e.flags&=31457282;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vl(e,t,n,r,i,o){var a=0;if(r=e,"function"===typeof e)Ll(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,Q.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case h:return jl(n.children,i,o,t);case d:a=8,i|=24;break;case f:return(e=Ol(12,n,t,2|i)).elementType=f,e.lanes=o,e;case v:return(e=Ol(13,n,t,i)).elementType=v,e.lanes=o,e;case w:return(e=Ol(19,n,t,i)).elementType=w,e.lanes=o,e;case S:return Ul(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case p:case m:a=10;break e;case g:a=9;break e;case y:a=11;break e;case b:a=14;break e;case _:a=16,r=null;break e}a=29,n=Error(s(130,null===e?"null":typeof e,"")),r=null}return(t=Ol(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function jl(e,t,n,r){return(e=Ol(7,e,r,t)).lanes=n,e}function Ul(e,t,n,r){(e=Ol(22,e,r,t)).elementType=S,e.lanes=n;var i={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=i._current;if(null===e)throw Error(s(456));if(0===(2&i._pendingVisibility)){var t=Ir(e,2);null!==t&&(i._pendingVisibility|=2,Pc(t,e,2))}},attach:function(){var e=i._current;if(null===e)throw Error(s(456));if(0!==(2&i._pendingVisibility)){var t=Ir(e,2);null!==t&&(i._pendingVisibility&=-3,Pc(t,e,2))}}};return e.stateNode=i,e}function Bl(e,t,n){return(e=Ol(6,e,null,t)).lanes=n,e}function ql(e,t,n){return(t=Ol(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hl(e){e.flags|=4}function Wl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Ih(t)){if(null!==(t=Ni.current)&&((4194176&rc)===rc?null!==Ii:(62914560&rc)!==rc&&0===(536870912&rc)||t!==Ii))throw di=li,ai;e.flags|=8192}}function Kl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?De():536870912,e.lanes|=t,gc|=t)}function Yl(e,t){if(!Xr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=31457280&i.subtreeFlags,r|=31457280&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ql(e,t,n){var r=t.pendingProps;switch(Yr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return Gl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),wa(Vi),ee(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ri(t)?Hl(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Zr&&(Rc(Zr),Zr=null))),Gl(t),null;case 26:return n=t.memoizedState,null===e?(Hl(t),null!==n?(Gl(t),Wl(t,n)):(Gl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Hl(t),Gl(t),Wl(t,n)):(Gl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Hl(t),Gl(t),t.flags&=-16777217),null;case 27:ne(t),n=Z.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Hl(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Gl(t),null}e=Q.current,ri(t)?ti(t):(e=ch(i,r,n),t.stateNode=e,Hl(t))}return Gl(t),null;case 5:if(ne(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Hl(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Gl(t),null}if(e=Q.current,ri(t))ti(t);else{switch(i=Qu(Z.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[ze]=t,e[Ve]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(Ku(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Hl(t)}}return Gl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Hl(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(e=Z.current,ri(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=Gr))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[ze]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Bu(e.nodeValue,n)))||ei(t)}else(e=Qu(e).createTextNode(r))[ze]=t,t.stateNode=e}return Gl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=ri(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[ze]=t}else ii(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gl(t),i=!1}else null!==Zr&&(Rc(Zr),Zr=null),i=!0;if(!i)return 256&t.flags?(Mi(t),t):(Mi(t),null)}if(Mi(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var o=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Kl(t,t.updateQueue),Gl(t),null;case 4:return ee(),null===e&&Pu(t.stateNode.containerInfo),Gl(t),null;case 10:return wa(t.type),Gl(t),null;case 19:if(Y(Ri),null===(i=t.memoizedState))return Gl(t),null;if(r=0!==(128&t.flags),null===(o=i.rendering))if(r)Yl(i,!1);else{if(0!==uc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=Oi(e))){for(t.flags|=128,Yl(i,!1),e=o.updateQueue,t.updateQueue=e,Kl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)zl(n,e),n=n.sibling;return G(Ri,1&Ri.current|2),t.child}e=e.sibling}null!==i.tail&&le()>bc&&(t.flags|=128,r=!0,Yl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Oi(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Kl(t,e),Yl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!Xr)return Gl(t),null}else 2*le()-i.renderingStartTime>bc&&536870912!==n&&(t.flags|=128,r=!0,Yl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=i.last)?e.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=le(),t.sibling=null,e=Ri.current,G(Ri,r?1&e|2:1&e),t):(Gl(t),null);case 22:case 23:return Mi(t),Ti(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(Gl(t),6&t.subtreeFlags&&(t.flags|=8192)):Gl(t),null!==(n=t.updateQueue)&&Kl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&Y(Gi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),wa(Vi),Gl(t),null;case 25:return null}throw Error(s(156,t.tag))}function Xl(e,t){switch(Yr(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return wa(Vi),ee(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return ne(t),null;case 13:if(Mi(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ii()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Y(Ri),null;case 4:return ee(),null;case 10:return wa(t.type),null;case 22:case 23:return Mi(t),Ti(),null!==e&&Y(Gi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return wa(Vi),null;default:return null}}function Zl(e,t){switch(Yr(t),t.tag){case 3:wa(Vi),ee();break;case 26:case 27:case 5:ne(t);break;case 4:ee();break;case 13:Mi(t);break;case 19:Y(Ri);break;case 10:wa(t.type);break;case 22:case 23:Mi(t),Ti(),null!==e&&Y(Gi);break;case 24:wa(Vi)}}var $l={getCacheForType:function(e){var t=ka(Vi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},Jl="function"===typeof WeakMap?WeakMap:Map,ec=0,tc=null,nc=null,rc=0,ic=0,oc=null,sc=!1,ac=!1,lc=!1,cc=0,uc=0,hc=0,dc=0,fc=0,pc=0,gc=0,mc=null,yc=null,vc=!1,wc=0,bc=1/0,_c=null,Sc=null,Cc=!1,Ec=null,kc=0,xc=0,Tc=null,Nc=0,Ic=null;function Dc(){if(0!==(2&ec)&&0!==rc)return rc&-rc;if(null!==D.T){return 0!==Hi?Hi:_u()}return Le()}function Ac(){0===pc&&(pc=0===(536870912&rc)||Xr?Ie():536870912);var e=Ni.current;return null!==e&&(e.flags|=32),pc}function Pc(e,t,n){(e===tc&&2===ic||null!==e.cancelPendingCommit)&&(jc(e,0),Fc(e,rc,pc,!1)),Pe(e,n),0!==(2&ec)&&e===tc||(e===tc&&(0===(2&ec)&&(dc|=n),4===uc&&Fc(e,rc,pc,!1)),gu(e))}function Mc(e,t,n){if(0!==(6&ec))throw Error(s(327));for(var r=!n&&0===(60&t)&&0===(t&e.expiredLanes)||Te(e,t),i=r?function(e,t){var n=ec;ec|=2;var r=Bc(),i=qc();tc!==e||rc!==t?(_c=null,bc=le()+500,jc(e,t)):ac=Te(e,t);e:for(;;)try{if(0!==ic&&null!==nc){t=nc;var o=oc;t:switch(ic){case 1:ic=0,oc=null,Xc(e,t,o,1);break;case 2:if(ci(o)){ic=0,oc=null,Qc(t);break}t=function(){2===ic&&tc===e&&(ic=7),gu(e)},o.then(t,t);break e;case 3:ic=7;break e;case 4:ic=5;break e;case 7:ci(o)?(ic=0,oc=null,Qc(t)):(ic=0,oc=null,Xc(e,t,o,7));break;case 5:var a=null;switch(nc.tag){case 26:a=nc.memoizedState;case 5:case 27:var l=nc;if(!a||Ih(a)){ic=0,oc=null;var c=l.sibling;if(null!==c)nc=c;else{var u=l.return;null!==u?(nc=u,Zc(u)):nc=null}break t}}ic=0,oc=null,Xc(e,t,o,5);break;case 6:ic=0,oc=null,Xc(e,t,o,6);break;case 8:Vc(),uc=6;break e;default:throw Error(s(462))}}Yc();break}catch(h){Uc(e,h)}return ya=ma=null,D.H=r,D.A=i,ec=n,null!==nc?0:(tc=null,rc=0,xr(),uc)}(e,t):Wc(e,t,!0),o=r;;){if(0===i){ac&&!r&&Fc(e,t,0,!1);break}if(6===i)Fc(e,t,0,!sc);else{if(n=e.current.alternate,o&&!Lc(n)){i=Wc(e,t,!1),o=!1;continue}if(2===i){if(o=t,e.errorRecoveryDisabledLanes&o)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=mc;var c=l.current.memoizedState.isDehydrated;if(c&&(jc(l,a).flags|=256),2!==(a=Wc(l,a,!1))){if(lc&&!c){l.errorRecoveryDisabledLanes|=o,dc|=o,i=4;break e}o=yc,yc=i,null!==o&&Rc(o)}i=a}if(o=!1,2!==i)continue}}if(1===i){jc(e,0),Fc(e,t,0,!0);break}e:{switch(r=e,i){case 0:case 1:throw Error(s(345));case 4:if((4194176&t)===t){Fc(r,t,pc,!sc);break e}break;case 2:yc=null;break;case 3:case 5:break;default:throw Error(s(329))}if(r.finishedWork=n,r.finishedLanes=t,(62914560&t)===t&&10<(o=wc+300-le())){if(Fc(r,t,pc,!sc),0!==xe(r,0))break e;r.timeoutHandle=eh(Oc.bind(null,r,n,yc,_c,vc,t,pc,dc,gc,sc,2,-0,0),o)}else Oc(r,n,yc,_c,vc,t,pc,dc,gc,sc,0,-0,0)}}break}gu(e)}function Rc(e){null===yc?yc=e:yc.push.apply(yc,e)}function Oc(e,t,n,r,i,o,a,l,c,u,h,d,f){var p=t.subtreeFlags;if((8192&p||16785408===(16785408&p))&&(Dh={stylesheets:null,count:0,unsuspend:Ah},Nl(t),null!==(t=function(){if(null===Dh)throw Error(s(475));var e=Dh;return e.stylesheets&&0===e.count&&Rh(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Rh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=t(Jc.bind(null,e,n,r,i,a,l,c,1,d,f)),void Fc(e,o,a,!u);Jc(e,n,r,i,a,l,c,h,d,f)}function Lc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Gn(o(),i))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fc(e,t,n,r){t&=~fc,t&=~dc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var o=31-be(i),s=1<<o;r[o]=-1,i&=~s}0!==n&&Me(e,n,t)}function zc(){return 0!==(6&ec)||(mu(0,!1),!1)}function Vc(){if(null!==nc){if(0===ic)var e=nc.return;else ya=ma=null,vo(e=nc),pi=null,gi=0,e=nc;for(;null!==e;)Zl(e.alternate,e),e=e.return;nc=null}}function jc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,th(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Vc(),tc=e,nc=n=Fl(e.current,null),rc=t,ic=0,oc=null,sc=!1,ac=Te(e,t),lc=!1,gc=pc=fc=dc=hc=uc=0,yc=mc=null,vc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-be(r),o=1<<i;t|=e[i],r&=~o}return cc=t,xr(),n}function Uc(e,t){Ji=null,D.H=ks,t===si?(t=fi(),ic=3):t===ai?(t=fi(),ic=4):ic=t===qs?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,oc=t,null===nc&&(uc=1,zs(e,Rr(t,e.current)))}function Bc(){var e=D.H;return D.H=ks,null===e?ks:e}function qc(){var e=D.A;return D.A=$l,e}function Hc(){uc=4,sc||(4194176&rc)!==rc&&null!==Ni.current||(ac=!0),0===(134217727&hc)&&0===(134217727&dc)||null===tc||Fc(tc,rc,pc,!1)}function Wc(e,t,n){var r=ec;ec|=2;var i=Bc(),o=qc();tc===e&&rc===t||(_c=null,jc(e,t)),t=!1;var s=uc;e:for(;;)try{if(0!==ic&&null!==nc){var a=nc,l=oc;switch(ic){case 8:Vc(),s=6;break e;case 3:case 2:case 6:null===Ni.current&&(t=!0);var c=ic;if(ic=0,oc=null,Xc(e,a,l,c),n&&ac){s=0;break e}break;default:c=ic,ic=0,oc=null,Xc(e,a,l,c)}}Kc(),s=uc;break}catch(u){Uc(e,u)}return t&&e.shellSuspendCounter++,ya=ma=null,ec=r,D.H=i,D.A=o,null===nc&&(tc=null,rc=0,xr()),s}function Kc(){for(;null!==nc;)Gc(nc)}function Yc(){for(;null!==nc&&!se();)Gc(nc)}function Gc(e){var t=pa(e.alternate,e,cc);e.memoizedProps=e.pendingProps,null===t?Zc(e):nc=t}function Qc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Js(n,t,t.pendingProps,t.type,void 0,rc);break;case 11:t=Js(n,t,t.pendingProps,t.type.render,t.ref,rc);break;case 5:vo(t);default:Zl(n,t),t=pa(n,t=nc=zl(t,cc),cc)}e.memoizedProps=e.pendingProps,null===t?Zc(e):nc=t}function Xc(e,t,n,r){ya=ma=null,vo(t),pi=null,gi=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Sa(t,n,i,!0),null!==(n=Ni.current)){switch(n.tag){case 13:return null===Ii?Hc():null===n.alternate&&0===uc&&(uc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===li?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),iu(e,r,i)),!1;case 22:return n.flags|=65536,r===li?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),iu(e,r,i)),!1}throw Error(s(435,n.tag))}return iu(e,r,i),Hc(),!1}if(Xr)return null!==(t=Ni.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==Jr&&oi(Rr(e=Error(s(422),{cause:r}),n))):(r!==Jr&&oi(Rr(t=Error(s(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Rr(r,n),Ra(e,i=js(e.stateNode,r,i)),4!==uc&&(uc=2)),!1;var o=Error(s(520),{cause:r});if(o=Rr(o,n),null===mc?mc=[o]:mc.push(o),4!==uc&&(uc=2),null===t)return!0;r=Rr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,Ra(n,e=js(n.stateNode,r,e)),!1;case 1:if(t=n.type,o=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==o&&"function"===typeof o.componentDidCatch&&(null===Sc||!Sc.has(o))))return n.flags|=65536,i&=-i,n.lanes|=i,Bs(i=Us(i),e,n,r),Ra(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,rc))return uc=1,zs(e,Rr(n,e.current)),void(nc=null)}catch(o){if(null!==i)throw nc=i,o;return uc=1,zs(e,Rr(n,e.current)),void(nc=null)}32768&t.flags?(Xr||1===r?e=!0:ac||0!==(536870912&rc)?e=!1:(sc=e=!0,(2===r||3===r||6===r)&&(null!==(r=Ni.current)&&13===r.tag&&(r.flags|=16384))),$c(t,e)):Zc(t)}function Zc(e){var t=e;do{if(0!==(32768&t.flags))return void $c(t,sc);e=t.return;var n=Ql(t.alternate,t,cc);if(null!==n)return void(nc=n);if(null!==(t=t.sibling))return void(nc=t);nc=t=e}while(null!==t);0===uc&&(uc=5)}function $c(e,t){do{var n=Xl(e.alternate,e);if(null!==n)return n.flags&=32767,void(nc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(nc=e);nc=e=n}while(null!==e);uc=6,nc=null}function Jc(e,t,n,r,i,o,a,l,c,u){var h=D.T,d=B.p;try{B.p=2,D.T=null,function(e,t,n,r,i,o,a,l){do{tu()}while(null!==Ec);if(0!==(6&ec))throw Error(s(327));var c=e.finishedWork;if(r=e.finishedLanes,null===c)return null;if(e.finishedWork=null,e.finishedLanes=0,c===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var u=c.lanes|c.childLanes;if(function(e,t,n,r,i,o){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var u=31-be(n),h=1<<u;a[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var f=d[u];null!==f&&(f.lane&=-536870913)}n&=~h}0!==r&&Me(e,r,0),0!==o&&0===i&&0!==e.tag&&(e.suspendedLanes|=o&~(s&~t))}(e,r,u|=kr,o,a,l),e===tc&&(nc=tc=null,rc=0),0===(10256&c.subtreeFlags)&&0===(10256&c.flags)||Cc||(Cc=!0,xc=u,Tc=n,function(e,t){ie(e,t)}(de,(function(){return tu(),null}))),n=0!==(15990&c.flags),0!==(15990&c.subtreeFlags)||n?(n=D.T,D.T=null,o=B.p,B.p=2,a=ec,ec|=4,function(e,t){if(e=e.containerInfo,Yu=Hh,er(e=Jn(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(m){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gu={focusedElem:e,selectionRange:n},Hh=!1,nl=t;null!==nl;)if(e=(t=nl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,nl=e;else for(;null!==nl;){switch(o=(t=nl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==o){e=void 0,n=t,i=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var g=Ms(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(g,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){ru(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))sh(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":sh(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,nl=e;break}nl=t.return}g=rl,rl=!1}(e,c),pl(c,e),tr(Gu,e.containerInfo),Hh=!!Yu,Gu=Yu=null,e.current=c,il(e,c.alternate,c),ae(),ec=a,B.p=o,D.T=n):e.current=c,Cc?(Cc=!1,Ec=e,kc=r):eu(e,u),u=e.pendingLanes,0===u&&(Sc=null),function(e){if(ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,e,void 0,128===(128&e.current.flags))}catch(t){}}(c.stateNode),gu(e),null!==t)for(i=e.onRecoverableError,c=0;c<t.length;c++)u=t[c],i(u.value,{componentStack:u.stack});0!==(3&kc)&&tu(),u=e.pendingLanes,0!==(4194218&r)&&0!==(42&u)?e===Ic?Nc++:(Nc=0,Ic=e):Nc=0,mu(0,!1)}(e,t,n,r,d,i,o,a)}finally{D.T=h,B.p=d}}function eu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ui(t)))}function tu(){if(null!==Ec){var e=Ec,t=xc;xc=0;var n=Oe(kc),r=D.T,i=B.p;try{if(B.p=32>n?32:n,D.T=null,null===Ec)var o=!1;else{n=Tc,Tc=null;var a=Ec,l=kc;if(Ec=null,kc=0,0!==(6&ec))throw Error(s(331));var c=ec;if(ec|=4,Al(a.current),Cl(a,a.current,l,n),ec=c,mu(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,a)}catch(u){}o=!0}return o}finally{B.p=i,D.T=r,eu(e,t)}}return!1}function nu(e,t,n){t=Rr(n,t),null!==(e=Pa(e,t=js(e.stateNode,t,2),2))&&(Pe(e,2),gu(e))}function ru(e,t,n){if(3===e.tag)nu(e,e,n);else for(;null!==t;){if(3===t.tag){nu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Sc||!Sc.has(r))){e=Rr(n,e),null!==(r=Pa(t,n=Us(2),2))&&(Bs(n,r,t,e),Pe(r,2),gu(r));break}}t=t.return}}function iu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Jl;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(lc=!0,i.add(n),e=ou.bind(null,e,t,n),t.then(e,e))}function ou(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,tc===e&&(rc&n)===n&&(4===uc||3===uc&&(62914560&rc)===rc&&300>le()-wc?0===(2&ec)&&jc(e,0):fc|=n,gc===rc&&(gc=0)),gu(e)}function su(e,t){0===t&&(t=De()),null!==(e=Ir(e,t))&&(Pe(e,t),gu(e))}function au(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),su(e,n)}function lu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==r&&r.delete(t),su(e,n)}var cu=null,uu=null,hu=!1,du=!1,fu=!1,pu=0;function gu(e){e!==uu&&null===e.next&&(null===uu?cu=uu=e:uu=uu.next=e),du=!0,hu||(hu=!0,function(e){rh((function(){0!==(6&ec)?ie(ue,e):e()}))}(yu))}function mu(e,t){if(!fu&&du){fu=!0;do{for(var n=!1,r=cu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var o=0;else{var s=r.suspendedLanes,a=r.pingedLanes;o=(1<<31-be(42|e)+1)-1,o=201326677&(o&=i&~(s&~a))?201326677&o|1:o?2|o:0}0!==o&&(n=!0,bu(r,o))}else o=rc,0===(3&(o=xe(r,r===tc?o:0)))||Te(r,o)||(n=!0,bu(r,o));r=r.next}}while(n);fu=!1}}function yu(){du=hu=!1;var e=0;0!==pu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==Ju&&(Ju=e,!0);return Ju=null,!1}()&&(e=pu),pu=0);for(var t=le(),n=null,r=cu;null!==r;){var i=r.next,o=vu(r,t);0===o?(r.next=null,null===n?cu=i:n.next=i,null===i&&(uu=n)):(n=r,(0!==e||0!==(3&o))&&(du=!0)),r=i}mu(e,!1)}function vu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var s=31-be(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=Ne(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}if(n=rc,n=xe(e,e===(t=tc)?n:0),r=e.callbackNode,0===n||e===t&&2===ic||null!==e.cancelPendingCommit)return null!==r&&null!==r&&oe(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Te(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&oe(r),Oe(n)){case 2:case 8:n=he;break;case 32:default:n=de;break;case 268435456:n=pe}return r=wu.bind(null,e),n=ie(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&oe(r),e.callbackPriority=2,e.callbackNode=null,2}function wu(e,t){var n=e.callbackNode;if(tu()&&e.callbackNode!==n)return null;var r=rc;return 0===(r=xe(e,e===tc?r:0))?null:(Mc(e,r,t),vu(e,le()),null!=e.callbackNode&&e.callbackNode===n?wu.bind(null,e):null)}function bu(e,t){if(tu())return null;Mc(e,t,!0)}function _u(){return 0===pu&&(pu=Ie()),pu}function Su(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:It(""+e)}function Cu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Eu=0;Eu<_r.length;Eu++){var ku=_r[Eu];Sr(ku.toLowerCase(),"on"+(ku[0].toUpperCase()+ku.slice(1)))}Sr(fr,"onAnimationEnd"),Sr(pr,"onAnimationIteration"),Sr(gr,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(mr,"onTransitionRun"),Sr(yr,"onTransitionStart"),Sr(vr,"onTransitionCancel"),Sr(wr,"onTransitionEnd"),tt("onMouseEnter",["mouseout","mouseover"]),tt("onMouseLeave",["mouseout","mouseover"]),tt("onPointerEnter",["pointerout","pointerover"]),tt("onPointerLeave",["pointerout","pointerover"]),et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),et("onBeforeInput",["compositionend","keypress","textInput","paste"]),et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xu));function Nu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;o=a,i.currentTarget=c;try{o(i)}catch(u){Rs(u)}i.currentTarget=null,o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;o=a,i.currentTarget=c;try{o(i)}catch(u){Rs(u)}i.currentTarget=null,o=l}}}}function Iu(e,t){var n=t[Ue];void 0===n&&(n=t[Ue]=new Set);var r=e+"__bubble";n.has(r)||(Mu(t,e,2,!1),n.add(r))}function Du(e,t,n){var r=0;t&&(r|=4),Mu(n,e,r,t)}var Au="_reactListening"+Math.random().toString(36).slice(2);function Pu(e){if(!e[Au]){e[Au]=!0,$e.forEach((function(t){"selectionchange"!==t&&(Tu.has(t)||Du(t,!1,e),Du(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Au]||(t[Au]=!0,Du("selectionchange",!1,t))}}function Mu(e,t,n,r){switch(Zh(t)){case 2:var i=Wh;break;case 8:i=Kh;break;default:i=Yh}n=i.bind(null,t,n,e),i=void 0,!zt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ru(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=Ye(a)))return;if(5===(l=s.tag)||6===l||26===l||27===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Lt((function(){var r=o,i=At(n),s=[];e:{var a=br.get(e);if(void 0!==a){var l=$t,c=e;switch(e){case"keypress":if(0===Ht(n))break e;case"keydown":case"keyup":l=pn;break;case"focusin":c="focus",l=on;break;case"focusout":c="blur",l=on;break;case"beforeblur":case"afterblur":l=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=mn;break;case fr:case pr:case gr:l=sn;break;case wr:l=yn;break;case"scroll":case"scrollend":l=en;break;case"wheel":l=vn;break;case"copy":case"cut":case"paste":l=an;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=gn;break;case"toggle":case"beforetoggle":l=wn}var u=0!==(4&t),h=!u&&("scroll"===e||"scrollend"===e),d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var g=p;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===d||null!=(g=Ft(p,d))&&u.push(Ou(p,g,f)),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Dt||!(c=n.relatedTarget||n.fromElement)||!Ye(c)&&!c[je])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?Ye(c):null)&&(h=F(c),u=c.tag,c!==h||5!==u&&27!==u&&6!==u)&&(c=null)):(l=null,c=r),l!==c)){if(u=nn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=gn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:Qe(l),f=null==c?a:Qe(c),(a=new u(g,p+"leave",l,n,i)).target=h,a.relatedTarget=f,g=null,Ye(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Fu(f))p++;for(f=0,g=d;g;g=Fu(g))f++;for(;0<p-f;)u=Fu(u),p--;for(;0<f-p;)d=Fu(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Fu(u),d=Fu(d)}u=null}else u=null;null!==l&&zu(s,a,l,u,!1),null!==c&&null!==h&&zu(s,h,c,u,!0)}if("select"===(l=(a=r?Qe(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Fn;else if(An(a))if(zn)m=Yn;else{m=Wn;var y=Hn}else!(l=a.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&xt(r.elementType)&&(m=Fn):m=Kn;switch(m&&(m=m(e,r))?Pn(s,m,n,i):(y&&y(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&vt(a,"number",a.value)),y=r?Qe(r):window,e){case"focusin":(An(y)||"true"===y.contentEditable)&&(rr=y,ir=r,or=null);break;case"focusout":or=ir=rr=null;break;case"mousedown":sr=!0;break;case"contextmenu":case"mouseup":case"dragend":sr=!1,ar(s,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":ar(s,n,i)}var v;if(_n)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else In?Tn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(En&&"ko"!==n.locale&&(In||"onCompositionStart"!==w?"onCompositionEnd"===w&&In&&(v=qt()):(Ut="value"in(jt=i)?jt.value:jt.textContent,In=!0)),0<(y=Lu(r,w)).length&&(w=new ln(w,e,null,n,i),s.push({event:w,listeners:y}),v?w.data=v:null!==(v=Nn(n))&&(w.data=v))),(v=Cn?function(e,t){switch(e){case"compositionend":return Nn(t);case"keypress":return 32!==t.which?null:(xn=!0,kn);case"textInput":return(e=t.data)===kn&&xn?null:e;default:return null}}(e,n):function(e,t){if(In)return"compositionend"===e||!_n&&Tn(e,t)?(e=qt(),Bt=Ut=jt=null,In=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return En&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=Lu(r,"onBeforeInput")).length&&(y=new ln("onBeforeInput","beforeinput",null,n,i),s.push({event:y,listeners:w}),y.data=v)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var o=Su((i[Ve]||null).action),s=r.submitter;s&&null!==(t=(t=s[Ve]||null)?Su(t.formAction):s.getAttribute("formAction"))&&(o=t,s=null);var a=new $t("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==pu){var e=s?Cu(i,s):new FormData(i);hs(n,{pending:!0,data:e,method:i.method,action:o},null,e)}}else"function"===typeof o&&(a.preventDefault(),e=s?Cu(i,s):new FormData(i),hs(n,{pending:!0,data:e,method:i.method,action:o},o,e))},currentTarget:i}]})}}(s,e,r,n,i)}Nu(s,t)}))}function Ou(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Lu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5!==(i=i.tag)&&26!==i&&27!==i||null===o||(null!=(i=Ft(e,n))&&r.unshift(Ou(e,i,o)),null!=(i=Ft(e,t))&&r.push(Ou(e,i,o))),e=e.return}return r}function Fu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function zu(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,i?null!=(c=Ft(n,o))&&s.unshift(Ou(n,c,l)):i||null!=(c=Ft(n,o))&&s.push(Ou(n,c,l))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Vu=/\r\n?/g,ju=/\u0000|\uFFFD/g;function Uu(e){return("string"===typeof e?e:""+e).replace(Vu,"\n").replace(ju,"")}function Bu(e,t){return t=Uu(t),Uu(e)===t}function qu(){}function Hu(e,t,n,r,i,o){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||St(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&St(e,""+r);break;case"className":at(e,"class",r);break;case"tabIndex":at(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":at(e,n,r);break;case"style":kt(e,r,o);break;case"data":if("object"!==t){at(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof o&&("formAction"===n?("input"!==t&&Hu(e,t,"name",i.name,i,null),Hu(e,t,"formEncType",i.formEncType,i,null),Hu(e,t,"formMethod",i.formMethod,i,null),Hu(e,t,"formTarget",i.formTarget,i,null)):(Hu(e,t,"encType",i.encType,i,null),Hu(e,t,"method",i.method,i,null),Hu(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=qu);break;case"onScroll":null!=r&&Iu("scroll",e);break;case"onScrollEnd":null!=r&&Iu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=It(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Iu("beforetoggle",e),Iu("toggle",e),st(e,"popover",r);break;case"xlinkActuate":lt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":lt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":lt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":lt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":lt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":lt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":lt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":lt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":lt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":st(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&st(e,n=Tt.get(n)||n,r)}}function Wu(e,t,n,r,i,o){switch(n){case"style":kt(e,r,o);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"===typeof r?St(e,r):("number"===typeof r||"bigint"===typeof r)&&St(e,""+r);break;case"onScroll":null!=r&&Iu("scroll",e);break;case"onScrollEnd":null!=r&&Iu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=qu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Je.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(o=null!=(o=e[Ve]||null)?o[n]:null)&&e.removeEventListener(t,o,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):st(e,n,r):("function"!==typeof o&&null!==o&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function Ku(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Iu("error",e),Iu("load",e);var r,i=!1,o=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Hu(e,t,r,a,n,null)}}return o&&Hu(e,t,"srcSet",n.srcSet,n,null),void(i&&Hu(e,t,"src",n.src,n,null));case"input":Iu("invalid",e);var l=r=a=o=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(null!=h)switch(i){case"name":o=h;break;case"type":a=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(s(137,t));break;default:Hu(e,t,i,h,n,null)}}return yt(e,r,l,c,u,a,o,!1),void ht(e);case"select":for(o in Iu("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Hu(e,t,o,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?wt(e,!!i,t,!1):null!=n&&wt(e,!!i,n,!0));case"textarea":for(a in Iu("invalid",e),r=o=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":o=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:Hu(e,t,a,l,n,null)}return _t(e,i,o,r),void ht(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Hu(e,t,c,i,n,null);return;case"dialog":Iu("cancel",e),Iu("close",e);break;case"iframe":case"object":Iu("load",e);break;case"video":case"audio":for(i=0;i<xu.length;i++)Iu(xu[i],e);break;case"image":Iu("error",e),Iu("load",e);break;case"details":Iu("toggle",e);break;case"embed":case"source":case"link":Iu("error",e),Iu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Hu(e,t,u,i,n,null)}return;default:if(xt(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(i=n[h])&&Wu(e,t,h,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Hu(e,t,l,i,n,null))}var Yu=null,Gu=null;function Qu(e){return 9===e.nodeType?e:e.ownerDocument}function Xu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zu(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function $u(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Ju=null;var eh="function"===typeof setTimeout?setTimeout:void 0,th="function"===typeof clearTimeout?clearTimeout:void 0,nh="function"===typeof Promise?Promise:void 0,rh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nh?function(e){return nh.resolve(null).then(e).catch(ih)}:eh;function ih(e){setTimeout((function(){throw e}))}function oh(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void gd(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);gd(t)}function sh(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":sh(n),Ke(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function ah(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}function lh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function ch(e,t,n){switch(t=Qu(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}var uh=new Map,hh=new Set;function dh(e){return"function"===typeof e.getRootNode?e.getRootNode():e.ownerDocument}var fh=B.d;B.d={f:function(){var e=fh.f(),t=zc();return e||t},r:function(e){var t=Ge(e);null!==t&&5===t.tag&&"form"===t.type?fs(t):fh.r(e)},D:function(e){fh.D(e),gh("dns-prefetch",e,null)},C:function(e,t){fh.C(e,t),gh("preconnect",e,t)},L:function(e,t,n){fh.L(e,t,n);var r=ph;if(r&&e&&t){var i='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+gt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+gt(n.imageSizes)+'"]')):i+='[href="'+gt(e)+'"]';var o=i;switch(t){case"style":o=yh(e);break;case"script":o=bh(e)}uh.has(o)||(e=A({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),uh.set(o,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(vh(o))||"script"===t&&r.querySelector(_h(o))||(Ku(t=r.createElement("link"),"link",e),Ze(t),r.head.appendChild(t)))}},m:function(e,t){fh.m(e,t);var n=ph;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+gt(r)+'"][href="'+gt(e)+'"]',o=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=bh(e)}if(!uh.has(o)&&(e=A({rel:"modulepreload",href:e},t),uh.set(o,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(_h(o)))return}Ku(r=n.createElement("link"),"link",e),Ze(r),n.head.appendChild(r)}}},X:function(e,t){fh.X(e,t);var n=ph;if(n&&e){var r=Xe(n).hoistableScripts,i=bh(e),o=r.get(i);o||((o=n.querySelector(_h(i)))||(e=A({src:e,async:!0},t),(t=uh.get(i))&&kh(e,t),Ze(o=n.createElement("script")),Ku(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}},S:function(e,t,n){fh.S(e,t,n);var r=ph;if(r&&e){var i=Xe(r).hoistableStyles,o=yh(e);t=t||"default";var s=i.get(o);if(!s){var a={loading:0,preload:null};if(s=r.querySelector(vh(o)))a.loading=5;else{e=A({rel:"stylesheet",href:e,"data-precedence":t},n),(n=uh.get(o))&&Eh(e,n);var l=s=r.createElement("link");Ze(l),Ku(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){a.loading|=1})),l.addEventListener("error",(function(){a.loading|=2})),a.loading|=4,Ch(s,t,r)}s={type:"stylesheet",instance:s,count:1,state:a},i.set(o,s)}}},M:function(e,t){fh.M(e,t);var n=ph;if(n&&e){var r=Xe(n).hoistableScripts,i=bh(e),o=r.get(i);o||((o=n.querySelector(_h(i)))||(e=A({src:e,async:!0,type:"module"},t),(t=uh.get(i))&&kh(e,t),Ze(o=n.createElement("script")),Ku(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}}};var ph="undefined"===typeof document?null:document;function gh(e,t,n){var r=ph;if(r&&"string"===typeof t&&t){var i=gt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),hh.has(i)||(hh.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(Ku(t=r.createElement("link"),"link",e),Ze(t),r.head.appendChild(t)))}}function mh(e,t,n,r){var i,o,a,l,c=(c=Z.current)?dh(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=yh(n.href),(r=(n=Xe(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=yh(n.href);var u=Xe(c).hoistableStyles,h=u.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=c.querySelector(vh(e)))&&!u._p&&(h.instance=u,h.state.loading=5),uh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},uh.set(e,n),u||(i=c,o=e,a=n,l=h.state,i.querySelector('link[rel="preload"][as="style"]['+o+"]")?l.loading=1:(o=i.createElement("link"),l.preload=o,o.addEventListener("load",(function(){return l.loading|=1})),o.addEventListener("error",(function(){return l.loading|=2})),Ku(o,"link",a),Ze(o),i.head.appendChild(o))))),t&&null===r)throw Error(s(528,""));return h}if(t&&null!==r)throw Error(s(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=bh(n),(r=(n=Xe(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function yh(e){return'href="'+gt(e)+'"'}function vh(e){return'link[rel="stylesheet"]['+e+"]"}function wh(e){return A({},e,{"data-precedence":e.precedence,precedence:null})}function bh(e){return'[src="'+gt(e)+'"]'}function _h(e){return"script[async]"+e}function Sh(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+gt(n.href)+'"]');if(r)return t.instance=r,Ze(r),r;var i=A({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ze(r=(e.ownerDocument||e).createElement("style")),Ku(r,"style",i),Ch(r,n.precedence,e),t.instance=r;case"stylesheet":i=yh(n.href);var o=e.querySelector(vh(i));if(o)return t.state.loading|=4,t.instance=o,Ze(o),o;r=wh(n),(i=uh.get(i))&&Eh(r,i),Ze(o=(e.ownerDocument||e).createElement("link"));var a=o;return a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),Ku(o,"link",r),t.state.loading|=4,Ch(o,n.precedence,e),t.instance=o;case"script":return o=bh(n.src),(i=e.querySelector(_h(o)))?(t.instance=i,Ze(i),i):(r=n,(i=uh.get(o))&&kh(r=A({},n),i),Ze(i=(e=e.ownerDocument||e).createElement("script")),Ku(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Ch(r,n.precedence,e));return t.instance}function Ch(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,o=i,s=0;s<r.length;s++){var a=r[s];if(a.dataset.precedence===t)o=a;else if(o!==i)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function kh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var xh=null;function Th(e,t,n){if(null===xh){var r=new Map,i=xh=new Map;i.set(n,r)}else(r=(i=xh).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var o=n[i];if(!(o[We]||o[ze]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var s=o.getAttribute(t)||"";s=e+s;var a=r.get(s);a?a.push(o):r.set(s,[o])}}return r}function Nh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Ih(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Dh=null;function Ah(){}function Ph(){if(this.count--,0===this.count)if(this.stylesheets)Rh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Mh=null;function Rh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Mh=new Map,t.forEach(Oh,e),Mh=null,Ph.call(e))}function Oh(e,t){if(!(4&t.state.loading)){var n=Mh.get(e);if(n)var r=n.get(null);else{n=new Map,Mh.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var s=i[o];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}s=(i=t.instance).getAttribute("data-precedence"),(o=n.get(s)||r)===r&&n.set(null,i),n.set(s,i),this.count++,r=Ph.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),o?o.parentNode.insertBefore(i,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Lh={$$typeof:m,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function Fh(e,t,n,r,i,o,s,a){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function zh(e,t,n,r,i,o,s,a,l,c,u,h){return e=new Fh(e,t,n,s,a,l,c,h),t=1,!0===o&&(t|=24),o=Ol(3,null,null,t),e.current=o,o.stateNode=e,(t=ji()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},Ia(o),e}function Vh(e){return e?e=Pr:Pr}function jh(e,t,n,r,i,o){i=Vh(i),null===r.context?r.context=i:r.pendingContext=i,(r=Aa(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=Pa(e,r,t))&&(Pc(n,0,t),Ma(n,e,t))}function Uh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Bh(e,t){Uh(e,t),(e=e.alternate)&&Uh(e,t)}function qh(e){if(13===e.tag){var t=Ir(e,67108864);null!==t&&Pc(t,0,67108864),Bh(e,67108864)}}var Hh=!0;function Wh(e,t,n,r){var i=D.T;D.T=null;var o=B.p;try{B.p=2,Yh(e,t,n,r)}finally{B.p=o,D.T=i}}function Kh(e,t,n,r){var i=D.T;D.T=null;var o=B.p;try{B.p=8,Yh(e,t,n,r)}finally{B.p=o,D.T=i}}function Yh(e,t,n,r){if(Hh){var i=Gh(r);if(null===i)Ru(e,t,r,Qh,n),sd(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Jh=ad(Jh,e,t,n,r,i),!0;case"dragenter":return ed=ad(ed,e,t,n,r,i),!0;case"mouseover":return td=ad(td,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return nd.set(o,ad(nd.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,rd.set(o,ad(rd.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(sd(e,r),4&t&&-1<od.indexOf(e)){for(;null!==i;){var o=Ge(i);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var s=ke(o.pendingLanes);if(0!==s){var a=o;for(a.pendingLanes|=2,a.entangledLanes|=2;s;){var l=1<<31-be(s);a.entanglements[1]|=l,s&=~l}gu(o),0===(6&ec)&&(bc=le()+500,mu(0,!1))}}break;case 13:null!==(a=Ir(o,2))&&Pc(a,0,2),zc(),Bh(o,2)}if(null===(o=Gh(r))&&Ru(e,t,r,Qh,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Ru(e,t,r,null,n)}}function Gh(e){return Xh(e=At(e))}var Qh=null;function Xh(e){if(Qh=null,null!==(e=Ye(e))){var t=F(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=z(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Qh=e,null}function Zh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case he:return 8;case de:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var $h=!1,Jh=null,ed=null,td=null,nd=new Map,rd=new Map,id=[],od="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sd(e,t){switch(e){case"focusin":case"focusout":Jh=null;break;case"dragenter":case"dragleave":ed=null;break;case"mouseover":case"mouseout":td=null;break;case"pointerover":case"pointerout":nd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rd.delete(t.pointerId)}}function ad(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=Ge(t))&&qh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function ld(e){var t=Ye(e.target);if(null!==t){var n=F(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=z(n)))return e.blockedOn=t,void function(e,t){var n=B.p;try{return B.p=e,t()}finally{B.p=n}}(e.priority,(function(){if(13===n.tag){var e=Dc(),t=Ir(n,e);null!==t&&Pc(t,0,e),Bh(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function cd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gh(e.nativeEvent);if(null!==n)return null!==(t=Ge(n))&&qh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Dt=r,n.target.dispatchEvent(r),Dt=null,t.shift()}return!0}function ud(e,t,n){cd(e)&&n.delete(t)}function hd(){$h=!1,null!==Jh&&cd(Jh)&&(Jh=null),null!==ed&&cd(ed)&&(ed=null),null!==td&&cd(td)&&(td=null),nd.forEach(ud),rd.forEach(ud)}function dd(e,t){e.blockedOn===t&&(e.blockedOn=null,$h||($h=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,hd)))}var fd=null;function pd(e){fd!==e&&(fd=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){fd===e&&(fd=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===Xh(r||n))continue;break}var o=Ge(n);null!==o&&(e.splice(t,3),t-=3,hs(o,{pending:!0,data:i,method:n.method,action:r},r,i))}})))}function gd(e){function t(t){return dd(t,e)}null!==Jh&&dd(Jh,e),null!==ed&&dd(ed,e),null!==td&&dd(td,e),nd.forEach(t),rd.forEach(t);for(var n=0;n<id.length;n++){var r=id[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<id.length&&null===(n=id[0]).blockedOn;)ld(n),null===n.blockedOn&&id.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],o=n[r+1],s=i[Ve]||null;if("function"===typeof o)s||pd(n);else if(s){var a=null;if(o&&o.hasAttribute("formAction")){if(i=o,s=o[Ve]||null)a=s.formAction;else if(null!==Xh(i))continue}else a=s.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),pd(n)}}}function md(e){this._internalRoot=e}function yd(e){this._internalRoot=e}yd.prototype.render=md.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));jh(t.current,Dc(),e,t,null,null)},yd.prototype.unmount=md.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;0===e.tag&&tu(),jh(e.current,2,null,e,null,null),zc(),t[je]=null}},yd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Le();e={blockedOn:null,target:e,priority:t};for(var n=0;n<id.length&&0!==t&&t<id[n].priority;n++);id.splice(n,0,e),0===n&&ld(e)}};var vd=i.version;if("19.0.0"!==vd)throw Error(s(527,vd,"19.0.0"));B.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=F(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return V(i),e;if(o===r)return V(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?j(e):null)?null:e.stateNode};var wd={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:D,findFiberByHostInstance:Ye,reconcilerVersion:"19.0.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var bd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bd.isDisabled&&bd.supportsFiber)try{ye=bd.inject(wd),ve=bd}catch(Sd){}}t.createRoot=function(e,t){if(!a(e))throw Error(s(299));var n=!1,r="",i=Os,o=Ls,l=Fs;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=zh(e,1,!1,null,0,n,r,i,o,l,0,null),e[je]=t.current,Pu(8===e.nodeType?e.parentNode:e),new md(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(s(299));var r=!1,i="",o=Os,l=Ls,c=Fs,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=zh(e,1,!0,t,0,r,i,o,l,c,0,u)).context=Vh(null),n=t.current,(i=Aa(r=Dc())).callback=null,Pa(n,i,r),t.current.lanes=r,Pe(t,r),gu(t),e[je]=t.current,Pu(e),new yd(t)},t.version="19.0.0"},432:(e,t,n)=>{var r=n(643);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(i(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=n,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,o="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:o}):"script"===n&&s.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:o,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);s.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.0.0"},367:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(532)},766:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(432)},935:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var o in r={},t)"key"!==o&&(r[o]=t[o]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},152:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,g(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,S={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function E(e,t,r,i,o,s){return r=s.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:s}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var x=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(){}function I(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case d:return I((u=e._init)(e._payload),t,i,o,s)}}if(u)return s=s(e),u=""===o?"."+T(e,0):o,_(s)?(i="",null!=u&&(i=u.replace(x,"$&/")+"/"),I(s,t,i,"",(function(e){return e}))):null!=s&&(k(s)&&(l=s,c=i+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(x,"$&/")+"/")+u,s=E(l.type,c,void 0,0,0,l.props)),t.push(s)),1;u=0;var h,p=""===o?".":o+":";if(_(e))for(var g=0;g<e.length;g++)u+=I(o=e[g],t,i,a=p+T(o,g),s);else if("function"===typeof(g=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=f&&h[f]||h["@@iterator"])?h:null))for(e=g.call(e),g=0;!(o=e.next()).done;)u+=I(o=o.value,t,i,a=p+T(o,g++),s);else if("object"===a){if("function"===typeof e.then)return I(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(N,N):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,o,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function D(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function M(){}t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=w,t.StrictMode=o,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.act=function(){throw Error("act(...) is not supported in production builds of React.")},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key;if(null!=t)for(o in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!C.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var s=Array(o),a=0;a<o;a++)s[a]=arguments[a+2];r.children=s}return E(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,i={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)C.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return E(e,o,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),i=S.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(M,P)}catch(o){P(o)}finally{S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return S.H.useEffect(e,t)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.0.0"},643:(e,t,n)=>{e.exports=n(152)},507:(e,t,n)=>{e.exports=n(935)},752:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(m=!1,b(e),!g)if(null!==r(c))g=!0,A();else{var t=r(u);null!==t&&P(_,t.startTime-e)}}var S,C=!1,E=-1,k=5,x=-1;function T(){return!(t.unstable_now()-x<k)}function N(){if(C){var e=t.unstable_now();x=e;var n=!0;try{e:{g=!1,m&&(m=!1,v(E),E=-1),p=!0;var o=f;try{t:{for(b(e),d=r(c);null!==d&&!(d.expirationTime>e&&T());){var s=d.callback;if("function"===typeof s){d.callback=null,f=d.priorityLevel;var a=s(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){d.callback=a,b(e),n=!0;break t}d===r(c)&&i(c),b(e)}else i(c);d=r(c)}if(null!==d)n=!0;else{var l=r(u);null!==l&&P(_,l.startTime-e),n=!1}}break e}finally{d=null,f=o,p=!1}n=void 0}}finally{n?S():C=!1}}}if("function"===typeof w)S=function(){w(N)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,D=I.port2;I.port1.onmessage=N,S=function(){D.postMessage(null)}}else S=function(){y(N,0)};function A(){C||(C=!0,S())}function P(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,A())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(m?(v(E),E=-1):m=!0,P(_,o-s))):(e.sortIndex=a,n(c,e),g||p||(g=!0,A())),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},261:(e,t,n)=>{e.exports=n(752)},234:(e,t,n)=>{var r=n(643);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useState,s=r.useEffect,a=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return a((function(){i.value=n,i.getSnapshot=t,c(i)&&u({inst:i})}),[e,n,t]),s((function(){return c(i)&&u({inst:i}),e((function(){c(i)&&u({inst:i})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},293:(e,t,n)=>{var r=n(643),i=n(277);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=i.useSyncExternalStore,a=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=a(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=c((function(){function e(e){if(!l){if(l=!0,s=e,e=r(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return a=t}return a=e}if(t=a,o(s,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(s=e,t):(s=e,a=n)}var s,a,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var f=s(e,h[0],h[1]);return l((function(){d.hasValue=!0,d.value=f}),[f]),u(f),f}},277:(e,t,n)=>{e.exports=n(234)},755:(e,t,n)=>{e.exports=n(293)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".577f6119.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="test-app:";n.l=(r,i,o,s)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+o){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=o);var s=n.p+n.u(t),a=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,o,s=r[0],a=r[1],l=r[2],c=0;if(s.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunktest_app=self.webpackChunktest_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(643),i=n(367);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function a(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var h=n(507);function d(e){if("string"===typeof e||"number"===typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,r=0;r<e.length;r++)""!==(n=d(e[r]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var f={value:()=>{}};function p(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new g(r)}function g(e){this._=e}function m(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function y(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=f,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}g.prototype=p.prototype={constructor:g,on:function(e,t){var n,r,i=this._,o=(r=i,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),s=-1,a=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++s<a;)if(n=(e=o[s]).type)i[n]=y(i[n],e.name,t);else if(null==t)for(n in i)i[n]=y(i[n],e.name,null);return this}for(;++s<a;)if((n=(e=o[s]).type)&&(n=m(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new g(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};const v=p;function w(){}function b(e){return null==e?w:function(){return this.querySelector(e)}}function _(){return[]}function S(e){return null==e?_:function(){return this.querySelectorAll(e)}}function C(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}function E(e){return function(){return this.matches(e)}}function k(e){return function(t){return t.matches(e)}}var x=Array.prototype.find;function T(){return this.firstElementChild}var N=Array.prototype.filter;function I(){return Array.from(this.children)}function D(e){return new Array(e.length)}function A(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function P(e,t,n,r,i,o){for(var s,a=0,l=t.length,c=o.length;a<c;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new A(e,o[a]);for(;a<l;++a)(s=t[a])&&(i[a]=s)}function M(e,t,n,r,i,o,s){var a,l,c,u=new Map,h=t.length,d=o.length,f=new Array(h);for(a=0;a<h;++a)(l=t[a])&&(f[a]=c=s.call(l,l.__data__,a,t)+"",u.has(c)?i[a]=l:u.set(c,l));for(a=0;a<d;++a)c=s.call(e,o[a],a,o)+"",(l=u.get(c))?(r[a]=l,l.__data__=o[a],u.delete(c)):n[a]=new A(e,o[a]);for(a=0;a<h;++a)(l=t[a])&&u.get(f[a])===l&&(i[a]=l)}function R(e){return e.__data__}function O(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function L(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}A.prototype={constructor:A,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var F="http://www.w3.org/1999/xhtml";const z={svg:"http://www.w3.org/2000/svg",xhtml:F,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function V(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),z.hasOwnProperty(t)?{space:z[t],local:e}:e}function j(e){return function(){this.removeAttribute(e)}}function U(e){return function(){this.removeAttributeNS(e.space,e.local)}}function B(e,t){return function(){this.setAttribute(e,t)}}function q(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function H(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function W(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function K(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Y(e){return function(){this.style.removeProperty(e)}}function G(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Q(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function X(e,t){return e.style.getPropertyValue(t)||K(e).getComputedStyle(e,null).getPropertyValue(t)}function Z(e){return function(){delete this[e]}}function $(e,t){return function(){this[e]=t}}function J(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function ee(e){return e.trim().split(/^|\s+/)}function te(e){return e.classList||new ne(e)}function ne(e){this._node=e,this._names=ee(e.getAttribute("class")||"")}function re(e,t){for(var n=te(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ie(e,t){for(var n=te(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function oe(e){return function(){re(this,e)}}function se(e){return function(){ie(this,e)}}function ae(e,t){return function(){(t.apply(this,arguments)?re:ie)(this,e)}}function le(){this.textContent=""}function ce(e){return function(){this.textContent=e}}function ue(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function he(){this.innerHTML=""}function de(e){return function(){this.innerHTML=e}}function fe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function pe(){this.nextSibling&&this.parentNode.appendChild(this)}function ge(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function me(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===F&&t.documentElement.namespaceURI===F?t.createElement(e):t.createElementNS(n,e)}}function ye(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ve(e){var t=V(e);return(t.local?ye:me)(t)}function we(){return null}function be(){var e=this.parentNode;e&&e.removeChild(this)}function _e(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Se(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ce(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function Ee(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function ke(e,t,n){var r=K(e),i=r.CustomEvent;"function"===typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function xe(e,t){return function(){return ke(this,e,t)}}function Te(e,t){return function(){return ke(this,e,t.apply(this,arguments))}}ne.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Ne=[null];function Ie(e,t){this._groups=e,this._parents=t}function De(){return new Ie([[document.documentElement]],Ne)}Ie.prototype=De.prototype={constructor:Ie,select:function(e){"function"!==typeof e&&(e=b(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=t[i],l=a.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=a[u])&&(s=e.call(o,o.__data__,u,a))&&("__data__"in o&&(s.__data__=o.__data__),c[u]=s);return new Ie(r,this._parents)},selectAll:function(e){e="function"===typeof e?C(e):S(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s,a=t[o],l=a.length,c=0;c<l;++c)(s=a[c])&&(r.push(e.call(s,s.__data__,c,a)),i.push(s));return new Ie(r,i)},selectChild:function(e){return this.select(null==e?T:function(e){return function(){return x.call(this.children,e)}}("function"===typeof e?e:k(e)))},selectChildren:function(e){return this.selectAll(null==e?I:function(e){return function(){return N.call(this.children,e)}}("function"===typeof e?e:k(e)))},filter:function(e){"function"!==typeof e&&(e=E(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s=t[i],a=s.length,l=r[i]=[],c=0;c<a;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&l.push(o);return new Ie(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,R);var n=t?M:P,r=this._parents,i=this._groups;"function"!==typeof e&&(e=function(e){return function(){return e}}(e));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],h=i[c],d=h.length,f=O(e.call(u,u&&u.__data__,c,r)),p=f.length,g=a[c]=new Array(p),m=s[c]=new Array(p);n(u,h,g,m,l[c]=new Array(d),f,t);for(var y,v,w=0,b=0;w<p;++w)if(y=g[w]){for(w>=b&&(b=w+1);!(v=m[b])&&++b<p;);y._next=v||null}}return(s=new Ie(s,r))._enter=a,s._exit=l,s},enter:function(){return new Ie(this._enter||this._groups.map(D),this._parents)},exit:function(){return new Ie(this._exit||this._groups.map(D),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return"function"===typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var c,u=n[l],h=r[l],d=u.length,f=a[l]=new Array(d),p=0;p<d;++p)(c=u[p]||h[p])&&(f[p]=c);for(;l<i;++l)a[l]=n[l];return new Ie(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=L);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],l=a.length,c=i[o]=new Array(l),u=0;u<l;++u)(s=a[u])&&(c[u]=s);c.sort(t)}return new Ie(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],s=0,a=o.length;s<a;++s)(i=o[s])&&e.call(i,i.__data__,s,o);return this},attr:function(e,t){var n=V(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?U:j:"function"===typeof t?n.local?W:H:n.local?q:B)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Y:"function"===typeof t?Q:G)(e,t,null==n?"":n)):X(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Z:"function"===typeof t?J:$)(e,t)):this.node()[e]},classed:function(e,t){var n=ee(e+"");if(arguments.length<2){for(var r=te(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof t?ae:t?oe:se)(n,t))},text:function(e){return arguments.length?this.each(null==e?le:("function"===typeof e?ue:ce)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?he:("function"===typeof e?fe:de)(e)):this.node().innerHTML},raise:function(){return this.each(pe)},lower:function(){return this.each(ge)},append:function(e){var t="function"===typeof e?e:ve(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:ve(e),r=null==t?we:"function"===typeof t?t:b(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(be)},clone:function(e){return this.select(e?Se:_e)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),s=o.length;if(!(arguments.length<2)){for(a=t?Ee:Ce,r=0;r<s;++r)this.each(a(o[r],t,n));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(r=0,l=a[c];r<s;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"===typeof t?Te:xe)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,s=i.length;o<s;++o)(r=i[o])&&(yield r)}};const Ae=De;function Pe(e){return"string"===typeof e?new Ie([[document.querySelector(e)]],[document.documentElement]):new Ie([[e]],Ne)}function Me(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Re={passive:!1},Oe={capture:!0,passive:!1};function Le(e){e.stopImmediatePropagation()}function Fe(e){e.preventDefault(),e.stopImmediatePropagation()}function ze(e){var t=e.document.documentElement,n=Pe(e).on("dragstart.drag",Fe,Oe);"onselectstart"in t?n.on("selectstart.drag",Fe,Oe):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ve(e,t){var n=e.document.documentElement,r=Pe(e).on("dragstart.drag",null);t&&(r.on("click.drag",Fe,Oe),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const je=e=>()=>e;function Ue(e,t){let{sourceEvent:n,subject:r,target:i,identifier:o,active:s,x:a,y:l,dx:c,dy:u,dispatch:h}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}function Be(e){return!e.ctrlKey&&!e.button}function qe(){return this.parentNode}function He(e,t){return null==t?{x:e.x,y:e.y}:t}function We(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ke(){var e,t,n,r,i=Be,o=qe,s=He,a=We,l={},c=v("start","drag","end"),u=0,h=0;function d(e){e.on("mousedown.drag",f).filter(a).on("touchstart.drag",m).on("touchmove.drag",y,Re).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(s,a){if(!r&&i.call(this,s,a)){var l=b(this,o.call(this,s,a),s,a,"mouse");l&&(Pe(s.view).on("mousemove.drag",p,Oe).on("mouseup.drag",g,Oe),ze(s.view),Le(s),n=!1,e=s.clientX,t=s.clientY,l("start",s))}}function p(r){if(Fe(r),!n){var i=r.clientX-e,o=r.clientY-t;n=i*i+o*o>h}l.mouse("drag",r)}function g(e){Pe(e.view).on("mousemove.drag mouseup.drag",null),Ve(e.view,n),Fe(e),l.mouse("end",e)}function m(e,t){if(i.call(this,e,t)){var n,r,s=e.changedTouches,a=o.call(this,e,t),l=s.length;for(n=0;n<l;++n)(r=b(this,a,e,t,s[n].identifier,s[n]))&&(Le(e),r("start",e,s[n]))}}function y(e){var t,n,r=e.changedTouches,i=r.length;for(t=0;t<i;++t)(n=l[r[t].identifier])&&(Fe(e),n("drag",e,r[t]))}function w(e){var t,n,i=e.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<o;++t)(n=l[i[t].identifier])&&(Le(e),n("end",e,i[t]))}function b(e,t,n,r,i,o){var a,h,f,p=c.copy(),g=Me(o||n,t);if(null!=(f=s.call(e,new Ue("beforestart",{sourceEvent:n,target:d,identifier:i,active:u,x:g[0],y:g[1],dx:0,dy:0,dispatch:p}),r)))return a=f.x-g[0]||0,h=f.y-g[1]||0,function n(o,s,c){var m,y=g;switch(o){case"start":l[i]=n,m=u++;break;case"end":delete l[i],--u;case"drag":g=Me(c||s,t),m=u}p.call(o,e,new Ue(o,{sourceEvent:s,subject:f,target:d,identifier:i,active:m,x:g[0]+a,y:g[1]+h,dx:g[0]-y[0],dy:g[1]-y[1],dispatch:p}),r)}}return d.filter=function(e){return arguments.length?(i="function"===typeof e?e:je(!!e),d):i},d.container=function(e){return arguments.length?(o="function"===typeof e?e:je(e),d):o},d.subject=function(e){return arguments.length?(s="function"===typeof e?e:je(e),d):s},d.touchable=function(e){return arguments.length?(a="function"===typeof e?e:je(!!e),d):a},d.on=function(){var e=c.on.apply(c,arguments);return e===c?d:e},d.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,d):Math.sqrt(h)},d}Ue.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ye(e){return((e=Math.exp(e))+1/e)/2}const Ge=function e(t,n,r){function i(e,i){var o,s,a=e[0],l=e[1],c=e[2],u=i[0],h=i[1],d=i[2],f=u-a,p=h-l,g=f*f+p*p;if(g<1e-12)s=Math.log(d/c)/t,o=function(e){return[a+e*f,l+e*p,c*Math.exp(t*e*s)]};else{var m=Math.sqrt(g),y=(d*d-c*c+r*g)/(2*c*n*m),v=(d*d-c*c-r*g)/(2*d*n*m),w=Math.log(Math.sqrt(y*y+1)-y),b=Math.log(Math.sqrt(v*v+1)-v);s=(b-w)/t,o=function(e){var r=e*s,i=Ye(w),o=c/(n*m)*(i*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*r+w)-function(e){return((e=Math.exp(e))-1/e)/2}(w));return[a+o*f,l+o*p,c*i/Ye(t*r+w)]}}return o.duration=1e3*s*t/Math.SQRT2,o}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4);var Qe,Xe,Ze=0,$e=0,Je=0,et=0,tt=0,nt=0,rt="object"===typeof performance&&performance.now?performance:Date,it="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ot(){return tt||(it(st),tt=rt.now()+nt)}function st(){tt=0}function at(){this._call=this._time=this._next=null}function lt(e,t,n){var r=new at;return r.restart(e,t,n),r}function ct(){tt=(et=rt.now())+nt,Ze=$e=0;try{!function(){ot(),++Ze;for(var e,t=Qe;t;)(e=tt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ze}()}finally{Ze=0,function(){var e,t,n=Qe,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Qe=t);Xe=e,ht(r)}(),tt=0}}function ut(){var e=rt.now(),t=e-et;t>1e3&&(nt-=t,et=e)}function ht(e){Ze||($e&&($e=clearTimeout($e)),e-tt>24?(e<1/0&&($e=setTimeout(ct,e-rt.now()-nt)),Je&&(Je=clearInterval(Je))):(Je||(et=rt.now(),Je=setInterval(ut,1e3)),Ze=1,it(ct)))}function dt(e,t,n){var r=new at;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}at.prototype=lt.prototype={constructor:at,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?ot():+n)+(null==t?0:+t),this._next||Xe===this||(Xe?Xe._next=this:Qe=this,Xe=this),this._call=e,this._time=n,ht()},stop:function(){this._call&&(this._call=null,this._time=1/0,ht())}};var ft=v("start","end","cancel","interrupt"),pt=[];function gt(e,t,n,r,i,o){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(e){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=e&&s(e-n.delay)}function s(o){var c,u,h,d;if(1!==n.state)return l();for(c in i)if((d=i[c]).name===n.name){if(3===d.state)return dt(s);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[c]):+c<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[c])}if(dt((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(o))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=d);r.length=u+1}}function a(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,s=r.length;++o<s;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=lt(o,0,n.time)}(e,n,{name:t,index:r,group:i,on:ft,tween:pt,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function mt(e,t){var n=vt(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function yt(e,t){var n=vt(e,t);if(n.state>3)throw new Error("too late; already running");return n}function vt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function wt(e,t){var n,r,i,o=e.__transition,s=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):s=!1;s&&delete e.__transition}}function bt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var _t,St=180/Math.PI,Ct={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Et(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*St,skewX:Math.atan(l)*St,scaleX:s,scaleY:a}}function kt(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,s){var a=[],l=[];return o=e(o),s=e(s),function(e,r,i,o,s,a){if(e!==i||r!==o){var l=s.push("translate(",null,t,null,n);a.push({i:l-4,x:bt(e,i)},{i:l-2,x:bt(r,o)})}else(i||o)&&s.push("translate("+i+t+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:bt(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,s.rotate,a,l),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:bt(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,s.skewX,a,l),function(e,t,n,r,o,s){if(e!==n||t!==r){var a=o.push(i(o)+"scale(",null,",",null,")");s.push({i:a-4,x:bt(e,n)},{i:a-2,x:bt(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,l),o=s=null,function(e){for(var t,n=-1,r=l.length;++n<r;)a[(t=l[n]).i]=t.x(e);return a.join("")}}}var xt=kt((function(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ct:Et(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Tt=kt((function(e){return null==e?Ct:(_t||(_t=document.createElementNS("http://www.w3.org/2000/svg","g")),_t.setAttribute("transform",e),(e=_t.transform.baseVal.consolidate())?Et((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Ct)}),", ",")",")");function Nt(e,t){var n,r;return function(){var i=yt(this,e),o=i.tween;if(o!==n)for(var s=0,a=(r=n=o).length;s<a;++s)if(r[s].name===t){(r=r.slice()).splice(s,1);break}i.tween=r}}function It(e,t,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var o=yt(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=a;break}l===c&&i.push(a)}o.tween=i}}function Dt(e,t,n){var r=e._id;return e.each((function(){var e=yt(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return vt(e,r).value[t]}}function At(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Pt(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Mt(){}var Rt=.7,Ot=1/Rt,Lt="\\s*([+-]?\\d+)\\s*",Ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vt=/^#([0-9a-f]{3,8})$/,jt=new RegExp("^rgb\\(".concat(Lt,",").concat(Lt,",").concat(Lt,"\\)$")),Ut=new RegExp("^rgb\\(".concat(zt,",").concat(zt,",").concat(zt,"\\)$")),Bt=new RegExp("^rgba\\(".concat(Lt,",").concat(Lt,",").concat(Lt,",").concat(Ft,"\\)$")),qt=new RegExp("^rgba\\(".concat(zt,",").concat(zt,",").concat(zt,",").concat(Ft,"\\)$")),Ht=new RegExp("^hsl\\(".concat(Ft,",").concat(zt,",").concat(zt,"\\)$")),Wt=new RegExp("^hsla\\(".concat(Ft,",").concat(zt,",").concat(zt,",").concat(Ft,"\\)$")),Kt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Yt(){return this.rgb().formatHex()}function Gt(){return this.rgb().formatRgb()}function Qt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Vt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Xt(t):3===n?new Jt(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Zt(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Zt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=jt.exec(e))?new Jt(t[1],t[2],t[3],1):(t=Ut.exec(e))?new Jt(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Bt.exec(e))?Zt(t[1],t[2],t[3],t[4]):(t=qt.exec(e))?Zt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Ht.exec(e))?sn(t[1],t[2]/100,t[3]/100,1):(t=Wt.exec(e))?sn(t[1],t[2]/100,t[3]/100,t[4]):Kt.hasOwnProperty(e)?Xt(Kt[e]):"transparent"===e?new Jt(NaN,NaN,NaN,0):null}function Xt(e){return new Jt(e>>16&255,e>>8&255,255&e,1)}function Zt(e,t,n,r){return r<=0&&(e=t=n=NaN),new Jt(e,t,n,r)}function $t(e,t,n,r){return 1===arguments.length?((i=e)instanceof Mt||(i=Qt(i)),i?new Jt((i=i.rgb()).r,i.g,i.b,i.opacity):new Jt):new Jt(e,t,n,null==r?1:r);var i}function Jt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function en(){return"#".concat(on(this.r)).concat(on(this.g)).concat(on(this.b))}function tn(){const e=nn(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(rn(this.r),", ").concat(rn(this.g),", ").concat(rn(this.b)).concat(1===e?")":", ".concat(e,")"))}function nn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function rn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function on(e){return((e=rn(e))<16?"0":"")+e.toString(16)}function sn(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ln(e,t,n,r)}function an(e){if(e instanceof ln)return new ln(e.h,e.s,e.l,e.opacity);if(e instanceof Mt||(e=Qt(e)),!e)return new ln;if(e instanceof ln)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(s=t===o?(n-r)/a+6*(n<r):n===o?(r-t)/a+2:(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new ln(s,a,l,e.opacity)}function ln(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function cn(e){return(e=(e||0)%360)<0?e+360:e}function un(e){return Math.max(0,Math.min(1,e||0))}function hn(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function dn(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}At(Mt,Qt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Yt,formatHex:Yt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return an(this).formatHsl()},formatRgb:Gt,toString:Gt}),At(Jt,$t,Pt(Mt,{brighter(e){return e=null==e?Ot:Math.pow(Ot,e),new Jt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Rt:Math.pow(Rt,e),new Jt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Jt(rn(this.r),rn(this.g),rn(this.b),nn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:en,formatHex:en,formatHex8:function(){return"#".concat(on(this.r)).concat(on(this.g)).concat(on(this.b)).concat(on(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:tn,toString:tn})),At(ln,(function(e,t,n,r){return 1===arguments.length?an(e):new ln(e,t,n,null==r?1:r)}),Pt(Mt,{brighter(e){return e=null==e?Ot:Math.pow(Ot,e),new ln(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Rt:Math.pow(Rt,e),new ln(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Jt(hn(e>=240?e-240:e+120,i,r),hn(e,i,r),hn(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ln(cn(this.h),un(this.s),un(this.l),nn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=nn(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(cn(this.h),", ").concat(100*un(this.s),"%, ").concat(100*un(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const fn=e=>()=>e;function pn(e,t){return function(n){return e+n*t}}function gn(e){return 1===(e=+e)?mn:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):fn(isNaN(t)?n:t)}}function mn(e,t){var n=t-e;return n?pn(e,n):fn(isNaN(e)?t:e)}const yn=function e(t){var n=gn(t);function r(e,t){var r=n((e=$t(e)).r,(t=$t(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),s=mn(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=s(t),e+""}}return r.gamma=e,r}(1);function vn(e){return function(t){var n,r,i=t.length,o=new Array(i),s=new Array(i),a=new Array(i);for(n=0;n<i;++n)r=$t(t[n]),o[n]=r.r||0,s[n]=r.g||0,a[n]=r.b||0;return o=e(o),s=e(s),a=e(a),r.opacity=1,function(e){return r.r=o(e),r.g=s(e),r.b=a(e),r+""}}}vn((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return dn((n-r/t)*t,s,i,o,a)}})),vn((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return dn((n-r/t)*t,i,o,s,a)}}));var wn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bn=new RegExp(wn.source,"g");function _n(e,t){var n,r,i,o=wn.lastIndex=bn.lastIndex=0,s=-1,a=[],l=[];for(e+="",t+="";(n=wn.exec(e))&&(r=bn.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:bt(n,r)})),o=bn.lastIndex;return o<t.length&&(i=t.slice(o),a[s]?a[s]+=i:a[++s]=i),a.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)a[(n=l[r]).i]=n.x(e);return a.join("")})}function Sn(e,t){var n;return("number"===typeof t?bt:t instanceof Qt?yn:(n=Qt(t))?(t=n,yn):_n)(e,t)}function Cn(e){return function(){this.removeAttribute(e)}}function En(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kn(e,t,n){var r,i,o=n+"";return function(){var s=this.getAttribute(e);return s===o?null:s===r?i:i=t(r=s,n)}}function xn(e,t,n){var r,i,o=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?i:i=t(r=s,n)}}function Tn(e,t,n){var r,i,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttribute(e))===(a=l+"")?null:s===r&&a===i?o:(i=a,o=t(r=s,l));this.removeAttribute(e)}}function Nn(e,t,n){var r,i,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttributeNS(e.space,e.local))===(a=l+"")?null:s===r&&a===i?o:(i=a,o=t(r=s,l));this.removeAttributeNS(e.space,e.local)}}function In(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Dn(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function An(e,t){return function(){mt(this,e).delay=+t.apply(this,arguments)}}function Pn(e,t){return t=+t,function(){mt(this,e).delay=t}}function Mn(e,t){return function(){yt(this,e).duration=+t.apply(this,arguments)}}function Rn(e,t){return t=+t,function(){yt(this,e).duration=t}}var On=Ae.prototype.constructor;function Ln(e){return function(){this.style.removeProperty(e)}}var Fn=0;function zn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Vn(){return++Fn}var jn=Ae.prototype;zn.prototype=function(e){return Ae().transition(e)}.prototype={constructor:zn,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=b(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a,l,c=r[s],u=c.length,h=o[s]=new Array(u),d=0;d<u;++d)(a=c[d])&&(l=e.call(a,a.__data__,d,c))&&("__data__"in a&&(l.__data__=a.__data__),h[d]=l,gt(h[d],t,n,d,h,vt(a,n)));return new zn(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=S(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l,c=r[a],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var d,f=e.call(l,l.__data__,h,c),p=vt(l,n),g=0,m=f.length;g<m;++g)(d=f[g])&&gt(d,t,n,g,f,p);o.push(f),s.push(l)}return new zn(o,s,t,n)},selectChild:jn.selectChild,selectChildren:jn.selectChildren,filter:function(e){"function"!==typeof e&&(e=E(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s=t[i],a=s.length,l=r[i]=[],c=0;c<a;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&l.push(o);return new zn(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l,c=t[a],u=n[a],h=c.length,d=s[a]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(d[f]=l);for(;a<r;++a)s[a]=t[a];return new zn(s,this._parents,this._name,this._id)},selection:function(){return new On(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Vn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],l=a.length,c=0;c<l;++c)if(s=a[c]){var u=vt(s,t);gt(s,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new zn(r,this._parents,e,n)},call:jn.call,nodes:jn.nodes,node:jn.node,size:jn.size,empty:jn.empty,each:jn.each,on:function(e,t){var n=this._id;return arguments.length<2?vt(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?mt:yt;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}(n,e,t))},attr:function(e,t){var n=V(e),r="transform"===n?Tt:Sn;return this.attrTween(e,"function"===typeof t?(n.local?Nn:Tn)(n,r,Dt(this,"attr."+e,t)):null==t?(n.local?En:Cn)(n):(n.local?xn:kn)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=V(e);return this.tween(n,(r.local?In:Dn)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?xt:Sn;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=X(this,e),s=(this.style.removeProperty(e),X(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}(e,r)).on("end.style."+e,Ln(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var s=X(this,e),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(e),l=a=X(this,e)),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a))}}(e,r,Dt(this,"style."+e,t))).each(function(e,t){var n,r,i,o,s="style."+t,a="end."+s;return function(){var l=yt(this,e),c=l.on,u=null==l.value[s]?o||(o=Ln(t)):void 0;c===n&&i===u||(r=(n=c).copy()).on(a,i=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var s=X(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,o,n)),r}return o._value=t,o}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Dt(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=vt(this.node(),n).tween,o=0,s=i.length;o<s;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?Nt:It)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?An:Pn)(t,e)):vt(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Mn:Rn)(t,e)):vt(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){yt(this,e).ease=t}}(t,e)):vt(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;yt(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,s){var a={value:s},l={value:function(){0===--i&&o()}};n.each((function(){var n=yt(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),n.on=t})),0===i&&o()}))},[Symbol.iterator]:jn[Symbol.iterator]};var Un={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Bn(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}Ae.prototype.interrupt=function(e){return this.each((function(){wt(this,e)}))},Ae.prototype.transition=function(e){var t,n;e instanceof zn?(t=e._id,e=e._name):(t=Vn(),(n=Un).time=ot(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],l=a.length,c=0;c<l;++c)(s=a[c])&&gt(s,e,t,c,a,n||Bn(s,t));return new zn(r,this._parents,e,t)};const qn=e=>()=>e;function Hn(e,t){let{sourceEvent:n,target:r,transform:i,dispatch:o}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Wn(e,t,n){this.k=e,this.x=t,this.y=n}Wn.prototype={constructor:Wn,scale:function(e){return 1===e?this:new Wn(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Wn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Kn=new Wn(1,0,0);function Yn(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Kn;return e.__zoom}function Gn(e){e.stopImmediatePropagation()}function Qn(e){e.preventDefault(),e.stopImmediatePropagation()}function Xn(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function Zn(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function $n(){return this.__zoom||Kn}function Jn(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function er(){return navigator.maxTouchPoints||"ontouchstart"in this}function tr(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function nr(){var e,t,n,r=Xn,i=Zn,o=tr,s=Jn,a=er,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,h=Ge,d=v("start","zoom","end"),f=0,p=10;function g(e){e.property("__zoom",$n).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",k).filter(a).on("touchstart.zoom",x).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new Wn(t,e.x,e.y)}function y(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new Wn(e.k,r,i)}function w(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function b(e,t,n,r){e.on("start.zoom",(function(){_(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){_(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,o=arguments,s=_(e,o).event(r),a=i.apply(e,o),l=null==n?w(a):"function"===typeof n?n.apply(e,o):n,c=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),u=e.__zoom,d="function"===typeof t?t.apply(e,o):t,f=h(u.invert(l).concat(c/u.k),d.invert(l).concat(c/d.k));return function(e){if(1===e)e=d;else{var t=f(e),n=c/t[2];e=new Wn(n,l[0]-t[0]*n,l[1]-t[1]*n)}s.zoom(null,e)}}))}function _(e,t,n){return!n&&e.__zooming||new S(e,t)}function S(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=i.apply(e,t),this.taps=0}function C(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(r.apply(this,arguments)){var a=_(this,n).event(e),u=this.__zoom,h=Math.max(l[0],Math.min(l[1],u.k*Math.pow(2,s.apply(this,arguments)))),d=Me(e);if(a.wheel)a.mouse[0][0]===d[0]&&a.mouse[0][1]===d[1]||(a.mouse[1]=u.invert(a.mouse[0]=d)),clearTimeout(a.wheel);else{if(u.k===h)return;a.mouse=[d,u.invert(d)],wt(this),a.start()}Qn(e),a.wheel=setTimeout((function(){a.wheel=null,a.end()}),150),a.zoom("mouse",o(y(m(u,h),a.mouse[0],a.mouse[1]),a.extent,c))}}function E(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];if(!n&&r.apply(this,arguments)){var a=e.currentTarget,l=_(this,i,!0).event(e),u=Pe(e.view).on("mousemove.zoom",(function(e){if(Qn(e),!l.moved){var t=e.clientX-d,n=e.clientY-p;l.moved=t*t+n*n>f}l.event(e).zoom("mouse",o(y(l.that.__zoom,l.mouse[0]=Me(e,a),l.mouse[1]),l.extent,c))}),!0).on("mouseup.zoom",(function(e){u.on("mousemove.zoom mouseup.zoom",null),Ve(e.view,l.moved),Qn(e),l.event(e).end()}),!0),h=Me(e,a),d=e.clientX,p=e.clientY;ze(e.view),Gn(e),l.mouse=[h,this.__zoom.invert(h)],wt(this),l.start()}}function k(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(r.apply(this,arguments)){var a=this.__zoom,l=Me(e.changedTouches?e.changedTouches[0]:e,this),h=a.invert(l),d=a.k*(e.shiftKey?.5:2),f=o(y(m(a,d),l,h),i.apply(this,n),c);Qn(e),u>0?Pe(this).transition().duration(u).call(b,f,l,e):Pe(this).call(g.transform,f,l,e)}}function x(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];if(r.apply(this,arguments)){var a,l,c,u,h=n.touches,d=h.length,f=_(this,o,n.changedTouches.length===d).event(n);for(Gn(n),l=0;l<d;++l)u=[u=Me(c=h[l],this),this.__zoom.invert(u),c.identifier],f.touch0?f.touch1||f.touch0[2]===u[2]||(f.touch1=u,f.taps=0):(f.touch0=u,a=!0,f.taps=1+!!e);e&&(e=clearTimeout(e)),a&&(f.taps<2&&(t=u[0],e=setTimeout((function(){e=null}),500)),wt(this),f.start())}}function T(e){if(this.__zooming){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,a,l,u=_(this,n).event(e),h=e.changedTouches,d=h.length;for(Qn(e),i=0;i<d;++i)a=Me(s=h[i],this),u.touch0&&u.touch0[2]===s.identifier?u.touch0[0]=a:u.touch1&&u.touch1[2]===s.identifier&&(u.touch1[0]=a);if(s=u.that.__zoom,u.touch1){var f=u.touch0[0],p=u.touch0[1],g=u.touch1[0],v=u.touch1[1],w=(w=g[0]-f[0])*w+(w=g[1]-f[1])*w,b=(b=v[0]-p[0])*b+(b=v[1]-p[1])*b;s=m(s,Math.sqrt(w/b)),a=[(f[0]+g[0])/2,(f[1]+g[1])/2],l=[(p[0]+v[0])/2,(p[1]+v[1])/2]}else{if(!u.touch0)return;a=u.touch0[0],l=u.touch0[1]}u.zoom("touch",o(y(s,a,l),u.extent,c))}}function N(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(this.__zooming){var s,a,l=_(this,i).event(e),c=e.changedTouches,u=c.length;for(Gn(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),s=0;s<u;++s)a=c[s],l.touch0&&l.touch0[2]===a.identifier?delete l.touch0:l.touch1&&l.touch1[2]===a.identifier&&delete l.touch1;if(l.touch1&&!l.touch0&&(l.touch0=l.touch1,delete l.touch1),l.touch0)l.touch0[1]=this.__zoom.invert(l.touch0[0]);else if(l.end(),2===l.taps&&(a=Me(a,this),Math.hypot(t[0]-a[0],t[1]-a[1])<p)){var h=Pe(this).on("dblclick.zoom");h&&h.apply(this,arguments)}}}return g.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property("__zoom",$n),e!==i?b(e,t,n,r):i.interrupt().each((function(){_(this,arguments).event(r).start().zoom(null,"function"===typeof t?t.apply(this,arguments):t).end()}))},g.scaleBy=function(e,t,n,r){g.scaleTo(e,(function(){return this.__zoom.k*("function"===typeof t?t.apply(this,arguments):t)}),n,r)},g.scaleTo=function(e,t,n,r){g.transform(e,(function(){var e=i.apply(this,arguments),r=this.__zoom,s=null==n?w(e):"function"===typeof n?n.apply(this,arguments):n,a=r.invert(s),l="function"===typeof t?t.apply(this,arguments):t;return o(y(m(r,l),s,a),e,c)}),n,r)},g.translateBy=function(e,t,n,r){g.transform(e,(function(){return o(this.__zoom.translate("function"===typeof t?t.apply(this,arguments):t,"function"===typeof n?n.apply(this,arguments):n),i.apply(this,arguments),c)}),null,r)},g.translateTo=function(e,t,n,r,s){g.transform(e,(function(){var e=i.apply(this,arguments),s=this.__zoom,a=null==r?w(e):"function"===typeof r?r.apply(this,arguments):r;return o(Kn.translate(a[0],a[1]).scale(s.k).translate("function"===typeof t?-t.apply(this,arguments):-t,"function"===typeof n?-n.apply(this,arguments):-n),e,c)}),r,s)},S.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Pe(this.that).datum();d.call(e,this.that,new Hn(e,{sourceEvent:this.sourceEvent,target:g,type:e,transform:this.that.__zoom,dispatch:d}),t)}},g.wheelDelta=function(e){return arguments.length?(s="function"===typeof e?e:qn(+e),g):s},g.filter=function(e){return arguments.length?(r="function"===typeof e?e:qn(!!e),g):r},g.touchable=function(e){return arguments.length?(a="function"===typeof e?e:qn(!!e),g):a},g.extent=function(e){return arguments.length?(i="function"===typeof e?e:qn([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),g):i},g.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],g):[l[0],l[1]]},g.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],g):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},g.constrain=function(e){return arguments.length?(o=e,g):o},g.duration=function(e){return arguments.length?(u=+e,g):u},g.interpolate=function(e){return arguments.length?(h=e,g):h},g.on=function(){var e=d.on.apply(d,arguments);return e===d?g:e},g.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,g):Math.sqrt(f)},g.tapDistance=function(e){return arguments.length?(p=+e,g):p},g}Yn.prototype=Wn.prototype;const rr=["inProgress"],ir=()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",or=e=>'Node type "'.concat(e,'" not found. Using fallback type "default".'),sr=()=>"The React Flow parent container needs a width and a height to render the graph.",ar=()=>"Only child nodes can use a parent extent.",lr=()=>"Can't create edge. An edge needs a source and a target.",cr=e=>'Marker type "'.concat(e,"\" doesn't exist."),ur=(e,t)=>{let{id:n,sourceHandle:r,targetHandle:i}=t;return"Couldn't create edge for ".concat(e,' handle id: "').concat("source"===e?r:i,'", edge id: ').concat(n,".")},hr=()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",dr=e=>'Edge type "'.concat(e,'" not found. Using fallback type "default".'),fr=e=>'Node with id "'.concat(e,'" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.'),pr=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],gr=["Enter"," ","Escape"];var mr,yr,vr;!function(e){e.Strict="strict",e.Loose="loose"}(mr||(mr={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(yr||(yr={})),function(e){e.Partial="partial",e.Full="full"}(vr||(vr={}));const wr={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var br,_r,Sr;!function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(br||(br={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(_r||(_r={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(Sr||(Sr={}));const Cr={[Sr.Left]:Sr.Right,[Sr.Right]:Sr.Left,[Sr.Top]:Sr.Bottom,[Sr.Bottom]:Sr.Top};function Er(e){return null===e?null:e?"valid":"invalid"}const kr=e=>"id"in e&&"source"in e&&"target"in e,xr=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Tr=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];const{width:r,height:i}=ti(e),o=null!==(t=e.origin)&&void 0!==t?t:n,s=r*o[0],a=i*o[1];return{x:e.position.x-s,y:e.position.y-a}},Nr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach((e=>{if(void 0===t.filter||t.filter(e)){const t=qr(e);n=Vr(n,t)}})),Ur(n)},Ir=function(e,t){let[n,r,i]=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=c(c({},Xr(t,[n,r,i])),{},{width:t.width/i,height:t.height/i}),l=[];for(const c of e.values()){var u,h,d,f,p,g;const{measured:e,selectable:t=!0,hidden:n=!1}=c;if(s&&!t||n)continue;const r=null!==(u=null!==(h=null!==(d=e.width)&&void 0!==d?d:c.width)&&void 0!==h?h:c.initialWidth)&&void 0!==u?u:null,i=null!==(f=null!==(p=null!==(g=e.height)&&void 0!==g?g:c.height)&&void 0!==p?p:c.initialHeight)&&void 0!==f?f:null,m=Wr(a,Br(c)),y=(null!==r&&void 0!==r?r:0)*(null!==i&&void 0!==i?i:0),v=o&&m>0;(!c.internals.handleBounds||v||m>=y||c.dragging)&&l.push(c)}return l};function Dr(e,t){const n=new Map,r=null!==t&&void 0!==t&&t.nodes?new Set(t.nodes.map((e=>e.id))):null;return e.forEach((e=>{!(e.measured.width&&e.measured.height&&((null===t||void 0===t?void 0:t.includeHiddenNodes)||!e.hidden))||r&&!r.has(e.id)||n.set(e.id,e)})),n}async function Ar(e,t){var n,r,i;let{nodes:o,width:s,height:a,panZoom:l,minZoom:c,maxZoom:u}=e;if(0===o.size)return Promise.resolve(!1);const h=Nr(o),d=$r(h,s,a,null!==(n=null===t||void 0===t?void 0:t.minZoom)&&void 0!==n?n:c,null!==(r=null===t||void 0===t?void 0:t.maxZoom)&&void 0!==r?r:u,null!==(i=null===t||void 0===t?void 0:t.padding)&&void 0!==i?i:.1);return await l.setViewport(d,{duration:null===t||void 0===t?void 0:t.duration}),Promise.resolve(!0)}function Pr(e){var t;let{nodeId:n,nextPosition:r,nodeLookup:i,nodeOrigin:o=[0,0],nodeExtent:s,onError:a}=e;const l=i.get(n),c=l.parentId?i.get(l.parentId):void 0,{x:u,y:h}=c?c.internals.positionAbsolute:{x:0,y:0},d=null!==(t=l.origin)&&void 0!==t?t:o;let f=s;if("parent"!==l.extent||l.expandParent)c&&ei(l.extent)&&(f=[[l.extent[0][0]+u,l.extent[0][1]+h],[l.extent[1][0]+u,l.extent[1][1]+h]]);else if(c){const e=c.measured.width,t=c.measured.height;e&&t&&(f=[[u,h],[u+e,h+t]])}else null===a||void 0===a||a("005",ar());const p=ei(f)?Or(r,f,l.measured):r;return{position:{x:p.x-u+l.measured.width*d[0],y:p.y-h+l.measured.height*d[1]},positionAbsolute:p}}async function Mr(e){let{nodesToRemove:t=[],edgesToRemove:n=[],nodes:r,edges:i,onBeforeDelete:o}=e;const s=new Set(t.map((e=>e.id))),a=[];for(const f of r){if(!1===f.deletable)continue;const e=s.has(f.id),t=!e&&f.parentId&&a.find((e=>e.id===f.parentId));(e||t)&&a.push(f)}const l=new Set(n.map((e=>e.id))),c=i.filter((e=>!1!==e.deletable)),u=((e,t)=>{const n=new Set;return e.forEach((e=>{n.add(e.id)})),t.filter((e=>n.has(e.source)||n.has(e.target)))})(a,c),h=u;for(const f of c){l.has(f.id)&&!h.find((e=>e.id===f.id))&&h.push(f)}if(!o)return{edges:h,nodes:a};const d=await o({nodes:a,edges:h});return"boolean"===typeof d?d?{edges:h,nodes:a}:{edges:[],nodes:[]}:d}const Rr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)},Or=function(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;return{x:Rr(n.x,r[0][0],r[1][0]-(null!==(e=null===i||void 0===i?void 0:i.width)&&void 0!==e?e:0)),y:Rr(n.y,r[0][1],r[1][1]-(null!==(t=null===i||void 0===i?void 0:i.height)&&void 0!==t?t:0))}};function Lr(e,t,n){const{width:r,height:i}=ti(n),{x:o,y:s}=n.internals.positionAbsolute;return Or(e,[[o,s],[o+r,s+i]],t)}const Fr=(e,t,n)=>e<t?Rr(Math.abs(e-t),1,t)/t:e>n?-Rr(Math.abs(e-n),1,t)/t:0,zr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40;return[Fr(e.x,r,t.width-r)*n,Fr(e.y,r,t.height-r)*n]},Vr=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),jr=e=>{let{x:t,y:n,width:r,height:i}=e;return{x:t,y:n,x2:t+r,y2:n+i}},Ur=e=>{let{x:t,y:n,x2:r,y2:i}=e;return{x:t,y:n,width:r-t,height:i-n}},Br=function(e){var t,n,r,i,o,s,a,l;let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];const{x:u,y:h}=xr(e)?e.internals.positionAbsolute:Tr(e,c);return{x:u,y:h,width:null!==(t=null!==(n=null!==(r=null===(i=e.measured)||void 0===i?void 0:i.width)&&void 0!==r?r:e.width)&&void 0!==n?n:e.initialWidth)&&void 0!==t?t:0,height:null!==(o=null!==(s=null!==(a=null===(l=e.measured)||void 0===l?void 0:l.height)&&void 0!==a?a:e.height)&&void 0!==s?s:e.initialHeight)&&void 0!==o?o:0}},qr=function(e){var t,n,r,i,o,s,a,l;let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];const{x:u,y:h}=xr(e)?e.internals.positionAbsolute:Tr(e,c);return{x:u,y:h,x2:u+(null!==(t=null!==(n=null!==(r=null===(i=e.measured)||void 0===i?void 0:i.width)&&void 0!==r?r:e.width)&&void 0!==n?n:e.initialWidth)&&void 0!==t?t:0),y2:h+(null!==(o=null!==(s=null!==(a=null===(l=e.measured)||void 0===l?void 0:l.height)&&void 0!==a?a:e.height)&&void 0!==s?s:e.initialHeight)&&void 0!==o?o:0)}},Hr=(e,t)=>Ur(Vr(jr(e),jr(t))),Wr=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Kr=e=>Yr(e.width)&&Yr(e.height)&&Yr(e.x)&&Yr(e.y),Yr=e=>!isNaN(e)&&isFinite(e),Gr=(e,t)=>{0},Qr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1];return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}},Xr=function(e,t){let{x:n,y:r}=e,[i,o,s]=t;const a={x:(n-i)/s,y:(r-o)/s};return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?Qr(a,arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1]):a},Zr=(e,t)=>{let{x:n,y:r}=e,[i,o,s]=t;return{x:n*s+i,y:r*s+o}},$r=(e,t,n,r,i,o)=>{const s=t/(e.width*(1+o)),a=n/(e.height*(1+o)),l=Math.min(s,a),c=Rr(l,r,i);return{x:t/2-(e.x+e.width/2)*c,y:n/2-(e.y+e.height/2)*c,zoom:c}},Jr=()=>{var e;return"undefined"!==typeof navigator&&(null===(e=navigator)||void 0===e||null===(e=e.userAgent)||void 0===e?void 0:e.indexOf("Mac"))>=0};function ei(e){return void 0!==e&&"parent"!==e}function ti(e){var t,n,r,i,o,s,a,l;return{width:null!==(t=null!==(n=null!==(r=null===(i=e.measured)||void 0===i?void 0:i.width)&&void 0!==r?r:e.width)&&void 0!==n?n:e.initialWidth)&&void 0!==t?t:0,height:null!==(o=null!==(s=null!==(a=null===(l=e.measured)||void 0===l?void 0:l.height)&&void 0!==a?a:e.height)&&void 0!==s?s:e.initialHeight)&&void 0!==o?o:0}}function ni(e){var t,n,r,i,o,s;return void 0!==(null!==(t=null!==(n=null===(r=e.measured)||void 0===r?void 0:r.width)&&void 0!==n?n:e.width)&&void 0!==t?t:e.initialWidth)&&void 0!==(null!==(i=null!==(o=null===(s=e.measured)||void 0===s?void 0:s.height)&&void 0!==o?o:e.height)&&void 0!==i?i:e.initialHeight)}function ri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:0,height:0},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;const o=c({},e),s=r.get(n);if(s){var a,l;const e=s.origin||i;o.x+=s.internals.positionAbsolute.x-(null!==(a=t.width)&&void 0!==a?a:0)*e[0],o.y+=s.internals.positionAbsolute.y-(null!==(l=t.height)&&void 0!==l?l:0)*e[1]}return o}function ii(e,t){var n,r;let{snapGrid:i=[0,0],snapToGrid:o=!1,transform:s,containerBounds:a}=t;const{x:l,y:u}=ui(e),h=Xr({x:l-(null!==(n=null===a||void 0===a?void 0:a.left)&&void 0!==n?n:0),y:u-(null!==(r=null===a||void 0===a?void 0:a.top)&&void 0!==r?r:0)},s),{x:d,y:f}=o?Qr(h,i):h;return c({xSnapped:d,ySnapped:f},h)}const oi=e=>({width:e.offsetWidth,height:e.offsetHeight}),si=e=>{var t,n;return(null===(t=e.getRootNode)||void 0===t?void 0:t.call(e))||(null===(n=window)||void 0===n?void 0:n.document)},ai=["INPUT","SELECT","TEXTAREA"];function li(e){var t,n;const r=(null===(t=e.composedPath)||void 0===t||null===(t=t.call(e))||void 0===t?void 0:t[0])||e.target;return ai.includes(null===r||void 0===r?void 0:r.nodeName)||(null===r||void 0===r||null===(n=r.hasAttribute)||void 0===n?void 0:n.call(r,"contenteditable"))||!(null===r||void 0===r||!r.closest(".nokey"))}const ci=e=>"clientX"in e,ui=(e,t)=>{var n,r,i,o;const s=ci(e),a=s?e.clientX:null===(n=e.touches)||void 0===n?void 0:n[0].clientX,l=s?e.clientY:null===(r=e.touches)||void 0===r?void 0:r[0].clientY;return{x:a-(null!==(i=null===t||void 0===t?void 0:t.left)&&void 0!==i?i:0),y:l-(null!==(o=null===t||void 0===t?void 0:t.top)&&void 0!==o?o:0)}},hi=(e,t,n,r,i)=>{const o=t.querySelectorAll(".".concat(e));return o&&o.length?Array.from(o).map((t=>{const o=t.getBoundingClientRect();return c({id:t.getAttribute("data-handleid"),type:e,nodeId:i,position:t.getAttribute("data-handlepos"),x:(o.left-n.left)/r,y:(o.top-n.top)/r},oi(t))})):null};function di(e){let{sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:o,sourceControlY:s,targetControlX:a,targetControlY:l}=e;const c=.125*t+.375*o+.375*a+.125*r,u=.125*n+.375*s+.375*l+.125*i;return[c,u,Math.abs(c-t),Math.abs(u-n)]}function fi(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function pi(e){let{pos:t,x1:n,y1:r,x2:i,y2:o,c:s}=e;switch(t){case Sr.Left:return[n-fi(n-i,s),r];case Sr.Right:return[n+fi(i-n,s),r];case Sr.Top:return[n,r-fi(r-o,s)];case Sr.Bottom:return[n,r+fi(o-r,s)]}}function gi(e){let{sourceX:t,sourceY:n,sourcePosition:r=Sr.Bottom,targetX:i,targetY:o,targetPosition:s=Sr.Top,curvature:a=.25}=e;const[l,c]=pi({pos:r,x1:t,y1:n,x2:i,y2:o,c:a}),[u,h]=pi({pos:s,x1:i,y1:o,x2:t,y2:n,c:a}),[d,f,p,g]=di({sourceX:t,sourceY:n,targetX:i,targetY:o,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:h});return["M".concat(t,",").concat(n," C").concat(l,",").concat(c," ").concat(u,",").concat(h," ").concat(i,",").concat(o),d,f,p,g]}function mi(e){let{sourceX:t,sourceY:n,targetX:r,targetY:i}=e;const o=Math.abs(r-t)/2,s=r<t?r+o:r-o,a=Math.abs(i-n)/2;return[s,i<n?i+a:i-a,o,a]}function yi(e){let{sourceNode:t,targetNode:n,width:r,height:i,transform:o}=e;const s=Vr(qr(t),qr(n));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const a={x:-o[0]/o[2],y:-o[1]/o[2],width:r/o[2],height:i/o[2]};return Wr(a,Ur(s))>0}const vi=e=>{let{source:t,sourceHandle:n,target:r,targetHandle:i}=e;return"xy-edge__".concat(t).concat(n||"","-").concat(r).concat(i||"")},wi=(e,t)=>{if(!e.source||!e.target)return Gr(0,lr()),t;let n;return n=kr(e)?c({},e):c(c({},e),{},{id:vi(e)}),((e,t)=>t.some((t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle))))(n,t)?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n))};function bi(e){let{sourceX:t,sourceY:n,targetX:r,targetY:i}=e;const[o,s,a,l]=mi({sourceX:t,sourceY:n,targetX:r,targetY:i});return["M ".concat(t,",").concat(n,"L ").concat(r,",").concat(i),o,s,a,l]}const _i={[Sr.Left]:{x:-1,y:0},[Sr.Right]:{x:1,y:0},[Sr.Top]:{x:0,y:-1},[Sr.Bottom]:{x:0,y:1}},Si=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Ci(e){let{source:t,sourcePosition:n=Sr.Bottom,target:r,targetPosition:i=Sr.Top,center:o,offset:s}=e;const a=_i[n],l=_i[i],c={x:t.x+a.x*s,y:t.y+a.y*s},u={x:r.x+l.x*s,y:r.y+l.y*s},h=(e=>{let{source:t,sourcePosition:n=Sr.Bottom,target:r}=e;return n===Sr.Left||n===Sr.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1}})({source:c,sourcePosition:n,target:u}),d=0!==h.x?"x":"y",f=h[d];let p,g,m=[];const y={x:0,y:0},v={x:0,y:0},[w,b,_,S]=mi({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(a[d]*l[d]===-1){var C,E;p=null!==(C=o.x)&&void 0!==C?C:w,g=null!==(E=o.y)&&void 0!==E?E:b;const e=[{x:p,y:c.y},{x:p,y:u.y}],t=[{x:c.x,y:g},{x:u.x,y:g}];m=a[d]===f?"x"===d?e:t:"x"===d?t:e}else{const e=[{x:c.x,y:u.y}],o=[{x:u.x,y:c.y}];if(m="x"===d?a.x===f?o:e:a.y===f?e:o,n===i){const e=Math.abs(t[d]-r[d]);if(e<=s){const n=Math.min(s-1,s-e);a[d]===f?y[d]=(c[d]>t[d]?-1:1)*n:v[d]=(u[d]>r[d]?-1:1)*n}}if(n!==i){const t="x"===d?"y":"x",n=a[d]===l[t],r=c[t]>u[t],i=c[t]<u[t];(1===a[d]&&(!n&&r||n&&i)||1!==a[d]&&(!n&&i||n&&r))&&(m="x"===d?e:o)}const h={x:c.x+y.x,y:c.y+y.y},w={x:u.x+v.x,y:u.y+v.y};Math.max(Math.abs(h.x-m[0].x),Math.abs(w.x-m[0].x))>=Math.max(Math.abs(h.y-m[0].y),Math.abs(w.y-m[0].y))?(p=(h.x+w.x)/2,g=m[0].y):(p=m[0].x,g=(h.y+w.y)/2)}return[[t,{x:c.x+y.x,y:c.y+y.y},...m,{x:u.x+v.x,y:u.y+v.y},r],p,g,_,S]}function Ei(e){let{sourceX:t,sourceY:n,sourcePosition:r=Sr.Bottom,targetX:i,targetY:o,targetPosition:s=Sr.Top,borderRadius:a=5,centerX:l,centerY:c,offset:u=20}=e;const[h,d,f,p,g]=Ci({source:{x:t,y:n},sourcePosition:r,target:{x:i,y:o},targetPosition:s,center:{x:l,y:c},offset:u}),m=h.reduce(((e,t,n)=>{let r="";return r=n>0&&n<h.length-1?function(e,t,n,r){const i=Math.min(Si(e,t)/2,Si(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return"L".concat(o," ").concat(s);if(e.y===s){const t=e.x<n.x?-1:1,r=e.y<n.y?1:-1;return"L ".concat(o+i*t,",").concat(s,"Q ").concat(o,",").concat(s," ").concat(o,",").concat(s+i*r)}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return"L ".concat(o,",").concat(s+i*l,"Q ").concat(o,",").concat(s," ").concat(o+i*a,",").concat(s)}(h[n-1],t,h[n+1],a):"".concat(0===n?"M":"L").concat(t.x," ").concat(t.y),e+=r}),"");return[m,d,f,p,g]}function ki(e){var t;return e&&!!(e.internals.handleBounds||null!==(t=e.handles)&&void 0!==t&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function xi(e){if(!e)return null;const t=[],n=[];for(const o of e){var r,i;o.width=null!==(r=o.width)&&void 0!==r?r:1,o.height=null!==(i=o.height)&&void 0!==i?i:1,"source"===o.type?t.push(o):"target"===o.type&&n.push(o)}return{source:t,target:n}}function Ti(e,t){var n,r,i;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sr.Left,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=(null!==(n=null===t||void 0===t?void 0:t.x)&&void 0!==n?n:0)+e.internals.positionAbsolute.x,l=(null!==(r=null===t||void 0===t?void 0:t.y)&&void 0!==r?r:0)+e.internals.positionAbsolute.y,{width:c,height:u}=null!==t&&void 0!==t?t:ti(e);if(s)return{x:a+c/2,y:l+u/2};switch(null!==(i=null===t||void 0===t?void 0:t.position)&&void 0!==i?i:o){case Sr.Top:return{x:a+c/2,y:l};case Sr.Right:return{x:a+c,y:l+u/2};case Sr.Bottom:return{x:a+c/2,y:l+u};case Sr.Left:return{x:a,y:l+u/2}}}function Ni(e,t){return e&&(t?e.find((e=>e.id===t)):e[0])||null}function Ii(e,t){if(!e)return"";if("string"===typeof e)return e;const n=t?"".concat(t,"__"):"";return"".concat(n).concat(Object.keys(e).sort().map((t=>"".concat(t,"=").concat(e[t]))).join("&"))}const Di={nodeOrigin:[0,0],nodeExtent:pr,elevateNodesOnSelect:!0,defaults:{}},Ai=c(c({},Di),{},{checkEquality:!0});function Pi(e,t){const n=c({},e);for(const r in t)void 0!==t[r]&&(n[r]=t[r]);return n}function Mi(e,t,n,r){const i=Pi(Ai,r),o=new Map(t),s=null!==i&&void 0!==i&&i.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const d of e){var a;let e=o.get(d.id);if(i.checkEquality&&d===(null===(a=e)||void 0===a?void 0:a.internals.userNode))t.set(d.id,e);else{var l,u,h;const n=Tr(d,i.nodeOrigin),r=ei(d.extent)?d.extent:i.nodeExtent,o=Or(n,r,ti(d));e=c(c(c({},i.defaults),d),{},{measured:{width:null===(l=d.measured)||void 0===l?void 0:l.width,height:null===(u=d.measured)||void 0===u?void 0:u.height},internals:{positionAbsolute:o,handleBounds:d.measured?null===(h=e)||void 0===h?void 0:h.internals.handleBounds:void 0,z:Oi(d,s),userNode:d}}),t.set(d.id,e)}d.parentId&&Ri(e,t,n,r)}}function Ri(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:o,nodeExtent:s}=Pi(Di,r),a=e.parentId,l=t.get(a);if(!l)return void console.warn("Parent node ".concat(a," not found. Please make sure that parent nodes are in front of their child nodes in the nodes array."));!function(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n);const u=i?1e3:0,{x:h,y:d,z:f}=function(e,t,n,r,i){var o;const{x:s,y:a}=t.internals.positionAbsolute,l=ti(e),c=Tr(e,n),u=ei(e.extent)?Or(c,e.extent,l):c;let h=Or({x:s+u.x,y:a+u.y},r,l);"parent"===e.extent&&(h=Lr(h,l,t));const d=Oi(e,i),f=null!==(o=t.internals.z)&&void 0!==o?o:0;return{x:h.x,y:h.y,z:f>d?f:d}}(e,l,o,s,u),{positionAbsolute:p}=e.internals,g=h!==p.x||d!==p.y;(g||f!==e.internals.z)&&(e.internals=c(c({},e.internals),{},{positionAbsolute:g?{x:h,y:d}:p,z:f}))}function Oi(e,t){return(Yr(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Li(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0];const i=[],o=new Map;for(const l of e){var s,a;const e=t.get(l.parentId);if(!e)continue;const n=null!==(s=null===(a=o.get(l.parentId))||void 0===a?void 0:a.expandedRect)&&void 0!==s?s:Br(e),r=Hr(n,l.rect);o.set(l.parentId,{expandedRect:r,parent:e})}return o.size>0&&o.forEach(((t,o)=>{var s;let{expandedRect:a,parent:l}=t;const c=l.internals.positionAbsolute,u=ti(l),h=null!==(s=l.origin)&&void 0!==s?s:r,d=a.x<c.x?Math.round(Math.abs(c.x-a.x)):0,f=a.y<c.y?Math.round(Math.abs(c.y-a.y)):0,p=Math.max(u.width,Math.round(a.width)),g=Math.max(u.height,Math.round(a.height)),m=(p-u.width)*h[0],y=(g-u.height)*h[1];var v;(d>0||f>0||m||y)&&(i.push({id:o,type:"position",position:{x:l.position.x-d+m,y:l.position.y-f+y}}),null===(v=n.get(o))||void 0===v||v.forEach((t=>{e.some((e=>e.id===t.id))||i.push({id:t.id,type:"position",position:{x:t.position.x+d,y:t.position.y+f}})})));(u.width<a.width||u.height<a.height||d||f)&&i.push({id:o,type:"dimensions",setAttributes:!0,dimensions:{width:p+(d?h[0]*d-m:0),height:g+(f?h[1]*f-y:0)}})})),i}function Fi(e,t,n){e.clear(),t.clear();for(const r of n){const{source:n,target:i,sourceHandle:o=null,targetHandle:s=null}=r,a="".concat(n,"-source-").concat(o),l="".concat(i,"-target-").concat(s),c=e.get(a)||new Map,u=e.get(l)||new Map,h={edgeId:r.id,source:n,target:i,sourceHandle:o,targetHandle:s};t.set(r.id,r),e.set(a,c.set("".concat(i,"-").concat(s),h)),e.set(l,u.set("".concat(n,"-").concat(o),h))}}function zi(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return!!n&&(!!n.selected||zi(n,t))}function Vi(e,t,n){let r=e;do{var i;if(null!==(i=r)&&void 0!==i&&i.matches(t))return!0;if(r===n)return!1;r=r.parentElement}while(r);return!1}function ji(e){var t,n;let{nodeId:r,dragItems:i,nodeLookup:o,dragging:s=!0}=e;const a=[];for(const[h,d]of i){var l;const e=null===(l=o.get(h))||void 0===l?void 0:l.internals.userNode;e&&a.push(c(c({},e),{},{position:d.position,dragging:s}))}if(!r)return[a[0],a];const u=null===(t=o.get(r))||void 0===t?void 0:t.internals.userNode;return[u?c(c({},u),{},{position:(null===(n=i.get(r))||void 0===n?void 0:n.position)||u.position,dragging:s}):a[0],a]}function Ui(e){let{onNodeMouseDown:t,getStoreItems:n,onDragStart:r,onDrag:i,onDragStop:o}=e,s={x:null,y:null},a=0,l=new Map,c=!1,u={x:0,y:0},h=null,d=!1,f=null,p=!1;return{update:function(e){let{noDragClassName:g,handleSelector:m,domNode:y,isSelectable:v,nodeId:w,nodeClickDistance:b=0}=e;function _(e,t){let{x:r,y:o}=e;const{nodeLookup:a,nodeExtent:c,snapGrid:u,snapToGrid:h,nodeOrigin:d,onNodeDrag:f,onSelectionDrag:p,onError:g,updateNodePositions:m}=n();s={x:r,y:o};let y=!1,v={x:0,y:0,x2:0,y2:0};if(l.size>1&&c){const e=Nr(l);v=jr(e)}for(const[n,i]of l){if(!a.has(n))continue;let e={x:r-i.distance.x,y:o-i.distance.y};h&&(e=Qr(e,u));let t=[[c[0][0],c[0][1]],[c[1][0],c[1][1]]];if(l.size>1&&c&&!i.extent){const{positionAbsolute:e}=i.internals,n=e.x-v.x+c[0][0],r=e.x+i.measured.width-v.x2+c[1][0];t=[[n,e.y-v.y+c[0][1]],[r,e.y+i.measured.height-v.y2+c[1][1]]]}const{position:s,positionAbsolute:f}=Pr({nodeId:n,nextPosition:e,nodeLookup:a,nodeExtent:t,nodeOrigin:d,onError:g});y=y||i.position.x!==s.x||i.position.y!==s.y,i.position=s,i.internals.positionAbsolute=f}if(y&&(m(l,!0),t&&(i||f||!w&&p))){const[e,n]=ji({nodeId:w,dragItems:l,nodeLookup:a});null===i||void 0===i||i(t,l,e,n),null===f||void 0===f||f(t,e,n),w||null===p||void 0===p||p(t,n)}}async function S(){if(!h)return;const{transform:e,panBy:t,autoPanSpeed:r}=n(),[i,o]=zr(u,h,r);var l,c;0===i&&0===o||(s.x=(null!==(l=s.x)&&void 0!==l?l:0)-i/e[2],s.y=(null!==(c=s.y)&&void 0!==c?c:0)-o/e[2],await t({x:i,y:o})&&_(s,null));a=requestAnimationFrame(S)}function C(e){const{nodeLookup:i,multiSelectionActive:o,nodesDraggable:a,transform:c,snapGrid:u,snapToGrid:f,selectNodesOnDrag:p,onNodeDragStart:g,onSelectionDragStart:m,unselectNodesAndEdges:y}=n();var b;(d=!0,p&&v||o||!w)||(null!==(b=i.get(w))&&void 0!==b&&b.selected||y());v&&p&&w&&(null===t||void 0===t||t(w));const _=ii(e.sourceEvent,{transform:c,snapGrid:u,snapToGrid:f,containerBounds:h});if(s=_,l=function(e,t,n,r){const i=new Map;for(const[a,l]of e)if((l.selected||l.id===r)&&(!l.parentId||!zi(l,e))&&(l.draggable||t&&"undefined"===typeof l.draggable)){const t=e.get(a);var o,s;t&&i.set(a,{id:a,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:null!==(o=t.measured.width)&&void 0!==o?o:0,height:null!==(s=t.measured.height)&&void 0!==s?s:0}})}return i}(i,a,_,w),l.size>0&&(r||g||!w&&m)){const[t,n]=ji({nodeId:w,dragItems:l,nodeLookup:i});null===r||void 0===r||r(e.sourceEvent,l,t,n),null===g||void 0===g||g(e.sourceEvent,t,n),w||null===m||void 0===m||m(e.sourceEvent,n)}}f=Pe(y);const E=Ke().clickDistance(b).on("start",(e=>{const{domNode:t,nodeDragThreshold:r,transform:i,snapGrid:o,snapToGrid:a}=n();h=(null===t||void 0===t?void 0:t.getBoundingClientRect())||null,p=!1,0===r&&C(e);const l=ii(e.sourceEvent,{transform:i,snapGrid:o,snapToGrid:a,containerBounds:h});s=l,u=ui(e.sourceEvent,h)})).on("drag",(e=>{const{autoPanOnNodeDrag:t,transform:r,snapGrid:i,snapToGrid:o,nodeDragThreshold:a,nodeLookup:f}=n(),g=ii(e.sourceEvent,{transform:r,snapGrid:i,snapToGrid:o,containerBounds:h});if(("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||w&&!f.has(w))&&(p=!0),!p){if(!c&&t&&d&&(c=!0,S()),!d){var m,y;const t=g.xSnapped-(null!==(m=s.x)&&void 0!==m?m:0),n=g.ySnapped-(null!==(y=s.y)&&void 0!==y?y:0);Math.sqrt(t*t+n*n)>a&&C(e)}(s.x!==g.xSnapped||s.y!==g.ySnapped)&&l&&d&&(u=ui(e.sourceEvent,h),_(g,e.sourceEvent))}})).on("end",(e=>{if(d&&!p&&(c=!1,d=!1,cancelAnimationFrame(a),l.size>0)){const{nodeLookup:t,updateNodePositions:r,onNodeDragStop:i,onSelectionDragStop:s}=n();if(r(l,!1),o||i||!w&&s){const[n,r]=ji({nodeId:w,dragItems:l,nodeLookup:t,dragging:!1});null===o||void 0===o||o(e.sourceEvent,l,n,r),null===i||void 0===i||i(e.sourceEvent,n,r),w||null===s||void 0===s||s(e.sourceEvent,r)}}})).filter((e=>{const t=e.target;return!e.button&&(!g||!Vi(t,".".concat(g),y))&&(!m||Vi(t,m,y))}));f.call(E)},destroy:function(){var e;null===(e=f)||void 0===e||e.on(".drag",null)}}}function Bi(e,t,n,r){let i=[],o=1/0;const s=function(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const o of t.values())Wr(i,Br(o))>0&&r.push(o);return r}(e,n,t+250);for(const f of s){var a,l,u,h;const n=[...null!==(a=null===(l=f.internals.handleBounds)||void 0===l?void 0:l.source)&&void 0!==a?a:[],...null!==(u=null===(h=f.internals.handleBounds)||void 0===h?void 0:h.target)&&void 0!==u?u:[]];for(const s of n){if(r.nodeId===s.nodeId&&r.type===s.type&&r.id===s.id)continue;const{x:n,y:a}=Ti(f,s,s.position,!0),l=Math.sqrt(Math.pow(n-e.x,2)+Math.pow(a-e.y,2));l>t||(l<o?(i=[c(c({},s),{},{x:n,y:a})],o=l):l===o&&i.push(c(c({},s),{},{x:n,y:a})))}}if(!i.length)return null;if(i.length>1){var d;const e="source"===r.type?"target":"source";return null!==(d=i.find((t=>t.type===e)))&&void 0!==d?d:i[0]}return i[0]}function qi(e,t,n,r,i){var o,s,a,l,u,h;let d=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const f=r.get(e);if(!f)return null;const p="strict"===i?null===(o=f.internals.handleBounds)||void 0===o?void 0:o[t]:[...null!==(s=null===(a=f.internals.handleBounds)||void 0===a?void 0:a.source)&&void 0!==s?s:[],...null!==(l=null===(u=f.internals.handleBounds)||void 0===u?void 0:u.target)&&void 0!==l?l:[]],g=null!==(h=n?null===p||void 0===p?void 0:p.find((e=>e.id===n)):null===p||void 0===p?void 0:p[0])&&void 0!==h?h:null;return g&&d?c(c({},g),Ti(f,g,g.position,!0)):g}function Hi(e,t){return e||(null!==t&&void 0!==t&&t.classList.contains("target")?"target":null!==t&&void 0!==t&&t.classList.contains("source")?"source":null)}const Wi=()=>!0;function Ki(e,t){let{handle:n,connectionMode:r,fromNodeId:i,fromHandleId:o,fromType:s,doc:a,lib:l,flowId:c,isValidConnection:u=Wi,nodeLookup:h}=t;const d="target"===s,f=n?a.querySelector(".".concat(l,'-flow__handle[data-id="').concat(c,"-").concat(null===n||void 0===n?void 0:n.nodeId,"-").concat(null===n||void 0===n?void 0:n.id,"-").concat(null===n||void 0===n?void 0:n.type,'"]')):null,{x:p,y:g}=ui(e),m=a.elementFromPoint(p,g),y=null!==m&&void 0!==m&&m.classList.contains("".concat(l,"-flow__handle"))?m:f,v={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const e=Hi(void 0,y),t=y.getAttribute("data-nodeid"),n=y.getAttribute("data-handleid"),s=y.classList.contains("connectable"),a=y.classList.contains("connectableend");if(!t||!e)return v;const l={source:d?t:i,sourceHandle:d?n:o,target:d?i:t,targetHandle:d?o:n};v.connection=l;const c=s&&a&&(r===mr.Strict?d&&"source"===e||!d&&"target"===e:t!==i||n!==o);v.isValid=c&&u(l),v.toHandle=qi(t,e,n,h,r,!1)}return v}const Yi={onPointerDown:function(e,t){let{connectionMode:n,connectionRadius:r,handleId:i,nodeId:o,edgeUpdaterType:s,isTarget:a,domNode:l,nodeLookup:h,lib:d,autoPanOnConnect:f,flowId:p,panBy:g,cancelConnection:m,onConnectStart:y,onConnect:v,onConnectEnd:w,isValidConnection:b=Wi,onReconnectEnd:_,updateConnection:S,getTransform:C,getFromHandle:E,autoPanSpeed:k}=t;const x=si(e.target);let T,N=0;const{x:I,y:D}=ui(e),A=null===x||void 0===x?void 0:x.elementFromPoint(I,D),P=Hi(s,A),M=null===l||void 0===l?void 0:l.getBoundingClientRect();if(!M||!P)return;const R=qi(o,P,i,h,n);if(!R)return;let O=ui(e,M),L=!1,F=null,z=!1,V=null;function j(){if(!f||!M)return;const[e,t]=zr(O,M,k);g({x:e,y:t}),N=requestAnimationFrame(j)}const U=c(c({},R),{},{nodeId:o,type:P,position:R.position}),B=h.get(o),q={inProgress:!0,isValid:null,from:Ti(B,U,Sr.Left,!0),fromHandle:U,fromPosition:U.position,fromNode:B,to:O,toHandle:null,toPosition:Cr[U.position],toNode:null};S(q);let H=q;function W(e){if(!E()||!U)return void K(e);const t=C();O=ui(e,M),T=Bi(Xr(O,t,!1,[1,1]),r,h,U),L||(j(),L=!0);const s=Ki(e,{handle:T,connectionMode:n,fromNodeId:o,fromHandleId:i,fromType:a?"target":"source",isValidConnection:b,doc:x,lib:d,flowId:p,nodeLookup:h});V=s.handleDomNode,F=s.connection,z=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!T,s.isValid);const l=c(c({},H),{},{isValid:z,to:T&&z?Zr({x:T.x,y:T.y},t):O,toHandle:s.toHandle,toPosition:z&&s.toHandle?s.toHandle.position:Cr[U.position],toNode:s.toHandle?h.get(s.toHandle.nodeId):null});z&&T&&H.toHandle&&l.toHandle&&H.toHandle.type===l.toHandle.type&&H.toHandle.nodeId===l.toHandle.nodeId&&H.toHandle.id===l.toHandle.id&&H.to.x===l.to.x&&H.to.y===l.to.y||(S(l),H=l)}function K(e){(T||V)&&F&&z&&(null===v||void 0===v||v(F));const{inProgress:t}=H,n=c(c({},u(H,rr)),{},{toPosition:H.toHandle?H.toPosition:null});null===w||void 0===w||w(e,n),s&&(null===_||void 0===_||_(e,n)),m(),cancelAnimationFrame(N),L=!1,z=!1,F=null,V=null,x.removeEventListener("mousemove",W),x.removeEventListener("mouseup",K),x.removeEventListener("touchmove",W),x.removeEventListener("touchend",K)}null===y||void 0===y||y(e,{nodeId:o,handleId:i,handleType:P}),x.addEventListener("mousemove",W),x.addEventListener("mouseup",K),x.addEventListener("touchmove",W),x.addEventListener("touchend",K)},isValid:Ki};const Gi=e=>({x:e.x,y:e.y,zoom:e.k}),Qi=e=>{let{x:t,y:n,zoom:r}=e;return Kn.translate(t,n).scale(r)},Xi=(e,t)=>e.target.closest(".".concat(t)),Zi=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),$i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const r="number"===typeof t&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},Ji=e=>{const t=e.ctrlKey&&Jr()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function eo(e){let{domNode:t,minZoom:n,maxZoom:r,paneClickDistance:i,translateExtent:o,viewport:s,onPanZoom:a,onPanZoomStart:l,onPanZoomEnd:c,onDraggingChange:u}=e;const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=t.getBoundingClientRect(),f=nr().clickDistance(!Yr(i)||i<0?0:i).scaleExtent([n,r]).translateExtent(o),p=Pe(t).call(f);w({x:s.x,y:s.y,zoom:Rr(s.zoom,n,r)},[[0,0],[d.width,d.height]],o);const g=p.on("wheel.zoom"),m=p.on("dblclick.zoom");function y(e,t){return p?new Promise((n=>{null===f||void 0===f||f.transform($i(p,null===t||void 0===t?void 0:t.duration,(()=>n(!0))),e)})):Promise.resolve(!1)}function v(){f.on("zoom",null)}async function w(e,t,n){const r=Qi(e),i=null===f||void 0===f?void 0:f.constrain()(r,t,n);return i&&await y(i),new Promise((e=>e(i)))}return f.wheelDelta(Ji),{update:function(e){let{noWheelClassName:t,noPanClassName:n,onPaneContextMenu:r,userSelectionActive:i,panOnScroll:o,panOnDrag:s,panOnScrollMode:d,panOnScrollSpeed:y,preventScrolling:w,zoomOnPinch:b,zoomOnScroll:_,zoomOnDoubleClick:S,zoomActivationKeyPressed:C,lib:E,onTransformChange:k}=e;i&&!h.isZoomingOrPanning&&v();const x=o&&!C&&!i?function(e){let{zoomPanValues:t,noWheelClassName:n,d3Selection:r,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:s,zoomOnPinch:a,onPanZoomStart:l,onPanZoom:c,onPanZoomEnd:u}=e;return e=>{if(Xi(e,n))return!1;e.preventDefault(),e.stopImmediatePropagation();const h=r.property("__zoom").k||1;if(e.ctrlKey&&a){const t=Me(e),n=Ji(e),o=h*Math.pow(2,n);return void i.scaleTo(r,o,t,e)}const d=1===e.deltaMode?20:1;let f=o===yr.Vertical?0:e.deltaX*d,p=o===yr.Horizontal?0:e.deltaY*d;!Jr()&&e.shiftKey&&o!==yr.Vertical&&(f=e.deltaY*d,p=0),i.translateBy(r,-f/h*s,-p/h*s,{internal:!0});const g=Gi(r.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,null===l||void 0===l||l(e,g)),t.isPanScrolling&&(null===c||void 0===c||c(e,g),t.panScrollTimeout=setTimeout((()=>{null===u||void 0===u||u(e,g),t.isPanScrolling=!1}),150))}}({zoomPanValues:h,noWheelClassName:t,d3Selection:p,d3Zoom:f,panOnScrollMode:d,panOnScrollSpeed:y,zoomOnPinch:b,onPanZoomStart:l,onPanZoom:a,onPanZoomEnd:c}):function(e){let{noWheelClassName:t,preventScrolling:n,d3ZoomHandler:r}=e;return function(e,i){if(!n&&"wheel"===e.type&&!e.ctrlKey||Xi(e,t))return null;e.preventDefault(),r.call(this,e,i)}}({noWheelClassName:t,preventScrolling:w,d3ZoomHandler:g});if(p.on("wheel.zoom",x,{passive:!1}),!i){const e=function(e){let{zoomPanValues:t,onDraggingChange:n,onPanZoomStart:r}=e;return e=>{var i,o,s;if(null!==(i=e.sourceEvent)&&void 0!==i&&i.internal)return;const a=Gi(e.transform);t.mouseButton=(null===(o=e.sourceEvent)||void 0===o?void 0:o.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=a,"mousedown"===(null===(s=e.sourceEvent)||void 0===s?void 0:s.type)&&n(!0),r&&(null===r||void 0===r||r(e.sourceEvent,a))}}({zoomPanValues:h,onDraggingChange:u,onPanZoomStart:l});f.on("start",e);const t=function(e){let{zoomPanValues:t,panOnDrag:n,onPaneContextMenu:r,onTransformChange:i,onPanZoom:o}=e;return e=>{var s,a,l;t.usedRightMouseButton=!(!r||!Zi(n,null!==(s=t.mouseButton)&&void 0!==s?s:0)),null!==(a=e.sourceEvent)&&void 0!==a&&a.sync||i([e.transform.x,e.transform.y,e.transform.k]),!o||null!==(l=e.sourceEvent)&&void 0!==l&&l.internal||null===o||void 0===o||o(e.sourceEvent,Gi(e.transform))}}({zoomPanValues:h,panOnDrag:s,onPaneContextMenu:!!r,onPanZoom:a,onTransformChange:k});f.on("zoom",t);const n=function(e){let{zoomPanValues:t,panOnDrag:n,panOnScroll:r,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:s}=e;return e=>{var a,l,c,u;if((null===(a=e.sourceEvent)||void 0===a||!a.internal)&&(t.isZoomingOrPanning=!1,s&&Zi(n,null!==(l=t.mouseButton)&&void 0!==l?l:0)&&!t.usedRightMouseButton&&e.sourceEvent&&s(e.sourceEvent),t.usedRightMouseButton=!1,i(!1),o&&(c=t.prevViewport,u=e.transform,c.x!==u.x||c.y!==u.y||c.zoom!==u.k))){const n=Gi(e.transform);t.prevViewport=n,clearTimeout(t.timerId),t.timerId=setTimeout((()=>{null===o||void 0===o||o(e.sourceEvent,n)}),r?150:0)}}}({zoomPanValues:h,panOnDrag:s,panOnScroll:o,onPaneContextMenu:r,onPanZoomEnd:c,onDraggingChange:u});f.on("end",n)}const T=function(e){let{zoomActivationKeyPressed:t,zoomOnScroll:n,zoomOnPinch:r,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:s,userSelectionActive:a,noWheelClassName:l,noPanClassName:c,lib:u}=e;return e=>{var h;const d=t||n,f=r&&e.ctrlKey;if(1===e.button&&"mousedown"===e.type&&(Xi(e,"".concat(u,"-flow__node"))||Xi(e,"".concat(u,"-flow__edge"))))return!0;if(!i&&!d&&!o&&!s&&!r)return!1;if(a)return!1;if(Xi(e,l)&&"wheel"===e.type)return!1;if(Xi(e,c)&&("wheel"!==e.type||o&&"wheel"===e.type&&!t))return!1;if(!r&&e.ctrlKey&&"wheel"===e.type)return!1;if(!r&&"touchstart"===e.type&&(null===(h=e.touches)||void 0===h?void 0:h.length)>1)return e.preventDefault(),!1;if(!d&&!o&&!f&&"wheel"===e.type)return!1;if(!i&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(Array.isArray(i)&&!i.includes(e.button)&&"mousedown"===e.type)return!1;const p=Array.isArray(i)&&i.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&p}}({zoomActivationKeyPressed:C,panOnDrag:s,zoomOnScroll:_,panOnScroll:o,zoomOnDoubleClick:S,zoomOnPinch:b,userSelectionActive:i,noPanClassName:n,noWheelClassName:t,lib:E});f.filter(T),S?p.on("dblclick.zoom",m):p.on("dblclick.zoom",null)},destroy:v,setViewport:async function(e,t){const n=Qi(e);return await y(n,t),new Promise((e=>e(n)))},setViewportConstrained:w,getViewport:function(){const e=p?Yn(p.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return p?new Promise((n=>{null===f||void 0===f||f.scaleTo($i(p,null===t||void 0===t?void 0:t.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},scaleBy:function(e,t){return p?new Promise((n=>{null===f||void 0===f||f.scaleBy($i(p,null===t||void 0===t?void 0:t.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},setScaleExtent:function(e){null===f||void 0===f||f.scaleExtent(e)},setTranslateExtent:function(e){null===f||void 0===f||f.translateExtent(e)},syncViewport:function(e){if(p){const t=Qi(e),n=p.property("__zoom");n.k===e.zoom&&n.x===e.x&&n.y===e.y||null===f||void 0===f||f.transform(p,t,null,{sync:!0})}},setClickDistance:function(e){const t=!Yr(e)||e<0?0:e;null===f||void 0===f||f.clickDistance(t)}}}var to;!function(e){e.Line="line",e.Handle="handle"}(to||(to={}));function no(e,t){return Math.max(0,t-e)}function ro(e,t){return Math.max(0,e-t)}function io(e,t,n){return Math.max(0,t-e,e-n)}function oo(e,t){return e?!t:t}const so={width:0,height:0,x:0,y:0},ao=c(c({},so),{},{pointerX:0,pointerY:0,aspectRatio:1});function lo(e,t,n){var r,i;const o=t.position.x+e.position.x,s=t.position.y+e.position.y,a=null!==(r=e.measured.width)&&void 0!==r?r:0,l=null!==(i=e.measured.height)&&void 0!==i?i:0,c=n[0]*a,u=n[1]*l;return[[o-c,s-u],[o+a-c,s+l-u]]}function co(e){let{domNode:t,nodeId:n,getStoreItems:r,onChange:i,onEnd:o}=e;const s=Pe(t);return{update:function(e){let{controlPosition:t,boundaries:a,keepAspectRatio:l,onResizeStart:u,onResize:h,onResizeEnd:d,shouldResize:f}=e,p=c({},so),g=c({},ao);const m=function(e){return{isHorizontal:e.includes("right")||e.includes("left"),isVertical:e.includes("bottom")||e.includes("top"),affectsX:e.includes("left"),affectsY:e.includes("top")}}(t);let y,v,w,b,_=null,S=[];const C=Ke().on("start",(e=>{var t,i,o,s,a;const{nodeLookup:l,transform:h,snapGrid:d,snapToGrid:f,nodeOrigin:m,paneDomNode:C}=r();if(y=l.get(n),!y)return;_=null!==(t=null===C||void 0===C?void 0:C.getBoundingClientRect())&&void 0!==t?t:null;const{xSnapped:E,ySnapped:k}=ii(e.sourceEvent,{transform:h,snapGrid:d,snapToGrid:f,containerBounds:_});p={width:null!==(i=y.measured.width)&&void 0!==i?i:0,height:null!==(o=y.measured.height)&&void 0!==o?o:0,x:null!==(s=y.position.x)&&void 0!==s?s:0,y:null!==(a=y.position.y)&&void 0!==a?a:0},g=c(c({},p),{},{pointerX:E,pointerY:k,aspectRatio:p.width/p.height}),v=void 0,y.parentId&&("parent"===y.extent||y.expandParent)&&(v=l.get(y.parentId),w=v&&"parent"===y.extent?function(e){return[[0,0],[e.measured.width,e.measured.height]]}(v):void 0),S=[],b=void 0;for(const[r,u]of l)if(u.parentId===n&&(S.push({id:r,position:c({},u.position),extent:u.extent}),"parent"===u.extent||u.expandParent)){var x;const e=lo(u,y,null!==(x=u.origin)&&void 0!==x?x:m);b=b?[[Math.min(e[0][0],b[0][0]),Math.min(e[0][1],b[0][1])],[Math.max(e[1][0],b[1][0]),Math.max(e[1][1],b[1][1])]]:e}null===u||void 0===u||u(e,c({},p))})).on("drag",(e=>{var t;const{transform:n,snapGrid:o,snapToGrid:s,nodeOrigin:u}=r(),d=ii(e.sourceEvent,{transform:n,snapGrid:o,snapToGrid:s,containerBounds:_}),C=[];if(!y)return;const{x:E,y:k,width:x,height:T}=p,N={},I=null!==(t=y.origin)&&void 0!==t?t:u,{width:D,height:A,x:P,y:M}=function(e,t,n,r,i,o,s,a){let{affectsX:l,affectsY:c}=t;const{isHorizontal:u,isVertical:h}=t,d=u&&h,{xSnapped:f,ySnapped:p}=n,{minWidth:g,maxWidth:m,minHeight:y,maxHeight:v}=r,{x:w,y:b,width:_,height:S,aspectRatio:C}=e;let E=Math.floor(u?f-e.pointerX:0),k=Math.floor(h?p-e.pointerY:0);const x=_+(l?-E:E),T=S+(c?-k:k),N=-o[0]*_,I=-o[1]*S;let D=io(x,g,m),A=io(T,y,v);if(s){let e=0,t=0;l&&E<0?e=no(w+E+N,s[0][0]):!l&&E>0&&(e=ro(w+x+N,s[1][0])),c&&k<0?t=no(b+k+I,s[0][1]):!c&&k>0&&(t=ro(b+T+I,s[1][1])),D=Math.max(D,e),A=Math.max(A,t)}if(a){let e=0,t=0;l&&E>0?e=ro(w+E,a[0][0]):!l&&E<0&&(e=no(w+x,a[1][0])),c&&k>0?t=ro(b+k,a[0][1]):!c&&k<0&&(t=no(b+T,a[1][1])),D=Math.max(D,e),A=Math.max(A,t)}if(i){if(u){const e=io(x/C,y,v)*C;if(D=Math.max(D,e),s){let e=0;e=!l&&!c||l&&!c&&d?ro(b+I+x/C,s[1][1])*C:no(b+I+(l?E:-E)/C,s[0][1])*C,D=Math.max(D,e)}if(a){let e=0;e=!l&&!c||l&&!c&&d?no(b+x/C,a[1][1])*C:ro(b+(l?E:-E)/C,a[0][1])*C,D=Math.max(D,e)}}if(h){const e=io(T*C,g,m)/C;if(A=Math.max(A,e),s){let e=0;e=!l&&!c||c&&!l&&d?ro(w+T*C+N,s[1][0])/C:no(w+(c?k:-k)*C+N,s[0][0])/C,A=Math.max(A,e)}if(a){let e=0;e=!l&&!c||c&&!l&&d?no(w+T*C,a[1][0])/C:ro(w+(c?k:-k)*C,a[0][0])/C,A=Math.max(A,e)}}}k+=k<0?A:-A,E+=E<0?D:-D,i&&(d?x>T*C?k=(oo(l,c)?-E:E)/C:E=(oo(l,c)?-k:k)*C:u?(k=E/C,c=l):(E=k*C,l=c));const P=l?w+E:w,M=c?b+k:b;return{width:_+(l?-E:E),height:S+(c?-k:k),x:o[0]*E*(l?-1:1)+P,y:o[1]*k*(c?-1:1)+M}}(g,m,d,a,l,I,w,b),R=D!==x,O=A!==T,L=P!==E&&R,F=M!==k&&O;if(!L&&!F&&!R&&!O)return;if((L||F||1===I[0]||1===I[1])&&(N.x=L?P:p.x,N.y=F?M:p.y,p.x=N.x,p.y=N.y,S.length>0)){const e=P-E,t=M-k;for(const n of S)n.position={x:n.position.x-e+I[0]*(D-x),y:n.position.y-t+I[1]*(A-T)},C.push(n)}if((R||O)&&(N.width=R?D:p.width,N.height=O?A:p.height,p.width=N.width,p.height=N.height),v&&y.expandParent){var z,V;const e=I[0]*(null!==(z=N.width)&&void 0!==z?z:0);N.x&&N.x<e&&(p.x=e,g.x=g.x-(N.x-e));const t=I[1]*(null!==(V=N.height)&&void 0!==V?V:0);N.y&&N.y<t&&(p.y=t,g.y=g.y-(N.y-t))}const j=function(e){let{width:t,prevWidth:n,height:r,prevHeight:i,affectsX:o,affectsY:s}=e;const a=t-n,l=r-i,c=[a>0?1:a<0?-1:0,l>0?1:l<0?-1:0];return a&&o&&(c[0]=-1*c[0]),l&&s&&(c[1]=-1*c[1]),c}({width:p.width,prevWidth:x,height:p.height,prevHeight:T,affectsX:m.affectsX,affectsY:m.affectsY}),U=c(c({},p),{},{direction:j});!1!==(null===f||void 0===f?void 0:f(e,U))&&(null===h||void 0===h||h(e,U),i(N,C))})).on("end",(e=>{null===d||void 0===d||d(e,c({},p)),null===o||void 0===o||o()}));s.call(C)},destroy:function(){s.on(".drag",null)}}}var uo=n(755);const ho=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"===typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!==typeof i||null===i)?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},s=t=e(r,i,o);return o},fo=e=>e?ho(e):ho;const{useDebugValue:po}=r,{useSyncExternalStoreWithSelector:go}=uo,mo=e=>e;function yo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mo,n=arguments.length>2?arguments[2]:void 0;const r=go(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return po(r),r}const vo=(e,t)=>{const n=fo(e),r=function(e){return yo(n,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t)};return Object.assign(r,n),r};function wo(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}n(766);const bo=["position","children","className","style"],_o=["type","position","isValidConnection","isConnectable","isConnectableStart","isConnectableEnd","id","onConnect","children","className","onMouseDown","onTouchStart"],So=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"],Co=["path","labelX","labelY","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","interactionWidth"],Eo=["id"],ko=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","onSelectionStart","onSelectionEnd","onBeforeDelete","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","selectionOnDrag","selectionMode","panActivationKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","nodesFocusable","nodeOrigin","edgesFocusable","edgesReconnectable","elementsSelectable","defaultViewport","minZoom","maxZoom","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneMouseEnter","onPaneMouseMove","onPaneMouseLeave","onPaneScroll","onPaneContextMenu","paneClickDistance","nodeClickDistance","children","onReconnect","onReconnectStart","onReconnectEnd","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","reconnectRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","disableKeyboardA11y","autoPanOnConnect","autoPanOnNodeDrag","autoPanSpeed","connectionRadius","isValidConnection","onError","style","id","nodeDragThreshold","viewport","onViewportChange","width","height","colorMode","debug"],xo=["children","className"],To=(0,r.createContext)(null),No=To.Provider,Io=ir();function Do(e,t){const n=(0,r.useContext)(To);if(null===n)throw new Error(Io);return yo(n,e,t)}function Ao(){const e=(0,r.useContext)(To);if(null===e)throw new Error(Io);return(0,r.useMemo)((()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe})),[e])}const Po={display:"none"},Mo={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ro="react-flow__node-desc",Oo="react-flow__edge-desc",Lo=e=>e.ariaLiveMessage;function Fo(e){let{rfId:t}=e;const n=Do(Lo);return(0,h.jsx)("div",{id:"".concat("react-flow__aria-live","-").concat(t),"aria-live":"assertive","aria-atomic":"true",style:Mo,children:n})}function zo(e){let{rfId:t,disableKeyboardA11y:n}=e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{id:"".concat(Ro,"-").concat(t),style:Po,children:["Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),(0,h.jsx)("div",{id:"".concat(Oo,"-").concat(t),style:Po,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!n&&(0,h.jsx)(Fo,{rfId:t})]})}const Vo=e=>e.userSelectionActive?"none":"all",jo=(0,r.forwardRef)(((e,t)=>{let{position:n="top-left",children:r,className:i,style:o}=e,s=u(e,bo);const a=Do(Vo),l="".concat(n).split("-");return(0,h.jsx)("div",c(c({className:d(["react-flow__panel",i,...l]),style:c(c({},o),{},{pointerEvents:a}),ref:t},s),{},{children:r}))}));function Uo(e){let{proOptions:t,position:n="bottom-right"}=e;return null!==t&&void 0!==t&&t.hideAttribution?null:(0,h.jsx)(jo,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,h.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Bo=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},qo=e=>e.id;function Ho(e,t){return wo(e.selectedNodes.map(qo),t.selectedNodes.map(qo))&&wo(e.selectedEdges.map(qo),t.selectedEdges.map(qo))}function Wo(e){let{onSelectionChange:t}=e;const n=Ao(),{selectedNodes:i,selectedEdges:o}=Do(Bo,Ho);return(0,r.useEffect)((()=>{const e={nodes:i,edges:o};null===t||void 0===t||t(e),n.getState().onSelectionChangeHandlers.forEach((t=>t(e)))}),[i,o,t]),null}const Ko=e=>!!e.onSelectionChangeHandlers;function Yo(e){let{onSelectionChange:t}=e;const n=Do(Ko);return t||n?(0,h.jsx)(Wo,{onSelectionChange:t}):null}const Go=[0,0],Qo={x:0,y:0,zoom:1},Xo=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","rfId"],Zo=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),$o={translateExtent:pr,nodeOrigin:Go,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Jo(e){const{setNodes:t,setEdges:n,setMinZoom:i,setMaxZoom:o,setTranslateExtent:s,setNodeExtent:a,reset:l,setDefaultNodesAndEdges:c,setPaneClickDistance:u}=Do(Zo,wo),h=Ao();(0,r.useEffect)((()=>(c(e.defaultNodes,e.defaultEdges),()=>{d.current=$o,l()})),[]);const d=(0,r.useRef)($o);return(0,r.useEffect)((()=>{for(const r of Xo){const l=e[r];l!==d.current[r]&&("undefined"!==typeof e[r]&&("nodes"===r?t(l):"edges"===r?n(l):"minZoom"===r?i(l):"maxZoom"===r?o(l):"translateExtent"===r?s(l):"nodeExtent"===r?a(l):"paneClickDistance"===r?u(l):"fitView"===r?h.setState({fitViewOnInit:l}):"fitViewOptions"===r?h.setState({fitViewOnInitOptions:l}):h.setState({[r]:l})))}d.current=e}),Xo.map((t=>e[t]))),null}function es(){return"undefined"!==typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}const ts="undefined"!==typeof document?document:null;function ns(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{target:ts,actInsideInputWithModifier:!0};const[n,i]=(0,r.useState)(!1),o=(0,r.useRef)(!1),s=(0,r.useRef)(new Set([])),[a,l]=(0,r.useMemo)((()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter((e=>"string"===typeof e)).map((e=>e.replace("+","\n").replace("\n\n","\n+").split("\n"))),n=t.reduce(((e,t)=>e.concat(...t)),[]);return[t,n]}return[[],[]]}),[e]);return(0,r.useEffect)((()=>{const n=(null===t||void 0===t?void 0:t.target)||ts;if(null!==e){const e=e=>{o.current=e.ctrlKey||e.metaKey||e.shiftKey;if((!o.current||o.current&&!t.actInsideInputWithModifier)&&li(e))return!1;const n=is(e.code,l);s.current.add(e[n]),rs(a,s.current,!1)&&(e.preventDefault(),i(!0))},r=e=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&li(e))return!1;const n=is(e.code,l);rs(a,s.current,!0)?(i(!1),s.current.clear()):s.current.delete(e[n]),"Meta"===e.key&&s.current.clear(),o.current=!1},c=()=>{s.current.clear(),i(!1)};return null===n||void 0===n||n.addEventListener("keydown",e),null===n||void 0===n||n.addEventListener("keyup",r),window.addEventListener("blur",c),window.addEventListener("contextmenu",c),()=>{null===n||void 0===n||n.removeEventListener("keydown",e),null===n||void 0===n||n.removeEventListener("keyup",r),window.removeEventListener("blur",c),window.removeEventListener("contextmenu",c)}}}),[e,i]),n}function rs(e,t,n){return e.filter((e=>n||e.length===t.size)).some((e=>e.every((e=>t.has(e)))))}function is(e,t){return t.includes(e)?"code":"key"}function os(e,t){const n=[],r=new Map,i=[];for(const o of e)if("add"!==o.type)if("remove"===o.type||"replace"===o.type)r.set(o.id,[o]);else{const e=r.get(o.id);e?e.push(o):r.set(o.id,[o])}else i.push(o);for(const o of t){const e=r.get(o.id);if(!e){n.push(o);continue}if("remove"===e[0].type)continue;if("replace"===e[0].type){n.push(c({},e[0].item));continue}const t=c({},o);for(const n of e)ss(n,t);n.push(t)}return i.length&&i.forEach((e=>{void 0!==e.index?n.splice(e.index,0,c({},e.item)):n.push(c({},e.item))})),n}function ss(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":"undefined"!==typeof e.position&&(t.position=e.position),"undefined"!==typeof e.dragging&&(t.dragging=e.dragging);break;case"dimensions":var n;if("undefined"!==typeof e.dimensions)null!==(n=t.measured)&&void 0!==n||(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height);"boolean"===typeof e.resizing&&(t.resizing=e.resizing)}}function as(e,t){return os(e,t)}function ls(e,t){return os(e,t)}function cs(e,t){return{id:e,type:"select",selected:t}}function us(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=[];for(const[i,o]of e){const e=t.has(i);void 0===o.selected&&!e||o.selected===e||(n&&(o.selected=e),r.push(cs(o.id,e)))}return r}function hs(e){let{items:t=[],lookup:n}=e;const r=[],i=new Map(t.map((e=>[e.id,e])));for(const[a,l]of t.entries()){var o,s;const e=n.get(l.id),t=null!==(o=null===e||void 0===e||null===(s=e.internals)||void 0===s?void 0:s.userNode)&&void 0!==o?o:e;void 0!==t&&t!==l&&r.push({id:l.id,item:l,type:"replace"}),void 0===t&&r.push({item:l,type:"add",index:a})}for(const[a]of n){void 0===i.get(a)&&r.push({id:a,type:"remove"})}return r}function ds(e){return{id:e.id,type:"remove"}}const fs=e=>(e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e))(e);function ps(e){return(0,r.forwardRef)(e)}const gs="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;function ms(e){const[t,n]=(0,r.useState)(BigInt(0)),[i]=(0,r.useState)((()=>function(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}((()=>n((e=>e+BigInt(1)))))));return gs((()=>{const t=i.get();t.length&&(e(t),i.reset())}),[t]),i}const ys=(0,r.createContext)(null);function vs(e){let{children:t}=e;const n=Ao(),i=(0,r.useCallback)((e=>{const{nodes:t=[],setNodes:r,hasDefaultNodes:i,onNodesChange:o,nodeLookup:s}=n.getState();let a=t;for(const n of e)a="function"===typeof n?n(a):n;i?r(a):o&&o(hs({items:a,lookup:s}))}),[]),o=ms(i),s=ms((0,r.useCallback)((e=>{const{edges:t=[],setEdges:r,hasDefaultEdges:i,onEdgesChange:o,edgeLookup:s}=n.getState();let a=t;for(const n of e)a="function"===typeof n?n(a):n;i?r(a):o&&o(hs({items:a,lookup:s}))}),[])),a=(0,r.useMemo)((()=>({nodeQueue:o,edgeQueue:s})),[]);return(0,h.jsx)(ys.Provider,{value:a,children:t})}const ws=e=>!!e.panZoom;function bs(){const e=(()=>{const e=Ao();return(0,r.useMemo)((()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:null===t||void 0===t?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:null===t||void 0===t?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:null===n||void 0===n?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{var r,i,o;const{transform:[s,a,l],panZoom:c}=e.getState();return c?(await c.setViewport({x:null!==(r=t.x)&&void 0!==r?r:s,y:null!==(i=t.y)&&void 0!==i?i:a,zoom:null!==(o=t.zoom)&&void 0!==o?o:l},{duration:null===n||void 0===n?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>{const{nodeLookup:n,minZoom:r,maxZoom:i,panZoom:o,domNode:s}=e.getState();if(!o||!s)return Promise.resolve(!1);const a=Dr(n,t),{width:l,height:c}=oi(s);return Ar({nodes:a,width:l,height:c,minZoom:r,maxZoom:i,panZoom:o},t)},setCenter:async(t,n,r)=>{const{width:i,height:o,maxZoom:s,panZoom:a}=e.getState(),l="undefined"!==typeof(null===r||void 0===r?void 0:r.zoom)?r.zoom:s,c=i/2-t*l,u=o/2-n*l;return a?(await a.setViewport({x:c,y:u,zoom:l},{duration:null===r||void 0===r?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{var r;const{width:i,height:o,minZoom:s,maxZoom:a,panZoom:l}=e.getState(),c=$r(t,i,o,s,a,null!==(r=null===n||void 0===n?void 0:n.padding)&&void 0!==r?r:.1);return l?(await l.setViewport(c,{duration:null===n||void 0===n?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{snapToGrid:!0};const{transform:r,snapGrid:i,domNode:o}=e.getState();if(!o)return t;const{x:s,y:a}=o.getBoundingClientRect(),l={x:t.x-s,y:t.y-a};return Xr(l,r,n.snapToGrid,i)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:o}=r.getBoundingClientRect(),s=Zr(t,n);return{x:s.x+i,y:s.y+o}}})),[])})(),t=Ao(),n=function(){const e=(0,r.useContext)(ys);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}(),i=Do(ws),o=(0,r.useMemo)((()=>{const e=e=>t.getState().nodeLookup.get(e),r=e=>{n.nodeQueue.push(e)},i=e=>{n.edgeQueue.push(e)},o=e=>{var n,r,i,o;const{nodeLookup:s,nodeOrigin:a}=t.getState(),l=fs(e)?e:s.get(e.id),u=l.parentId?ri(l.position,l.measured,l.parentId,s,a):l.position,h=c(c({},l),{},{position:u,width:null!==(n=null===(r=l.measured)||void 0===r?void 0:r.width)&&void 0!==n?n:l.width,height:null!==(i=null===(o=l.measured)||void 0===o?void 0:o.height)&&void 0!==i?i:l.height});return Br(h)},s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};r((r=>r.map((r=>{if(r.id===e){const e="function"===typeof t?t(r):t;return n.replace&&fs(e)?e:c(c({},r),e)}return r}))))},a=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};i((r=>r.map((r=>{if(r.id===e){const e="function"===typeof t?t(r):t;return n.replace&&kr(e)?e:c(c({},r),e)}return r}))))};return{getNodes:()=>t.getState().nodes.map((e=>c({},e))),getNode:t=>{var n;return null===(n=e(t))||void 0===n?void 0:n.internals.userNode},getInternalNode:e,getEdges:()=>{const{edges:e=[]}=t.getState();return e.map((e=>c({},e)))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:r,setEdges:i,addNodes:e=>{const t=Array.isArray(e)?e:[e];n.nodeQueue.push((e=>[...e,...t]))},addEdges:e=>{const t=Array.isArray(e)?e:[e];n.edgeQueue.push((e=>[...e,...t]))},toObject:()=>{const{nodes:e=[],edges:n=[],transform:r}=t.getState(),[i,o,s]=r;return{nodes:e.map((e=>c({},e))),edges:n.map((e=>c({},e))),viewport:{x:i,y:o,zoom:s}}},deleteElements:async e=>{let{nodes:n=[],edges:r=[]}=e;const{nodes:i,edges:o,onNodesDelete:s,onEdgesDelete:a,triggerNodeChanges:l,triggerEdgeChanges:c,onDelete:u,onBeforeDelete:h}=t.getState(),{nodes:d,edges:f}=await Mr({nodesToRemove:n,edgesToRemove:r,nodes:i,edges:o,onBeforeDelete:h}),p=f.length>0,g=d.length>0;if(p){const e=f.map(ds);null===a||void 0===a||a(f),c(e)}if(g){const e=d.map(ds);null===s||void 0===s||s(d),l(e)}return(g||p)&&(null===u||void 0===u||u({nodes:d,edges:f})),{deletedNodes:d,deletedEdges:f}},getIntersectingNodes:function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;const i=Kr(e),s=i?e:o(e),a=void 0!==r;return s?(r||t.getState().nodes).filter((r=>{const o=t.getState().nodeLookup.get(r.id);if(o&&!i&&(r.id===e.id||!o.internals.positionAbsolute))return!1;const l=Br(a?r:o),c=Wr(l,s);return n&&c>0||c>=s.width*s.height})):[]},isNodeIntersecting:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Kr(e)?e:o(e);if(!r)return!1;const i=Wr(r,t);return n&&i>0||i>=r.width*r.height},updateNode:s,updateNodeData:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};s(e,(e=>{const r="function"===typeof t?t(e):t;return n.replace?c(c({},e),{},{data:r}):c(c({},e),{},{data:c(c({},e.data),r)})}),n)},updateEdge:a,updateEdgeData:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};a(e,(e=>{const r="function"===typeof t?t(e):t;return n.replace?c(c({},e),{},{data:r}):c(c({},e),{},{data:c(c({},e.data),r)})}),n)},getNodesBounds:e=>{const{nodeLookup:n,nodeOrigin:r}=t.getState();return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{nodeOrigin:[0,0],nodeLookup:void 0};if(0===e.length)return{x:0,y:0,width:0,height:0};const n=e.reduce(((e,n)=>{const r="string"===typeof n;let i=t.nodeLookup||r?void 0:n;t.nodeLookup&&(i=r?t.nodeLookup.get(n):xr(n)?n:t.nodeLookup.get(n.id));const o=i?qr(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Vr(e,o)}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ur(n)}(e,{nodeLookup:n,nodeOrigin:r})},getHandleConnections:e=>{var n,r;let{type:i,id:o,nodeId:s}=e;return Array.from(null!==(n=null===(r=t.getState().connectionLookup.get("".concat(s,"-").concat(i,"-").concat(null!==o&&void 0!==o?o:null)))||void 0===r?void 0:r.values())&&void 0!==n?n:[])}}}),[]);return(0,r.useMemo)((()=>c(c(c({},o),e),{},{viewportInitialized:i})),[i])}const _s=e=>e.selected,Ss={actInsideInputWithModifier:!1},Cs="undefined"!==typeof window?window:void 0;const Es={position:"absolute",width:"100%",height:"100%",top:0,left:0},ks=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function xs(e){let{onPaneContextMenu:t,zoomOnScroll:n=!0,zoomOnPinch:i=!0,panOnScroll:o=!1,panOnScrollSpeed:s=.5,panOnScrollMode:a=yr.Free,zoomOnDoubleClick:l=!0,panOnDrag:c=!0,defaultViewport:u,translateExtent:d,minZoom:f,maxZoom:p,zoomActivationKeyCode:g,preventScrolling:m=!0,children:y,noWheelClassName:v,noPanClassName:w,onViewportChange:b,isControlledViewport:_,paneClickDistance:S}=e;const C=Ao(),E=(0,r.useRef)(null),{userSelectionActive:k,lib:x}=Do(ks,wo),T=ns(g),N=(0,r.useRef)();!function(e){const t=Ao();(0,r.useEffect)((()=>{const n=()=>{if(!e.current)return!1;const n=oi(e.current);var r,i;0!==n.height&&0!==n.width||null===(r=(i=t.getState()).onError)||void 0===r||r.call(i,"004",sr()),t.setState({width:n.width||500,height:n.height||500})};if(e.current){n(),window.addEventListener("resize",n);const t=new ResizeObserver((()=>n()));return t.observe(e.current),()=>{window.removeEventListener("resize",n),t&&e.current&&t.unobserve(e.current)}}}),[])}(E);const I=(0,r.useCallback)((e=>{null===b||void 0===b||b({x:e[0],y:e[1],zoom:e[2]}),_||C.setState({transform:e})}),[b,_]);return(0,r.useEffect)((()=>{if(E.current){N.current=eo({domNode:E.current,minZoom:f,maxZoom:p,translateExtent:d,viewport:u,paneClickDistance:S,onDraggingChange:e=>C.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{const{onViewportChangeStart:n,onMoveStart:r}=C.getState();null===r||void 0===r||r(e,t),null===n||void 0===n||n(t)},onPanZoom:(e,t)=>{const{onViewportChange:n,onMove:r}=C.getState();null===r||void 0===r||r(e,t),null===n||void 0===n||n(t)},onPanZoomEnd:(e,t)=>{const{onViewportChangeEnd:n,onMoveEnd:r}=C.getState();null===r||void 0===r||r(e,t),null===n||void 0===n||n(t)}});const{x:e,y:t,zoom:n}=N.current.getViewport();return C.setState({panZoom:N.current,transform:[e,t,n],domNode:E.current.closest(".react-flow")}),()=>{var e;null===(e=N.current)||void 0===e||e.destroy()}}}),[]),(0,r.useEffect)((()=>{var e;null===(e=N.current)||void 0===e||e.update({onPaneContextMenu:t,zoomOnScroll:n,zoomOnPinch:i,panOnScroll:o,panOnScrollSpeed:s,panOnScrollMode:a,zoomOnDoubleClick:l,panOnDrag:c,zoomActivationKeyPressed:T,preventScrolling:m,noPanClassName:w,userSelectionActive:k,noWheelClassName:v,lib:x,onTransformChange:I})}),[t,n,i,o,s,a,l,c,T,m,w,k,v,x,I]),(0,h.jsx)("div",{className:"react-flow__renderer",ref:E,style:Es,children:y})}const Ts=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Ns(){const{userSelectionActive:e,userSelectionRect:t}=Do(Ts,wo);return e&&t?(0,h.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")}}):null}const Is=(e,t)=>n=>{n.target===t.current&&(null===e||void 0===e||e(n))},Ds=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function As(e){let{isSelecting:t,selectionKeyPressed:n,selectionMode:i=vr.Full,panOnDrag:o,selectionOnDrag:s,onSelectionStart:a,onSelectionEnd:l,onPaneClick:c,onPaneContextMenu:u,onPaneScroll:f,onPaneMouseEnter:p,onPaneMouseMove:g,onPaneMouseLeave:m,children:y}=e;const v=(0,r.useRef)(null),w=Ao(),b=(0,r.useRef)(0),_=(0,r.useRef)(0),S=(0,r.useRef)(),C=(0,r.useRef)(new Map),{userSelectionActive:E,elementsSelectable:k,dragging:x}=Do(Ds,wo),T=k&&(t||E),N=(0,r.useRef)(!1),I=(0,r.useRef)(!1),D=e=>{N.current?N.current=!1:(null===c||void 0===c||c(e),w.getState().resetSelectedElements(),w.setState({nodesSelectionActive:!1}))},A=f?e=>f(e):void 0,P=!0===o||Array.isArray(o)&&o.includes(0);return(0,h.jsxs)("div",{className:d(["react-flow__pane",{draggable:P,dragging:x,selection:t}]),onClick:T?void 0:Is(D,v),onContextMenu:Is((e=>{Array.isArray(o)&&null!==o&&void 0!==o&&o.includes(2)?e.preventDefault():null===u||void 0===u||u(e)}),v),onWheel:Is(A,v),onPointerEnter:T?void 0:p,onPointerDown:T?e=>{var n,r;const{resetSelectedElements:i,domNode:o,edgeLookup:s}=w.getState();if(S.current=null===o||void 0===o?void 0:o.getBoundingClientRect(),!k||!t||0!==e.button||e.target!==v.current||!S.current)return;null===(n=e.target)||void 0===n||null===(r=n.setPointerCapture)||void 0===r||r.call(n,e.pointerId),I.current=!0,N.current=!1,C.current=new Map;for(const[t,a]of s){var l,c;C.current.set(a.source,(null===(l=C.current.get(a.source))||void 0===l?void 0:l.add(t))||new Set([t])),C.current.set(a.target,(null===(c=C.current.get(a.target))||void 0===c?void 0:c.add(t))||new Set([t]))}const{x:u,y:h}=ui(e.nativeEvent,S.current);i(),w.setState({userSelectionRect:{width:0,height:0,startX:u,startY:h,x:u,y:h}}),null===a||void 0===a||a(e)}:g,onPointerMove:T?e=>{const{userSelectionRect:t,edgeLookup:n,transform:r,nodeLookup:o,triggerNodeChanges:s,triggerEdgeChanges:a}=w.getState();if(!S.current||!t)return;N.current=!0;const{x:l,y:c}=ui(e.nativeEvent,S.current),{startX:u,startY:h}=t,d={startX:u,startY:h,x:l<u?l:u,y:c<h?c:h,width:Math.abs(l-u),height:Math.abs(c-h)},f=Ir(o,d,r,i===vr.Partial,!0),p=new Set,g=new Set;for(const i of f){g.add(i.id);const e=C.current.get(i.id);if(e)for(const t of e)p.add(t)}if(b.current!==g.size){b.current=g.size;s(us(o,g,!0))}if(_.current!==p.size){_.current=p.size;a(us(n,p))}w.setState({userSelectionRect:d,userSelectionActive:!0,nodesSelectionActive:!1})}:g,onPointerUp:T?e=>{var t,r;if(0!==e.button||!I.current)return;null===(t=e.target)||void 0===t||null===(r=t.releasePointerCapture)||void 0===r||r.call(t,e.pointerId);const{userSelectionRect:i}=w.getState();!E&&i&&e.target===v.current&&(null===D||void 0===D||D(e)),b.current>0&&w.setState({nodesSelectionActive:!0}),w.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,_.current=0,null===l||void 0===l||l(e),(n||s)&&(N.current=!1),I.current=!1}:void 0,onPointerLeave:m,ref:v,style:Es,children:[y,(0,h.jsx)(Ns,{})]})}function Ps(e){let{id:t,store:n,unselect:r=!1,nodeRef:i}=e;const{addSelectedNodes:o,unselectNodesAndEdges:s,multiSelectionActive:a,nodeLookup:l,onError:c}=n.getState(),u=l.get(t);u?(n.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&a)&&(s({nodes:[u],edges:[]}),requestAnimationFrame((()=>{var e;return null===i||void 0===i||null===(e=i.current)||void 0===e?void 0:e.blur()}))):o([t])):null===c||void 0===c||c("012",fr(t))}function Ms(e){let{nodeRef:t,disabled:n=!1,noDragClassName:i,handleSelector:o,nodeId:s,isSelectable:a,nodeClickDistance:l}=e;const c=Ao(),[u,h]=(0,r.useState)(!1),d=(0,r.useRef)();return(0,r.useEffect)((()=>{d.current=Ui({getStoreItems:()=>c.getState(),onNodeMouseDown:e=>{Ps({id:e,store:c,nodeRef:t})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})}),[]),(0,r.useEffect)((()=>{var e;if(n)null===(e=d.current)||void 0===e||e.destroy();else if(t.current){var r;return null===(r=d.current)||void 0===r||r.update({noDragClassName:i,handleSelector:o,domNode:t.current,isSelectable:a,nodeId:s,nodeClickDistance:l}),()=>{var e;null===(e=d.current)||void 0===e||e.destroy()}}}),[i,o,n,a,t,s]),u}function Rs(){const e=Ao(),t=(0,r.useCallback)((t=>{const{nodeExtent:n,snapToGrid:r,snapGrid:i,nodesDraggable:o,onError:s,updateNodePositions:a,nodeLookup:l,nodeOrigin:c}=e.getState(),u=new Map,h=(e=>t=>t.selected&&(t.draggable||e&&"undefined"===typeof t.draggable))(o),d=r?i[0]:5,f=r?i[1]:5,p=t.direction.x*d*t.factor,g=t.direction.y*f*t.factor;for(const[,e]of l){if(!h(e))continue;let t={x:e.internals.positionAbsolute.x+p,y:e.internals.positionAbsolute.y+g};r&&(t=Qr(t,i));const{position:o,positionAbsolute:a}=Pr({nodeId:e.id,nextPosition:t,nodeLookup:l,nodeExtent:n,nodeOrigin:c,onError:s});e.position=o,e.internals.positionAbsolute=a,u.set(e.id,e)}a(u)}),[]);return t}const Os=(0,r.createContext)(null),Ls=Os.Provider;Os.Consumer;const Fs=()=>(0,r.useContext)(Os),zs=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId});const Vs=(0,r.memo)(ps((function(e,t){let{type:n="source",position:r=Sr.Top,isValidConnection:i,isConnectable:o=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:l,onConnect:f,children:p,className:g,onMouseDown:m,onTouchStart:y}=e,v=u(e,_o);const w=l||null,b="target"===n,_=Ao(),S=Fs(),{connectOnClick:C,noPanClassName:E,rfId:k}=Do(zs,wo),{connectingFrom:x,connectingTo:T,clickConnecting:N,isPossibleEndHandle:I,connectionInProcess:D,valid:A}=Do(((e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:o,connection:s}=r,{fromHandle:a,toHandle:l,isValid:c}=s,u=(null===l||void 0===l?void 0:l.nodeId)===e&&(null===l||void 0===l?void 0:l.id)===t&&(null===l||void 0===l?void 0:l.type)===n;return{connectingFrom:(null===a||void 0===a?void 0:a.nodeId)===e&&(null===a||void 0===a?void 0:a.id)===t&&(null===a||void 0===a?void 0:a.type)===n,connectingTo:u,clickConnecting:(null===i||void 0===i?void 0:i.nodeId)===e&&(null===i||void 0===i?void 0:i.id)===t&&(null===i||void 0===i?void 0:i.type)===n,isPossibleEndHandle:o===mr.Strict?(null===a||void 0===a?void 0:a.type)!==n:e!==(null===a||void 0===a?void 0:a.nodeId)||t!==(null===a||void 0===a?void 0:a.id),connectionInProcess:!!a,valid:u&&c}})(S,w,n),wo);var P,M;S||null===(P=(M=_.getState()).onError)||void 0===P||P.call(M,"010",hr());const R=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=_.getState(),i=c(c({},t),e);if(r){const{edges:e,setEdges:t}=_.getState();t(wi(i,e))}null===n||void 0===n||n(i),null===f||void 0===f||f(i)},O=e=>{if(!S)return;const t=ci(e.nativeEvent);if(s&&(t&&0===e.button||!t)){const t=_.getState();Yi.onPointerDown(e.nativeEvent,{autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:b,handleId:w,nodeId:S,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:R,isValidConnection:i||t.isValidConnection,getTransform:()=>_.getState().transform,getFromHandle:()=>_.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed})}t?null===m||void 0===m||m(e):null===y||void 0===y||y(e)};return(0,h.jsx)("div",c(c({"data-handleid":w,"data-nodeid":S,"data-handlepos":r,"data-id":"".concat(k,"-").concat(S,"-").concat(w,"-").concat(n),className:d(["react-flow__handle","react-flow__handle-".concat(r),"nodrag",E,g,{source:!b,target:b,connectable:o,connectablestart:s,connectableend:a,clickconnecting:N,connectingfrom:x,connectingto:T,valid:A,connectionindicator:o&&(!D||I)&&(D?a:s)}]),onMouseDown:O,onTouchStart:O,onClick:C?e=>{const{onClickConnectStart:t,onClickConnectEnd:r,connectionClickStartHandle:o,connectionMode:a,isValidConnection:l,lib:c,rfId:u,nodeLookup:h,connection:d}=_.getState();if(!S||!o&&!s)return;if(!o)return null===t||void 0===t||t(e.nativeEvent,{nodeId:S,handleId:w,handleType:n}),void _.setState({connectionClickStartHandle:{nodeId:S,type:n,id:w}});const f=si(e.target),p=i||l,{connection:g,isValid:m}=Yi.isValid(e.nativeEvent,{handle:{nodeId:S,id:w,type:n},connectionMode:a,fromNodeId:o.nodeId,fromHandleId:o.id||null,fromType:o.type,isValidConnection:p,flowId:u,doc:f,lib:c,nodeLookup:h});m&&g&&R(g);const y=structuredClone(d);delete y.inProgress,y.toPosition=y.toHandle?y.toHandle.position:null,null===r||void 0===r||r(e,y),_.setState({connectionClickStartHandle:null})}:void 0,ref:t},v),{},{children:p}))})));const js={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Us={input:function(e){let{data:t,isConnectable:n,sourcePosition:r=Sr.Bottom}=e;return(0,h.jsxs)(h.Fragment,{children:[null===t||void 0===t?void 0:t.label,(0,h.jsx)(Vs,{type:"source",position:r,isConnectable:n})]})},default:function(e){let{data:t,isConnectable:n,targetPosition:r=Sr.Top,sourcePosition:i=Sr.Bottom}=e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(Vs,{type:"target",position:r,isConnectable:n}),null===t||void 0===t?void 0:t.label,(0,h.jsx)(Vs,{type:"source",position:i,isConnectable:n})]})},output:function(e){let{data:t,isConnectable:n,targetPosition:r=Sr.Top}=e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(Vs,{type:"target",position:r,isConnectable:n}),null===t||void 0===t?void 0:t.label]})},group:function(){return null}};const Bs=e=>{const{width:t,height:n,x:r,y:i}=Nr(e.nodeLookup,{filter:e=>!!e.selected});return{width:Yr(t)?t:null,height:Yr(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],") translate(").concat(r,"px,").concat(i,"px)")}};function qs(e){let{onSelectionContextMenu:t,noPanClassName:n,disableKeyboardA11y:i}=e;const o=Ao(),{width:s,height:a,transformString:l,userSelectionActive:c}=Do(Bs,wo),u=Rs(),f=(0,r.useRef)(null);if((0,r.useEffect)((()=>{var e;i||(null===(e=f.current)||void 0===e||e.focus({preventScroll:!0}))}),[i]),Ms({nodeRef:f}),c||!s||!a)return null;const p=t?e=>{const n=o.getState().nodes.filter((e=>e.selected));t(e,n)}:void 0;return(0,h.jsx)("div",{className:d(["react-flow__nodesselection","react-flow__container",n]),style:{transform:l},children:(0,h.jsx)("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:i?void 0:-1,onKeyDown:i?void 0:e=>{Object.prototype.hasOwnProperty.call(js,e.key)&&(e.preventDefault(),u({direction:js[e.key],factor:e.shiftKey?4:1}))},style:{width:s,height:a}})})}const Hs="undefined"!==typeof window?window:void 0,Ws=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Ks(e){let{children:t,onPaneClick:n,onPaneMouseEnter:i,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:l,paneClickDistance:c,deleteKeyCode:u,selectionKeyCode:d,selectionOnDrag:f,selectionMode:p,onSelectionStart:g,onSelectionEnd:m,multiSelectionKeyCode:y,panActivationKeyCode:v,zoomActivationKeyCode:w,elementsSelectable:b,zoomOnScroll:_,zoomOnPinch:S,panOnScroll:C,panOnScrollSpeed:E,panOnScrollMode:k,zoomOnDoubleClick:x,panOnDrag:T,defaultViewport:N,translateExtent:I,minZoom:D,maxZoom:A,preventScrolling:P,onSelectionContextMenu:M,noWheelClassName:R,noPanClassName:O,disableKeyboardA11y:L,onViewportChange:F,isControlledViewport:z}=e;const{nodesSelectionActive:V,userSelectionActive:j}=Do(Ws),U=ns(d,{target:Hs}),B=ns(v,{target:Hs}),q=B||T,H=B||C,W=f&&!0!==q,K=U||j||W;return function(e){let{deleteKeyCode:t,multiSelectionKeyCode:n}=e;const i=Ao(),{deleteElements:o}=bs(),s=ns(t,Ss),a=ns(n,{target:Cs});(0,r.useEffect)((()=>{if(s){const{edges:e,nodes:t}=i.getState();o({nodes:t.filter(_s),edges:e.filter(_s)}),i.setState({nodesSelectionActive:!1})}}),[s]),(0,r.useEffect)((()=>{i.setState({multiSelectionActive:a})}),[a])}({deleteKeyCode:u,multiSelectionKeyCode:y}),(0,h.jsx)(xs,{onPaneContextMenu:a,elementsSelectable:b,zoomOnScroll:_,zoomOnPinch:S,panOnScroll:H,panOnScrollSpeed:E,panOnScrollMode:k,zoomOnDoubleClick:x,panOnDrag:!U&&q,defaultViewport:N,translateExtent:I,minZoom:D,maxZoom:A,zoomActivationKeyCode:w,preventScrolling:P,noWheelClassName:R,noPanClassName:O,onViewportChange:F,isControlledViewport:z,paneClickDistance:c,children:(0,h.jsxs)(As,{onSelectionStart:g,onSelectionEnd:m,onPaneClick:n,onPaneMouseEnter:i,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:l,panOnDrag:q,isSelecting:!!K,selectionMode:p,selectionKeyPressed:U,selectionOnDrag:W,children:[t,V&&(0,h.jsx)(qs,{onSelectionContextMenu:M,noPanClassName:O,disableKeyboardA11y:L})]})})}Ks.displayName="FlowRenderer";const Ys=(0,r.memo)(Ks);function Gs(e){const t=Do((0,r.useCallback)((e=>t=>e?Ir(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map((e=>e.id)):Array.from(t.nodeLookup.keys()))(e),[e]),wo);return t}const Qs=e=>e.updateNodeInternals;function Xs(e){var t;let{id:n,onClick:i,onMouseEnter:o,onMouseMove:s,onMouseLeave:a,onContextMenu:l,onDoubleClick:u,nodesDraggable:f,elementsSelectable:p,nodesConnectable:g,nodesFocusable:m,resizeObserver:y,noDragClassName:v,noPanClassName:w,disableKeyboardA11y:b,rfId:_,nodeTypes:S,nodeExtent:C,nodeClickDistance:E,onError:k}=e;const{node:x,internals:T,isParent:N}=Do((e=>{const t=e.nodeLookup.get(n),r=e.parentLookup.has(n);return{node:t,internals:t.internals,isParent:r}}),wo);let I=x.type||"default",D=(null===S||void 0===S?void 0:S[I])||Us[I];void 0===D&&(null===k||void 0===k||k("003",or(I)),I="default",D=Us.default);const A=!!(x.draggable||f&&"undefined"===typeof x.draggable),P=!!(x.selectable||p&&"undefined"===typeof x.selectable),M=!!(x.connectable||g&&"undefined"===typeof x.connectable),R=!!(x.focusable||m&&"undefined"===typeof x.focusable),O=Ao(),L=ni(x),F=function(e){let{node:t,nodeType:n,hasDimensions:i,resizeObserver:o}=e;const s=Ao(),a=(0,r.useRef)(null),l=(0,r.useRef)(null),c=(0,r.useRef)(t.sourcePosition),u=(0,r.useRef)(t.targetPosition),h=(0,r.useRef)(n),d=i&&!!t.internals.handleBounds;return(0,r.useEffect)((()=>{!a.current||t.hidden||d&&l.current===a.current||(l.current&&(null===o||void 0===o||o.unobserve(l.current)),null===o||void 0===o||o.observe(a.current),l.current=a.current)}),[d,t.hidden]),(0,r.useEffect)((()=>()=>{l.current&&(null===o||void 0===o||o.unobserve(l.current),l.current=null)}),[]),(0,r.useEffect)((()=>{if(a.current){const e=h.current!==n,r=c.current!==t.sourcePosition,i=u.current!==t.targetPosition;(e||r||i)&&(h.current=n,c.current=t.sourcePosition,u.current=t.targetPosition,s.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:a.current,force:!0}]])))}}),[t.id,n,t.sourcePosition,t.targetPosition]),a}({node:x,nodeType:I,hasDimensions:L,resizeObserver:y}),z=Ms({nodeRef:F,disabled:x.hidden||!A,noDragClassName:v,handleSelector:x.dragHandle,nodeId:n,isSelectable:P,nodeClickDistance:E}),V=Rs();if(x.hidden)return null;const j=ti(x),U=function(e){var t,n,r,i,o,s,a,l,c,u;return void 0===e.internals.handleBounds?{width:null!==(o=null!==(s=e.width)&&void 0!==s?s:e.initialWidth)&&void 0!==o?o:null===(a=e.style)||void 0===a?void 0:a.width,height:null!==(l=null!==(c=e.height)&&void 0!==c?c:e.initialHeight)&&void 0!==l?l:null===(u=e.style)||void 0===u?void 0:u.height}:{width:null!==(t=e.width)&&void 0!==t?t:null===(n=e.style)||void 0===n?void 0:n.width,height:null!==(r=e.height)&&void 0!==r?r:null===(i=e.style)||void 0===i?void 0:i.height}}(x),B=P||A||i||o||s||a,q=o?e=>o(e,c({},T.userNode)):void 0,H=s?e=>s(e,c({},T.userNode)):void 0,W=a?e=>a(e,c({},T.userNode)):void 0,K=l?e=>l(e,c({},T.userNode)):void 0,Y=u?e=>u(e,c({},T.userNode)):void 0;return(0,h.jsx)("div",{className:d(["react-flow__node","react-flow__node-".concat(I),{[w]:A},x.className,{selected:x.selected,selectable:P,parent:N,draggable:A,dragging:z}]),ref:F,style:c(c({zIndex:T.z,transform:"translate(".concat(T.positionAbsolute.x,"px,").concat(T.positionAbsolute.y,"px)"),pointerEvents:B?"all":"none",visibility:L?"visible":"hidden"},x.style),U),"data-id":n,"data-testid":"rf__node-".concat(n),onMouseEnter:q,onMouseMove:H,onMouseLeave:W,onContextMenu:K,onClick:e=>{const{selectNodesOnDrag:t,nodeDragThreshold:r}=O.getState();P&&(!t||!A||r>0)&&Ps({id:n,store:O,nodeRef:F}),i&&i(e,c({},T.userNode))},onDoubleClick:Y,onKeyDown:R?e=>{if(!li(e.nativeEvent)&&!b)if(gr.includes(e.key)&&P){const t="Escape"===e.key;Ps({id:n,store:O,unselect:t,nodeRef:F})}else A&&x.selected&&Object.prototype.hasOwnProperty.call(js,e.key)&&(e.preventDefault(),O.setState({ariaLiveMessage:"Moved selected node ".concat(e.key.replace("Arrow","").toLowerCase(),". New position, x: ").concat(~~T.positionAbsolute.x,", y: ").concat(~~T.positionAbsolute.y)}),V({direction:js[e.key],factor:e.shiftKey?4:1}))}:void 0,tabIndex:R?0:void 0,role:R?"button":void 0,"aria-describedby":b?void 0:"".concat(Ro,"-").concat(_),"aria-label":x.ariaLabel,children:(0,h.jsx)(Ls,{value:n,children:(0,h.jsx)(D,c({id:n,data:x.data,type:I,positionAbsoluteX:T.positionAbsolute.x,positionAbsoluteY:T.positionAbsolute.y,selected:x.selected,selectable:P,draggable:A,deletable:null===(t=x.deletable)||void 0===t||t,isConnectable:M,sourcePosition:x.sourcePosition,targetPosition:x.targetPosition,dragging:z,dragHandle:x.dragHandle,zIndex:T.z,parentId:x.parentId},j))})})}const Zs=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function $s(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:o,onError:s}=Do(Zs,wo),a=Gs(e.onlyRenderVisibleElements),l=function(){const e=Do(Qs),[t]=(0,r.useState)((()=>"undefined"===typeof ResizeObserver?null:new ResizeObserver((t=>{const n=new Map;t.forEach((e=>{const t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})})),e(n)}))));return(0,r.useEffect)((()=>()=>{null===t||void 0===t||t.disconnect()}),[t]),t}();return(0,h.jsx)("div",{className:"react-flow__nodes",style:Es,children:a.map((r=>(0,h.jsx)(Xs,{id:r,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:s},r)))})}$s.displayName="NodeRenderer";const Js=(0,r.memo)($s);const ea={[_r.Arrow]:e=>{let{color:t="none",strokeWidth:n=1}=e;return(0,h.jsx)("polyline",{style:{stroke:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"})},[_r.ArrowClosed]:e=>{let{color:t="none",strokeWidth:n=1}=e;return(0,h.jsx)("polyline",{style:{stroke:t,fill:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}};const ta=e=>{let{id:t,type:n,color:i,width:o=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"}=e;const u=function(e){const t=Ao();return(0,r.useMemo)((()=>{var n,r;return Object.prototype.hasOwnProperty.call(ea,e)?ea[e]:(null===(n=(r=t.getState()).onError)||void 0===n||n.call(r,"009",cr(e)),null)}),[e])}(n);return u?(0,h.jsx)("marker",{className:"react-flow__arrowhead",id:t,markerWidth:"".concat(o),markerHeight:"".concat(s),viewBox:"-10 -10 20 20",markerUnits:a,orient:c,refX:"0",refY:"0",children:(0,h.jsx)(u,{color:i,strokeWidth:l})}):null},na=e=>{let{defaultColor:t,rfId:n}=e;const i=Do((e=>e.edges)),o=Do((e=>e.defaultEdgeOptions)),s=(0,r.useMemo)((()=>{const e=function(e,t){let{id:n,defaultColor:r,defaultMarkerStart:i,defaultMarkerEnd:o}=t;const s=new Set;return e.reduce(((e,t)=>([t.markerStart||i,t.markerEnd||o].forEach((t=>{if(t&&"object"===typeof t){const i=Ii(t,n);s.has(i)||(e.push(c({id:i,color:t.color||r},t)),s.add(i))}})),e)),[]).sort(((e,t)=>e.id.localeCompare(t.id)))}(i,{id:n,defaultColor:t,defaultMarkerStart:null===o||void 0===o?void 0:o.markerStart,defaultMarkerEnd:null===o||void 0===o?void 0:o.markerEnd});return e}),[i,o,n,t]);return s.length?(0,h.jsx)("svg",{className:"react-flow__marker",children:(0,h.jsx)("defs",{children:s.map((e=>(0,h.jsx)(ta,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id)))})}):null};na.displayName="MarkerDefinitions";var ra=(0,r.memo)(na);function ia(e){let{x:t,y:n,label:i,labelStyle:o={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:l=[2,4],labelBgBorderRadius:f=2,children:p,className:g}=e,m=u(e,So);const[y,v]=(0,r.useState)({x:1,y:0,width:0,height:0}),w=d(["react-flow__edge-textwrapper",g]),b=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(b.current){const e=b.current.getBBox();v({x:e.x,y:e.y,width:e.width,height:e.height})}}),[i]),"undefined"!==typeof i&&i?(0,h.jsxs)("g",c(c({transform:"translate(".concat(t-y.width/2," ").concat(n-y.height/2,")"),className:w,visibility:y.width?"visible":"hidden"},m),{},{children:[s&&(0,h.jsx)("rect",{width:y.width+2*l[0],x:-l[0],y:-l[1],height:y.height+2*l[1],className:"react-flow__edge-textbg",style:a,rx:f,ry:f}),(0,h.jsx)("text",{className:"react-flow__edge-text",y:y.height/2,dy:"0.3em",ref:b,style:o,children:i}),p]})):null}ia.displayName="EdgeText";const oa=(0,r.memo)(ia);function sa(e){let{path:t,labelX:n,labelY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:f,interactionWidth:p=20}=e,g=u(e,Co);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("path",c(c({},g),{},{d:t,fill:"none",className:d(["react-flow__edge-path",g.className])})),p&&(0,h.jsx)("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),i&&Yr(n)&&Yr(r)?(0,h.jsx)(oa,{x:n,y:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:f}):null]})}function aa(e){let{pos:t,x1:n,y1:r,x2:i,y2:o}=e;return t===Sr.Left||t===Sr.Right?[.5*(n+i),r]:[n,.5*(r+o)]}function la(e){let{sourceX:t,sourceY:n,sourcePosition:r=Sr.Bottom,targetX:i,targetY:o,targetPosition:s=Sr.Top}=e;const[a,l]=aa({pos:r,x1:t,y1:n,x2:i,y2:o}),[c,u]=aa({pos:s,x1:i,y1:o,x2:t,y2:n}),[h,d,f,p]=di({sourceX:t,sourceY:n,targetX:i,targetY:o,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:u});return["M".concat(t,",").concat(n," C").concat(a,",").concat(l," ").concat(c,",").concat(u," ").concat(i,",").concat(o),h,d,f,p]}function ca(e){return(0,r.memo)((t=>{let{id:n,sourceX:r,sourceY:i,targetX:o,targetY:s,sourcePosition:a=Sr.Bottom,targetPosition:l=Sr.Top,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:y,markerStart:v,interactionWidth:w}=t;const[b,_,S]=la({sourceX:r,sourceY:i,sourcePosition:a,targetX:o,targetY:s,targetPosition:l}),C=e.isInternal?void 0:n;return(0,h.jsx)(sa,{id:C,path:b,labelX:_,labelY:S,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:y,markerStart:v,interactionWidth:w})}))}const ua=ca({isInternal:!1}),ha=ca({isInternal:!0});function da(e){return(0,r.memo)((t=>{let{id:n,sourceX:r,sourceY:i,targetX:o,targetY:s,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,sourcePosition:g=Sr.Bottom,targetPosition:m=Sr.Top,markerEnd:y,markerStart:v,pathOptions:w,interactionWidth:b}=t;const[_,S,C]=Ei({sourceX:r,sourceY:i,sourcePosition:g,targetX:o,targetY:s,targetPosition:m,borderRadius:null===w||void 0===w?void 0:w.borderRadius,offset:null===w||void 0===w?void 0:w.offset}),E=e.isInternal?void 0:n;return(0,h.jsx)(sa,{id:E,path:_,labelX:S,labelY:C,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:y,markerStart:v,interactionWidth:b})}))}ua.displayName="SimpleBezierEdge",ha.displayName="SimpleBezierEdgeInternal";const fa=da({isInternal:!1}),pa=da({isInternal:!0});function ga(e){return(0,r.memo)((t=>{var n;let{id:i}=t,o=u(t,Eo);const s=e.isInternal?void 0:i;return(0,h.jsx)(fa,c(c({},o),{},{id:s,pathOptions:(0,r.useMemo)((()=>{var e;return{borderRadius:0,offset:null===(e=o.pathOptions)||void 0===e?void 0:e.offset}}),[null===(n=o.pathOptions)||void 0===n?void 0:n.offset])}))}))}fa.displayName="SmoothStepEdge",pa.displayName="SmoothStepEdgeInternal";const ma=ga({isInternal:!1}),ya=ga({isInternal:!0});function va(e){return(0,r.memo)((t=>{let{id:n,sourceX:r,sourceY:i,targetX:o,targetY:s,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:m,interactionWidth:y}=t;const[v,w,b]=bi({sourceX:r,sourceY:i,targetX:o,targetY:s}),_=e.isInternal?void 0:n;return(0,h.jsx)(sa,{id:_,path:v,labelX:w,labelY:b,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:m,interactionWidth:y})}))}ma.displayName="StepEdge",ya.displayName="StepEdgeInternal";const wa=va({isInternal:!1}),ba=va({isInternal:!0});function _a(e){return(0,r.memo)((t=>{let{id:n,sourceX:r,sourceY:i,targetX:o,targetY:s,sourcePosition:a=Sr.Bottom,targetPosition:l=Sr.Top,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:y,markerStart:v,pathOptions:w,interactionWidth:b}=t;const[_,S,C]=gi({sourceX:r,sourceY:i,sourcePosition:a,targetX:o,targetY:s,targetPosition:l,curvature:null===w||void 0===w?void 0:w.curvature}),E=e.isInternal?void 0:n;return(0,h.jsx)(sa,{id:E,path:_,labelX:S,labelY:C,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:y,markerStart:v,interactionWidth:b})}))}wa.displayName="StraightEdge",ba.displayName="StraightEdgeInternal";const Sa=_a({isInternal:!1}),Ca=_a({isInternal:!0});Sa.displayName="BezierEdge",Ca.displayName="BezierEdgeInternal";const Ea={default:Ca,straight:ba,step:ya,smoothstep:pa,simplebezier:ha},ka={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},xa=(e,t,n)=>n===Sr.Left?e-t:n===Sr.Right?e+t:e,Ta=(e,t,n)=>n===Sr.Top?e-t:n===Sr.Bottom?e+t:e,Na="react-flow__edgeupdater";function Ia(e){let{position:t,centerX:n,centerY:r,radius:i=10,onMouseDown:o,onMouseEnter:s,onMouseOut:a,type:l}=e;return(0,h.jsx)("circle",{onMouseDown:o,onMouseEnter:s,onMouseOut:a,className:d([Na,"".concat(Na,"-").concat(l)]),cx:xa(n,i,t),cy:Ta(r,i,t),r:i,stroke:"transparent",fill:"transparent"})}function Da(e){let{isReconnectable:t,reconnectRadius:n,edge:r,sourceX:i,sourceY:o,targetX:s,targetY:a,sourcePosition:l,targetPosition:c,onReconnect:u,onReconnectStart:d,onReconnectEnd:f,setReconnecting:p,setUpdateHover:g}=e;const m=Ao(),y=(e,t)=>{if(0!==e.button)return;const{autoPanOnConnect:n,domNode:i,isValidConnection:o,connectionMode:s,connectionRadius:a,lib:l,onConnectStart:c,onConnectEnd:h,cancelConnection:g,nodeLookup:y,rfId:v,panBy:w,updateConnection:b}=m.getState(),_="target"===t.type;p(!0),null===d||void 0===d||d(e,r,t.type);Yi.onPointerDown(e.nativeEvent,{autoPanOnConnect:n,connectionMode:s,connectionRadius:a,domNode:i,handleId:t.id,nodeId:t.nodeId,nodeLookup:y,isTarget:_,edgeUpdaterType:t.type,lib:l,flowId:v,cancelConnection:g,panBy:w,isValidConnection:o,onConnect:e=>null===u||void 0===u?void 0:u(r,e),onConnectStart:c,onConnectEnd:h,onReconnectEnd:(e,n)=>{p(!1),null===f||void 0===f||f(e,r,t.type,n)},updateConnection:b,getTransform:()=>m.getState().transform,getFromHandle:()=>m.getState().connection.fromHandle})},v=()=>g(!0),w=()=>g(!1);return(0,h.jsxs)(h.Fragment,{children:[(!0===t||"source"===t)&&(0,h.jsx)(Ia,{position:l,centerX:i,centerY:o,radius:n,onMouseDown:e=>{var t;return y(e,{nodeId:r.target,id:null!==(t=r.targetHandle)&&void 0!==t?t:null,type:"target"})},onMouseEnter:v,onMouseOut:w,type:"source"}),(!0===t||"target"===t)&&(0,h.jsx)(Ia,{position:c,centerX:s,centerY:a,radius:n,onMouseDown:e=>{var t;return y(e,{nodeId:r.source,id:null!==(t=r.sourceHandle)&&void 0!==t?t:null,type:"source"})},onMouseEnter:v,onMouseOut:w,type:"target"})]})}function Aa(e){var t;let{id:n,edgesFocusable:i,edgesReconnectable:o,elementsSelectable:s,onClick:a,onDoubleClick:l,onContextMenu:u,onMouseEnter:f,onMouseMove:p,onMouseLeave:g,reconnectRadius:m,onReconnect:y,onReconnectStart:v,onReconnectEnd:w,rfId:b,edgeTypes:_,noPanClassName:S,onError:C,disableKeyboardA11y:E}=e,k=Do((e=>e.edgeLookup.get(n)));const x=Do((e=>e.defaultEdgeOptions));k=x?c(c({},x),k):k;let T=k.type||"default",N=(null===_||void 0===_?void 0:_[T])||Ea[T];void 0===N&&(null===C||void 0===C||C("011",dr(T)),T="default",N=Ea.default);const I=!!(k.focusable||i&&"undefined"===typeof k.focusable),D="undefined"!==typeof y&&(k.reconnectable||o&&"undefined"===typeof k.reconnectable),A=!!(k.selectable||s&&"undefined"===typeof k.selectable),P=(0,r.useRef)(null),[M,R]=(0,r.useState)(!1),[O,L]=(0,r.useState)(!1),F=Ao(),{zIndex:z,sourceX:V,sourceY:j,targetX:U,targetY:B,sourcePosition:q,targetPosition:H}=Do((0,r.useCallback)((e=>{const t=e.nodeLookup.get(k.source),r=e.nodeLookup.get(k.target);if(!t||!r)return c({zIndex:k.zIndex},ka);const i=function(e){var t,n,r,i;const{sourceNode:o,targetNode:s}=e;if(!ki(o)||!ki(s))return null;const a=o.internals.handleBounds||xi(o.handles),l=s.internals.handleBounds||xi(s.handles),c=Ni(null!==(t=null===a||void 0===a?void 0:a.source)&&void 0!==t?t:[],e.sourceHandle),u=Ni(e.connectionMode===mr.Strict?null!==(n=null===l||void 0===l?void 0:l.target)&&void 0!==n?n:[]:(null!==(r=null===l||void 0===l?void 0:l.target)&&void 0!==r?r:[]).concat(null!==(i=null===l||void 0===l?void 0:l.source)&&void 0!==i?i:[]),e.targetHandle);var h;if(!c||!u)return null===(h=e.onError)||void 0===h||h.call(e,"008",ur(c?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const d=(null===c||void 0===c?void 0:c.position)||Sr.Bottom,f=(null===u||void 0===u?void 0:u.position)||Sr.Top,p=Ti(o,c,d),g=Ti(s,u,f);return{sourceX:p.x,sourceY:p.y,targetX:g.x,targetY:g.y,sourcePosition:d,targetPosition:f}}({id:n,sourceNode:t,targetNode:r,sourceHandle:k.sourceHandle||null,targetHandle:k.targetHandle||null,connectionMode:e.connectionMode,onError:C}),o=function(e){let{sourceNode:t,targetNode:n,selected:r=!1,zIndex:i=0,elevateOnSelect:o=!1}=e;if(!o)return i;const s=r||n.selected||t.selected,a=Math.max(t.internals.z||0,n.internals.z||0,1e3);return i+(s?a:0)}({selected:k.selected,zIndex:k.zIndex,sourceNode:t,targetNode:r,elevateOnSelect:e.elevateEdgesOnSelect});return c({zIndex:o},i||ka)}),[k.source,k.target,k.sourceHandle,k.targetHandle,k.selected,k.zIndex]),wo),W=(0,r.useMemo)((()=>k.markerStart?"url('#".concat(Ii(k.markerStart,b),"')"):void 0),[k.markerStart,b]),K=(0,r.useMemo)((()=>k.markerEnd?"url('#".concat(Ii(k.markerEnd,b),"')"):void 0),[k.markerEnd,b]);if(k.hidden||null===V||null===j||null===U||null===B)return null;const Y=l?e=>{l(e,c({},k))}:void 0,G=u?e=>{u(e,c({},k))}:void 0,Q=f?e=>{f(e,c({},k))}:void 0,X=p?e=>{p(e,c({},k))}:void 0,Z=g?e=>{g(e,c({},k))}:void 0;return(0,h.jsx)("svg",{style:{zIndex:z},children:(0,h.jsxs)("g",{className:d(["react-flow__edge","react-flow__edge-".concat(T),k.className,S,{selected:k.selected,animated:k.animated,inactive:!A&&!a,updating:M,selectable:A}]),onClick:e=>{const{addSelectedEdges:t,unselectNodesAndEdges:r,multiSelectionActive:i}=F.getState();var o;A&&(F.setState({nodesSelectionActive:!1}),k.selected&&i?(r({nodes:[],edges:[k]}),null===(o=P.current)||void 0===o||o.blur()):t([n]));a&&a(e,k)},onDoubleClick:Y,onContextMenu:G,onMouseEnter:Q,onMouseMove:X,onMouseLeave:Z,onKeyDown:I?e=>{if(!E&&gr.includes(e.key)&&A){const{unselectNodesAndEdges:r,addSelectedEdges:i}=F.getState();var t;if("Escape"===e.key)null===(t=P.current)||void 0===t||t.blur(),r({edges:[k]});else i([n])}}:void 0,tabIndex:I?0:void 0,role:I?"button":"img","data-id":n,"data-testid":"rf__edge-".concat(n),"aria-label":null===k.ariaLabel?void 0:k.ariaLabel||"Edge from ".concat(k.source," to ").concat(k.target),"aria-describedby":I?"".concat(Oo,"-").concat(b):void 0,ref:P,children:[!O&&(0,h.jsx)(N,{id:n,source:k.source,target:k.target,type:k.type,selected:k.selected,animated:k.animated,selectable:A,deletable:null===(t=k.deletable)||void 0===t||t,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,sourceX:V,sourceY:j,targetX:U,targetY:B,sourcePosition:q,targetPosition:H,data:k.data,style:k.style,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerStart:W,markerEnd:K,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth}),D&&(0,h.jsx)(Da,{edge:k,isReconnectable:D,reconnectRadius:m,onReconnect:y,onReconnectStart:v,onReconnectEnd:w,sourceX:V,sourceY:j,targetX:U,targetY:B,sourcePosition:q,targetPosition:H,setUpdateHover:R,setReconnecting:L})]})})}const Pa=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Ma(e){let{defaultMarkerColor:t,onlyRenderVisibleElements:n,rfId:i,edgeTypes:o,noPanClassName:s,onReconnect:a,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:f,reconnectRadius:p,onEdgeDoubleClick:g,onReconnectStart:m,onReconnectEnd:y,disableKeyboardA11y:v}=e;const{edgesFocusable:w,edgesReconnectable:b,elementsSelectable:_,onError:S}=Do(Pa,wo),C=(E=n,Do((0,r.useCallback)((e=>{if(!E)return e.edges.map((e=>e.id));const t=[];if(e.width&&e.height)for(const n of e.edges){const r=e.nodeLookup.get(n.source),i=e.nodeLookup.get(n.target);r&&i&&yi({sourceNode:r,targetNode:i,width:e.width,height:e.height,transform:e.transform})&&t.push(n.id)}return t}),[E]),wo));var E;return(0,h.jsxs)("div",{className:"react-flow__edges",children:[(0,h.jsx)(ra,{defaultColor:t,rfId:i}),C.map((e=>(0,h.jsx)(Aa,{id:e,edgesFocusable:w,edgesReconnectable:b,elementsSelectable:_,noPanClassName:s,onReconnect:a,onContextMenu:l,onMouseEnter:c,onMouseMove:u,onMouseLeave:d,onClick:f,reconnectRadius:p,onDoubleClick:g,onReconnectStart:m,onReconnectEnd:y,rfId:i,onError:S,edgeTypes:o,disableKeyboardA11y:v},e)))]})}Ma.displayName="EdgeRenderer";const Ra=(0,r.memo)(Ma),Oa=e=>"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")");function La(e){let{children:t}=e;const n=Do(Oa);return(0,h.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:t})}const Fa=e=>{var t;return null===(t=e.panZoom)||void 0===t?void 0:t.syncViewport};function za(e){return e.connection.inProgress?c(c({},e.connection),{},{to:Xr(e.connection.to,e.transform)}):c({},e.connection)}function Va(e){const t=function(e){if(e)return t=>{const n=za(t);return e(n)};return za}(e);return Do(t,wo)}const ja=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Ua(e){let{containerStyle:t,style:n,type:r,component:i}=e;const{nodesConnectable:o,width:s,height:a,isValid:l,inProgress:c}=Do(ja,wo);return!!(s&&o&&c)?(0,h.jsx)("svg",{style:t,width:s,height:a,className:"react-flow__connectionline react-flow__container",children:(0,h.jsx)("g",{className:d(["react-flow__connection",Er(l)]),children:(0,h.jsx)(Ba,{style:n,type:r,CustomComponent:i,isValid:l})})}):null}const Ba=e=>{let{style:t,type:n=br.Bezier,CustomComponent:r,isValid:i}=e;const{inProgress:o,from:s,fromNode:a,fromHandle:l,fromPosition:u,to:d,toNode:f,toHandle:p,toPosition:g}=Va();if(!o)return;if(r)return(0,h.jsx)(r,{connectionLineType:n,connectionLineStyle:t,fromNode:a,fromHandle:l,fromX:s.x,fromY:s.y,toX:d.x,toY:d.y,fromPosition:u,toPosition:g,connectionStatus:Er(i),toNode:f,toHandle:p});let m="";const y={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:d.x,targetY:d.y,targetPosition:g};switch(n){case br.Bezier:[m]=gi(y);break;case br.SimpleBezier:[m]=la(y);break;case br.Step:[m]=Ei(c(c({},y),{},{borderRadius:0}));break;case br.SmoothStep:[m]=Ei(y);break;default:[m]=bi(y)}return(0,h.jsx)("path",{d:m,fill:"none",className:"react-flow__connection-path",style:t})};Ba.displayName="ConnectionLine";const qa={};function Ha(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qa;(0,r.useRef)(e),Ao();(0,r.useEffect)((()=>{}),[e])}function Wa(e){let{nodeTypes:t,edgeTypes:n,onInit:i,onNodeClick:o,onEdgeClick:s,onNodeDoubleClick:a,onEdgeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:f,onSelectionContextMenu:p,onSelectionStart:g,onSelectionEnd:m,connectionLineType:y,connectionLineStyle:v,connectionLineComponent:w,connectionLineContainerStyle:b,selectionKeyCode:_,selectionOnDrag:S,selectionMode:C,multiSelectionKeyCode:E,panActivationKeyCode:k,zoomActivationKeyCode:x,deleteKeyCode:T,onlyRenderVisibleElements:N,elementsSelectable:I,defaultViewport:D,translateExtent:A,minZoom:P,maxZoom:M,preventScrolling:R,defaultMarkerColor:O,zoomOnScroll:L,zoomOnPinch:F,panOnScroll:z,panOnScrollSpeed:V,panOnScrollMode:j,zoomOnDoubleClick:U,panOnDrag:B,onPaneClick:q,onPaneMouseEnter:H,onPaneMouseMove:W,onPaneMouseLeave:K,onPaneScroll:Y,onPaneContextMenu:G,paneClickDistance:Q,nodeClickDistance:X,onEdgeContextMenu:Z,onEdgeMouseEnter:$,onEdgeMouseMove:J,onEdgeMouseLeave:ee,reconnectRadius:te,onReconnect:ne,onReconnectStart:re,onReconnectEnd:ie,noDragClassName:oe,noWheelClassName:se,noPanClassName:ae,disableKeyboardA11y:le,nodeExtent:ce,rfId:ue,viewport:he,onViewportChange:de}=e;return Ha(t),Ha(n),Ao(),(0,r.useRef)(!1),(0,r.useEffect)((()=>{}),[]),function(e){const t=bs(),n=(0,r.useRef)(!1);(0,r.useEffect)((()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout((()=>e(t)),1),n.current=!0)}),[e,t.viewportInitialized])}(i),function(e){const t=Do(Fa),n=Ao();(0,r.useEffect)((()=>{e&&(null===t||void 0===t||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))}),[e,t])}(he),(0,h.jsx)(Ys,{onPaneClick:q,onPaneMouseEnter:H,onPaneMouseMove:W,onPaneMouseLeave:K,onPaneContextMenu:G,onPaneScroll:Y,paneClickDistance:Q,deleteKeyCode:T,selectionKeyCode:_,selectionOnDrag:S,selectionMode:C,onSelectionStart:g,onSelectionEnd:m,multiSelectionKeyCode:E,panActivationKeyCode:k,zoomActivationKeyCode:x,elementsSelectable:I,zoomOnScroll:L,zoomOnPinch:F,zoomOnDoubleClick:U,panOnScroll:z,panOnScrollSpeed:V,panOnScrollMode:j,panOnDrag:B,defaultViewport:D,translateExtent:A,minZoom:P,maxZoom:M,onSelectionContextMenu:p,preventScrolling:R,noDragClassName:oe,noWheelClassName:se,noPanClassName:ae,disableKeyboardA11y:le,onViewportChange:de,isControlledViewport:!!he,children:(0,h.jsxs)(La,{children:[(0,h.jsx)(Ra,{edgeTypes:n,onEdgeClick:s,onEdgeDoubleClick:l,onReconnect:ne,onReconnectStart:re,onReconnectEnd:ie,onlyRenderVisibleElements:N,onEdgeContextMenu:Z,onEdgeMouseEnter:$,onEdgeMouseMove:J,onEdgeMouseLeave:ee,reconnectRadius:te,defaultMarkerColor:O,noPanClassName:ae,disableKeyboardA11y:le,rfId:ue}),(0,h.jsx)(Ua,{style:v,type:y,component:w,containerStyle:b}),(0,h.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,h.jsx)(Js,{nodeTypes:t,onNodeClick:o,onNodeDoubleClick:a,onNodeMouseEnter:c,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:f,nodeClickDistance:X,onlyRenderVisibleElements:N,noPanClassName:ae,noDragClassName:oe,disableKeyboardA11y:le,nodeExtent:ce,rfId:ue}),(0,h.jsx)("div",{className:"react-flow__viewport-portal"})]})})}Wa.displayName="GraphView";const Ka=(0,r.memo)(Wa),Ya=function(){var e,t;let{nodes:n,edges:r,defaultNodes:i,defaultEdges:o,width:s,height:a,fitView:l,nodeOrigin:u,nodeExtent:h}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const d=new Map,f=new Map,p=new Map,g=new Map,m=null!==(e=null!==o&&void 0!==o?o:r)&&void 0!==e?e:[],y=null!==(t=null!==i&&void 0!==i?i:n)&&void 0!==t?t:[],v=null!==u&&void 0!==u?u:[0,0],w=null!==h&&void 0!==h?h:pr;Fi(p,g,m),Mi(y,d,f,{nodeOrigin:v,nodeExtent:w,elevateNodesOnSelect:!1});let b=[0,0,1];if(l&&s&&a){const e=Nr(d,{filter:e=>!(!e.width&&!e.initialWidth||!e.height&&!e.initialHeight)}),{x:t,y:n,zoom:r}=$r(e,s,a,.5,2,.1);b=[t,n,r]}return{rfId:"1",width:0,height:0,transform:b,nodes:y,nodeLookup:d,parentLookup:f,edges:m,edgeLookup:g,connectionLookup:p,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==i,hasDefaultEdges:void 0!==o,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:pr,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:mr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:v,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:c({},wr),connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:Gr,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Ga=e=>{let{nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:o,height:s,fitView:a,nodeOrigin:l,nodeExtent:u}=e;return h=(e,h)=>c(c({},Ya({nodes:t,edges:n,width:o,height:s,fitView:a,nodeOrigin:l,nodeExtent:u,defaultNodes:r,defaultEdges:i})),{},{setNodes:t=>{const{nodeLookup:n,parentLookup:r,nodeOrigin:i,elevateNodesOnSelect:o}=h();Mi(t,n,r,{nodeOrigin:i,nodeExtent:u,elevateNodesOnSelect:o,checkEquality:!0}),e({nodes:t})},setEdges:t=>{const{connectionLookup:n,edgeLookup:r}=h();Fi(n,r,t),e({edges:t})},setDefaultNodesAndEdges:(t,n)=>{if(t){const{setNodes:n}=h();n(t),e({hasDefaultNodes:!0})}if(n){const{setEdges:t}=h();t(n),e({hasDefaultEdges:!0})}},updateNodeInternals:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{triggerFitView:!0};const{triggerNodeChanges:r,nodeLookup:i,parentLookup:o,fitViewOnInit:s,fitViewDone:a,fitViewOnInitOptions:l,domNode:u,nodeOrigin:d,nodeExtent:f,debug:p,fitViewSync:g}=h(),{changes:m,updatedInternals:y}=function(e,t,n,r,i,o){const s=null===r||void 0===r?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const l=[],u=window.getComputedStyle(s),{m22:h}=new window.DOMMatrixReadOnly(u.transform),d=[];for(const f of e.values()){const e=t.get(f.id);if(e)if(e.hidden)e.internals=c(c({},e.internals),{},{handleBounds:void 0}),a=!0;else{const r=oi(f.nodeElement),s=e.measured.width!==r.width||e.measured.height!==r.height;if(r.width&&r.height&&(s||!e.internals.handleBounds||f.force)){const u=f.nodeElement.getBoundingClientRect(),p=ei(e.extent)?e.extent:o;let{positionAbsolute:g}=e.internals;e.parentId&&"parent"===e.extent?g=Lr(g,r,t.get(e.parentId)):p&&(g=Or(g,p,r)),e.measured=r,e.internals=c(c({},e.internals),{},{positionAbsolute:g,handleBounds:{source:hi("source",f.nodeElement,u,h,e.id),target:hi("target",f.nodeElement,u,h,e.id)}}),e.parentId&&Ri(e,t,n,{nodeOrigin:i}),a=!0,s&&(l.push({id:e.id,type:"dimensions",dimensions:r}),e.expandParent&&e.parentId&&d.push({id:e.id,parentId:e.parentId,rect:Br(e,i)}))}}}if(d.length>0){const e=Li(d,t,n,i);l.push(...e)}return{changes:l,updatedInternals:a}}(t,i,o,u,d,f);if(y){if(function(e,t,n){const r=Pi(Di,n);for(const i of e.values())if(i.parentId)Ri(i,e,t,r);else{const e=Tr(i,r.nodeOrigin),t=ei(i.extent)?i.extent:r.nodeExtent,n=Or(e,t,ti(i));i.internals.positionAbsolute=n}}(i,o,{nodeOrigin:d,nodeExtent:f}),n.triggerFitView){let t=a;!a&&s&&(t=g(c(c({},l),{},{nodes:null===l||void 0===l?void 0:l.nodes}))),e({fitViewDone:t})}else e({});(null===m||void 0===m?void 0:m.length)>0&&(p&&console.log("React Flow: trigger node changes",m),null===r||void 0===r||r(m))}},updateNodePositions:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=[],r=[];for(const[i,o]of e){const e=!!(null!==o&&void 0!==o&&o.expandParent&&null!==o&&void 0!==o&&o.parentId&&null!==o&&void 0!==o&&o.position),s={id:i,type:"position",position:e?{x:Math.max(0,o.position.x),y:Math.max(0,o.position.y)}:o.position,dragging:t};e&&n.push({id:i,parentId:o.parentId,rect:c(c({},o.internals.positionAbsolute),{},{width:o.measured.width,height:o.measured.height})}),r.push(s)}if(n.length>0){const{nodeLookup:e,parentLookup:t,nodeOrigin:i}=h(),o=Li(n,e,t,i);r.push(...o)}h().triggerNodeChanges(r)},triggerNodeChanges:e=>{const{onNodesChange:t,setNodes:n,nodes:r,hasDefaultNodes:i,debug:o}=h();null!==e&&void 0!==e&&e.length&&(i&&n(as(e,r)),o&&console.log("React Flow: trigger node changes",e),null===t||void 0===t||t(e))},triggerEdgeChanges:e=>{const{onEdgesChange:t,setEdges:n,edges:r,hasDefaultEdges:i,debug:o}=h();null!==e&&void 0!==e&&e.length&&(i&&n(ls(e,r)),o&&console.log("React Flow: trigger edge changes",e),null===t||void 0===t||t(e))},addSelectedNodes:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:i,triggerEdgeChanges:o}=h();t?i(e.map((e=>cs(e,!0)))):(i(us(r,new Set([...e]),!0)),o(us(n)))},addSelectedEdges:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:i,triggerEdgeChanges:o}=h();t?o(e.map((e=>cs(e,!0)))):(o(us(n,new Set([...e]))),i(us(r,new Set,!0)))},unselectNodesAndEdges:function(){let{nodes:e,edges:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{edges:n,nodes:r,nodeLookup:i,triggerNodeChanges:o,triggerEdgeChanges:s}=h(),a=t||n,l=(e||r).map((e=>{const t=i.get(e.id);return t&&(t.selected=!1),cs(e.id,!1)})),c=a.map((e=>cs(e.id,!1)));o(l),s(c)},setMinZoom:t=>{const{panZoom:n,maxZoom:r}=h();null===n||void 0===n||n.setScaleExtent([t,r]),e({minZoom:t})},setMaxZoom:t=>{const{panZoom:n,minZoom:r}=h();null===n||void 0===n||n.setScaleExtent([r,t]),e({maxZoom:t})},setTranslateExtent:t=>{var n;null===(n=h().panZoom)||void 0===n||n.setTranslateExtent(t),e({translateExtent:t})},setPaneClickDistance:e=>{var t;null===(t=h().panZoom)||void 0===t||t.setClickDistance(e)},resetSelectedElements:()=>{const{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:r}=h(),i=t.reduce(((e,t)=>t.selected?[...e,cs(t.id,!1)]:e),[]),o=e.reduce(((e,t)=>t.selected?[...e,cs(t.id,!1)]:e),[]);n(i),r(o)},setNodeExtent:t=>{const{nodes:n,nodeLookup:r,parentLookup:i,nodeOrigin:o,elevateNodesOnSelect:s,nodeExtent:a}=h();t[0][0]===a[0][0]&&t[0][1]===a[0][1]&&t[1][0]===a[1][0]&&t[1][1]===a[1][1]||(Mi(n,r,i,{nodeOrigin:o,nodeExtent:t,elevateNodesOnSelect:s,checkEquality:!1}),e({nodeExtent:t}))},panBy:e=>{const{transform:t,width:n,height:r,panZoom:i,translateExtent:o}=h();return async function(e){let{delta:t,panZoom:n,transform:r,translateExtent:i,width:o,height:s}=e;if(!n||!t.x&&!t.y)return Promise.resolve(!1);const a=await n.setViewportConstrained({x:r[0]+t.x,y:r[1]+t.y,zoom:r[2]},[[0,0],[o,s]],i),l=!!a&&(a.x!==r[0]||a.y!==r[1]||a.k!==r[2]);return Promise.resolve(l)}({delta:e,panZoom:i,transform:t,translateExtent:o,width:n,height:r})},fitView:e=>{const{panZoom:t,width:n,height:r,minZoom:i,maxZoom:o,nodeLookup:s}=h();return t?Ar({nodes:Dr(s,e),width:n,height:r,panZoom:t,minZoom:i,maxZoom:o},e):Promise.resolve(!1)},fitViewSync:e=>{const{panZoom:t,width:n,height:r,minZoom:i,maxZoom:o,nodeLookup:s}=h();if(!t)return!1;const a=Dr(s,e);return Ar({nodes:a,width:n,height:r,panZoom:t,minZoom:i,maxZoom:o},e),a.size>0},cancelConnection:()=>{e({connection:c({},wr)})},updateConnection:t=>{e({connection:t})},reset:()=>e(c({},Ya()))}),d=Object.is,h?vo(h,d):vo;var h,d};function Qa(e){let{initialNodes:t,initialEdges:n,defaultNodes:i,defaultEdges:o,initialWidth:s,initialHeight:a,fitView:l,nodeOrigin:c,nodeExtent:u,children:d}=e;const[f]=(0,r.useState)((()=>Ga({nodes:t,edges:n,defaultNodes:i,defaultEdges:o,width:s,height:a,fitView:l,nodeOrigin:c,nodeExtent:u})));return(0,h.jsx)(No,{value:f,children:(0,h.jsx)(vs,{children:d})})}function Xa(e){let{children:t,nodes:n,edges:i,defaultNodes:o,defaultEdges:s,width:a,height:l,fitView:c,nodeOrigin:u,nodeExtent:d}=e;return(0,r.useContext)(To)?(0,h.jsx)(h.Fragment,{children:t}):(0,h.jsx)(Qa,{initialNodes:n,initialEdges:i,defaultNodes:o,defaultEdges:s,initialWidth:a,initialHeight:l,fitView:c,nodeOrigin:u,nodeExtent:d,children:t})}const Za={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var $a=ps((function(e,t){let{nodes:n,edges:i,defaultNodes:o,defaultEdges:s,className:a,nodeTypes:l,edgeTypes:f,onNodeClick:p,onEdgeClick:g,onInit:m,onMove:y,onMoveStart:v,onMoveEnd:w,onConnect:b,onConnectStart:_,onConnectEnd:S,onClickConnectStart:C,onClickConnectEnd:E,onNodeMouseEnter:k,onNodeMouseMove:x,onNodeMouseLeave:T,onNodeContextMenu:N,onNodeDoubleClick:I,onNodeDragStart:D,onNodeDrag:A,onNodeDragStop:P,onNodesDelete:M,onEdgesDelete:R,onDelete:O,onSelectionChange:L,onSelectionDragStart:F,onSelectionDrag:z,onSelectionDragStop:V,onSelectionContextMenu:j,onSelectionStart:U,onSelectionEnd:B,onBeforeDelete:q,connectionMode:H,connectionLineType:W=br.Bezier,connectionLineStyle:K,connectionLineComponent:Y,connectionLineContainerStyle:G,deleteKeyCode:Q="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:Z=!1,selectionMode:$=vr.Full,panActivationKeyCode:J="Space",multiSelectionKeyCode:ee=(Jr()?"Meta":"Control"),zoomActivationKeyCode:te=(Jr()?"Meta":"Control"),snapToGrid:ne,snapGrid:re,onlyRenderVisibleElements:ie=!1,selectNodesOnDrag:oe,nodesDraggable:se,nodesConnectable:ae,nodesFocusable:le,nodeOrigin:ce=Go,edgesFocusable:ue,edgesReconnectable:he,elementsSelectable:de=!0,defaultViewport:fe=Qo,minZoom:pe=.5,maxZoom:ge=2,translateExtent:me=pr,preventScrolling:ye=!0,nodeExtent:ve,defaultMarkerColor:we="#b1b1b7",zoomOnScroll:be=!0,zoomOnPinch:_e=!0,panOnScroll:Se=!1,panOnScrollSpeed:Ce=.5,panOnScrollMode:Ee=yr.Free,zoomOnDoubleClick:ke=!0,panOnDrag:xe=!0,onPaneClick:Te,onPaneMouseEnter:Ne,onPaneMouseMove:Ie,onPaneMouseLeave:De,onPaneScroll:Ae,onPaneContextMenu:Pe,paneClickDistance:Me=0,nodeClickDistance:Re=0,children:Oe,onReconnect:Le,onReconnectStart:Fe,onReconnectEnd:ze,onEdgeContextMenu:Ve,onEdgeDoubleClick:je,onEdgeMouseEnter:Ue,onEdgeMouseMove:Be,onEdgeMouseLeave:qe,reconnectRadius:He=10,onNodesChange:We,onEdgesChange:Ke,noDragClassName:Ye="nodrag",noWheelClassName:Ge="nowheel",noPanClassName:Qe="nopan",fitView:Xe,fitViewOptions:Ze,connectOnClick:$e,attributionPosition:Je,proOptions:et,defaultEdgeOptions:tt,elevateNodesOnSelect:nt,elevateEdgesOnSelect:rt,disableKeyboardA11y:it=!1,autoPanOnConnect:ot,autoPanOnNodeDrag:st,autoPanSpeed:at,connectionRadius:lt,isValidConnection:ct,onError:ut,style:ht,id:dt,nodeDragThreshold:ft,viewport:pt,onViewportChange:gt,width:mt,height:yt,colorMode:vt="light",debug:wt}=e,bt=u(e,ko);const _t=dt||"1",St=function(e){var t;const[n,i]=(0,r.useState)("system"===e?null:e);return(0,r.useEffect)((()=>{if("system"!==e)return void i(e);const t=es(),n=()=>i(null!==t&&void 0!==t&&t.matches?"dark":"light");return n(),null===t||void 0===t||t.addEventListener("change",n),()=>{null===t||void 0===t||t.removeEventListener("change",n)}}),[e]),null!==n?n:null!==(t=es())&&void 0!==t&&t.matches?"dark":"light"}(vt);return(0,h.jsx)("div",c(c({"data-testid":"rf__wrapper"},bt),{},{style:c(c({},ht),Za),ref:t,className:d(["react-flow",a,St]),id:dt,children:(0,h.jsxs)(Xa,{nodes:n,edges:i,width:mt,height:yt,fitView:Xe,nodeOrigin:ce,nodeExtent:ve,children:[(0,h.jsx)(Ka,{onInit:m,onNodeClick:p,onEdgeClick:g,onNodeMouseEnter:k,onNodeMouseMove:x,onNodeMouseLeave:T,onNodeContextMenu:N,onNodeDoubleClick:I,nodeTypes:l,edgeTypes:f,connectionLineType:W,connectionLineStyle:K,connectionLineComponent:Y,connectionLineContainerStyle:G,selectionKeyCode:X,selectionOnDrag:Z,selectionMode:$,deleteKeyCode:Q,multiSelectionKeyCode:ee,panActivationKeyCode:J,zoomActivationKeyCode:te,onlyRenderVisibleElements:ie,defaultViewport:fe,translateExtent:me,minZoom:pe,maxZoom:ge,preventScrolling:ye,zoomOnScroll:be,zoomOnPinch:_e,zoomOnDoubleClick:ke,panOnScroll:Se,panOnScrollSpeed:Ce,panOnScrollMode:Ee,panOnDrag:xe,onPaneClick:Te,onPaneMouseEnter:Ne,onPaneMouseMove:Ie,onPaneMouseLeave:De,onPaneScroll:Ae,onPaneContextMenu:Pe,paneClickDistance:Me,nodeClickDistance:Re,onSelectionContextMenu:j,onSelectionStart:U,onSelectionEnd:B,onReconnect:Le,onReconnectStart:Fe,onReconnectEnd:ze,onEdgeContextMenu:Ve,onEdgeDoubleClick:je,onEdgeMouseEnter:Ue,onEdgeMouseMove:Be,onEdgeMouseLeave:qe,reconnectRadius:He,defaultMarkerColor:we,noDragClassName:Ye,noWheelClassName:Ge,noPanClassName:Qe,rfId:_t,disableKeyboardA11y:it,nodeExtent:ve,viewport:pt,onViewportChange:gt}),(0,h.jsx)(Jo,{nodes:n,edges:i,defaultNodes:o,defaultEdges:s,onConnect:b,onConnectStart:_,onConnectEnd:S,onClickConnectStart:C,onClickConnectEnd:E,nodesDraggable:se,nodesConnectable:ae,nodesFocusable:le,edgesFocusable:ue,edgesReconnectable:he,elementsSelectable:de,elevateNodesOnSelect:nt,elevateEdgesOnSelect:rt,minZoom:pe,maxZoom:ge,nodeExtent:ve,onNodesChange:We,onEdgesChange:Ke,snapToGrid:ne,snapGrid:re,connectionMode:H,translateExtent:me,connectOnClick:$e,defaultEdgeOptions:tt,fitView:Xe,fitViewOptions:Ze,onNodesDelete:M,onEdgesDelete:R,onDelete:O,onNodeDragStart:D,onNodeDrag:A,onNodeDragStop:P,onSelectionDrag:z,onSelectionDragStart:F,onSelectionDragStop:V,onMove:y,onMoveStart:v,onMoveEnd:w,noPanClassName:Qe,nodeOrigin:ce,rfId:_t,autoPanOnConnect:ot,autoPanOnNodeDrag:st,autoPanSpeed:at,onError:ut,connectionRadius:lt,isValidConnection:ct,selectNodesOnDrag:oe,nodeDragThreshold:ft,onBeforeDelete:q,paneClickDistance:Me,debug:wt}),(0,h.jsx)(Yo,{onSelectionChange:L}),Oe,(0,h.jsx)(Uo,{proOptions:et,position:Je}),(0,h.jsx)(zo,{rfId:_t,disableKeyboardA11y:it})]})}))}));function Ja(e){let{dimensions:t,lineWidth:n,variant:r,className:i}=e;return(0,h.jsx)("path",{strokeWidth:n,d:"M".concat(t[0]/2," 0 V").concat(t[1]," M0 ").concat(t[1]/2," H").concat(t[0]),className:d(["react-flow__background-pattern",r,i])})}function el(e){let{radius:t,className:n}=e;return(0,h.jsx)("circle",{cx:t,cy:t,r:t,className:d(["react-flow__background-pattern","dots",n])})}var tl;!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(tl||(tl={}));const nl={[tl.Dots]:1,[tl.Lines]:1,[tl.Cross]:6},rl=e=>({transform:e.transform,patternId:"pattern-".concat(e.rfId)});function il(e){let{id:t,variant:n=tl.Dots,gap:i=20,size:o,lineWidth:s=1,offset:a=0,color:l,bgColor:u,style:f,className:p,patternClassName:g}=e;const m=(0,r.useRef)(null),{transform:y,patternId:v}=Do(rl,wo),w=o||nl[n],b=n===tl.Dots,_=n===tl.Cross,S=Array.isArray(i)?i:[i,i],C=[S[0]*y[2]||1,S[1]*y[2]||1],E=w*y[2],k=Array.isArray(a)?a:[a,a],x=_?[E,E]:C,T=[k[0]*y[2]||1+x[0]/2,k[1]*y[2]||1+x[1]/2],N="".concat(v).concat(t||"");return(0,h.jsxs)("svg",{className:d(["react-flow__background",p]),style:c(c(c({},f),Es),{},{"--xy-background-color-props":u,"--xy-background-pattern-color-props":l}),ref:m,"data-testid":"rf__background",children:[(0,h.jsx)("pattern",{id:N,x:y[0]%C[0],y:y[1]%C[1],width:C[0],height:C[1],patternUnits:"userSpaceOnUse",patternTransform:"translate(-".concat(T[0],",-").concat(T[1],")"),children:b?(0,h.jsx)(el,{radius:E/2,className:g}):(0,h.jsx)(Ja,{dimensions:x,lineWidth:s,variant:n,className:g})}),(0,h.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(N,")")})]})}il.displayName="Background";const ol=(0,r.memo)(il);function sl(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,h.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function al(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,h.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function ll(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,h.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function cl(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,h.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function ul(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,h.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function hl(e){let{children:t,className:n}=e,r=u(e,xo);return(0,h.jsx)("button",c(c({type:"button",className:d(["react-flow__controls-button",n])},r),{},{children:t}))}const dl=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function fl(e){let{style:t,showZoom:n=!0,showFitView:r=!0,showInteractive:i=!0,fitViewOptions:o,onZoomIn:s,onZoomOut:a,onFitView:l,onInteractiveChange:c,className:u,children:f,position:p="bottom-left",orientation:g="vertical","aria-label":m="React Flow controls"}=e;const y=Ao(),{isInteractive:v,minZoomReached:w,maxZoomReached:b}=Do(dl,wo),{zoomIn:_,zoomOut:S,fitView:C}=bs(),E="horizontal"===g?"horizontal":"vertical";return(0,h.jsxs)(jo,{className:d(["react-flow__controls",E,u]),position:p,style:t,"data-testid":"rf__controls","aria-label":m,children:[n&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(hl,{onClick:()=>{_(),null===s||void 0===s||s()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:b,children:(0,h.jsx)(sl,{})}),(0,h.jsx)(hl,{onClick:()=>{S(),null===a||void 0===a||a()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w,children:(0,h.jsx)(al,{})})]}),r&&(0,h.jsx)(hl,{className:"react-flow__controls-fitview",onClick:()=>{C(o),null===l||void 0===l||l()},title:"fit view","aria-label":"fit view",children:(0,h.jsx)(ll,{})}),i&&(0,h.jsx)(hl,{className:"react-flow__controls-interactive",onClick:()=>{y.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),null===c||void 0===c||c(!v)},title:"toggle interactivity","aria-label":"toggle interactivity",children:v?(0,h.jsx)(ul,{}):(0,h.jsx)(cl,{})}),f]})}fl.displayName="Controls";const pl=(0,r.memo)(fl);const gl=(0,r.memo)((function(e){let{id:t,x:n,y:r,width:i,height:o,style:s,color:a,strokeColor:l,strokeWidth:c,className:u,borderRadius:f,shapeRendering:p,selected:g,onClick:m}=e;const{background:y,backgroundColor:v}=s||{},w=a||y||v;return(0,h.jsx)("rect",{className:d(["react-flow__minimap-node",{selected:g},u]),x:n,y:r,rx:f,ry:f,width:i,height:o,style:{fill:w,stroke:l,strokeWidth:c},shapeRendering:p,onClick:m?e=>m(e,t):void 0})})),ml=e=>e.nodes.map((e=>e.id)),yl=e=>e instanceof Function?e:()=>e;const vl=(0,r.memo)((function(e){let{id:t,nodeColorFunc:n,nodeStrokeColorFunc:r,nodeClassNameFunc:i,nodeBorderRadius:o,nodeStrokeWidth:s,shapeRendering:a,NodeComponent:l,onClick:c}=e;const{node:u,x:d,y:f,width:p,height:g}=Do((e=>{const n=e.nodeLookup.get(t),{x:r,y:i}=n.internals.positionAbsolute,{width:o,height:s}=ti(n);return{node:n,x:r,y:i,width:o,height:s}}),wo);return u&&!u.hidden&&ni(u)?(0,h.jsx)(l,{x:d,y:f,width:p,height:g,style:u.style,selected:!!u.selected,className:i(u),color:n(u),borderRadius:o,strokeColor:r(u),strokeWidth:s,shapeRendering:a,onClick:c,id:u.id}):null}));var wl=(0,r.memo)((function(e){let{nodeStrokeColor:t,nodeColor:n,nodeClassName:r="",nodeBorderRadius:i=5,nodeStrokeWidth:o,nodeComponent:s=gl,onClick:a}=e;const l=Do(ml,wo),c=yl(n),u=yl(t),d=yl(r),f="undefined"===typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,h.jsx)(h.Fragment,{children:l.map((e=>(0,h.jsx)(vl,{id:e,nodeColorFunc:c,nodeStrokeColorFunc:u,nodeClassNameFunc:d,nodeBorderRadius:i,nodeStrokeWidth:o,NodeComponent:s,onClick:a,shapeRendering:f},e)))})}));const bl=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Hr(Nr(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}};function _l(e){var t,n;let{style:i,className:o,nodeStrokeColor:s,nodeColor:a,nodeClassName:l="",nodeBorderRadius:u=5,nodeStrokeWidth:f,nodeComponent:p,bgColor:g,maskColor:m,maskStrokeColor:y,maskStrokeWidth:v,position:w="bottom-right",onClick:b,onNodeClick:_,pannable:S=!1,zoomable:C=!1,ariaLabel:E="React Flow mini map",inversePan:k,zoomStep:x=10,offsetScale:T=5}=e;const N=Ao(),I=(0,r.useRef)(null),{boundingRect:D,viewBB:A,rfId:P,panZoom:M,translateExtent:R,flowWidth:O,flowHeight:L}=Do(bl,wo),F=null!==(t=null===i||void 0===i?void 0:i.width)&&void 0!==t?t:200,z=null!==(n=null===i||void 0===i?void 0:i.height)&&void 0!==n?n:150,V=D.width/F,j=D.height/z,U=Math.max(V,j),B=U*F,q=U*z,H=T*U,W=D.x-(B-D.width)/2-H,K=D.y-(q-D.height)/2-H,Y=B+2*H,G=q+2*H,Q="".concat("react-flow__minimap-desc","-").concat(P),X=(0,r.useRef)(0),Z=(0,r.useRef)();X.current=U,(0,r.useEffect)((()=>{if(I.current&&M)return Z.current=function(e){let{domNode:t,panZoom:n,getTransform:r,getViewScale:i}=e;const o=Pe(t);return{update:function(e){let{translateExtent:t,width:s,height:a,zoomStep:l=10,pannable:c=!0,zoomable:u=!0,inversePan:h=!1}=e,d=[0,0];const f=nr().on("start",(e=>{var t,n;"mousedown"!==e.sourceEvent.type&&"touchstart"!==e.sourceEvent.type||(d=[null!==(t=e.sourceEvent.clientX)&&void 0!==t?t:e.sourceEvent.touches[0].clientX,null!==(n=e.sourceEvent.clientY)&&void 0!==n?n:e.sourceEvent.touches[0].clientY])})).on("zoom",c?e=>{var o,l;const c=r();if("mousemove"!==e.sourceEvent.type&&"touchmove"!==e.sourceEvent.type||!n)return;const u=[null!==(o=e.sourceEvent.clientX)&&void 0!==o?o:e.sourceEvent.touches[0].clientX,null!==(l=e.sourceEvent.clientY)&&void 0!==l?l:e.sourceEvent.touches[0].clientY],f=[u[0]-d[0],u[1]-d[1]];d=u;const p=i()*Math.max(c[2],Math.log(c[2]))*(h?-1:1),g={x:c[0]-f[0]*p,y:c[1]-f[1]*p},m=[[0,0],[s,a]];n.setViewportConstrained({x:g.x,y:g.y,zoom:c[2]},m,t)}:null).on("zoom.wheel",u?e=>{const t=r();if("wheel"!==e.sourceEvent.type||!n)return;const i=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*l,o=t[2]*Math.pow(2,i);n.scaleTo(o)}:null);o.call(f,{})},destroy:function(){o.on("zoom",null)},pointer:Me}}({domNode:I.current,panZoom:M,getTransform:()=>N.getState().transform,getViewScale:()=>X.current}),()=>{var e;null===(e=Z.current)||void 0===e||e.destroy()}}),[M]),(0,r.useEffect)((()=>{var e;null===(e=Z.current)||void 0===e||e.update({translateExtent:R,width:O,height:L,inversePan:k,pannable:S,zoomStep:x,zoomable:C})}),[S,C,k,x,R,O,L]);const $=b?e=>{var t;const[n,r]=(null===(t=Z.current)||void 0===t?void 0:t.pointer(e))||[0,0];b(e,{x:n,y:r})}:void 0,J=_?(0,r.useCallback)(((e,t)=>{const n=N.getState().nodeLookup.get(t);_(e,n)}),[]):void 0;return(0,h.jsx)(jo,{position:w,style:c(c({},i),{},{"--xy-minimap-background-color-props":"string"===typeof g?g:void 0,"--xy-minimap-mask-background-color-props":"string"===typeof m?m:void 0,"--xy-minimap-mask-stroke-color-props":"string"===typeof y?y:void 0,"--xy-minimap-mask-stroke-width-props":"number"===typeof v?v*U:void 0,"--xy-minimap-node-background-color-props":"string"===typeof a?a:void 0,"--xy-minimap-node-stroke-color-props":"string"===typeof s?s:void 0,"--xy-minimap-node-stroke-width-props":"string"===typeof f?f:void 0}),className:d(["react-flow__minimap",o]),"data-testid":"rf__minimap",children:(0,h.jsxs)("svg",{width:F,height:z,viewBox:"".concat(W," ").concat(K," ").concat(Y," ").concat(G),className:"react-flow__minimap-svg",role:"img","aria-labelledby":Q,ref:I,onClick:$,children:[E&&(0,h.jsx)("title",{id:Q,children:E}),(0,h.jsx)(wl,{onClick:J,nodeColor:a,nodeStrokeColor:s,nodeBorderRadius:u,nodeClassName:l,nodeStrokeWidth:f,nodeComponent:p}),(0,h.jsx)("path",{className:"react-flow__minimap-mask",d:"M".concat(W-H,",").concat(K-H,"h").concat(Y+2*H,"v").concat(G+2*H,"h").concat(-Y-2*H,"z\n        M").concat(A.x,",").concat(A.y,"h").concat(A.width,"v").concat(A.height,"h").concat(-A.width,"z"),fillRule:"evenodd",pointerEvents:"none"})]})})}_l.displayName="MiniMap";const Sl=(0,r.memo)(_l);(0,r.memo)((function(e){let{nodeId:t,position:n,variant:i=to.Handle,className:o,style:s={},children:a,color:l,minWidth:u=10,minHeight:f=10,maxWidth:p=Number.MAX_VALUE,maxHeight:g=Number.MAX_VALUE,keepAspectRatio:m=!1,shouldResize:y,onResizeStart:v,onResize:w,onResizeEnd:b}=e;const _=Fs(),S="string"===typeof t?t:_,C=Ao(),E=(0,r.useRef)(null),k=i===to.Line?"right":"bottom-right",x=null!==n&&void 0!==n?n:k,T=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(E.current&&S)return T.current||(T.current=co({domNode:E.current,nodeId:S,getStoreItems:()=>{const{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:i,domNode:o}=C.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:i,paneDomNode:o}},onChange:(e,t)=>{const{triggerNodeChanges:n,nodeLookup:r,parentLookup:i,nodeOrigin:o}=C.getState(),s=[],a={x:e.x,y:e.y},l=r.get(S);if(l&&l.expandParent&&l.parentId){var u,h,d,f,p;const t=null!==(u=l.origin)&&void 0!==u?u:o,n=null!==(h=e.width)&&void 0!==h?h:l.measured.width,g=null!==(d=e.height)&&void 0!==d?d:l.measured.height,m=Li([{id:l.id,parentId:l.parentId,rect:c({width:n,height:g},ri({x:null!==(f=e.x)&&void 0!==f?f:l.position.x,y:null!==(p=e.y)&&void 0!==p?p:l.position.y},{width:n,height:g},l.parentId,r,t))}],r,i,o);s.push(...m),a.x=e.x?Math.max(t[0]*n,e.x):void 0,a.y=e.y?Math.max(t[1]*g,e.y):void 0}if(void 0!==a.x&&void 0!==a.y){const e={id:S,type:"position",position:c({},a)};s.push(e)}if(void 0!==e.width&&void 0!==e.height){const t={id:S,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:e.width,height:e.height}};s.push(t)}for(const g of t){const e=c(c({},g),{},{type:"position"});s.push(e)}n(s)},onEnd:()=>{const e={id:S,type:"dimensions",resizing:!1};C.getState().triggerNodeChanges([e])}})),T.current.update({controlPosition:x,boundaries:{minWidth:u,minHeight:f,maxWidth:p,maxHeight:g},keepAspectRatio:m,onResizeStart:v,onResize:w,onResizeEnd:b,shouldResize:y}),()=>{var e;null===(e=T.current)||void 0===e||e.destroy()}}),[x,u,f,p,g,m,v,w,b,y]);const N=x.split("-"),I=i===to.Line?"borderColor":"backgroundColor",D=l?c(c({},s),{},{[I]:l}):s;return(0,h.jsx)("div",{className:d(["react-flow__resize-control","nodrag",...N,i,o]),ref:E,style:D,children:a})}));const Cl=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"===typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!==typeof i||null===i)?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e))},s=t=e(r,i,o);return o},El=e=>e;const kl=e=>{const t=(e=>e?Cl(e):Cl)(e),n=e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:El;const n=r.useSyncExternalStore(e.subscribe,(()=>t(e.getState())),(()=>t(e.getInitialState())));return r.useDebugValue(n),n}(t,e);return Object.assign(n,t),n},xl=()=>new Map,Tl=e=>{const t=xl();return e.forEach(((e,n)=>{t.set(n,e)})),t},Nl=(e,t,n)=>{let r=e.get(t);return void 0===r&&e.set(t,r=n()),r},Il=()=>new Set,Dl=e=>e[e.length-1],Al=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},Pl=Array.from,Ml=Array.isArray;class Rl{constructor(){this._observers=xl()}on(e,t){return Nl(this._observers,e,Il).add(t),t}once(e,t){var n=this;const r=function(){n.off(e,r),t(...arguments)};this.on(e,r)}off(e,t){const n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return Pl((this._observers.get(e)||xl()).values()).forEach((e=>e(...t)))}destroy(){this._observers=xl()}}const Ol=Math.floor,Ll=(Math.ceil,Math.abs),Fl=(Math.imul,Math.round,Math.log10,Math.log2,Math.log,Math.sqrt,(e,t)=>e<t?e:t),zl=(e,t)=>e>t?e:t,Vl=(Number.isNaN,Math.pow,Math.sign,e=>0!==e?e<0:1/e<0),jl=64,Ul=128,Bl=127,ql=2147483647,Hl=Number.MAX_SAFE_INTEGER,Wl=(Number.MIN_SAFE_INTEGER,Number.isInteger||(e=>"number"===typeof e&&isFinite(e)&&Ol(e)===e)),Kl=(Number.isNaN,Number.parseInt,String.fromCharCode),Yl=(String.fromCodePoint,Kl(65535),/^\s*/g),Gl=/([A-Z])/g,Ql=(e,t)=>(e=>e.replace(Yl,""))(e.replace(Gl,(e=>"".concat(t).concat((e=>e.toLowerCase())(e))))),Xl="undefined"!==typeof TextEncoder?new TextEncoder:null,Zl=Xl?e=>Xl.encode(e):e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.codePointAt(i);return r};let $l="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});$l&&1===$l.decode(new Uint8Array).length&&($l=null);class Jl{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const ec=()=>new Jl,tc=e=>{const t=new Uint8Array((e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t})(e));let n=0;for(let r=0;r<e.bufs.length;r++){const i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},nc=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},rc=nc,ic=(e,t)=>{for(;t>Bl;)nc(e,Ul|Bl&t),t=Ol(t/128);nc(e,Bl&t)},oc=(e,t)=>{const n=Vl(t);for(n&&(t=-t),nc(e,(t>63?Ul:0)|(n?jl:0)|63&t),t=Ol(t/64);t>0;)nc(e,(t>Bl?Ul:0)|Bl&t),t=Ol(t/128)},sc=new Uint8Array(3e4),ac=sc.length/3,lc=Xl&&Xl.encodeInto?(e,t)=>{if(t.length<ac){const n=Xl.encodeInto(t,sc).written||0;ic(e,n);for(let t=0;t<n;t++)nc(e,sc[t])}else uc(e,Zl(t))}:(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;ic(e,r);for(let i=0;i<r;i++)nc(e,n.codePointAt(i))},cc=(e,t)=>{const n=e.cbuf.length,r=e.cpos,i=Fl(n-r,t.length),o=t.length-i;e.cbuf.set(t.subarray(0,i),r),e.cpos+=i,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(zl(2*n,o)),e.cbuf.set(t.subarray(i)),e.cpos=o)},uc=(e,t)=>{ic(e,t.byteLength),cc(e,t)},hc=(e,t)=>{((e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*zl(n,t)),e.cpos=0)})(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},dc=new DataView(new ArrayBuffer(4)),fc=(e,t)=>{switch(typeof t){case"string":nc(e,119),lc(e,t);break;case"number":Wl(t)&&Ll(t)<=ql?(nc(e,125),oc(e,t)):(n=t,dc.setFloat32(0,n),dc.getFloat32(0)===n?(nc(e,124),((e,t)=>{hc(e,4).setFloat32(0,t,!1)})(e,t)):(nc(e,123),((e,t)=>{hc(e,8).setFloat64(0,t,!1)})(e,t)));break;case"bigint":nc(e,122),((e,t)=>{hc(e,8).setBigInt64(0,t,!1)})(e,t);break;case"object":if(null===t)nc(e,126);else if(Ml(t)){nc(e,117),ic(e,t.length);for(let n=0;n<t.length;n++)fc(e,t[n])}else if(t instanceof Uint8Array)nc(e,116),uc(e,t);else{nc(e,118);const n=Object.keys(t);ic(e,n.length);for(let r=0;r<n.length;r++){const i=n[r];lc(e,i),fc(e,t[i])}}break;case"boolean":nc(e,t?120:121);break;default:nc(e,127)}var n};class pc extends Jl{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&ic(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const gc=e=>{e.count>0&&(oc(e.encoder,1===e.count?e.s:-e.s),e.count>1&&ic(e.encoder,e.count-2))};class mc{constructor(){this.encoder=new Jl,this.s=0,this.count=0}write(e){this.s===e?this.count++:(gc(this),this.count=1,this.s=e)}toUint8Array(){return gc(this),tc(this.encoder)}}const yc=e=>{if(e.count>0){const t=2*e.diff+(1===e.count?0:1);oc(e.encoder,t),e.count>1&&ic(e.encoder,e.count-2)}};class vc{constructor(){this.encoder=new Jl,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(yc(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return yc(this),tc(this.encoder)}}class wc{constructor(){this.sarr=[],this.s="",this.lensE=new mc}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new Jl;return this.sarr.push(this.s),this.s="",lc(e,this.sarr.join("")),cc(e,this.lensE.toUint8Array()),tc(e)}}const bc=e=>new Error(e),_c=()=>{throw bc("Method unimplemented")},Sc=()=>{throw bc("Unexpected case")},Cc=bc("Unexpected end of array"),Ec=bc("Integer out of Range");class kc{constructor(e){this.arr=e,this.pos=0}}const xc=e=>new kc(e),Tc=e=>e.pos!==e.arr.length,Nc=(e,t)=>{const n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},Ic=e=>Nc(e,Ac(e)),Dc=e=>e.arr[e.pos++],Ac=e=>{let t=0,n=1;const r=e.arr.length;for(;e.pos<r;){const r=e.arr[e.pos++];if(t+=(r&Bl)*n,n*=128,r<Ul)return t;if(t>Hl)throw Ec}throw Cc},Pc=e=>{let t=e.arr[e.pos++],n=63&t,r=64;const i=(t&jl)>0?-1:1;if(0===(t&Ul))return i*n;const o=e.arr.length;for(;e.pos<o;){if(t=e.arr[e.pos++],n+=(t&Bl)*r,r*=128,t<Ul)return i*n;if(n>Hl)throw Ec}throw Cc},Mc=$l?e=>$l.decode(Ic(e)):e=>{let t=Ac(e);if(0===t)return"";{let n=String.fromCodePoint(Dc(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(Dc(e));else for(;t>0;){const r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))}},Rc=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},Oc=[e=>{},e=>null,Pc,e=>Rc(e,4).getFloat32(0,!1),e=>Rc(e,8).getFloat64(0,!1),e=>Rc(e,8).getBigInt64(0,!1),e=>!1,e=>!0,Mc,e=>{const t=Ac(e),n={};for(let r=0;r<t;r++){n[Mc(e)]=Lc(e)}return n},e=>{const t=Ac(e),n=[];for(let r=0;r<t;r++)n.push(Lc(e));return n},Ic],Lc=e=>Oc[127-Dc(e)](e);class Fc extends kc{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),Tc(this)?this.count=Ac(this)+1:this.count=-1),this.count--,this.s}}class zc extends kc{constructor(e){super(e),this.s=0,this.count=0}read(){if(0===this.count){this.s=Pc(this);const e=Vl(this.s);this.count=1,e&&(this.s=-this.s,this.count=Ac(this)+2)}return this.count--,this.s}}class Vc extends kc{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){const e=Pc(this),t=1&e;this.diff=Ol(e/2),this.count=1,t&&(this.count=Ac(this)+2)}return this.s+=this.diff,this.count--,this.s}}class jc{constructor(e){this.decoder=new zc(e),this.str=Mc(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}crypto.subtle;const Uc=crypto.getRandomValues.bind(crypto),Bc=(Math.random,()=>Uc(new Uint32Array(1))[0]),qc=[1e7]+-1e3+-4e3+-8e3+-1e11,Hc=()=>qc.replace(/[018]/g,(e=>(e^Bc()&15>>e/4).toString(16))),Wc=e=>new Promise(e),Kc=(Promise.all.bind(Promise),e=>void 0===e?null:e);let Yc=new class{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}},Gc=!0;try{"undefined"!==typeof localStorage&&localStorage&&(Yc=localStorage,Gc=!1)}catch(dM){}const Qc=Yc,Xc=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&Xc(e,t,n+1)}},Zc=e=>e,$c="undefined"!==typeof process&&process.release&&/node|io\.js/.test(process.release.name)&&"[object process]"===Object.prototype.toString.call("undefined"!==typeof process?process:0);"undefined"!==typeof navigator&&/Mac/.test(navigator.platform);let Jc;const eu=[],tu=()=>{if(void 0===Jc)if($c){Jc=xl();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];"-"===r[0]?(null!==t&&Jc.set(t,""),t=r):null!==t?(Jc.set(t,r),t=null):eu.push(r)}null!==t&&Jc.set(t,"")}else"object"===typeof location?(Jc=xl(),(location.search||"?").slice(1).split("&").forEach((e=>{if(0!==e.length){const[t,n]=e.split("=");Jc.set("--".concat(Ql(t,"-")),n),Jc.set("-".concat(Ql(t,"-")),n)}}))):Jc=xl();return Jc},nu=e=>tu().has(e),ru=e=>Kc($c?{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[e.toUpperCase().replaceAll("-","_")]:Qc.getItem(e)),iu=e=>nu("--"+e)||null!==ru(e);iu("production");const ou=$c&&["true","1","2"].includes({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FORCE_COLOR)||!nu("--no-colors")&&!iu("no-color")&&(!$c||process.stdout.isTTY)&&(!$c||nu("--color")||null!==ru("COLORTERM")||(ru("TERM")||"").includes("color")),su=e=>new Uint8Array(e);class au{constructor(e,t){this.left=e,this.right=t}}const lu=(e,t)=>new au(e,t),cu="undefined"!==typeof document?document:{},uu=("undefined"!==typeof DOMParser&&new DOMParser,cu.ELEMENT_NODE,cu.TEXT_NODE,cu.CDATA_SECTION_NODE,cu.COMMENT_NODE,cu.DOCUMENT_NODE,cu.DOCUMENT_TYPE_NODE,cu.DOCUMENT_FRAGMENT_NODE,Symbol),hu=Date.now,du=uu(),fu=uu(),pu=uu(),gu=uu(),mu=uu(),yu=uu(),vu=uu(),wu=uu(),bu=uu();hu();const _u={[du]:lu("font-weight","bold"),[fu]:lu("font-weight","normal"),[pu]:lu("color","blue"),[mu]:lu("color","green"),[gu]:lu("color","grey"),[yu]:lu("color","red"),[vu]:lu("color","purple"),[wu]:lu("color","orange"),[bu]:lu("color","black")},Su=ou?e=>{var t;1===e.length&&(null===(t=e[0])||void 0===t?void 0:t.constructor)===Function&&(e=e[0]());const n=[],r=[],i=xl();let o=[],s=0;for(;s<e.length;s++){const t=e[s],o=_u[t];if(void 0!==o)i.set(o.left,o.right);else{if(void 0===t)break;if(t.constructor!==String&&t.constructor!==Number)break;{const e=((e,t)=>{const n=[];for(const[r,i]of e)n.push(t(i,r));return n})(i,((e,t)=>"".concat(t,":").concat(e,";"))).join("");s>0||e.length>0?(n.push("%c"+t),r.push(e)):n.push(t)}}}for(s>0&&(o=r,o.unshift(n.join("")));s<e.length;s++){const t=e[s];t instanceof Symbol||o.push(t)}return o}:e=>{var t;1===e.length&&(null===(t=e[0])||void 0===t?void 0:t.constructor)===Function&&(e=e[0]());const n=[],r=[];let i=0;for(;i<e.length;i++){const t=e[i];if(void 0===t)break;if(t.constructor===String||t.constructor===Number)n.push(t);else if(t.constructor===Object)break}for(i>0&&r.push(n.join(""));i<e.length;i++){const t=e[i];t instanceof Symbol||r.push(t)}return r},Cu=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log(...Su(t)),ku.forEach((e=>e.print(t)))},Eu=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.warn(...Su(t)),t.unshift(wu),ku.forEach((e=>e.print(t)))},ku=Il();const xu=e=>({[Symbol.iterator](){return this},next:e}),Tu=(e,t)=>xu((()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}})),Nu=Object.assign,Iu=Object.keys,Du=e=>Iu(e).length,Au=(e,t)=>e===t||Du(e)===Du(t)&&((e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0})(e,((e,n)=>(void 0!==e||((e,t)=>Object.prototype.hasOwnProperty.call(e,t))(t,n))&&t[n]===e)),Pu=Object.freeze,Mu=e=>{for(const t in e){const n=e[t];"object"!==typeof n&&"function"!==typeof n||Mu(e[t])}return Pu(e)};class Ru{constructor(e,t){this.clock=e,this.len=t}}class Ou{constructor(){this.clients=new Map}}const Lu=(e,t,n)=>t.clients.forEach(((t,r)=>{const i=e.doc.store.clients.get(r);for(let o=0;o<t.length;o++){const r=t[o];Ph(e,i,r.clock,r.len,n)}})),Fu=(e,t)=>{const n=e.clients.get(t.client);return void 0!==n&&null!==((e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const i=Ol((n+r)/2),o=e[i],s=o.clock;if(s<=t){if(t<s+o.len)return i;n=i+1}else r=i-1}return null})(n,t.clock)},zu=e=>{e.clients.forEach((e=>{let t,n;for(e.sort(((e,t)=>e.clock-t.clock)),t=1,n=1;t<e.length;t++){const r=e[n-1],i=e[t];r.clock+r.len>=i.clock?r.len=zl(r.len,i.clock+i.len-r.clock):(n<t&&(e[n]=i),n++)}e.length=n}))},Vu=e=>{const t=new Ou;for(let n=0;n<e.length;n++)e[n].clients.forEach(((r,i)=>{if(!t.clients.has(i)){const o=r.slice();for(let t=n+1;t<e.length;t++)Al(o,e[t].clients.get(i)||[]);t.clients.set(i,o)}}));return zu(t),t},ju=(e,t,n,r)=>{Nl(e.clients,t,(()=>[])).push(new Ru(n,r))},Uu=()=>new Ou,Bu=e=>{const t=Uu();return e.clients.forEach(((e,n)=>{const r=[];for(let t=0;t<e.length;t++){const n=e[t];if(n.deleted){const i=n.id.clock;let o=n.length;if(t+1<e.length)for(let n=e[t+1];t+1<e.length&&n.deleted;n=e[1+ ++t])o+=n.length;r.push(new Ru(i,o))}}r.length>0&&t.clients.set(n,r)})),t},qu=(e,t)=>{ic(e.restEncoder,t.clients.size),Pl(t.clients.entries()).sort(((e,t)=>t[0]-e[0])).forEach((t=>{let[n,r]=t;e.resetDsCurVal(),ic(e.restEncoder,n);const i=r.length;ic(e.restEncoder,i);for(let o=0;o<i;o++){const t=r[o];e.writeDsClock(t.clock),e.writeDsLen(t.len)}}))},Hu=e=>{const t=new Ou,n=Ac(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const n=Ac(e.restDecoder),r=Ac(e.restDecoder);if(r>0){const i=Nl(t.clients,n,(()=>[]));for(let t=0;t<r;t++)i.push(new Ru(e.readDsClock(),e.readDsLen()))}}return t},Wu=(e,t,n)=>{const r=new Ou,i=Ac(e.restDecoder);for(let o=0;o<i;o++){e.resetDsCurVal();const i=Ac(e.restDecoder),o=Ac(e.restDecoder),s=n.clients.get(i)||[],a=kh(n,i);for(let n=0;n<o;n++){const n=e.readDsClock(),o=n+e.readDsLen();if(n<a){a<o&&ju(r,i,a,o-a);let e=Th(s,n),l=s[e];for(!l.deleted&&l.id.clock<n&&(s.splice(e+1,0,wf(t,l,n-l.id.clock)),e++);e<s.length&&(l=s[e++],l.id.clock<o);)l.deleted||(o<l.id.clock+l.length&&s.splice(e,0,wf(t,l,o-l.id.clock)),l.delete(t))}else ju(r,i,n,o-n)}}if(r.clients.size>0){const e=new th;return ic(e.restEncoder,0),qu(e,r),e.toUint8Array()}return null},Ku=Bc;class Yu extends Rl{constructor(){let{guid:e=Hc(),collectionid:t=null,gc:n=!0,gcFilter:r=()=>!0,meta:i=null,autoLoad:o=!1,shouldLoad:s=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.gc=n,this.gcFilter=r,this.clientID=Ku(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new Ch,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=s,this.autoLoad=o,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Wc((e=>{this.on("load",(()=>{this.isLoaded=!0,e(this)}))}));const a=()=>Wc((e=>{const t=n=>{void 0!==n&&!0!==n||(this.off("sync",t),e())};this.on("sync",t)}));this.on("sync",(e=>{!1===e&&this.isSynced&&(this.whenSynced=a()),this.isSynced=void 0===e||!0===e,this.isSynced&&!this.isLoaded&&this.emit("load",[this])})),this.whenSynced=a()}load(){const e=this._item;null===e||this.shouldLoad||jh(e.parent.doc,(e=>{e.subdocsLoaded.add(this)}),null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Pl(this.subdocs).map((e=>e.guid)))}transact(e){return jh(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ld;const n=Nl(this.share,e,(()=>{const e=new t;return e._integrate(this,null),e})),r=n.constructor;if(t!==ld&&r!==t){if(r===ld){const r=new t;r._map=n._map,n._map.forEach((e=>{for(;null!==e;e=e.left)e.parent=r})),r._start=n._start;for(let e=r._start;null!==e;e=e.right)e.parent=r;return r._length=n._length,this.share.set(e,r),r._integrate(this,null),r}throw new Error("Type with the name ".concat(e," has already been defined with a different constructor"))}return n}getArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,xd)}getText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,Hd)}getMap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,Nd)}getXmlElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,Yd)}getXmlFragment(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,Kd)}toJSON(){const e={};return this.share.forEach(((t,n)=>{e[n]=t.toJSON()})),e}destroy(){this.isDestroyed=!0,Pl(this.subdocs).forEach((e=>e.destroy()));const e=this._item;if(null!==e){this._item=null;const t=e.content;t.doc=new Yu(c(c({guid:this.guid},t.opts),{},{shouldLoad:!1})),t.doc._item=e,jh(e.parent.doc,(n=>{const r=t.doc;e.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class Gu{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return Ac(this.restDecoder)}readDsLen(){return Ac(this.restDecoder)}}class Qu extends Gu{readLeftID(){return yh(Ac(this.restDecoder),Ac(this.restDecoder))}readRightID(){return yh(Ac(this.restDecoder),Ac(this.restDecoder))}readClient(){return Ac(this.restDecoder)}readInfo(){return Dc(this.restDecoder)}readString(){return Mc(this.restDecoder)}readParentInfo(){return 1===Ac(this.restDecoder)}readTypeRef(){return Ac(this.restDecoder)}readLen(){return Ac(this.restDecoder)}readAny(){return Lc(this.restDecoder)}readBuf(){return(e=>{const t=su(e.byteLength);return t.set(e),t})(Ic(this.restDecoder))}readJSON(){return JSON.parse(Mc(this.restDecoder))}readKey(){return Mc(this.restDecoder)}}class Xu{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Ac(this.restDecoder),this.dsCurrVal}readDsLen(){const e=Ac(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Zu extends Xu{constructor(e){super(e),this.keys=[],Ac(e),this.keyClockDecoder=new Vc(Ic(e)),this.clientDecoder=new zc(Ic(e)),this.leftClockDecoder=new Vc(Ic(e)),this.rightClockDecoder=new Vc(Ic(e)),this.infoDecoder=new Fc(Ic(e),Dc),this.stringDecoder=new jc(Ic(e)),this.parentInfoDecoder=new Fc(Ic(e),Dc),this.typeRefDecoder=new zc(Ic(e)),this.lenDecoder=new zc(Ic(e))}readLeftID(){return new gh(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new gh(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Lc(this.restDecoder)}readBuf(){return Ic(this.restDecoder)}readJSON(){return Lc(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class $u{constructor(){this.restEncoder=ec()}toUint8Array(){return tc(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){ic(this.restEncoder,e)}writeDsLen(e){ic(this.restEncoder,e)}}class Ju extends $u{writeLeftID(e){ic(this.restEncoder,e.client),ic(this.restEncoder,e.clock)}writeRightID(e){ic(this.restEncoder,e.client),ic(this.restEncoder,e.clock)}writeClient(e){ic(this.restEncoder,e)}writeInfo(e){rc(this.restEncoder,e)}writeString(e){lc(this.restEncoder,e)}writeParentInfo(e){ic(this.restEncoder,e?1:0)}writeTypeRef(e){ic(this.restEncoder,e)}writeLen(e){ic(this.restEncoder,e)}writeAny(e){fc(this.restEncoder,e)}writeBuf(e){uc(this.restEncoder,e)}writeJSON(e){lc(this.restEncoder,JSON.stringify(e))}writeKey(e){lc(this.restEncoder,e)}}class eh{constructor(){this.restEncoder=ec(),this.dsCurrVal=0}toUint8Array(){return tc(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,ic(this.restEncoder,t)}writeDsLen(e){0===e&&Sc(),ic(this.restEncoder,e-1),this.dsCurrVal+=e}}class th extends eh{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new vc,this.clientEncoder=new mc,this.leftClockEncoder=new vc,this.rightClockEncoder=new vc,this.infoEncoder=new pc(rc),this.stringEncoder=new wc,this.parentInfoEncoder=new pc(rc),this.typeRefEncoder=new mc,this.lenEncoder=new mc}toUint8Array(){const e=ec();return ic(e,0),uc(e,this.keyClockEncoder.toUint8Array()),uc(e,this.clientEncoder.toUint8Array()),uc(e,this.leftClockEncoder.toUint8Array()),uc(e,this.rightClockEncoder.toUint8Array()),uc(e,tc(this.infoEncoder)),uc(e,this.stringEncoder.toUint8Array()),uc(e,tc(this.parentInfoEncoder)),uc(e,this.typeRefEncoder.toUint8Array()),uc(e,this.lenEncoder.toUint8Array()),cc(e,tc(this.restEncoder)),tc(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){fc(this.restEncoder,e)}writeBuf(e){uc(this.restEncoder,e)}writeJSON(e){fc(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const nh=(e,t,n)=>{const r=new Map;n.forEach(((e,n)=>{kh(t,n)>e&&r.set(n,e)})),Eh(t).forEach(((e,t)=>{n.has(t)||r.set(t,0)})),ic(e.restEncoder,r.size),Pl(r.entries()).sort(((e,t)=>t[0]-e[0])).forEach((n=>{let[r,i]=n;((e,t,n,r)=>{r=zl(r,t[0].id.clock);const i=Th(t,r);ic(e.restEncoder,t.length-i),e.writeClient(n),ic(e.restEncoder,r);const o=t[i];o.write(e,r-o.id.clock);for(let s=i+1;s<t.length;s++)t[s].write(e,0)})(e,t.clients.get(r),r,i)}))},rh=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Zu(e);return jh(t,(e=>{e.local=!1;let t=!1;const n=e.doc,i=n.store,o=((e,t)=>{const n=xl(),r=Ac(e.restDecoder);for(let i=0;i<r;i++){const r=Ac(e.restDecoder),i=new Array(r),o=e.readClient();let s=Ac(e.restDecoder);n.set(o,{i:0,refs:i});for(let n=0;n<r;n++){const r=e.readInfo();switch(31&r){case 0:{const t=e.readLen();i[n]=new $d(yh(o,s),t),s+=t;break}case 10:{const t=Ac(e.restDecoder);i[n]=new Cf(yh(o,s),t),s+=t;break}default:{const a=0===(192&r),l=new bf(yh(o,s),null,(r&Ul)===Ul?e.readLeftID():null,null,(r&jl)===jl?e.readRightID():null,a?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,a&&32===(32&r)?e.readString():null,_f(e,r));i[n]=l,s+=l.length}}}}return n})(r,n),s=((e,t,n)=>{const r=[];let i=Pl(n.keys()).sort(((e,t)=>e-t));if(0===i.length)return null;const o=()=>{if(0===i.length)return null;let e=n.get(i[i.length-1]);for(;e.refs.length===e.i;){if(i.pop(),!(i.length>0))return null;e=n.get(i[i.length-1])}return e};let s=o();if(null===s)return null;const a=new Ch,l=new Map,c=(e,t)=>{const n=l.get(e);(null==n||n>t)&&l.set(e,t)};let u=s.refs[s.i++];const h=new Map,d=()=>{for(const e of r){const t=e.id.client,r=n.get(t);r?(r.i--,a.clients.set(t,r.refs.slice(r.i)),n.delete(t),r.i=0,r.refs=[]):a.clients.set(t,[e]),i=i.filter((e=>e!==t))}r.length=0};for(;;){if(u.constructor!==Cf){const i=Nl(h,u.id.client,(()=>kh(t,u.id.client)))-u.id.clock;if(i<0)r.push(u),c(u.id.client,u.id.clock-1),d();else{const o=u.getMissing(e,t);if(null!==o){r.push(u);const e=n.get(o)||{refs:[],i:0};if(e.refs.length!==e.i){u=e.refs[e.i++];continue}c(o,kh(t,o)),d()}else(0===i||i<u.length)&&(u.integrate(e,i),h.set(u.id.client,u.id.clock+u.length))}}if(r.length>0)u=r.pop();else if(null!==s&&s.i<s.refs.length)u=s.refs[s.i++];else{if(s=o(),null===s)break;u=s.refs[s.i++]}}if(a.clients.size>0){const e=new th;return nh(e,a,new Map),ic(e.restEncoder,0),{missing:l,update:e.toUint8Array()}}return null})(e,i,o),a=i.pendingStructs;if(a){for(const[e,n]of a.missing)if(n<kh(i,e)){t=!0;break}if(s){for(const[e,t]of s.missing){const n=a.missing.get(e);(null==n||n>t)&&a.missing.set(e,t)}a.update=Wh([a.update,s.update])}}else i.pendingStructs=s;const l=Wu(r,e,i);if(i.pendingDs){const t=new Zu(xc(i.pendingDs));Ac(t.restDecoder);const n=Wu(t,e,i);i.pendingDs=l&&n?Wh([l,n]):l||n}else i.pendingDs=l;if(t){const t=i.pendingStructs.update;i.pendingStructs=null,ih(e.doc,t)}}),n,!1)},ih=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Zu;const i=xc(t);rh(i,e,n,new r(i))},oh=(e,t,n)=>ih(e,t,n,Qu),sh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint8Array([0]),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new th;!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;nh(e,t.store,n),qu(e,Bu(t.store))}(n,e,ch(t));const r=[n.toUint8Array()];if(e.store.pendingDs&&r.push(e.store.pendingDs),e.store.pendingStructs&&r.push(Kh(e.store.pendingStructs.update,t)),r.length>1){if(n.constructor===Ju)return qh(r.map(((e,t)=>0===t?e:Zh(e))));if(n.constructor===th)return Wh(r)}return r[0]},ah=(e,t)=>sh(e,t,new Ju),lh=e=>{const t=new Map,n=Ac(e.restDecoder);for(let r=0;r<n;r++){const n=Ac(e.restDecoder),r=Ac(e.restDecoder);t.set(n,r)}return t},ch=e=>lh(new Gu(xc(e)));class uh{constructor(){this.l=[]}}const hh=()=>new uh,dh=(e,t)=>e.l.push(t),fh=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter((e=>t!==e)),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},ph=(e,t,n)=>Xc(e.l,[t,n]);class gh{constructor(e,t){this.client=e,this.clock=t}}const mh=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,yh=(e,t)=>new gh(e,t),vh=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw Sc()};class wh{constructor(e,t){this.ds=e,this.sv=t}}const bh=(e,t)=>new wh(e,t),_h=(bh(Uu(),new Map),(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!Fu(t.ds,e.id)),Sh=(e,t)=>{const n=Nl(e.meta,Sh,Il),r=e.doc.store;n.has(t)||(t.sv.forEach(((t,n)=>{t<kh(r,n)&&Dh(e,yh(n,t))})),Lu(e,t.ds,(e=>{})),n.add(t))};class Ch{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Eh=e=>{const t=new Map;return e.clients.forEach(((e,n)=>{const r=e[e.length-1];t.set(n,r.id.clock+r.length)})),t},kh=(e,t)=>{const n=e.clients.get(t);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},xh=(e,t)=>{let n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{const e=n[n.length-1];if(e.id.clock+e.length!==t.id.clock)throw Sc()}n.push(t)},Th=(e,t)=>{let n=0,r=e.length-1,i=e[r],o=i.id.clock;if(o===t)return r;let s=Ol(t/(o+i.length-1)*r);for(;n<=r;){if(i=e[s],o=i.id.clock,o<=t){if(t<o+i.length)return s;n=s+1}else r=s-1;s=Ol((n+r)/2)}throw Sc()},Nh=(e,t)=>{const n=e.clients.get(t.client);return n[Th(n,t.clock)]},Ih=(e,t,n)=>{const r=Th(t,n),i=t[r];return i.id.clock<n&&i instanceof bf?(t.splice(r+1,0,wf(e,i,n-i.id.clock)),r+1):r},Dh=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[Ih(e,n,t.clock)]},Ah=(e,t,n)=>{const r=t.clients.get(n.client),i=Th(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==$d&&r.splice(i+1,0,wf(e,o,n.clock-o.id.clock+1)),o},Ph=(e,t,n,r,i)=>{if(0===r)return;const o=n+r;let s,a=Ih(e,t,n);do{s=t[a++],o<s.id.clock+s.length&&Ih(e,t,o),i(s)}while(a<t.length&&t[a].id.clock<o)};class Mh{constructor(e,t,n){this.doc=e,this.deleteSet=new Ou,this.beforeState=Eh(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Rh=(e,t)=>!(0===t.deleteSet.clients.size&&!((e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1})(t.afterState,((e,n)=>t.beforeState.get(n)!==e)))&&(zu(t.deleteSet),((e,t)=>{nh(e,t.doc.store,t.beforeState)})(e,t),qu(e,t.deleteSet),!0),Oh=(e,t,n)=>{const r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&Nl(e.changed,t,Il).add(n)},Lh=(e,t)=>{let n=e[t],r=e[t-1],i=t;for(;i>0&&(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n));n=r,r=e[--i-1])n instanceof bf&&null!==n.parentSub&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);const o=t-i;return o&&e.splice(t+1-o,o),o},Fh=(e,t,n)=>{for(const[r,i]of e.clients.entries()){const e=t.clients.get(r);for(let r=i.length-1;r>=0;r--){const o=i[r],s=o.clock+o.len;for(let r=Th(e,o.clock),i=e[r];r<e.length&&i.id.clock<s;i=e[++r]){const i=e[r];if(o.clock+o.len<=i.id.clock)break;i instanceof bf&&i.deleted&&!i.keep&&n(i)&&i.gc(t,!1)}}}},zh=(e,t)=>{e.clients.forEach(((e,n)=>{const r=t.clients.get(n);for(let t=e.length-1;t>=0;t--){const n=e[t];for(let e=Fl(r.length-1,1+Th(r,n.clock+n.len-1)),t=r[e];e>0&&t.id.clock>=n.clock;t=r[e])e-=1+Lh(r,e)}}))},Vh=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,i=r.store,o=n.deleteSet,s=n._mergeStructs;try{zu(o),n.afterState=Eh(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const e=[];n.changed.forEach(((t,r)=>e.push((()=>{null!==r._item&&r._item.deleted||r._callObserver(n,t)})))),e.push((()=>{n.changedParentTypes.forEach(((e,t)=>{t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter((e=>null===e.target._item||!e.target._item.deleted))).forEach((e=>{e.currentTarget=t,e._path=null})),e.sort(((e,t)=>e.path.length-t.path.length)),ph(t._dEH,e,n))}))})),e.push((()=>r.emit("afterTransaction",[n,r]))),Xc(e,[]),n._needFormattingCleanup&&Ud(n)}finally{r.gc&&Fh(o,i,r.gcFilter),zh(o,i),n.afterState.forEach(((e,t)=>{const r=n.beforeState.get(t)||0;if(r!==e){const e=i.clients.get(t),n=zl(Th(e,r),1);for(let t=e.length-1;t>=n;)t-=1+Lh(e,t)}}));for(let e=s.length-1;e>=0;e--){const{client:t,clock:n}=s[e].id,r=i.clients.get(t),o=Th(r,n);o+1<r.length&&Lh(r,o+1)>1||o>0&&Lh(r,o)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(Cu(wu,du,"[yjs] ",fu,yu,"Changed the client-id because another client seems to be using it."),r.clientID=Ku()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const e=new Ju;Rh(e,n)&&r.emit("update",[e.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const e=new th;Rh(e,n)&&r.emit("updateV2",[e.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=n;(a.size>0||c.size>0||l.size>0)&&(a.forEach((e=>{e.clientID=r.clientID,null==e.collectionid&&(e.collectionid=r.collectionid),r.subdocs.add(e)})),c.forEach((e=>r.subdocs.delete(e))),r.emit("subdocs",[{loaded:l,added:a,removed:c},r,n]),c.forEach((e=>e.destroy()))),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):Vh(e,t+1)}}},jh=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=e._transactionCleanups;let o=!1,s=null;null===e._transaction&&(o=!0,e._transaction=new Mh(e,n,r),i.push(e._transaction),1===i.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{s=t(e._transaction)}finally{if(o){const t=e._transaction===i[0];e._transaction=null,t&&Vh(i,0)}}return s};class Uh{constructor(e,t){this.gen=function*(e){const t=Ac(e.restDecoder);for(let n=0;n<t;n++){const t=Ac(e.restDecoder),n=e.readClient();let r=Ac(e.restDecoder);for(let i=0;i<t;i++){const t=e.readInfo();if(10===t){const t=Ac(e.restDecoder);yield new Cf(yh(n,r),t),r+=t}else if(0!==(31&t)){const i=0===(192&t),o=new bf(yh(n,r),null,(t&Ul)===Ul?e.readLeftID():null,null,(t&jl)===jl?e.readRightID():null,i?e.readParentInfo()?e.readString():e.readLeftID():null,i&&32===(32&t)?e.readString():null,_f(e,t));yield o,r+=o.length}else{const t=e.readLen();yield new $d(yh(n,r),t),r+=t}}}}(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===Cf);return this.curr}}class Bh{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const qh=e=>Wh(e,Qu,Ju),Hh=(e,t)=>{if(e.constructor===$d){const{client:n,clock:r}=e.id;return new $d(yh(n,r+t),e.length-t)}if(e.constructor===Cf){const{client:n,clock:r}=e.id;return new Cf(yh(n,r+t),e.length-t)}{const n=e,{client:r,clock:i}=n.id;return new bf(yh(r,i+t),null,yh(r,i+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},Wh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zu,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:th;if(1===e.length)return e[0];const r=e.map((e=>new t(xc(e))));let i=r.map((e=>new Uh(e,!0))),o=null;const s=new n,a=new Bh(s);for(;i=i.filter((e=>null!==e.curr)),i.sort(((e,t)=>{if(e.curr.id.client===t.curr.id.client){const n=e.curr.id.clock-t.curr.id.clock;return 0===n?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===Cf?1:-1:n}return t.curr.id.client-e.curr.id.client})),0!==i.length;){const e=i[0],t=e.curr.id.client;if(null!==o){let n=e.curr,r=!1;for(;null!==n&&n.id.clock+n.length<=o.struct.id.clock+o.struct.length&&n.id.client>=o.struct.id.client;)n=e.next(),r=!0;if(null===n||n.id.client!==t||r&&n.id.clock>o.struct.id.clock+o.struct.length)continue;if(t!==o.struct.id.client)Gh(a,o.struct,o.offset),o={struct:n,offset:0},e.next();else if(o.struct.id.clock+o.struct.length<n.id.clock)if(o.struct.constructor===Cf)o.struct.length=n.id.clock+n.length-o.struct.id.clock;else{Gh(a,o.struct,o.offset);const e=n.id.clock-o.struct.id.clock-o.struct.length;o={struct:new Cf(yh(t,o.struct.id.clock+o.struct.length),e),offset:0}}else{const t=o.struct.id.clock+o.struct.length-n.id.clock;t>0&&(o.struct.constructor===Cf?o.struct.length-=t:n=Hh(n,t)),o.struct.mergeWith(n)||(Gh(a,o.struct,o.offset),o={struct:n,offset:0},e.next())}}else o={struct:e.curr,offset:0},e.next();for(let n=e.curr;null!==n&&n.id.client===t&&n.id.clock===o.struct.id.clock+o.struct.length&&n.constructor!==Cf;n=e.next())Gh(a,o.struct,o.offset),o={struct:n,offset:0}}null!==o&&(Gh(a,o.struct,o.offset),o=null),Qh(a);const l=r.map((e=>Hu(e))),c=Vu(l);return qu(s,c),s.toUint8Array()},Kh=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zu,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:th;const i=ch(t),o=new r,s=new Bh(o),a=new n(xc(e)),l=new Uh(a,!1);for(;l.curr;){const e=l.curr,t=e.id.client,n=i.get(t)||0;if(l.curr.constructor!==Cf)if(e.id.clock+e.length>n)for(Gh(s,e,zl(n-e.id.clock,0)),l.next();l.curr&&l.curr.id.client===t;)Gh(s,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===t&&l.curr.id.clock+l.curr.length<=n;)l.next();else l.next()}Qh(s);const c=Hu(a);return qu(o,c),o.toUint8Array()},Yh=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:tc(e.encoder.restEncoder)}),e.encoder.restEncoder=ec(),e.written=0)},Gh=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&Yh(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),ic(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},Qh=e=>{Yh(e);const t=e.encoder.restEncoder;ic(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];ic(t,r.written),cc(t,r.restEncoder)}},Xh=(e,t,n,r)=>{const i=new n(xc(e)),o=new Uh(i,!1),s=new r,a=new Bh(s);for(let c=o.curr;null!==c;c=o.next())Gh(a,t(c),0);Qh(a);const l=Hu(i);return qu(s,l),s.toUint8Array()},Zh=e=>Xh(e,Zc,Zu,Ju),$h="You must not compute changes after the event-handler fired.";class Jh{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=ed(this.currentTarget,this.target))}deletes(e){return Fu(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw bc($h);const e=new Map,t=this.target;this.transaction.changed.get(t).forEach((n=>{if(null!==n){const r=t._map.get(n);let i,o;if(this.adds(r)){let e=r.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(r)){if(null===e||!this.deletes(e))return;i="delete",o=Dl(e.content.getContent())}else null!==e&&this.deletes(e)?(i="update",o=Dl(e.content.getContent())):(i="add",o=void 0)}else{if(!this.deletes(r))return;i="delete",o=Dl(r.content.getContent())}e.set(n,{action:i,oldValue:o})}})),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw bc($h);const t=this.target,n=Il(),r=Il(),i=[];e={added:n,deleted:r,delta:i,keys:this.keys};if(this.transaction.changed.get(t).has(null)){let e=null;const o=()=>{e&&i.push(e)};for(let i=t._start;null!==i;i=i.right)i.deleted?this.deletes(i)&&!this.adds(i)&&(null!==e&&void 0!==e.delete||(o(),e={delete:0}),e.delete+=i.length,r.add(i)):this.adds(i)?(null!==e&&void 0!==e.insert||(o(),e={insert:[]}),e.insert=e.insert.concat(i.content.getContent()),n.add(i)):(null!==e&&void 0!==e.retain||(o(),e={retain:0}),e.retain+=i.length);null!==e&&void 0===e.retain&&o()}this._changes=e}return e}}const ed=(e,t)=>{const n=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{let e=0,r=t._item.parent._start;for(;r!==t._item&&null!==r;)!r.deleted&&r.countable&&(e+=r.length),r=r.right;n.unshift(e)}t=t._item.parent}return n},td=()=>{Eu("Invalid access: Add Yjs type to a document before reading data.")};let nd=0;class rd{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=nd++}}const id=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=nd++},od=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;const n=0===e._searchMarker.length?null:e._searchMarker.reduce(((e,n)=>Ll(t-e.index)<Ll(t-n.index)?e:n));let r=e._start,i=0;for(null!==n&&(r=n.p,i=n.index,(e=>{e.timestamp=nd++})(n));null!==r.right&&i<t;){if(!r.deleted&&r.countable){if(t<i+r.length)break;i+=r.length}r=r.right}for(;null!==r.left&&i>t;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return null!==n&&Ll(n.index-i)<r.parent.length/80?(id(n,r,i),n):((e,t,n)=>{if(e.length>=80){const r=e.reduce(((e,t)=>e.timestamp<t.timestamp?e:t));return id(r,t,n),r}{const r=new rd(t,n);return e.push(r),r}})(e._searchMarker,r,i)},sd=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const i=e[r];if(n>0){let t=i.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)t=t.left,t&&!t.deleted&&t.countable&&(i.index-=t.length);if(null===t||!0===t.marker){e.splice(r,1);continue}i.p=t,t.marker=!0}(t<i.index||n>0&&t===i.index)&&(i.index=zl(t,i.index+n))}},ad=(e,t,n)=>{const r=e,i=t.changedParentTypes;for(;Nl(i,e,(()=>[])).push(n),null!==e._item;)e=e._item.parent;ph(r._eH,n,t)};class ld{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=hh(),this._dEH=hh(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw _c()}clone(){throw _c()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){dh(this._eH,e)}observeDeep(e){dh(this._dEH,e)}unobserve(e){fh(this._eH,e)}unobserveDeep(e){fh(this._dEH,e)}toJSON(){}}const cd=(e,t,n)=>{var r;null!==(r=e.doc)&&void 0!==r||td(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let i=n-t;const o=[];let s=e._start;for(;null!==s&&i>0;){if(s.countable&&!s.deleted){const e=s.content.getContent();if(e.length<=t)t-=e.length;else{for(let n=t;n<e.length&&i>0;n++)o.push(e[n]),i--;t=0}}s=s.right}return o},ud=e=>{var t;null!==(t=e.doc)&&void 0!==t||td();const n=[];let r=e._start;for(;null!==r;){if(r.countable&&!r.deleted){const e=r.content.getContent();for(let t=0;t<e.length;t++)n.push(e[t])}r=r.right}return n},hd=(e,t)=>{var n;let r=0,i=e._start;for(null!==(n=e.doc)&&void 0!==n||td();null!==i;){if(i.countable&&!i.deleted){const n=i.content.getContent();for(let i=0;i<n.length;i++)t(n[i],r++,e)}i=i.right}},dd=(e,t)=>{const n=[];return hd(e,((r,i)=>{n.push(t(r,i,e))})),n},fd=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const e=n[r++];return n.length<=r&&(n=null),{done:!1,value:e}}}},pd=(e,t)=>{var n;null!==(n=e.doc)&&void 0!==n||td();const r=od(e,t);let i=e._start;for(null!==r&&(i=r.p,t-=r.index);null!==i;i=i.right)if(!i.deleted&&i.countable){if(t<i.length)return i.content.getContent()[t];t-=i.length}},gd=(e,t,n,r)=>{let i=n;const o=e.doc,s=o.clientID,a=o.store,l=null===n?t._start:n.right;let c=[];const u=()=>{c.length>0&&(i=new bf(yh(s,kh(a,s)),i,i&&i.lastId,l,l&&l.id,t,null,new lf(c)),i.integrate(e,0),c=[])};r.forEach((n=>{if(null===n)c.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(n);break;default:switch(u(),n.constructor){case Uint8Array:case ArrayBuffer:i=new bf(yh(s,kh(a,s)),i,i&&i.lastId,l,l&&l.id,t,null,new Jd(new Uint8Array(n))),i.integrate(e,0);break;case Yu:i=new bf(yh(s,kh(a,s)),i,i&&i.lastId,l,l&&l.id,t,null,new nf(n)),i.integrate(e,0);break;default:if(!(n instanceof ld))throw new Error("Unexpected content type in insert operation");i=new bf(yh(s,kh(a,s)),i,i&&i.lastId,l,l&&l.id,t,null,new vf(n)),i.integrate(e,0)}}})),u()},md=()=>bc("Length exceeded!"),yd=(e,t,n,r)=>{if(n>t._length)throw md();if(0===n)return t._searchMarker&&sd(t._searchMarker,n,r.length),gd(e,t,null,r);const i=n,o=od(t,n);let s=t._start;for(null!==o&&(s=o.p,0===(n-=o.index)&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));null!==s;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&Dh(e,yh(s.id.client,s.id.clock+n));break}n-=s.length}return t._searchMarker&&sd(t._searchMarker,i,r.length),gd(e,t,s,r)},vd=(e,t,n,r)=>{if(0===r)return;const i=n,o=r,s=od(t,n);let a=t._start;for(null!==s&&(a=s.p,n-=s.index);null!==a&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&Dh(e,yh(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&null!==a;)a.deleted||(r<a.length&&Dh(e,yh(a.id.client,a.id.clock+r)),a.delete(e),r-=a.length),a=a.right;if(r>0)throw md();t._searchMarker&&sd(t._searchMarker,i,-o+r)},wd=(e,t,n)=>{const r=t._map.get(n);void 0!==r&&r.delete(e)},bd=(e,t,n,r)=>{const i=t._map.get(n)||null,o=e.doc,s=o.clientID;let a;if(null==r)a=new lf([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:a=new lf([r]);break;case Uint8Array:a=new Jd(r);break;case Yu:a=new nf(r);break;default:if(!(r instanceof ld))throw new Error("Unexpected content type");a=new vf(r)}new bf(yh(s,kh(o.store,s)),i,i&&i.lastId,null,null,t,n,a).integrate(e,0)},_d=(e,t)=>{var n;null!==(n=e.doc)&&void 0!==n||td();const r=e._map.get(t);return void 0===r||r.deleted?void 0:r.content.getContent()[r.length-1]},Sd=e=>{var t;const n={};return null!==(t=e.doc)&&void 0!==t||td(),e._map.forEach(((e,t)=>{e.deleted||(n[t]=e.content.getContent()[e.length-1])})),n},Cd=(e,t)=>{var n;null!==(n=e.doc)&&void 0!==n||td();const r=e._map.get(t);return void 0!==r&&!r.deleted},Ed=e=>{var t;return null!==(t=e.doc)&&void 0!==t||td(),((e,t)=>xu((()=>{let n;do{n=e.next()}while(!n.done&&!t(n.value));return n})))(e._map.entries(),(e=>!e[1].deleted))};class kd extends Jh{}class xd extends ld{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new xd;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new xd}clone(){const e=new xd;return e.insert(0,this.toArray().map((e=>e instanceof ld?e.clone():e))),e}get length(){var e;return null!==(e=this.doc)&&void 0!==e||td(),this._length}_callObserver(e,t){super._callObserver(e,t),ad(this,e,new kd(this,e))}insert(e,t){null!==this.doc?jh(this.doc,(n=>{yd(n,this,e,t)})):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?jh(this.doc,(t=>{((e,t,n)=>{let r=(t._searchMarker||[]).reduce(((e,t)=>t.index>e.index?t:e),{index:0,p:t._start}).p;if(r)for(;r.right;)r=r.right;gd(e,t,r,n)})(t,this,e)})):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;null!==this.doc?jh(this.doc,(n=>{vd(n,this,e,t)})):this._prelimContent.splice(e,t)}get(e){return pd(this,e)}toArray(){return ud(this)}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return cd(this,e,t)}toJSON(){return this.map((e=>e instanceof ld?e.toJSON():e))}map(e){return dd(this,e)}forEach(e){hd(this,e)}[Symbol.iterator](){return fd(this)}_write(e){e.writeTypeRef(hf)}}class Td extends Jh{constructor(e,t,n){super(e,t),this.keysChanged=n}}class Nd extends ld{constructor(e){super(),this._prelimContent=null,this._prelimContent=void 0===e?new Map:new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach(((e,t)=>{this.set(t,e)})),this._prelimContent=null}_copy(){return new Nd}clone(){const e=new Nd;return this.forEach(((t,n)=>{e.set(n,t instanceof ld?t.clone():t)})),e}_callObserver(e,t){ad(this,e,new Td(this,e,t))}toJSON(){var e;null!==(e=this.doc)&&void 0!==e||td();const t={};return this._map.forEach(((e,n)=>{if(!e.deleted){const r=e.content.getContent()[e.length-1];t[n]=r instanceof ld?r.toJSON():r}})),t}get size(){return[...Ed(this)].length}keys(){return Tu(Ed(this),(e=>e[0]))}values(){return Tu(Ed(this),(e=>e[1].content.getContent()[e[1].length-1]))}entries(){return Tu(Ed(this),(e=>[e[0],e[1].content.getContent()[e[1].length-1]]))}forEach(e){var t;null!==(t=this.doc)&&void 0!==t||td(),this._map.forEach(((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)}))}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?jh(this.doc,(t=>{wd(t,this,e)})):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?jh(this.doc,(n=>{bd(n,this,e,t)})):this._prelimContent.set(e,t),t}get(e){return _d(this,e)}has(e){return Cd(this,e)}clear(){null!==this.doc?jh(this.doc,(e=>{this.forEach((function(t,n,r){wd(e,r,n)}))})):this._prelimContent.clear()}_write(e){e.writeTypeRef(df)}}const Id=(e,t)=>e===t||"object"===typeof e&&"object"===typeof t&&e&&t&&Au(e,t);class Dd{constructor(e,t,n,r){this.left=e,this.right=t,this.index=n,this.currentAttributes=r}forward(){if(null===this.right&&Sc(),this.right.content.constructor===of)this.right.deleted||Rd(this.currentAttributes,this.right.content);else this.right.deleted||(this.index+=this.right.length);this.left=this.right,this.right=this.right.right}}const Ad=(e,t,n)=>{for(;null!==t.right&&n>0;){if(t.right.content.constructor===of)t.right.deleted||Rd(t.currentAttributes,t.right.content);else t.right.deleted||(n<t.right.length&&Dh(e,yh(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);t.left=t.right,t.right=t.right.right}return t},Pd=(e,t,n,r)=>{const i=new Map,o=r?od(t,n):null;if(o){const t=new Dd(o.p.left,o.p,o.index,i);return Ad(e,t,n-o.index)}{const r=new Dd(null,t._start,0,i);return Ad(e,r,n)}},Md=(e,t,n,r)=>{for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===of&&Id(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const i=e.doc,o=i.clientID;r.forEach(((r,s)=>{const a=n.left,l=n.right,c=new bf(yh(o,kh(i.store,o)),a,a&&a.lastId,l,l&&l.id,t,null,new of(s,r));c.integrate(e,0),n.right=c,n.forward()}))},Rd=(e,t)=>{const{key:n,value:r}=t;null===r?e.delete(n):e.set(n,r)},Od=(e,t)=>{for(;;){var n;if(null===e.right)break;if(!(e.right.deleted||e.right.content.constructor===of&&Id(null!==(n=t[e.right.content.key])&&void 0!==n?n:null,e.right.content.value)))break;e.forward()}},Ld=(e,t,n,r)=>{const i=e.doc,o=i.clientID,s=new Map;for(const l in r){var a;const c=r[l],u=null!==(a=n.currentAttributes.get(l))&&void 0!==a?a:null;if(!Id(u,c)){s.set(l,u);const{left:r,right:a}=n;n.right=new bf(yh(o,kh(i.store,o)),r,r&&r.lastId,a,a&&a.id,t,null,new of(l,c)),n.right.integrate(e,0),n.forward()}}return s},Fd=(e,t,n,r,i)=>{n.currentAttributes.forEach(((e,t)=>{void 0===i[t]&&(i[t]=null)}));const o=e.doc,s=o.clientID;Od(n,i);const a=Ld(e,t,n,i),l=r.constructor===String?new cf(r):r instanceof ld?new vf(r):new rf(r);let{left:c,right:u,index:h}=n;t._searchMarker&&sd(t._searchMarker,n.index,l.getLength()),u=new bf(yh(s,kh(o.store,s)),c,c&&c.lastId,u,u&&u.id,t,null,l),u.integrate(e,0),n.right=u,n.index=h,n.forward(),Md(e,t,n,a)},zd=(e,t,n,r,i)=>{const o=e.doc,s=o.clientID;Od(n,i);const a=Ld(e,t,n,i);e:for(;null!==n.right&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===of));){if(!n.right.deleted)switch(n.right.content.constructor){case of:{const{key:t,value:o}=n.right.content,s=i[t];if(void 0!==s){if(Id(s,o))a.delete(t);else{if(0===r)break e;a.set(t,o)}n.right.delete(e)}else n.currentAttributes.set(t,o);break}default:r<n.right.length&&Dh(e,yh(n.right.id.client,n.right.id.clock+r)),r-=n.right.length}n.forward()}if(r>0){let i="";for(;r>0;r--)i+="\n";n.right=new bf(yh(s,kh(o.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new cf(i)),n.right.integrate(e,0),n.forward()}Md(e,t,n,a)},Vd=(e,t,n,r,i)=>{let o=t;const s=xl();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===of){const e=o.content;s.set(e.key,e)}o=o.right}let a=0,l=!1;for(;t!==o;){if(n===t&&(l=!0),!t.deleted){const n=t.content;switch(n.constructor){case of:{var c;const{key:o,value:h}=n,d=null!==(c=r.get(o))&&void 0!==c?c:null;var u;if(s.get(o)!==n||d===h)t.delete(e),a++,l||(null!==(u=i.get(o))&&void 0!==u?u:null)!==h||d===h||(null===d?i.delete(o):i.set(o,d));l||t.deleted||Rd(i,n);break}}}t=t.right}return a},jd=e=>{let t=0;return jh(e.doc,(n=>{let r=e._start,i=e._start,o=xl();const s=Tl(o);for(;i;){if(!1===i.deleted)if(i.content.constructor===of)Rd(s,i.content);else t+=Vd(n,r,i,o,s),o=Tl(s),r=i;i=i.right}})),t},Ud=e=>{const t=new Set,n=e.doc;for(const[r,i]of e.afterState.entries()){const o=e.beforeState.get(r)||0;i!==o&&Ph(e,n.store.clients.get(r),o,i,(e=>{e.deleted||e.content.constructor!==of||e.constructor===$d||t.add(e.parent)}))}jh(n,(n=>{Lu(e,e.deleteSet,(e=>{if(e instanceof $d||!e.parent._hasFormatting||t.has(e.parent))return;const r=e.parent;e.content.constructor===of?t.add(r):((e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===of){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}})(n,e)}));for(const e of t)jd(e)}))},Bd=(e,t,n)=>{const r=n,i=Tl(t.currentAttributes),o=t.right;for(;n>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case vf:case rf:case cf:n<t.right.length&&Dh(e,yh(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e)}t.forward()}o&&Vd(e,o,t.right,i,t.currentAttributes);const s=(t.left||t.right).parent;return s._searchMarker&&sd(s._searchMarker,t.index,-r+n),t};class qd extends Jh{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach((e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)}))}get changes(){if(null===this._changes){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){const e=this.target.doc,t=[];jh(e,(e=>{const n=new Map,r=new Map;let i=this.target._start,o=null;const s={};let a="",l=0,c=0;const u=()=>{if(null!==o){let e=null;switch(o){case"delete":c>0&&(e={delete:c}),c=0;break;case"insert":("object"===typeof a||a.length>0)&&(e={insert:a},n.size>0&&(e.attributes={},n.forEach(((t,n)=>{null!==t&&(e.attributes[n]=t)})))),a="";break;case"retain":l>0&&(e={retain:l},(e=>{for(const t in e)return!1;return!0})(s)||(e.attributes=Nu({},s))),l=0}e&&t.push(e),o=null}};for(;null!==i;){switch(i.content.constructor){case vf:case rf:this.adds(i)?this.deletes(i)||(u(),o="insert",a=i.content.getContent()[0],u()):this.deletes(i)?("delete"!==o&&(u(),o="delete"),c+=1):i.deleted||("retain"!==o&&(u(),o="retain"),l+=1);break;case cf:this.adds(i)?this.deletes(i)||("insert"!==o&&(u(),o="insert"),a+=i.content.str):this.deletes(i)?("delete"!==o&&(u(),o="delete"),c+=i.length):i.deleted||("retain"!==o&&(u(),o="retain"),l+=i.length);break;case of:{const{key:t,value:a}=i.content;if(this.adds(i)){if(!this.deletes(i)){var h;const l=null!==(h=n.get(t))&&void 0!==h?h:null;var d;if(Id(l,a))null!==a&&i.delete(e);else"retain"===o&&u(),Id(a,null!==(d=r.get(t))&&void 0!==d?d:null)?delete s[t]:s[t]=a}}else if(this.deletes(i)){var f;r.set(t,a);const e=null!==(f=n.get(t))&&void 0!==f?f:null;Id(e,a)||("retain"===o&&u(),s[t]=e)}else if(!i.deleted){r.set(t,a);const n=s[t];void 0!==n&&(Id(n,a)?null!==n&&i.delete(e):("retain"===o&&u(),null===a?delete s[t]:s[t]=a))}i.deleted||("insert"===o&&u(),Rd(n,i.content));break}}i=i.right}for(u();t.length>0;){const e=t[t.length-1];if(void 0===e.retain||void 0!==e.attributes)break;t.pop()}})),this._delta=t}return this._delta}}class Hd extends ld{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){var e;return null!==(e=this.doc)&&void 0!==e||td(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach((e=>e()))}catch(dM){console.error(dM)}this._pending=null}_copy(){return new Hd}clone(){const e=new Hd;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const n=new qd(this,e,t);ad(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){var e;null!==(e=this.doc)&&void 0!==e||td();let t="",n=this._start;for(;null!==n;)!n.deleted&&n.countable&&n.content.constructor===cf&&(t+=n.content.str),n=n.right;return t}toJSON(){return this.toString()}applyDelta(e){let{sanitize:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!==this.doc?jh(this.doc,(n=>{const r=new Dd(null,this._start,0,new Map);for(let i=0;i<e.length;i++){const o=e[i];if(void 0!==o.insert){const s=t||"string"!==typeof o.insert||i!==e.length-1||null!==r.right||"\n"!==o.insert.slice(-1)?o.insert:o.insert.slice(0,-1);("string"!==typeof s||s.length>0)&&Fd(n,this,r,s,o.attributes||{})}else void 0!==o.retain?zd(n,this,r,o.retain,o.attributes||{}):void 0!==o.delete&&Bd(n,r,o.delete)}})):this._pending.push((()=>this.applyDelta(e)))}toDelta(e,t,n){var r;null!==(r=this.doc)&&void 0!==r||td();const i=[],o=new Map,s=this.doc;let a="",l=this._start;function c(){if(a.length>0){const e={};let t=!1;o.forEach(((n,r)=>{t=!0,e[r]=n}));const n={insert:a};t&&(n.attributes=e),i.push(n),a=""}}const u=()=>{for(;null!==l;){if(_h(l,e)||void 0!==t&&_h(l,t))switch(l.content.constructor){case cf:{const r=o.get("ychange");void 0===e||_h(l,e)?void 0===t||_h(l,t)?void 0!==r&&(c(),o.delete("ychange")):void 0!==r&&r.user===l.id.client&&"added"===r.type||(c(),o.set("ychange",n?n("added",l.id):{type:"added"})):void 0!==r&&r.user===l.id.client&&"removed"===r.type||(c(),o.set("ychange",n?n("removed",l.id):{type:"removed"})),a+=l.content.str;break}case vf:case rf:{c();const e={insert:l.content.getContent()[0]};if(o.size>0){const t={};e.attributes=t,o.forEach(((e,n)=>{t[n]=e}))}i.push(e);break}case of:_h(l,e)&&(c(),Rd(o,l.content))}l=l.right}c()};return e||t?jh(s,(n=>{e&&Sh(n,e),t&&Sh(n,t),u()}),"cleanup"):u(),i}insert(e,t,n){if(t.length<=0)return;const r=this.doc;null!==r?jh(r,(r=>{const i=Pd(r,this,e,!n);n||(n={},i.currentAttributes.forEach(((e,t)=>{n[t]=e}))),Fd(r,this,i,t,n)})):this._pending.push((()=>this.insert(e,t,n)))}insertEmbed(e,t,n){const r=this.doc;null!==r?jh(r,(r=>{const i=Pd(r,this,e,!n);Fd(r,this,i,t,n||{})})):this._pending.push((()=>this.insertEmbed(e,t,n||{})))}delete(e,t){if(0===t)return;const n=this.doc;null!==n?jh(n,(n=>{Bd(n,Pd(n,this,e,!0),t)})):this._pending.push((()=>this.delete(e,t)))}format(e,t,n){if(0===t)return;const r=this.doc;null!==r?jh(r,(r=>{const i=Pd(r,this,e,!1);null!==i.right&&zd(r,this,i,t,n)})):this._pending.push((()=>this.format(e,t,n)))}removeAttribute(e){null!==this.doc?jh(this.doc,(t=>{wd(t,this,e)})):this._pending.push((()=>this.removeAttribute(e)))}setAttribute(e,t){null!==this.doc?jh(this.doc,(n=>{bd(n,this,e,t)})):this._pending.push((()=>this.setAttribute(e,t)))}getAttribute(e){return _d(this,e)}getAttributes(){return Sd(this)}_write(e){e.writeTypeRef(ff)}}class Wd{constructor(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,null!==(t=e.doc)&&void 0!==t||td()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==Yd&&t.constructor!==Kd||null===t._start)for(;null!==e;){if(null!==e.right){e=e.right;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Kd extends ld{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Kd}clone(){const e=new Kd;return e.insert(0,this.toArray().map((e=>e instanceof ld?e.clone():e))),e}get length(){var e;return null!==(e=this.doc)&&void 0!==e||td(),null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new Wd(this,e)}querySelector(e){e=e.toUpperCase();const t=new Wd(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),Pl(new Wd(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)))}_callObserver(e,t){ad(this,e,new Gd(this,t,e))}toString(){return dd(this,(e=>e.toString())).join("")}toJSON(){return this.toString()}toDOM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=e.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),hd(this,(i=>{r.insertBefore(i.toDOM(e,t,n),null)})),r}insert(e,t){null!==this.doc?jh(this.doc,(n=>{yd(n,this,e,t)})):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)jh(this.doc,(n=>{const r=e&&e instanceof ld?e._item:e;gd(n,this,r,t)}));else{const n=this._prelimContent,r=null===e?0:n.findIndex((t=>t===e))+1;if(0===r&&null!==e)throw bc("Reference item not found");n.splice(r,0,...t)}}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;null!==this.doc?jh(this.doc,(n=>{vd(n,this,e,t)})):this._prelimContent.splice(e,t)}toArray(){return ud(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return pd(this,e)}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return cd(this,e,t)}forEach(e){hd(this,e)}_write(e){e.writeTypeRef(gf)}}class Yd extends Kd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"UNDEFINED";super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach(((e,t)=>{this.setAttribute(t,e)})),this._prelimAttrs=null}_copy(){return new Yd(this.nodeName)}clone(){const e=new Yd(this.nodeName);return((e,t)=>{for(const n in e)t(e[n],n)})(this.getAttributes(),((t,n)=>{"string"===typeof t&&e.setAttribute(n,t)})),e.insert(0,this.toArray().map((e=>e instanceof ld?e.clone():e))),e}toString(){const e=this.getAttributes(),t=[],n=[];for(const s in e)n.push(s);n.sort();const r=n.length;for(let s=0;s<r;s++){const r=n[s];t.push(r+'="'+e[r]+'"')}const i=this.nodeName.toLocaleLowerCase(),o=t.length>0?" "+t.join(" "):"";return"<".concat(i).concat(o,">").concat(super.toString(),"</").concat(i,">")}removeAttribute(e){null!==this.doc?jh(this.doc,(t=>{wd(t,this,e)})):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?jh(this.doc,(n=>{bd(n,this,e,t)})):this._prelimAttrs.set(e,t)}getAttribute(e){return _d(this,e)}hasAttribute(e){return Cd(this,e)}getAttributes(e){return e?((e,t)=>{const n={};return e._map.forEach(((e,r)=>{let i=e;for(;null!==i&&(!t.sv.has(i.id.client)||i.id.clock>=(t.sv.get(i.id.client)||0));)i=i.left;null!==i&&_h(i,t)&&(n[r]=i.content.getContent()[i.length-1])})),n})(this,e):Sd(this)}toDOM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=e.createElement(this.nodeName),i=this.getAttributes();for(const o in i){const e=i[o];"string"===typeof e&&r.setAttribute(o,e)}return hd(this,(i=>{r.appendChild(i.toDOM(e,t,n))})),void 0!==n&&n._createAssociation(r,this),r}_write(e){e.writeTypeRef(pf),e.writeKey(this.nodeName)}}class Gd extends Jh{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach((e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)}))}}class Qd extends Nd{constructor(e){super(),this.hookName=e}_copy(){return new Qd(this.hookName)}clone(){const e=new Qd(this.hookName);return this.forEach(((t,n)=>{e.set(n,t)})),e}toDOM(){arguments.length>0&&void 0!==arguments[0]||document;let e=arguments.length>2?arguments[2]:void 0;const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})[this.hookName];let n;return n=void 0!==t?t.createDom(this):document.createElement(this.hookName),n.setAttribute("data-yjs-hook",this.hookName),void 0!==e&&e._createAssociation(n,this),n}_write(e){e.writeTypeRef(mf),e.writeKey(this.hookName)}}class Xd extends Hd{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new Xd}clone(){const e=new Xd;return e.applyDelta(this.toDelta()),e}toDOM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>2?arguments[2]:void 0;const n=e.createTextNode(this.toString());return void 0!==t&&t._createAssociation(n,this),n}toString(){return this.toDelta().map((e=>{const t=[];for(const r in e.attributes){const n=[];for(const t in e.attributes[r])n.push({key:t,value:e.attributes[r][t]});n.sort(((e,t)=>e.key<t.key?-1:1)),t.push({nodeName:r,attrs:n})}t.sort(((e,t)=>e.nodeName<t.nodeName?-1:1));let n="";for(let r=0;r<t.length;r++){const e=t[r];n+="<".concat(e.nodeName);for(let t=0;t<e.attrs.length;t++){const r=e.attrs[t];n+=" ".concat(r.key,'="').concat(r.value,'"')}n+=">"}n+=e.insert;for(let r=t.length-1;r>=0;r--)n+="</".concat(t[r].nodeName,">");return n})).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(yf)}}class Zd{constructor(e,t){this.id=e,this.length=t}get deleted(){throw _c()}mergeWith(e){return!1}write(e,t,n){throw _c()}integrate(e,t){throw _c()}}class $d extends Zd{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),xh(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class Jd{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Jd(this.content)}splice(e){throw _c()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class ef{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new ef(this.len)}splice(e){const t=new ef(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){ju(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const tf=(e,t)=>new Yu(c(c({guid:e},t),{},{shouldLoad:t.shouldLoad||t.autoLoad||!1}));class nf{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new nf(tf(this.doc.guid,this.opts))}splice(e){throw _c()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class rf{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new rf(this.embed)}splice(e){throw _c()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class of{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new of(this.key,this.value)}splice(e){throw _c()}mergeWith(e){return!1}integrate(e,t){const n=t.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}class sf{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new sf(this.arr)}splice(e){const t=new sf(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeString(void 0===t?"undefined":JSON.stringify(t))}}getRef(){return 2}}const af="development"===ru("node_env");class lf{constructor(e){this.arr=e,af&&Mu(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new lf(this.arr)}splice(e){const t=new lf(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeAny(t)}}getRef(){return 8}}class cf{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new cf(this.str)}splice(e){const t=new cf(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"\ufffd",t.str="\ufffd"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}const uf=[e=>new xd,e=>new Nd,e=>new Hd,e=>new Yd(e.readKey()),e=>new Kd,e=>new Qd(e.readKey()),e=>new Xd],hf=0,df=1,ff=2,pf=3,gf=4,mf=5,yf=6;class vf{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new vf(this.type._copy())}splice(e){throw _c()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach((t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)})),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach((t=>{for(;null!==t;)t.gc(e,!0),t=t.left})),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const wf=(e,t,n)=>{const{client:r,clock:i}=t.id,o=new bf(yh(r,i+n),t,yh(r,i+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&o.markDeleted(),t.keep&&(o.keep=!0),null!==t.redone&&(o.redone=yh(t.redone.client,t.redone.clock+n)),t.right=o,null!==o.right&&(o.right.left=o),e._mergeStructs.push(o),null!==o.parentSub&&null===o.right&&o.parent._map.set(o.parentSub,o),t.length=n,o};class bf extends Zd{constructor(e,t,n,r,i,o,s,a){super(e,a.getLength()),this.origin=n,this.left=t,this.right=r,this.rightOrigin=i,this.parent=o,this.parentSub=s,this.redone=null,this.content=a,this.info=this.content.isCountable()?2:0}set marker(e){(8&this.info)>0!==e&&(this.info^=8)}get marker(){return(8&this.info)>0}get keep(){return(1&this.info)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(2&this.info)>0}get deleted(){return(4&this.info)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=kh(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=kh(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===gh&&this.id.client!==this.parent.client&&this.parent.clock>=kh(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Ah(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Dh(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===$d||this.right&&this.right.constructor===$d)this.parent=null;else if(this.parent){if(this.parent.constructor===gh){const e=Nh(t,this.parent);e.constructor===$d?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===bf&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===bf&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=Ah(e,e.doc.store,yh(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,n=this.left;if(null!==n)t=n.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;const r=new Set,i=new Set;for(;null!==t&&t!==this.right;){if(i.add(t),r.add(t),mh(this.origin,t.origin)){if(t.id.client<this.id.client)n=t,r.clear();else if(mh(this.rightOrigin,t.rightOrigin))break}else{if(null===t.origin||!i.has(Nh(e.doc.store,t.origin)))break;r.has(Nh(e.doc.store,t.origin))||(n=t,r.clear())}t=t.right}this.left=n}if(null!==this.left){const e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),xh(e.doc.store,this),this.content.integrate(e,this),Oh(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new $d(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:yh(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&mh(e.origin,this.lastId)&&this.right===e&&mh(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach((t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))})),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),ju(e.deleteSet,this.id.client,this.id.clock,this.length),Oh(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw Sc();this.content.gc(e),t?((e,t,n)=>{const r=e.clients.get(t.id.client);r[Th(r,t.id.clock)]=n})(e,this,new $d(this.id,this.length)):this.content=new ef(this.length)}write(e,t){const n=t>0?yh(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,i=this.parentSub,o=31&this.content.getRef()|(null===n?0:Ul)|(null===r?0:jl)|(null===i?0:32);if(e.writeInfo(o),null!==n&&e.writeLeftID(n),null!==r&&e.writeRightID(r),null===n&&null===r){const t=this.parent;if(void 0!==t._item){const n=t._item;if(null===n){const n=vh(t);e.writeParentInfo(!0),e.writeString(n)}else e.writeParentInfo(!1),e.writeLeftID(n.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===gh?(e.writeParentInfo(!1),e.writeLeftID(t)):Sc();null!==i&&e.writeString(i)}this.content.write(e,t)}}const _f=(e,t)=>Sf[31&t](e),Sf=[()=>{Sc()},e=>new ef(e.readLen()),e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const t=e.readString();"undefined"===t?n.push(void 0):n.push(JSON.parse(t))}return new sf(n)},e=>new Jd(e.readBuf()),e=>new cf(e.readString()),e=>new rf(e.readJSON()),e=>new of(e.readKey(),e.readJSON()),e=>new vf(uf[e.readTypeRef()](e)),e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new lf(n)},e=>new nf(tf(e.readString(),e.readAny())),()=>{Sc()}];class Cf extends Zd{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){Sc()}write(e,t){e.writeInfo(10),ic(e.restEncoder,this.length-t)}getMissing(e,t){return null}}const Ef="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},kf="__ $YJS$ __";!0===Ef[kf]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),Ef[kf]=!0;const xf=!0,Tf="${JSCORE_VERSION}",Nf=function(e,t){if(!e)throw If(t)},If=function(e){return new Error("Firebase Database ("+Tf+") INTERNAL ASSERT FAILED: "+e)},Df=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Af={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let h=(15&s)<<2|l>>6,d=63&l;a||(d=64,o||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Df(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new Pf;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Pf extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Mf=function(e){const t=Df(e);return Af.encodeByteArray(t,!0)},Rf=function(e){return Mf(e).replace(/\./g,"")},Of=function(e){try{return Af.decodeString(e,!0)}catch(dM){console.error("base64Decode failed: ",dM)}return null};function Lf(e){return Ff(void 0,e)}function Ff(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ff(e[n],t[n]));return e}const zf=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Vf=()=>{try{return zf()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(dM){return}const t=e&&Of(e[1]);return t&&JSON.parse(t)})()}catch(dM){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(dM))}},jf=e=>{const t=(e=>{var t,n;return null===(n=null===(t=Vf())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Uf=()=>{var e;return null===(e=Vf())||void 0===e?void 0:e.config};class Bf{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function qf(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Rf(JSON.stringify({alg:"none",type:"JWT"})),Rf(JSON.stringify(o)),""].join(".")}function Hf(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:"")}class Wf extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Wf.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kf.prototype.create)}}class Kf{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Yf,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Wf(n,o,t)}}const Yf=/\{\$([^}]+)}/g;function Gf(e){return JSON.parse(e)}function Qf(e){return JSON.stringify(e)}const Xf=function(e){let t={},n={},r={},i="";try{const o=e.split(".");t=Gf(Of(o[0])||""),n=Gf(Of(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(dM){}return{header:t,claims:n,data:r,signature:i}};function Zf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function $f(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Jf(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ep(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function tp(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(np(n)&&np(o)){if(!tp(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function np(e){return null!==e&&"object"===typeof e}class rp{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,o=this.chain_[0],s=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^s&(a^l),i=1518500249):(r=s^a^l,i=1859775393):u<60?(r=s&a|l&(s|a),i=2400959708):(r=s^a^l,i=3395469782);const e=(o<<5|o>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(s<<30|s>>>2),s=o,o=e}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function ip(e,t){return"".concat(e," failed: ").concat(t," argument ")}const op=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function sp(e){return e&&e._delegate?e._delegate:e}class ap{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const lp="[DEFAULT]";class cp{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Bf;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(dM){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(dM){if(r)return null;throw dM}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:lp})}catch(dM){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(dM){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lp;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lp;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lp;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===lp?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lp;return this.component?this.component.multipleInstances?e:lp:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class up{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new cp(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var hp;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(hp||(hp={}));const dp={debug:hp.DEBUG,verbose:hp.VERBOSE,info:hp.INFO,warn:hp.WARN,error:hp.ERROR,silent:hp.SILENT},fp=hp.INFO,pp={[hp.DEBUG]:"log",[hp.VERBOSE]:"log",[hp.INFO]:"info",[hp.WARN]:"warn",[hp.ERROR]:"error"},gp=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=pp[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class mp{constructor(e){this.name=e,this._logLevel=fp,this._logHandler=gp,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in hp))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?dp[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,hp.DEBUG,...t),this._logHandler(this,hp.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,hp.VERBOSE,...t),this._logHandler(this,hp.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,hp.INFO,...t),this._logHandler(this,hp.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,hp.WARN,...t),this._logHandler(this,hp.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,hp.ERROR,...t),this._logHandler(this,hp.ERROR,...t)}}let yp,vp;const wp=new WeakMap,bp=new WeakMap,_p=new WeakMap,Sp=new WeakMap,Cp=new WeakMap;let Ep={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return bp.get(e);if("objectStoreNames"===t)return e.objectStoreNames||_p.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tp(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function kp(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(vp||(vp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Np(this),n),Tp(wp.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Tp(e.apply(Np(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(Np(this),t,...r);return _p.set(o,t.sort?t.sort():[t]),Tp(o)}}function xp(e){return"function"===typeof e?kp(e):(e instanceof IDBTransaction&&function(e){if(bp.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));bp.set(e,t)}(e),((e,t)=>t.some((t=>e instanceof t)))(e,yp||(yp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ep):e)}function Tp(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Tp(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&wp.set(t,e)})).catch((()=>{})),Cp.set(t,e),t}(e);if(Sp.has(e))return Sp.get(e);const t=xp(e);return t!==e&&(Sp.set(e,t),Cp.set(t,e)),t}const Np=e=>Cp.get(e);const Ip=["get","getKey","getAll","getAllKeys","count"],Dp=["put","add","delete","clear"],Ap=new Map;function Pp(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Ap.get(t))return Ap.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Dp.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ip.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return Ap.set(t,o),o}Ep=(e=>c(c({},e),{},{get:(t,n,r)=>Pp(t,n)||e.get(t,n,r),has:(t,n)=>!!Pp(t,n)||e.has(t,n)}))(Ep);class Mp{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Rp="@firebase/app",Op="0.9.13",Lp=new mp("@firebase/app"),Fp="@firebase/app-compat",zp="@firebase/analytics-compat",Vp="@firebase/analytics",jp="@firebase/app-check-compat",Up="@firebase/app-check",Bp="@firebase/auth",qp="@firebase/auth-compat",Hp="@firebase/database",Wp="@firebase/database-compat",Kp="@firebase/functions",Yp="@firebase/functions-compat",Gp="@firebase/installations",Qp="@firebase/installations-compat",Xp="@firebase/messaging",Zp="@firebase/messaging-compat",$p="@firebase/performance",Jp="@firebase/performance-compat",eg="@firebase/remote-config",tg="@firebase/remote-config-compat",ng="@firebase/storage",rg="@firebase/storage-compat",ig="@firebase/firestore",og="@firebase/firestore-compat",sg="firebase",ag="[DEFAULT]",lg={[Rp]:"fire-core",[Fp]:"fire-core-compat",[Vp]:"fire-analytics",[zp]:"fire-analytics-compat",[Up]:"fire-app-check",[jp]:"fire-app-check-compat",[Bp]:"fire-auth",[qp]:"fire-auth-compat",[Hp]:"fire-rtdb",[Wp]:"fire-rtdb-compat",[Kp]:"fire-fn",[Yp]:"fire-fn-compat",[Gp]:"fire-iid",[Qp]:"fire-iid-compat",[Xp]:"fire-fcm",[Zp]:"fire-fcm-compat",[$p]:"fire-perf",[Jp]:"fire-perf-compat",[eg]:"fire-rc",[tg]:"fire-rc-compat",[ng]:"fire-gcs",[rg]:"fire-gcs-compat",[ig]:"fire-fst",[og]:"fire-fst-compat","fire-js":"fire-js",[sg]:"fire-js-all"},cg=new Map,ug=new Map;function hg(e,t){try{e.container.addComponent(t)}catch(dM){Lp.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),dM)}}function dg(e){const t=e.name;if(ug.has(t))return Lp.debug("There were multiple attempts to register component ".concat(t,".")),!1;ug.set(t,e);for(const n of cg.values())hg(n,e);return!0}function fg(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const pg=new Kf("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class gg{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ap("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pg.create("app-deleted",{appName:this._name})}}const mg="9.23.0";function yg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:ag,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw pg.create("bad-app-name",{appName:String(i)});if(n||(n=Uf()),!n)throw pg.create("no-options");const o=cg.get(i);if(o){if(tp(n,o.options)&&tp(r,o.config))return o;throw pg.create("duplicate-app",{appName:i})}const s=new up(i);for(const l of ug.values())s.addComponent(l);const a=new gg(n,r,s);return cg.set(i,a),a}function vg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ag;const t=cg.get(e);if(!t&&e===ag&&Uf())return yg();if(!t)throw pg.create("no-app",{appName:e});return t}function wg(e,t,n){var r;let i=null!==(r=lg[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Lp.warn(e.join(" "))}dg(new ap("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const bg="firebase-heartbeat-store";let _g=null;function Sg(){return _g||(_g=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=Tp(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(Tp(s.result),e.oldVersion,e.newVersion,Tp(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(bg)}}).catch((e=>{throw pg.create("idb-open",{originalErrorMessage:e.message})}))),_g}async function Cg(e,t){try{const n=(await Sg()).transaction(bg,"readwrite"),r=n.objectStore(bg);await r.put(t,Eg(e)),await n.done}catch(dM){if(dM instanceof Wf)Lp.warn(dM.message);else{const t=pg.create("idb-set",{originalErrorMessage:null===dM||void 0===dM?void 0:dM.message});Lp.warn(t.message)}}}function Eg(e){return"".concat(e.name,"!").concat(e.options.appId)}class kg{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Tg(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=xg();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=xg(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Ng(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ng(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=Rf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function xg(){return(new Date).toISOString().substring(0,10)}class Tg{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(dM){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Sg();return await t.transaction(bg).objectStore(bg).get(Eg(e))}catch(dM){if(dM instanceof Wf)Lp.warn(dM.message);else{const t=pg.create("idb-get",{originalErrorMessage:null===dM||void 0===dM?void 0:dM.message});Lp.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Cg(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Cg(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ng(e){return Rf(JSON.stringify({version:2,heartbeats:e})).length}var Ig;Ig="",dg(new ap("platform-logger",(e=>new Mp(e)),"PRIVATE")),dg(new ap("heartbeat",(e=>new kg(e)),"PRIVATE")),wg(Rp,Op,Ig),wg(Rp,Op,"esm2017"),wg("fire-js","");wg("firebase","9.23.0","app");var Dg,Ag="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Pg=Pg||{},Mg=Ag||self;function Rg(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Og(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function Lg(e,t,n){return e.call.apply(e.bind,arguments)}function Fg(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function zg(e,t,n){return(zg=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Lg:Fg).apply(null,arguments)}function Vg(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function jg(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function Ug(){this.s=this.s,this.o=this.o}Ug.prototype.s=!1,Ug.prototype.sa=function(){!this.s&&(this.s=!0,this.N())},Ug.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Bg=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function qg(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Hg(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Rg(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Wg(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Wg.prototype.h=function(){this.defaultPrevented=!0};var Kg=function(){if(!Mg.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Mg.addEventListener("test",(()=>{}),t),Mg.removeEventListener("test",(()=>{}),t)}catch(n){}return e}();function Yg(e){return/^[\s\xa0]*$/.test(e)}function Gg(){var e=Mg.navigator;return e&&(e=e.userAgent)?e:""}function Qg(e){return-1!=Gg().indexOf(e)}function Xg(e){return Xg[" "](e),e}Xg[" "]=function(){};var Zg,$g,Jg=Qg("Opera"),em=Qg("Trident")||Qg("MSIE"),tm=Qg("Edge"),nm=tm||em,rm=Qg("Gecko")&&!(-1!=Gg().toLowerCase().indexOf("webkit")&&!Qg("Edge"))&&!(Qg("Trident")||Qg("MSIE"))&&!Qg("Edge"),im=-1!=Gg().toLowerCase().indexOf("webkit")&&!Qg("Edge");function om(){var e=Mg.document;return e?e.documentMode:void 0}e:{var sm="",am=function(){var e=Gg();return rm?/rv:([^\);]+)(\)|;)/.exec(e):tm?/Edge\/([\d\.]+)/.exec(e):em?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):im?/WebKit\/(\S+)/.exec(e):Jg?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(am&&(sm=am?am[1]:""),em){var lm=om();if(null!=lm&&lm>parseFloat(sm)){Zg=String(lm);break e}}Zg=sm}if(Mg.document&&em){var cm=om();$g=cm||(parseInt(Zg,10)||void 0)}else $g=void 0;var um=$g;function hm(e,t){if(Wg.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(rm){e:{try{Xg(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:dm[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&hm.$.h.call(this)}}jg(hm,Wg);var dm={2:"touch",3:"pen",4:"mouse"};hm.prototype.h=function(){hm.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var fm="closure_listenable_"+(1e6*Math.random()|0),pm=0;function gm(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++pm,this.fa=this.ia=!1}function mm(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function ym(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function vm(e){const t={};for(const n in e)t[n]=e[n];return t}const wm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bm(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<wm.length;t++)n=wm[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _m(e){this.src=e,this.g={},this.h=0}function Sm(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Bg(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(mm(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Cm(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}_m.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=Cm(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new gm(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var Em="closure_lm_"+(1e6*Math.random()|0),km={};function xm(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)xm(e,t[o],n,r,i);return null}return n=Mm(n),e&&e[fm]?e.O(t,n,!!Og(r)&&!!r.capture,i):function(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=Og(i)?!!i.capture:!!i,a=Am(e);if(a||(e[Em]=a=new _m(e)),n=a.add(t,n,r,s,o),n.proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Dm;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Kg||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Im(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,i)}function Tm(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Tm(e,t[o],n,r,i);else r=Og(r)?!!r.capture:!!r,n=Mm(n),e&&e[fm]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Cm(o=e.g[t],n,r,i))&&(mm(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Am(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Cm(t,n,r,i)),(n=-1<e?t[e]:null)&&Nm(n))}function Nm(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[fm])Sm(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Im(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Am(t))?(Sm(n,e),0==n.h&&(n.src=null,t[Em]=null)):mm(e)}}}function Im(e){return e in km?km[e]:km[e]="on"+e}function Dm(e,t){if(e.fa)e=!0;else{t=new hm(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Nm(e),e=n.call(r,t)}return e}function Am(e){return(e=e[Em])instanceof _m?e:null}var Pm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mm(e){return"function"===typeof e?e:(e[Pm]||(e[Pm]=function(t){return e.handleEvent(t)}),e[Pm])}function Rm(){Ug.call(this),this.i=new _m(this),this.S=this,this.J=null}function Om(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Wg(t,e);else if(t instanceof Wg)t.target=t.target||e;else{var i=t;bm(t=new Wg(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=Lm(s,r,!0,t)&&i}if(i=Lm(s=t.g=e,r,!0,t)&&i,i=Lm(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=Lm(s=t.g=n[o],r,!1,t)&&i}function Lm(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,l=s.la||s.src;s.ia&&Sm(e.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}jg(Rm,Ug),Rm.prototype[fm]=!0,Rm.prototype.removeEventListener=function(e,t,n,r){Tm(this,e,t,n,r)},Rm.prototype.N=function(){if(Rm.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)mm(n[r]);delete t.g[e],t.h--}}this.J=null},Rm.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Rm.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Fm=Mg.JSON.stringify;function zm(){var e=Wm;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Vm=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new jm),(e=>e.reset()));class jm{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Um(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Bm(e){Mg.setTimeout((()=>{throw e}),0)}let qm,Hm=!1,Wm=new class{constructor(){this.h=this.g=null}add(e,t){const n=Vm.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Km=()=>{const e=Mg.Promise.resolve(void 0);qm=()=>{e.then(Ym)}};var Ym=()=>{for(var e;e=zm();){try{e.h.call(e.g)}catch(n){Bm(n)}var t=Vm;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Hm=!1};function Gm(e,t){Rm.call(this),this.h=e||1,this.g=t||Mg,this.j=zg(this.qb,this),this.l=Date.now()}function Qm(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Xm(e,t,n){if("function"===typeof e)n&&(e=zg(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=zg(e.handleEvent,e)}return 2147483647<Number(t)?-1:Mg.setTimeout(e,t||0)}function Zm(e){e.g=Xm((()=>{e.g=null,e.i&&(e.i=!1,Zm(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}jg(Gm,Rm),(Dg=Gm.prototype).ga=!1,Dg.T=null,Dg.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Om(this,"tick"),this.ga&&(Qm(this),this.start()))}},Dg.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Dg.N=function(){Gm.$.N.call(this),Qm(this),delete this.g};class $m extends Ug{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Zm(this)}N(){super.N(),this.g&&(Mg.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jm(e){Ug.call(this),this.h=e,this.g={}}jg(Jm,Ug);var ey=[];function ty(e,t,n,r){Array.isArray(n)||(n&&(ey[0]=n.toString()),n=ey);for(var i=0;i<n.length;i++){var o=xm(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function ny(e){ym(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Nm(e)}),e),e.g={}}function ry(){this.g=!0}function iy(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Fm(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Jm.prototype.N=function(){Jm.$.N.call(this),ny(this)},Jm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ry.prototype.Ea=function(){this.g=!1},ry.prototype.info=function(){};var oy={},sy=null;function ay(){return sy=sy||new Rm}function ly(e){Wg.call(this,oy.Ta,e)}function cy(e){const t=ay();Om(t,new ly(t))}function uy(e,t){Wg.call(this,oy.STAT_EVENT,e),this.stat=t}function hy(e){const t=ay();Om(t,new uy(t,e))}function dy(e,t){Wg.call(this,oy.Ua,e),this.size=t}function fy(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Mg.setTimeout((function(){e()}),t)}oy.Ta="serverreachability",jg(ly,Wg),oy.STAT_EVENT="statevent",jg(uy,Wg),oy.Ua="timingevent",jg(dy,Wg);var py={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},gy={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function my(){}function yy(e){return e.h||(e.h=e.i())}function vy(){}my.prototype.h=null;var wy,by={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function _y(){Wg.call(this,"d")}function Sy(){Wg.call(this,"c")}function Cy(){}function Ey(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Jm(this),this.P=xy,e=nm?125:void 0,this.V=new Gm(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ky}function ky(){this.i=null,this.g="",this.h=!1}jg(_y,Wg),jg(Sy,Wg),jg(Cy,my),Cy.prototype.g=function(){return new XMLHttpRequest},Cy.prototype.i=function(){return{}},wy=new Cy;var xy=45e3,Ty={},Ny={};function Iy(e,t,n){e.L=1,e.v=Gy(qy(t)),e.s=n,e.S=!0,Dy(e,null)}function Dy(e,t){e.G=Date.now(),Ry(e),e.A=qy(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),av(n.i,"t",r),e.C=0,n=e.l.J,e.h=new ky,e.g=lw(e.l,n?t:null,!e.s),0<e.O&&(e.M=new $m(zg(e.Pa,e,e.g),e.O)),ty(e.U,e.g,"readystatechange",e.nb),t=e.I?vm(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),cy(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");s=2<=h.length&&"type"==h[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Ay(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Py(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=My(e,n),r==Ny){4==t&&(e.o=4,hy(14),i=!1),iy(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ty){e.o=4,hy(15),iy(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}iy(e.j,e.m,r,null),Vy(e,r)}Ay(e)&&r!=Ny&&r!=Ty&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,hy(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ew(t),t.M=!0,hy(11))):(iy(e.j,e.m,n,"[Invalid Chunked Response]"),zy(e),Fy(e))}function My(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ny:(n=Number(t.substring(n,r)),isNaN(n)?Ty:(r+=1)+n>t.length?Ny:(t=t.slice(r,r+n),e.C=r+n,t))}function Ry(e){e.Y=Date.now()+e.P,Oy(e,e.P)}function Oy(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=fy(zg(e.lb,e),t)}function Ly(e){e.B&&(Mg.clearTimeout(e.B),e.B=null)}function Fy(e){0==e.l.H||e.J||rw(e.l,e)}function zy(e){Ly(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Qm(e.V),ny(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Vy(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||pv(n.i,e)))if(!e.K&&pv(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;nw(n),Kv(n)}Jv(n),hy(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=fy(zg(n.ib,n),6e3));if(1>=fv(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else ow(n,11)}else if((e.K||n.g==e)&&nw(n),!Yg(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(gv(o,o.h),o.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Yy(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=aw(r,r.J?r.pa:null,r.Y),s.K){mv(r.i,s);var a=s,l=r.L;l&&a.setTimeout(l),a.B&&(Ly(a),Ry(a)),r.g=s}else $v(r);0<n.j.length&&Gv(n)}else"stop"!=c[0]&&"close"!=c[0]||ow(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?ow(n,7):Wv(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}cy()}catch(c){}}function jy(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Rg(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Rg(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Rg(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(Dg=Ey.prototype).setTimeout=function(e){this.P=e},Dg.nb=function(e){e=e.target;const t=this.M;t&&3==Vv(e)?t.l():this.Pa(e)},Dg.Pa=function(e){try{if(e==this.g)e:{const u=Vv(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||nm||this.g&&(this.h.h||this.g.ja()||jv(this.g)))){this.J||4!=u||7==t||cy(),Ly(this);var n=this.g.da();this.ca=n;t:if(Ay(this)){var r=jv(this.g);e="";var i=r.length,o=4==Vv(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){zy(this),Fy(this);var s="";break t}this.h.i=new Mg.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yg(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,hy(12),zy(this),Fy(this);break e}iy(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vy(this,n)}this.S?(Py(this,u,s),nm&&this.i&&3==u&&(ty(this.U,this.V,"tick",this.mb),this.V.start())):(iy(this.j,this.m,s,null),Vy(this,s)),4==u&&zy(this),this.i&&!this.J&&(4==u?rw(this.l,this):(this.i=!1,Ry(this)))}else(function(e){const t={};e=(e.g&&2<=Vv(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Yg(e[r]))continue;var n=Um(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.o=3,hy(12)):(this.o=0,hy(13)),zy(this),Fy(this)}}}catch(u){}},Dg.mb=function(){if(this.g){var e=Vv(this.g),t=this.g.ja();this.C<t.length&&(Ly(this),Py(this,e,t),this.i&&4!=e&&Ry(this))}},Dg.cancel=function(){this.J=!0,zy(this)},Dg.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(cy(),hy(17)),zy(this),this.o=2,Fy(this)):Oy(this,this.Y-e)};var Uy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function By(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof By){this.h=e.h,Hy(this,e.j),this.s=e.s,this.g=e.g,Wy(this,e.m),this.l=e.l;var t=e.i,n=new rv;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ky(this,n),this.o=e.o}else e&&(t=String(e).match(Uy))?(this.h=!1,Hy(this,t[1]||"",!0),this.s=Qy(t[2]||""),this.g=Qy(t[3]||"",!0),Wy(this,t[4]),this.l=Qy(t[5]||"",!0),Ky(this,t[6]||"",!0),this.o=Qy(t[7]||"")):(this.h=!1,this.i=new rv(null,this.h))}function qy(e){return new By(e)}function Hy(e,t,n){e.j=n?Qy(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Wy(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ky(e,t,n){t instanceof rv?(e.i=t,function(e,t){t&&!e.j&&(iv(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ov(this,t),av(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Xy(t,tv)),e.i=new rv(t,e.h))}function Yy(e,t,n){e.i.set(t,n)}function Gy(e){return Yy(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Qy(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Xy(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Zy),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Zy(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}By.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Xy(t,$y,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Xy(t,$y,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Xy(n,"/"==n.charAt(0)?ev:Jy,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Xy(n,nv)),e.join("")};var $y=/[#\/\?@]/g,Jy=/[#\?:]/g,ev=/[#\?]/g,tv=/[#\?@]/g,nv=/#/g;function rv(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function iv(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ov(e,t){iv(e),t=lv(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function sv(e,t){return iv(e),t=lv(e,t),e.g.has(t)}function av(e,t,n){ov(e,t),0<n.length&&(e.i=null,e.g.set(lv(e,t),qg(n)),e.h+=n.length)}function lv(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Dg=rv.prototype).add=function(e,t){iv(this),this.i=null,e=lv(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Dg.forEach=function(e,t){iv(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Dg.ta=function(){iv(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Dg.Z=function(e){iv(this);let t=[];if("string"===typeof e)sv(this,e)&&(t=t.concat(this.g.get(lv(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Dg.set=function(e,t){return iv(this),this.i=null,sv(this,e=lv(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Dg.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Dg.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};var cv=class{constructor(e,t){this.g=e,this.map=t}};function uv(e){this.l=e||hv,Mg.PerformanceNavigationTiming?e=0<(e=Mg.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Mg.g&&Mg.g.Ka&&Mg.g.Ka()&&Mg.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var hv=10;function dv(e){return!!e.h||!!e.g&&e.g.size>=e.j}function fv(e){return e.h?1:e.g?e.g.size:0}function pv(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function gv(e,t){e.g?e.g.add(t):e.h=t}function mv(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function yv(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return qg(e.i)}uv.prototype.cancel=function(){if(this.i=yv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var vv,wv=class{stringify(e){return Mg.JSON.stringify(e,void 0)}parse(e){return Mg.JSON.parse(e,void 0)}};function bv(){this.g=new wv}function _v(e,t,n){const r=n||"";try{jy(e,(function(e,n){let i=e;Og(e)&&(i=Fm(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(dM){throw t.push(r+"type="+encodeURIComponent("_badmap")),dM}}function Sv(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function Cv(e){this.l=e.fc||null,this.j=e.ob||!1}function Ev(e,t){Rm.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=kv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jg(Cv,my),Cv.prototype.g=function(){return new Ev(this.l,this.j)},Cv.prototype.i=(vv={},function(){return vv}),jg(Ev,Rm);var kv=0;function xv(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Tv(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Nv(e)}function Nv(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Dg=Ev.prototype).open=function(e,t){if(this.readyState!=kv)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Nv(this)},Dg.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Mg).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Dg.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Tv(this)),this.readyState=kv},Dg.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Nv(this)),this.g&&(this.readyState=3,Nv(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Mg.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xv(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Dg.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Tv(this):Nv(this),3==this.readyState&&xv(this)}},Dg.Za=function(e){this.g&&(this.response=this.responseText=e,Tv(this))},Dg.Ya=function(e){this.g&&(this.response=e,Tv(this))},Dg.ka=function(){this.g&&Tv(this)},Dg.setRequestHeader=function(e,t){this.v.append(e,t)},Dg.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Dg.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ev.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Iv=Mg.JSON.parse;function Dv(e){Rm.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Av,this.L=this.M=!1}jg(Dv,Rm);var Av="",Pv=/^https?$/i,Mv=["POST","PUT"];function Rv(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ov(e),Fv(e)}function Ov(e){e.F||(e.F=!0,Om(e,"complete"),Om(e,"error"))}function Lv(e){if(e.h&&"undefined"!=typeof Pg&&(!e.C[1]||4!=Vv(e)||2!=e.da()))if(e.v&&4==Vv(e))Xm(e.La,0,e);else if(Om(e,"readystatechange"),4==Vv(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Uy)[1]||null;!i&&Mg.self&&Mg.self.location&&(i=Mg.self.location.protocol.slice(0,-1)),r=!Pv.test(i?i.toLowerCase():"")}n=r}if(n)Om(e,"complete"),Om(e,"success");else{e.m=6;try{var o=2<Vv(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",Ov(e)}}finally{Fv(e)}}}function Fv(e,t){if(e.g){zv(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Om(e,"ready");try{n.onreadystatechange=r}catch(dM){}}}function zv(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Mg.clearTimeout(e.A),e.A=null)}function Vv(e){return e.g?e.g.readyState:0}function jv(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Av:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Hw){return null}}function Uv(e){let t="";return ym(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Bv(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Uv(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Yy(e,t,n))}function qv(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Hv(e){this.Ga=0,this.j=[],this.l=new ry,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=qv("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=qv("baseRetryDelayMs",5e3,e),this.hb=qv("retryDelaySeedMs",1e4,e),this.eb=qv("forwardChannelMaxRetries",2,e),this.xa=qv("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new uv(e&&e.concurrentRequestLimit),this.Ja=new bv,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Wv(e){if(Yv(e),3==e.H){var t=e.W++,n=qy(e.I);if(Yy(n,"SID",e.K),Yy(n,"RID",t),Yy(n,"TYPE","terminate"),Xv(e,n),(t=new Ey(e,e.l,t)).L=2,t.v=Gy(qy(n)),n=!1,Mg.navigator&&Mg.navigator.sendBeacon)try{n=Mg.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Mg.Image&&((new Image).src=t.v,n=!0),n||(t.g=lw(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Ry(t)}sw(e)}function Kv(e){e.g&&(ew(e),e.g.cancel(),e.g=null)}function Yv(e){Kv(e),e.u&&(Mg.clearTimeout(e.u),e.u=null),nw(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Mg.clearTimeout(e.m),e.m=null)}function Gv(e){if(!dv(e.i)&&!e.m){e.m=!0;var t=e.Na;qm||Km(),Hm||(qm(),Hm=!0),Wm.add(t,e),e.C=0}}function Qv(e,t){var n;n=t?t.m:e.W++;const r=qy(e.I);Yy(r,"SID",e.K),Yy(r,"RID",n),Yy(r,"AID",e.V),Xv(e,r),e.o&&e.s&&Bv(r,e.o,e.s),n=new Ey(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Zv(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),gv(e.i,n),Iy(n,r,t)}function Xv(e,t){e.na&&ym(e.na,(function(e,n){Yy(t,n,e)})),e.h&&jy({},(function(e,n){Yy(t,n,e)}))}function Zv(e,t,n){n=Math.min(e.j.length,n);var r=e.h?zg(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].g;const a=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),o=!1;else try{_v(a,e,"req"+n+"_")}catch(tb){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function $v(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;qm||Km(),Hm||(qm(),Hm=!0),Wm.add(t,e),e.A=0}}function Jv(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=fy(zg(e.Ma,e),iw(e,e.A)),e.A++,!0)}function ew(e){null!=e.B&&(Mg.clearTimeout(e.B),e.B=null)}function tw(e){e.g=new Ey(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=qy(e.wa);Yy(t,"RID","rpc"),Yy(t,"SID",e.K),Yy(t,"AID",e.V),Yy(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Yy(t,"TO",e.qa),Yy(t,"TYPE","xmlhttp"),Xv(e,t),e.o&&e.s&&Bv(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Gy(qy(t)),n.s=null,n.S=!0,Dy(n,e)}function nw(e){null!=e.v&&(Mg.clearTimeout(e.v),e.v=null)}function rw(e,t){var n=null;if(e.g==t){nw(e),ew(e),e.g=null;var r=2}else{if(!pv(e.i,t))return;n=t.F,mv(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Om(r=ay(),new dy(r,n)),Gv(e)}else $v(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(fv(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=fy(zg(e.Na,e,t),iw(e,e.C)),e.C++,!0))}(e,t)||2==r&&Jv(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ow(e,5);break;case 4:ow(e,10);break;case 3:ow(e,6);break;default:ow(e,2)}}function iw(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ow(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=zg(e.pb,e);n||(n=new By("//www.google.com/images/cleardot.gif"),Mg.location&&"http"==Mg.location.protocol||Hy(n,"https"),Gy(n)),function(e,t){const n=new ry;if(Mg.Image){const r=new Image;r.onload=Vg(Sv,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Vg(Sv,n,r,"TestLoadImage: error",!1,t),r.onabort=Vg(Sv,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Vg(Sv,n,r,"TestLoadImage: timeout",!1,t),Mg.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else hy(2);e.H=0,e.h&&e.h.za(t),sw(e),Yv(e)}function sw(e){if(e.H=0,e.ma=[],e.h){const t=yv(e.i);0==t.length&&0==e.j.length||(Hg(e.ma,t),Hg(e.ma,e.j),e.i.i.length=0,qg(e.j),e.j.length=0),e.h.ya()}}function aw(e,t,n){var r=n instanceof By?qy(n):new By(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Wy(r,r.m);else{var i=Mg.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new By(null);r&&Hy(o,r),t&&(o.g=t),i&&Wy(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&Yy(r,n,t),Yy(r,"VER",e.ra),Xv(e,r),r}function lw(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Dv(new Cv({ob:!0})):new Dv(e.va)).Oa(e.J),t}function cw(){}function uw(){if(em&&!(10<=Number(um)))throw Error("Environmental error: no available transport.")}function hw(e,t){Rm.call(this),this.g=new Hv(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Yg(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Yg(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new pw(this)}function dw(e){_y.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function fw(){Sy.call(this),this.status=1}function pw(e){this.g=e}function gw(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function mw(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function yw(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(Dg=Dv.prototype).Oa=function(e){this.M=e},Dg.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():wy.g(),this.C=this.u?yy(this.u):yy(wy),this.g.onreadystatechange=zg(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){return void Rv(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Mg.FormData&&e instanceof Mg.FormData,!(0<=Bg(Mv,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{zv(this),0<this.B&&((this.L=function(e){return em&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zg(this.ua,this)):this.A=Xm(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){Rv(this,o)}},Dg.ua=function(){"undefined"!=typeof Pg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Om(this,"timeout"),this.abort(8))},Dg.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Om(this,"complete"),Om(this,"abort"),Fv(this))},Dg.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Fv(this,!0)),Dv.$.N.call(this)},Dg.La=function(){this.s||(this.G||this.v||this.l?Lv(this):this.kb())},Dg.kb=function(){Lv(this)},Dg.isActive=function(){return!!this.g},Dg.da=function(){try{return 2<Vv(this)?this.g.status:-1}catch(vv){return-1}},Dg.ja=function(){try{return this.g?this.g.responseText:""}catch(vv){return""}},Dg.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Iv(t)}},Dg.Ia=function(){return this.m},Dg.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Dg=Hv.prototype).ra=8,Dg.H=1,Dg.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Ey(this,this.l,e);let o=this.s;if(this.U&&(o?(o=vm(o),bm(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Zv(this,i,t),Yy(n=qy(this.I),"RID",e),Yy(n,"CVER",22),this.F&&Yy(n,"X-HTTP-Session-Id",this.F),Xv(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Uv(o)))+"&"+t:this.o&&Bv(n,this.o,o)),gv(this.i,i),this.bb&&Yy(n,"TYPE","init"),this.P?(Yy(n,"$req",t),Yy(n,"SID","null"),i.aa=!0,Iy(i,n,null)):Iy(i,n,t),this.H=2}}else 3==this.H&&(e?Qv(this,e):0==this.j.length||dv(this.i)||Qv(this))},Dg.Ma=function(){if(this.u=null,tw(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=fy(zg(this.jb,this),e)}},Dg.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,hy(10),Kv(this),tw(this))},Dg.ib=function(){null!=this.v&&(this.v=null,Kv(this),Jv(this),hy(19))},Dg.pb=function(e){e?(this.l.info("Successfully pinged google.com"),hy(2)):(this.l.info("Failed to ping google.com"),hy(1))},Dg.isActive=function(){return!!this.h&&this.h.isActive(this)},(Dg=cw.prototype).Ba=function(){},Dg.Aa=function(){},Dg.za=function(){},Dg.ya=function(){},Dg.isActive=function(){return!0},Dg.Va=function(){},uw.prototype.g=function(e,t){return new hw(e,t)},jg(hw,Rm),hw.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;hy(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=aw(e,null,e.Y),Gv(e)},hw.prototype.close=function(){Wv(this.g)},hw.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Fm(e),e=n);t.j.push(new cv(t.fb++,e)),3==t.H&&Gv(t)},hw.prototype.N=function(){this.g.h=null,delete this.j,Wv(this.g),delete this.g,hw.$.N.call(this)},jg(dw,_y),jg(fw,Sy),jg(pw,cw),pw.prototype.Ba=function(){Om(this.g,"a")},pw.prototype.Aa=function(e){Om(this.g,new dw(e))},pw.prototype.za=function(e){Om(this.g,new fw)},pw.prototype.ya=function(){Om(this.g,"b")},jg(gw,(function(){this.blockSize=-1})),gw.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},gw.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)mw(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){mw(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){mw(this,r),i=0;break}}this.h=i,this.i+=t},gw.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var vw={};function ww(e){return-128<=e&&128>e?function(e,t){var n=vw;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new yw([0|e],0>e?-1:0)})):new yw([0|e],0>e?-1:0)}function bw(e){if(isNaN(e)||!isFinite(e))return Sw;if(0>e)return Tw(bw(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=_w;return new yw(t,0)}var _w=4294967296,Sw=ww(0),Cw=ww(1),Ew=ww(16777216);function kw(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function xw(e){return-1==e.h}function Tw(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new yw(n,~e.h).add(Cw)}function Nw(e,t){return e.add(Tw(t))}function Iw(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Dw(e,t){this.g=e,this.h=t}function Aw(e,t){if(kw(t))throw Error("division by zero");if(kw(e))return new Dw(Sw,Sw);if(xw(e))return t=Aw(Tw(e),t),new Dw(Tw(t.g),Tw(t.h));if(xw(t))return t=Aw(e,Tw(t)),new Dw(Tw(t.g),t.h);if(30<e.g.length){if(xw(e)||xw(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Cw,r=t;0>=r.X(e);)n=Pw(n),r=Pw(r);var i=Mw(n,1),o=Mw(r,1);for(r=Mw(r,2),n=Mw(n,2);!kw(r);){var s=o.add(r);0>=s.X(e)&&(i=i.add(n),o=s),r=Mw(r,1),n=Mw(n,1)}return t=Nw(e,i.R(t)),new Dw(i,t)}for(i=Sw;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=bw(n)).R(t);xw(s)||0<s.X(e);)s=(o=bw(n-=r)).R(t);kw(o)&&(o=Cw),i=i.add(o),e=Nw(e,s)}return new Dw(i,e)}function Pw(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new yw(n,e.h)}function Mw(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new yw(i,e.h)}(Dg=yw.prototype).ea=function(){if(xw(this))return-Tw(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:_w+r)*t,t*=_w}return e},Dg.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(kw(this))return"0";if(xw(this))return"-"+Tw(this).toString(e);for(var t=bw(Math.pow(e,6)),n=this,r="";;){var i=Aw(n,t).g,o=((0<(n=Nw(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(kw(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},Dg.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Dg.X=function(e){return xw(e=Nw(this,e))?-1:kw(e)?0:1},Dg.abs=function(){return xw(this)?Tw(this):this},Dg.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new yw(n,-2147483648&n[n.length-1]?-1:0)},Dg.R=function(e){if(kw(this)||kw(e))return Sw;if(xw(this))return xw(e)?Tw(this).R(Tw(e)):Tw(Tw(this).R(e));if(xw(e))return Tw(this.R(Tw(e)));if(0>this.X(Ew)&&0>e.X(Ew))return bw(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=s*l,Iw(n,2*r+2*i),n[2*r+2*i+1]+=o*l,Iw(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Iw(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Iw(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new yw(n,0)},Dg.gb=function(e){return Aw(this,e).h},Dg.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new yw(n,this.h&e.h)},Dg.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new yw(n,this.h|e.h)},Dg.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new yw(n,this.h^e.h)},uw.prototype.createWebChannel=uw.prototype.g,hw.prototype.send=hw.prototype.u,hw.prototype.open=hw.prototype.m,hw.prototype.close=hw.prototype.close,py.NO_ERROR=0,py.TIMEOUT=8,py.HTTP_ERROR=6,gy.COMPLETE="complete",vy.EventType=by,by.OPEN="a",by.CLOSE="b",by.ERROR="c",by.MESSAGE="d",Rm.prototype.listen=Rm.prototype.O,Dv.prototype.listenOnce=Dv.prototype.P,Dv.prototype.getLastError=Dv.prototype.Sa,Dv.prototype.getLastErrorCode=Dv.prototype.Ia,Dv.prototype.getStatus=Dv.prototype.da,Dv.prototype.getResponseJson=Dv.prototype.Wa,Dv.prototype.getResponseText=Dv.prototype.ja,Dv.prototype.send=Dv.prototype.ha,Dv.prototype.setWithCredentials=Dv.prototype.Oa,gw.prototype.digest=gw.prototype.l,gw.prototype.reset=gw.prototype.reset,gw.prototype.update=gw.prototype.j,yw.prototype.add=yw.prototype.add,yw.prototype.multiply=yw.prototype.R,yw.prototype.modulo=yw.prototype.gb,yw.prototype.compare=yw.prototype.X,yw.prototype.toNumber=yw.prototype.ea,yw.prototype.toString=yw.prototype.toString,yw.prototype.getBits=yw.prototype.D,yw.fromNumber=bw,yw.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Tw(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=bw(Math.pow(n,8)),i=Sw,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+s),n);8>s?(s=bw(Math.pow(n,s)),i=i.R(s).add(bw(a))):i=(i=i.R(r)).add(bw(a))}return i};var Rw=py,Ow=gy,Lw=oy,Fw=10,zw=11,Vw=Cv,jw=vy,Uw=Dv,Bw=gw,qw=yw;const Hw="@firebase/firestore";class Ww{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ww.UNAUTHENTICATED=new Ww(null),Ww.GOOGLE_CREDENTIALS=new Ww("google-credentials-uid"),Ww.FIRST_PARTY=new Ww("first-party-uid"),Ww.MOCK_USER=new Ww("mock-user");let Kw="9.23.0";const Yw=new mp("@firebase/firestore");function Gw(){return Yw.logLevel}function Qw(e){if(Yw.logLevel<=hp.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map($w);Yw.debug("Firestore (".concat(Kw,"): ").concat(e),...i)}}function Xw(e){if(Yw.logLevel<=hp.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map($w);Yw.error("Firestore (".concat(Kw,"): ").concat(e),...i)}}function Zw(e){if(Yw.logLevel<=hp.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map($w);Yw.warn("Firestore (".concat(Kw,"): ").concat(e),...i)}}function $w(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Jw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Kw,") INTERNAL ASSERTION FAILED: ")+e;throw Xw(t),new Error(t)}function eb(e,t){e||Jw()}function tb(e,t){return e}const nb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rb extends Wf{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class ib{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ob{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class sb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ww.UNAUTHENTICATED)))}shutdown(){}}class ab{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class lb{constructor(e){this.t=e,this.currentUser=Ww.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new ib;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ib,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{Qw("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Qw("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ib)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Qw("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(eb("string"==typeof t.accessToken),new ob(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return eb(null===e||"string"==typeof e),new Ww(e)}}class cb{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Ww.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ub{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new cb(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(Ww.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class hb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class db{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&Qw("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,Qw("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Qw("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):Qw("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(eb("string"==typeof e.token),this.T=e.token,new hb(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function fb(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class pb{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=fb(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function gb(e,t){return e<t?-1:e>t?1:0}function mb(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class yb{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new rb(nb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new rb(nb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new rb(nb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new rb(nb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yb.fromMillis(Date.now())}static fromDate(e){return yb.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new yb(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?gb(this.nanoseconds,e.nanoseconds):gb(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vb{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vb(e)}static min(){return new vb(new yb(0,0))}static max(){return new vb(new yb(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class wb{constructor(e,t,n){void 0===t?t=0:t>e.length&&Jw(),void 0===n?n=e.length-t:n>e.length-t&&Jw(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===wb.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wb?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class bb extends wb{construct(e,t,n){return new bb(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new rb(nb.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new bb(e)}static emptyPath(){return new bb([])}}const _b=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sb extends wb{construct(e,t,n){return new Sb(e,t,n)}static isValidIdentifier(e){return _b.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sb.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Sb(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new rb(nb.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new rb(nb.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new rb(nb.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new rb(nb.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sb(t)}static emptyPath(){return new Sb([])}}class Cb{constructor(e){this.path=e}static fromPath(e){return new Cb(bb.fromString(e))}static fromName(e){return new Cb(bb.fromString(e).popFirst(5))}static empty(){return new Cb(bb.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===bb.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return bb.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Cb(new bb(e.slice()))}}function Eb(e){return new kb(e.readTime,e.key,-1)}class kb{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new kb(vb.min(),Cb.empty(),-1)}static max(){return new kb(vb.max(),Cb.empty(),-1)}}function xb(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Cb.comparator(e.documentKey,t.documentKey),0!==n?n:gb(e.largestBatchId,t.largestBatchId))}class Tb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Nb(e){if(e.code!==nb.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;Qw("LocalStore","Unexpectedly lost primary lease")}class Ib{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Jw(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ib(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ib?t:Ib.resolve(t)}catch(e){return Ib.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ib.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ib.reject(t)}static resolve(e){return new Ib(((t,n)=>{t(e)}))}static reject(e){return new Ib(((t,n)=>{n(e)}))}static waitFor(e){return new Ib(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=Ib.resolve(!1);for(const n of e)t=t.next((e=>e?Ib.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Ib(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{o[l]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new Ib(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Db(e){return"IndexedDbTransactionError"===e.name}class Ab{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function Pb(e){return null==e}function Mb(e){return 0===e&&1/e==-1/0}function Rb(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ob(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Lb(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Ab.ct=-1;class Fb{constructor(e,t){this.comparator=e,this.root=t||Vb.EMPTY}insert(e,t){return new Fb(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vb.BLACK,null,null))}remove(e){return new Fb(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vb.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zb(this.root,e,this.comparator,!1)}getReverseIterator(){return new zb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zb(this.root,e,this.comparator,!0)}}class zb{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vb{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Vb.RED,this.left=null!=r?r:Vb.EMPTY,this.right=null!=i?i:Vb.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Vb(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Vb.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Vb.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vb.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vb.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Jw();if(this.right.isRed())throw Jw();const e=this.left.check();if(e!==this.right.check())throw Jw();return e+(this.isRed()?0:1)}}Vb.EMPTY=null,Vb.RED=!0,Vb.BLACK=!1,Vb.EMPTY=new class{constructor(){this.size=0}get key(){throw Jw()}get value(){throw Jw()}get color(){throw Jw()}get left(){throw Jw()}get right(){throw Jw()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Vb(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jb{constructor(e){this.comparator=e,this.data=new Fb(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ub(this.data.getIterator())}getIteratorFrom(e){return new Ub(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof jb))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new jb(this.comparator);return t.data=e,t}}class Ub{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Bb{constructor(e){this.fields=e,e.sort(Sb.comparator)}static empty(){return new Bb([])}unionWith(e){let t=new jb(Sb.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Bb(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mb(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class qb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Hb{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new qb("Invalid base64 string: "+e):e}}(e);return new Hb(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Hb(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gb(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hb.EMPTY_BYTE_STRING=new Hb("");const Wb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kb(e){if(eb(!!e),"string"==typeof e){let t=0;const n=Wb.exec(e);if(eb(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Yb(e.seconds),nanos:Yb(e.nanos)}}function Yb(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Gb(e){return"string"==typeof e?Hb.fromBase64String(e):Hb.fromUint8Array(e)}function Qb(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Xb(e){const t=e.mapValue.fields.__previous_value__;return Qb(t)?Xb(t):t}function Zb(e){const t=Kb(e.mapValue.fields.__local_write_time__.timestampValue);return new yb(t.seconds,t.nanos)}class $b{constructor(e,t,n,r,i,o,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}class Jb{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Jb("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Jb&&e.projectId===this.projectId&&e.database===this.database}}const e_={};function t_(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Qb(e)?4:function(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}(e)?9007199254740991:10:Jw()}function n_(e,t){if(e===t)return!0;const n=t_(e);if(n!==t_(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Zb(e).isEqual(Zb(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Kb(e.timestampValue),r=Kb(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Gb(e.bytesValue).isEqual(Gb(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Yb(e.geoPointValue.latitude)===Yb(t.geoPointValue.latitude)&&Yb(e.geoPointValue.longitude)===Yb(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Yb(e.integerValue)===Yb(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Yb(e.doubleValue),r=Yb(t.doubleValue);return n===r?Mb(n)===Mb(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return mb(e.arrayValue.values||[],t.arrayValue.values||[],n_);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Rb(n)!==Rb(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!n_(n[i],r[i])))return!1;return!0}(e,t);default:return Jw()}}function r_(e,t){return void 0!==(e.values||[]).find((e=>n_(e,t)))}function i_(e,t){if(e===t)return 0;const n=t_(e),r=t_(t);if(n!==r)return gb(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return gb(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Yb(e.integerValue||e.doubleValue),r=Yb(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return o_(e.timestampValue,t.timestampValue);case 4:return o_(Zb(e),Zb(t));case 5:return gb(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Gb(e),r=Gb(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=gb(n[i],r[i]);if(0!==e)return e}return gb(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=gb(Yb(e.latitude),Yb(t.latitude));return 0!==n?n:gb(Yb(e.longitude),Yb(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=i_(n[i],r[i]);if(e)return e}return gb(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===e_&&t===e_)return 0;if(e===e_)return 1;if(t===e_)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=gb(r[s],o[s]);if(0!==e)return e;const t=i_(n[r[s]],i[o[s]]);if(0!==t)return t}return gb(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Jw()}}function o_(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return gb(e,t);const n=Kb(e),r=Kb(t),i=gb(n.seconds,r.seconds);return 0!==i?i:gb(n.nanos,r.nanos)}function s_(e){return a_(e)}function a_(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Kb(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Gb(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Cb.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=a_(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(a_(e.fields[i]));return n+"}"}(e.mapValue):Jw();var t,n}function l_(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function c_(e){return!!e&&"integerValue"in e}function u_(e){return!!e&&"arrayValue"in e}function h_(e){return!!e&&"nullValue"in e}function d_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function f_(e){return!!e&&"mapValue"in e}function p_(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ob(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=p_(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=p_(e.arrayValue.values[n]);return t}return Object.assign({},e)}class g_{constructor(e){this.value=e}static empty(){return new g_({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!f_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=p_(t)}setAll(e){let t=Sb.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=p_(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());f_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return n_(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];f_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ob(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new g_(p_(this.value))}}function m_(e){const t=[];return Ob(e.fields,((e,n)=>{const r=new Sb([e]);if(f_(n)){const e=m_(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Bb(t)}class y_{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new y_(e,0,vb.min(),vb.min(),vb.min(),g_.empty(),0)}static newFoundDocument(e,t,n,r){return new y_(e,1,t,vb.min(),n,r,0)}static newNoDocument(e,t){return new y_(e,2,t,vb.min(),vb.min(),g_.empty(),0)}static newUnknownDocument(e,t){return new y_(e,3,t,vb.min(),vb.min(),g_.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vb.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=g_.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=g_.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vb.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof y_&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new y_(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class v_{constructor(e,t){this.position=e,this.inclusive=t}}function w_(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?Cb.comparator(Cb.fromName(s.referenceValue),n.key):i_(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function b_(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!n_(e.position[n],t.position[n]))return!1;return!0}class __{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function S_(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class C_{}class E_ extends C_{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new A_(e,t,n):"array-contains"===t?new O_(e,n):"in"===t?new L_(e,n):"not-in"===t?new F_(e,n):"array-contains-any"===t?new z_(e,n):new E_(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new P_(e,n):new M_(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(i_(t,this.value)):null!==t&&t_(this.value)===t_(t)&&this.matchesComparison(i_(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Jw()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class k_ extends C_{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new k_(e,t)}matches(e){return x_(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((e=>e.isInequality()));return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function x_(e){return"and"===e.op}function T_(e){return function(e){for(const t of e.filters)if(t instanceof k_)return!1;return!0}(e)&&x_(e)}function N_(e){if(e instanceof E_)return e.field.canonicalString()+e.op.toString()+s_(e.value);if(T_(e))return e.filters.map((e=>N_(e))).join(",");{const t=e.filters.map((e=>N_(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function I_(e,t){return e instanceof E_?function(e,t){return t instanceof E_&&e.op===t.op&&e.field.isEqual(t.field)&&n_(e.value,t.value)}(e,t):e instanceof k_?function(e,t){return t instanceof k_&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&I_(n,t.filters[r])),!0)}(e,t):void Jw()}function D_(e){return e instanceof E_?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(s_(e.value))}(e):e instanceof k_?function(e){return e.op.toString()+" {"+e.getFilters().map(D_).join(" ,")+"}"}(e):"Filter"}class A_ extends E_{constructor(e,t,n){super(e,t,n),this.key=Cb.fromName(n.referenceValue)}matches(e){const t=Cb.comparator(e.key,this.key);return this.matchesComparison(t)}}class P_ extends E_{constructor(e,t){super(e,"in",t),this.keys=R_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class M_ extends E_{constructor(e,t){super(e,"not-in",t),this.keys=R_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function R_(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Cb.fromName(e.referenceValue)))}class O_ extends E_{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return u_(t)&&r_(t.arrayValue,this.value)}}class L_ extends E_{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&r_(this.value.arrayValue,t)}}class F_ extends E_{constructor(e,t){super(e,"not-in",t)}matches(e){if(r_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!r_(this.value.arrayValue,t)}}class z_ extends E_{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!u_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>r_(this.value.arrayValue,e)))}}class V_{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.dt=null}}function j_(e){return new V_(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function U_(e){const t=tb(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>N_(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Pb(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>s_(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>s_(e))).join(",")),t.dt=e}return t.dt}function B_(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!S_(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!I_(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!b_(e.startAt,t.startAt)&&b_(e.endAt,t.endAt)}function q_(e){return Cb.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class H_{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function W_(e){return new H_(e)}function K_(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Y_(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function G_(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Q_(e){return null!==e.collectionGroup}function X_(e){const t=tb(e);if(null===t.wt){t.wt=[];const e=G_(t),n=Y_(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new __(e)),t.wt.push(new __(Sb.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new __(Sb.keyField(),e))}}}return t.wt}function Z_(e){const t=tb(e);if(!t._t)if("F"===t.limitType)t._t=j_(t.path,t.collectionGroup,X_(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of X_(t)){const t="desc"===i.dir?"asc":"desc";e.push(new __(i.field,t))}const n=t.endAt?new v_(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new v_(t.startAt.position,t.startAt.inclusive):null;t._t=j_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function $_(e,t){t.getFirstInequalityField(),G_(e);const n=e.filters.concat([t]);return new H_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function J_(e,t,n){return new H_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function eS(e,t){return B_(Z_(e),Z_(t))&&e.limitType===t.limitType}function tS(e){return"".concat(U_(Z_(e)),"|lt:").concat(e.limitType)}function nS(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>D_(e))).join(", "),"]")),Pb(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>s_(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>s_(e))).join(",")),"Target(".concat(t,")")}(Z_(e)),"; limitType=").concat(e.limitType,")")}function rS(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Cb.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of X_(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=w_(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,X_(e),t))&&!(e.endAt&&!function(e,t,n){const r=w_(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,X_(e),t))}(e,t)}function iS(e){return(t,n)=>{let r=!1;for(const i of X_(e)){const e=oS(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function oS(e,t,n){const r=e.field.isKeyField()?Cb.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?i_(r,i):Jw()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Jw()}}class sS{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ob(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Lb(this.inner)}size(){return this.innerSize}}const aS=new Fb(Cb.comparator);function lS(){return aS}const cS=new Fb(Cb.comparator);function uS(){let e=cS;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function hS(e){let t=cS;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function dS(){return pS()}function fS(){return pS()}function pS(){return new sS((e=>e.toString()),((e,t)=>e.isEqual(t)))}const gS=new Fb(Cb.comparator),mS=new jb(Cb.comparator);function yS(){let e=mS;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const vS=new jb(gb);function wS(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mb(t)?"-0":t}}function bS(e){return{integerValue:""+e}}function _S(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Mb(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?bS(t):wS(e,t)}class SS{constructor(){this._=void 0}}function CS(e,t,n){return e instanceof xS?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Qb(t)&&(t=Xb(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof TS?NS(e,t):e instanceof IS?DS(e,t):function(e,t){const n=kS(e,t),r=PS(n)+PS(e.gt);return c_(n)&&c_(e.gt)?bS(r):wS(e.serializer,r)}(e,t)}function ES(e,t,n){return e instanceof TS?NS(e,t):e instanceof IS?DS(e,t):n}function kS(e,t){return e instanceof AS?c_(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class xS extends SS{}class TS extends SS{constructor(e){super(),this.elements=e}}function NS(e,t){const n=MS(t);for(const r of e.elements)n.some((e=>n_(e,r)))||n.push(r);return{arrayValue:{values:n}}}class IS extends SS{constructor(e){super(),this.elements=e}}function DS(e,t){let n=MS(t);for(const r of e.elements)n=n.filter((e=>!n_(e,r)));return{arrayValue:{values:n}}}class AS extends SS{constructor(e,t){super(),this.serializer=e,this.gt=t}}function PS(e){return Yb(e.integerValue||e.doubleValue)}function MS(e){return u_(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class RS{constructor(e,t){this.version=e,this.transformResults=t}}class OS{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new OS}static exists(e){return new OS(void 0,e)}static updateTime(e){return new OS(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function LS(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class FS{}function zS(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new GS(e.key,OS.none()):new qS(e.key,e.data,OS.none());{const n=e.data,r=g_.empty();let i=new jb(Sb.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new HS(e.key,r,new Bb(i.toArray()),OS.none())}}function VS(e,t,n){e instanceof qS?function(e,t,n){const r=e.value.clone(),i=KS(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof HS?function(e,t,n){if(!LS(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=KS(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(WS(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function jS(e,t,n,r){return e instanceof qS?function(e,t,n,r){if(!LS(e.precondition,t))return n;const i=e.value.clone(),o=YS(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof HS?function(e,t,n,r){if(!LS(e.precondition,t))return n;const i=YS(e.fieldTransforms,r,t),o=t.data;return o.setAll(WS(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return LS(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function US(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=kS(r.transform,e||null);null!=i&&(null===n&&(n=g_.empty()),n.set(r.field,i))}return n||null}function BS(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&mb(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof TS&&t instanceof TS||e instanceof IS&&t instanceof IS?mb(e.elements,t.elements,n_):e instanceof AS&&t instanceof AS?n_(e.gt,t.gt):e instanceof xS&&t instanceof xS}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class qS extends FS{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class HS extends FS{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function WS(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function KS(e,t,n){const r=new Map;eb(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,ES(s,a,n[i]))}return r}function YS(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,CS(e,o,t))}return r}class GS extends FS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QS extends FS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class XS{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&VS(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=jS(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=jS(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=fS();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=zS(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(vb.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),yS())}isEqual(e){return this.batchId===e.batchId&&mb(this.mutations,e.mutations,((e,t)=>BS(e,t)))&&mb(this.baseMutations,e.baseMutations,((e,t)=>BS(e,t)))}}class ZS{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){eb(e.mutations.length===n.length);let r=gS;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new ZS(e,t,n,r)}}class $S{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class JS{constructor(e,t){this.count=e,this.unchangedNames=t}}var eC,tC;function nC(e){if(void 0===e)return Xw("GRPC error has no .code"),nb.UNKNOWN;switch(e){case eC.OK:return nb.OK;case eC.CANCELLED:return nb.CANCELLED;case eC.UNKNOWN:return nb.UNKNOWN;case eC.DEADLINE_EXCEEDED:return nb.DEADLINE_EXCEEDED;case eC.RESOURCE_EXHAUSTED:return nb.RESOURCE_EXHAUSTED;case eC.INTERNAL:return nb.INTERNAL;case eC.UNAVAILABLE:return nb.UNAVAILABLE;case eC.UNAUTHENTICATED:return nb.UNAUTHENTICATED;case eC.INVALID_ARGUMENT:return nb.INVALID_ARGUMENT;case eC.NOT_FOUND:return nb.NOT_FOUND;case eC.ALREADY_EXISTS:return nb.ALREADY_EXISTS;case eC.PERMISSION_DENIED:return nb.PERMISSION_DENIED;case eC.FAILED_PRECONDITION:return nb.FAILED_PRECONDITION;case eC.ABORTED:return nb.ABORTED;case eC.OUT_OF_RANGE:return nb.OUT_OF_RANGE;case eC.UNIMPLEMENTED:return nb.UNIMPLEMENTED;case eC.DATA_LOSS:return nb.DATA_LOSS;default:return Jw()}}(tC=eC||(eC={}))[tC.OK=0]="OK",tC[tC.CANCELLED=1]="CANCELLED",tC[tC.UNKNOWN=2]="UNKNOWN",tC[tC.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tC[tC.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tC[tC.NOT_FOUND=5]="NOT_FOUND",tC[tC.ALREADY_EXISTS=6]="ALREADY_EXISTS",tC[tC.PERMISSION_DENIED=7]="PERMISSION_DENIED",tC[tC.UNAUTHENTICATED=16]="UNAUTHENTICATED",tC[tC.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tC[tC.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tC[tC.ABORTED=10]="ABORTED",tC[tC.OUT_OF_RANGE=11]="OUT_OF_RANGE",tC[tC.UNIMPLEMENTED=12]="UNIMPLEMENTED",tC[tC.INTERNAL=13]="INTERNAL",tC[tC.UNAVAILABLE=14]="UNAVAILABLE",tC[tC.DATA_LOSS=15]="DATA_LOSS";class rC{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return iC}static getOrCreateInstance(){return null===iC&&(iC=new rC),iC}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let iC=null;const oC=new qw([4294967295,4294967295],0);function sC(e){const t=(new TextEncoder).encode(e),n=new Bw;return n.update(t),new Uint8Array(n.digest())}function aC(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new qw([n,r],0),new qw([i,o],0)]}class lC{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new cC("Invalid padding: ".concat(t));if(n<0)throw new cC("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new cC("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new cC("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=qw.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(qw.fromNumber(n)));return 1===r.compare(oC)&&(r=new qw([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=sC(e),[n,r]=aC(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new lC(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.It)return;const t=sC(e),[n,r]=aC(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class cC extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class uC{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,hC.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new uC(vb.min(),r,new Fb(gb),lS(),yS())}}class hC{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new hC(n,t,yS(),yS(),yS())}}class dC{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class fC{constructor(e,t){this.targetId=e,this.Vt=t}}class pC{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hb.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class gC{constructor(){this.St=0,this.Dt=vC(),this.Ct=Hb.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=yS(),t=yS(),n=yS();return this.Dt.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Jw()}})),new hC(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=vC()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class mC{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=lS(),this.zt=yC(),this.Wt=new Fb(gb)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,(t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Jw()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach(((e,n)=>{this.te(n)&&t(n)}))}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const o=i.target;if(q_(o))if(0===r){const e=new Cb(o.path);this.Yt(n,e,y_.newNoDocument(e,vb.min()))}else eb(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=rC.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,o,s,a,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(s=null===(o=null===(i=null==u?void 0:u.bits)||void 0===i?void 0:i.bitmap)||void 0===o?void 0:o.length)&&void 0!==s?s:0,padding:null!==(l=null===(a=null==u?void 0:u.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),c}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:o=0},hashCount:s=0}=n;let a,l;try{a=Gb(i).toUint8Array()}catch(e){if(e instanceof qb)return Zw("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new lC(a,o,s)}catch(e){return Zw(e instanceof cC?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Gt.ue(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());t.vt(o)||(this.Yt(e,n,null),r++)})),r}ce(e){const t=new Map;this.Qt.forEach(((n,r)=>{const i=this.se(r);if(i){if(n.current&&q_(i.target)){const t=new Cb(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,y_.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}}));let n=yS();this.zt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.jt.forEach(((t,n)=>n.setReadTime(e)));const r=new uC(e,t,this.Wt,this.jt,n);return this.jt=lS(),this.zt=yC(),this.Wt=new Fb(gb),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new gC,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new jb(gb),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Qw("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new gC),this.Gt.getRemoteKeysForTarget(e).forEach((t=>{this.Yt(e,t,null)}))}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function yC(){return new Fb(Cb.comparator)}function vC(){return new Fb(Cb.comparator)}const wC={asc:"ASCENDING",desc:"DESCENDING"},bC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_C={and:"AND",or:"OR"};class SC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function CC(e,t){return e.useProto3Json||Pb(t)?t:{value:t}}function EC(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function kC(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function xC(e,t){return EC(e,t.toTimestamp())}function TC(e){return eb(!!e),vb.fromTimestamp(function(e){const t=Kb(e);return new yb(t.seconds,t.nanos)}(e))}function NC(e,t){return function(e){return new bb(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function IC(e){const t=bb.fromString(e);return eb(YC(t)),t}function DC(e,t){return NC(e.databaseId,t.path)}function AC(e,t){const n=IC(t);if(n.get(1)!==e.databaseId.projectId)throw new rb(nb.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new rb(nb.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Cb(RC(n))}function PC(e,t){return NC(e.databaseId,t)}function MC(e){return new bb(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function RC(e){return eb(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function OC(e,t,n){return{name:DC(e,t),fields:n.value.mapValue.fields}}function LC(e,t){return{documents:[PC(e,t.path)]}}function FC(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=PC(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=PC(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return WC(k_.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:qC(e.field),direction:jC(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const s=CC(e,t.limit);var a;return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function zC(e){let t=function(e){const t=IC(e);return 4===t.length?bb.emptyPath():RC(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){eb(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=VC(e);return t instanceof k_&&T_(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map((e=>function(e){return new __(HC(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Pb(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new v_(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new v_(n,t)}(n.endAt)),function(e,t,n,r,i,o,s,a){return new H_(e,t,n,r,i,o,s,a)}(t,i,s,o,a,"F",l,c)}function VC(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=HC(e.unaryFilter.field);return E_.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=HC(e.unaryFilter.field);return E_.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=HC(e.unaryFilter.field);return E_.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=HC(e.unaryFilter.field);return E_.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Jw()}}(e):void 0!==e.fieldFilter?function(e){return E_.create(HC(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Jw()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return k_.create(e.compositeFilter.filters.map((e=>VC(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Jw()}}(e.compositeFilter.op))}(e):Jw()}function jC(e){return wC[e]}function UC(e){return bC[e]}function BC(e){return _C[e]}function qC(e){return{fieldPath:e.canonicalString()}}function HC(e){return Sb.fromServerFormat(e.fieldPath)}function WC(e){return e instanceof E_?function(e){if("=="===e.op){if(d_(e.value))return{unaryFilter:{field:qC(e.field),op:"IS_NAN"}};if(h_(e.value))return{unaryFilter:{field:qC(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(d_(e.value))return{unaryFilter:{field:qC(e.field),op:"IS_NOT_NAN"}};if(h_(e.value))return{unaryFilter:{field:qC(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qC(e.field),op:UC(e.op),value:e.value}}}(e):e instanceof k_?function(e){const t=e.getFilters().map((e=>WC(e)));return 1===t.length?t[0]:{compositeFilter:{op:BC(e.op),filters:t}}}(e):Jw()}function KC(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function YC(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class GC{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:vb.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:vb.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Hb.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new GC(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new GC(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new GC(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new GC(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class QC{constructor(e){this.fe=e}}function XC(e){const t=zC({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?J_(t,t.limit,"L"):t}class ZC{constructor(){this.rn=new $C}addToCollectionParentIndex(e,t){return this.rn.add(t),Ib.resolve()}getCollectionParents(e,t){return Ib.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Ib.resolve()}deleteFieldIndex(e,t){return Ib.resolve()}getDocumentsMatchingTarget(e,t){return Ib.resolve(null)}getIndexType(e,t){return Ib.resolve(0)}getFieldIndexes(e,t){return Ib.resolve([])}getNextCollectionGroupToUpdate(e){return Ib.resolve(null)}getMinOffset(e,t){return Ib.resolve(kb.min())}getMinOffsetFromCollectionGroup(e,t){return Ib.resolve(kb.min())}updateCollectionGroup(e,t,n){return Ib.resolve()}updateIndexEntries(e,t){return Ib.resolve()}}class $C{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new jb(bb.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new jb(bb.comparator)).toArray()}}class JC{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new JC(0)}static Mn(){return new JC(-1)}}class eE{constructor(){this.changes=new sS((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,y_.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ib.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tE{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class nE{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&jS(n.mutation,e,Bb.empty(),yb.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,yS()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yS();const r=dS();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=uS();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=dS();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,yS())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=lS();const o=pS(),s=pS();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof HS)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),jS(s.mutation,t,s.mutation.getFieldMask(),yb.now())):o.set(t.key,Bb.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new tE(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=pS();let r=new Fb(((e,t)=>e-t)),i=yS();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||Bb.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||yS()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,c=fS();l.forEach((e=>{if(!i.has(e)){const r=zS(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Ib.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return Cb.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Q_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Ib.resolve(dS());let s=-1,a=i;return o.next((t=>Ib.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?Ib.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,yS()))).next((e=>({batchId:s,changes:hS(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Cb(t)).next((e=>{let t=uS();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=uS();return this.indexManager.getCollectionParents(e,r).next((o=>Ib.forEach(o,(o=>{const s=function(e,t){return new H_(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(r));return this.getDocumentsMatchingCollectionQuery(e,s,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)))).next((e=>{r.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,y_.newInvalidDocument(r)))}));let n=uS();return e.forEach(((e,i)=>{const o=r.get(e);void 0!==o&&jS(o.mutation,i,Bb.empty(),yb.now()),rS(t,i)&&(n=n.insert(e,i))})),n}))}}class rE{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Ib.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:TC(n.createTime)}),Ib.resolve()}getNamedQuery(e,t){return Ib.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:XC(e.bundledQuery),readTime:TC(e.readTime)}}(t)),Ib.resolve()}}class iE{constructor(){this.overlays=new Fb(Cb.comparator),this.ls=new Map}getOverlay(e,t){return Ib.resolve(this.overlays.get(t))}getOverlays(e,t){const n=dS();return Ib.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.we(e,t,r)})),Ib.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.ls.delete(n)),Ib.resolve()}getOverlaysForCollection(e,t,n){const r=dS(),i=t.length+1,o=new Cb(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ib.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Fb(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=dS(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=dS(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return Ib.resolve(s)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new $S(t,n));let i=this.ls.get(t);void 0===i&&(i=yS(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class oE{constructor(){this.fs=new jb(sE.ds),this.ws=new jb(sE._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new sE(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ys(new sE(e,t))}ps(e,t){e.forEach((e=>this.removeReference(e,t)))}Is(e){const t=new Cb(new bb([])),n=new sE(t,e),r=new sE(t,e+1),i=[];return this.ws.forEachInRange([n,r],(e=>{this.ys(e),i.push(e.key)})),i}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Cb(new bb([])),n=new sE(t,e),r=new sE(t,e+1);let i=yS();return this.ws.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new sE(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class sE{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Cb.comparator(e.key,t.key)||gb(e.As,t.As)}static _s(e,t){return gb(e.As,t.As)||Cb.comparator(e.key,t.key)}}class aE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new jb(sE.ds)}checkEmpty(e){return Ib.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new XS(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.Rs=this.Rs.add(new sE(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Ib.resolve(o)}lookupMutationBatch(e,t){return Ib.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return Ib.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ib.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Ib.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new sE(t,0),r=new sE(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],(e=>{const t=this.Ps(e.As);i.push(t)})),Ib.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new jb(gb);return t.forEach((e=>{const t=new sE(e,0),r=new sE(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],(e=>{n=n.add(e.As)}))})),Ib.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Cb.isDocumentKey(i)||(i=i.child(""));const o=new sE(new Cb(i),0);let s=new jb(gb);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.As)),!0)}),o),Ib.resolve(this.Vs(s))}Vs(e){const t=[];return e.forEach((e=>{const n=this.Ps(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){eb(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return Ib.forEach(t.mutations,(r=>{const i=new sE(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Rs=n}))}Cn(e){}containsKey(e,t){const n=new sE(t,0),r=this.Rs.firstAfterOrEqual(n);return Ib.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ib.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class lE{constructor(e){this.Ds=e,this.docs=new Fb(Cb.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ib.resolve(n?n.document.mutableCopy():y_.newInvalidDocument(t))}getEntries(e,t){let n=lS();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():y_.newInvalidDocument(e))})),Ib.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=lS();const o=t.path,s=new Cb(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||xb(Eb(s),n)<=0||(r.has(s.key)||rS(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return Ib.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Jw()}Cs(e,t){return Ib.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new cE(this)}getSize(e){return Ib.resolve(this.size)}}class cE extends eE{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)})),Ib.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class uE{constructor(e){this.persistence=e,this.xs=new sS((e=>U_(e)),B_),this.lastRemoteSnapshotVersion=vb.min(),this.highestTargetId=0,this.Ns=0,this.ks=new oE,this.targetCount=0,this.Ms=JC.kn()}forEachTarget(e,t){return this.xs.forEach(((e,n)=>t(n))),Ib.resolve()}getLastRemoteSnapshotVersion(e){return Ib.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ib.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Ib.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),Ib.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new JC(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Ib.resolve()}updateTargetData(e,t){return this.Fn(t),Ib.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Ib.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.xs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),Ib.waitFor(i).next((()=>r))}getTargetCount(e){return Ib.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return Ib.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),Ib.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Ib.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Ib.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return Ib.resolve(n)}containsKey(e,t){return Ib.resolve(this.ks.containsKey(t))}}class hE{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ab(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new uE(this),this.indexManager=new ZC,this.remoteDocumentCache=function(e){return new lE(e)}((e=>this.referenceDelegate.Ls(e))),this.serializer=new QC(t),this.qs=new rE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new aE(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){Qw("MemoryPersistence","Starting transaction:",e);const r=new dE(this.Os.next());return this.referenceDelegate.Us(),n(r).next((e=>this.referenceDelegate.Ks(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gs(e,t){return Ib.or(Object.values(this.$s).map((n=>()=>n.containsKey(e,t))))}}class dE extends Tb{constructor(e){super(),this.currentSequenceNumber=e}}class fE{constructor(e){this.persistence=e,this.Qs=new oE,this.js=null}static zs(e){return new fE(e)}get Ws(){if(this.js)return this.js;throw Jw()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),Ib.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),Ib.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Ib.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach((e=>this.Ws.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ws.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ib.forEach(this.Ws,(n=>{const r=Cb.fromPath(n);return this.Hs(e,r).next((e=>{e||t.removeEntry(r,vb.min())}))})).next((()=>(this.js=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hs(e,t).next((e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())}))}Ls(e){return 0}Hs(e,t){return Ib.or([()=>Ib.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class pE{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=yS(),r=yS();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new pE(e,t.fromCache,n,r)}}class gE{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next((i=>i||this.Gi(e,t,r,n))).next((n=>n||this.Qi(e,t)))}Ki(e,t){if(K_(t))return Ib.resolve(null);let n=Z_(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=J_(t,null,"F"),n=Z_(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=yS(...r);return this.Ui.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.ji(t,r);return this.zi(t,o,i,n.readTime)?this.Ki(e,J_(t,null,"F")):this.Wi(e,o,t,n)}))))})))))}Gi(e,t,n,r){return K_(t)||r.isEqual(vb.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((i=>{const o=this.ji(t,i);return this.zi(t,o,n,r)?this.Qi(e,t):(Gw()<=hp.DEBUG&&Qw("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),nS(t)),this.Wi(e,o,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=vb.fromTimestamp(1e9===r?new yb(n+1,0):new yb(n,r));return new kb(i,Cb.empty(),t)}(r,-1)))}))}ji(e,t){let n=new jb(iS(e));return t.forEach(((t,r)=>{rS(e,r)&&(n=n.add(r))})),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return Gw()<=hp.DEBUG&&Qw("QueryEngine","Using full collection scan to execute query:",nS(t)),this.Ui.getDocumentsMatchingQuery(e,t,kb.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class mE{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Fb(gb),this.Yi=new sS((e=>U_(e)),B_),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nE(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}async function yE(e,t){const n=tb(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=yS();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({er:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function vE(e){const t=tb(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Bs.getLastRemoteSnapshotVersion(e)))}function wE(e,t){const n=tb(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const s=[];t.targetChanges.forEach(((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.Bs.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(e,o.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Hb.EMPTY_BYTE_STRING,vb.min()).withLastLimboFreeSnapshotVersion(vb.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,o)&&s.push(n.Bs.updateTargetData(e,c))}));let a=lS(),l=yS();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(function(e,t,n){let r=yS(),i=yS();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=lS();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(vb.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):Qw("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{nr:r,sr:i}}))}(e,o,t.documentUpdates).next((e=>{a=e.nr,l=e.sr}))),!r.isEqual(vb.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next((t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return Ib.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ji=i,e)))}function bE(e,t){const n=tb(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}async function _E(e,t,n){const r=tb(e),i=r.Ji.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Db(e))throw e;Qw("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function SE(e,t,n){const r=tb(e);let i=vb.min(),o=yS();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=tb(e),i=r.Yi.get(n);return void 0!==i?Ib.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Z_(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:vb.min(),n?o:yS()))).next((e=>(function(e,t,n){let r=e.Xi.get(t)||vb.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,ir:o})))))}class CE{constructor(){this.activeTargetIds=vS}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class EE{constructor(){this.Hr=new CE,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new CE,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class kE{Yr(e){}shutdown(){}}class xE{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Qw("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Qw("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let TE=null;function NE(){return null===TE?TE=268435456+Math.round(2147483648*Math.random()):TE++,"0x"+TE.toString(16)}const IE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class DE{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const AE="WebChannelConnection";class PE extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const o=NE(),s=this.To(e,t);Qw("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={};return this.Eo(a,r,i),this.Ao(e,s,a,n).then((t=>(Qw("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw Zw("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t}))}vo(e,t,n,r,i,o){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Kw,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}To(e,t){const n=IE[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=NE();return new Promise(((o,s)=>{const a=new Uw;a.setWithCredentials(!0),a.listenOnce(Ow.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Rw.NO_ERROR:const t=a.getResponseJson();Qw(AE,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case Rw.TIMEOUT:Qw(AE,"RPC '".concat(e,"' ").concat(i," timed out")),s(new rb(nb.DEADLINE_EXCEEDED,"Request time out"));break;case Rw.HTTP_ERROR:const n=a.getStatus();if(Qw(AE,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(nb).indexOf(t)>=0?t:nb.UNKNOWN}(t.status);s(new rb(e,t.message))}else s(new rb(nb.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new rb(nb.UNAVAILABLE,"Connection failed."));break;default:Jw()}}finally{Qw(AE,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Qw(AE,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Ro(e,t,n){const r=NE(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=new uw,s=ay(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Vw({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Qw(AE,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=o.createWebChannel(c,a);let h=!1,d=!1;const f=new DE({ro:t=>{d?Qw(AE,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Qw(AE,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Qw(AE,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,jw.EventType.OPEN,(()=>{d||Qw(AE,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,jw.EventType.CLOSE,(()=>{d||(d=!0,Qw(AE,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.wo())})),p(u,jw.EventType.ERROR,(t=>{d||(d=!0,Zw(AE,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.wo(new rb(nb.UNAVAILABLE,"The operation could not be completed")))})),p(u,jw.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];eb(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){Qw(AE,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=eC[e];if(void 0!==t)return nC(t)}(t),i=s.message;void 0===n&&(n=nb.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.wo(new rb(n,i)),u.close()}else Qw(AE,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f._o(i)}})),p(s,Lw.STAT_EVENT,(t=>{t.stat===Fw?Qw(AE,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===zw&&Qw(AE,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function ME(){return"undefined"!=typeof document?document:null}function RE(e){return new SC(e,!0)}class OE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&Qw("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class LE{constructor(e,t,n,r,i,o,s,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new OE(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===nb.RESOURCE_EXHAUSTED?(Xw(t.toString()),Xw("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===nb.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)}),(t=>{e((()=>{const e=new rb(nb.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)}))}))}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((e=>{n((()=>this.tu(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return Qw("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.Fo===e?t():(Qw("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class FE extends LE{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Jw()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(eb(void 0===t||"string"==typeof t),Hb.fromBase64String(t||"")):(eb(void 0===t||t instanceof Uint8Array),Hb.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?nb.UNKNOWN:nC(e.code);return new rb(t,e.message||"")}(s);n=new pC(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=AC(e,r.document.name),o=TC(r.document.updateTime),s=r.document.createTime?TC(r.document.createTime):vb.min(),a=new g_({mapValue:{fields:r.document.fields}}),l=y_.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new dC(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=AC(e,r.document),o=r.readTime?TC(r.readTime):vb.min(),s=y_.newNoDocument(i,o),a=r.removedTargetIds||[];n=new dC([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=AC(e,r.document),o=r.removedTargetIds||[];n=new dC([],o,i,null)}else{if(!("filter"in t))return Jw();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new JS(r,i),s=e.targetId;n=new fC(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return vb.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?vb.min():t.readTime?TC(t.readTime):vb.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=MC(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=q_(r)?{documents:LC(e,r)}:{query:FC(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=kC(e,t.resumeToken);const r=CC(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(vb.min())>0){n.readTime=EC(e,t.snapshotVersion.toTimestamp());const r=CC(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Jw()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=MC(this.serializer),t.removeTarget=e,this.Wo(t)}}class zE extends LE{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(eb(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(eb(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?TC(e.updateTime):TC(t);return n.isEqual(vb.min())&&(n=TC(t)),new RS(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=TC(e.commitTime);return this.listener.cu(n,t)}return eb(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=MC(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof qS)n={update:OC(e,t.key,t.value)};else if(t instanceof GS)n={delete:DC(e,t.key)};else if(t instanceof HS)n={update:OC(e,t.key,t.data),updateMask:KC(t.fieldMask)};else{if(!(t instanceof QS))return Jw();n={verify:DC(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof xS)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof TS)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof IS)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof AS)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Jw()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:xC(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Jw()}(e,t.precondition)),n}(this.serializer,e)))};this.Wo(t)}}class VE extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new rb(nb.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,o]=r;return this.connection.Io(e,t,n,i,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===nb.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new rb(nb.UNKNOWN,e.toString())}))}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.vo(e,t,n,o,s,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===nb.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new rb(nb.UNKNOWN,e.toString())}))}terminate(){this.lu=!0}}class jE{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Xw(t),this.mu=!1):Qw("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class UE{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr((e=>{n.enqueueAndForget((async()=>{XE(this)&&(Qw("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=tb(e);t.vu.add(4),await qE(t),t.bu.set("Unknown"),t.vu.delete(4),await BE(t)}(this))}))})),this.bu=new jE(n,r)}}async function BE(e){if(XE(e))for(const t of e.Ru)await t(!0)}async function qE(e){for(const t of e.Ru)await t(!1)}function HE(e,t){const n=tb(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),QE(n)?GE(n):fk(n).Ko()&&KE(n,t))}function WE(e,t){const n=tb(e),r=fk(n);n.Au.delete(t),r.Ko()&&YE(n,t),0===n.Au.size&&(r.Ko()?r.jo():XE(n)&&n.bu.set("Unknown"))}function KE(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(vb.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}fk(e).su(t)}function YE(e,t){e.Vu.qt(t),fk(e).iu(t)}function GE(e){e.Vu=new mC({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),fk(e).start(),e.bu.gu()}function QE(e){return XE(e)&&!fk(e).Uo()&&e.Au.size>0}function XE(e){return 0===tb(e).vu.size}function ZE(e){e.Vu=void 0}async function $E(e){e.Au.forEach(((t,n)=>{KE(e,t)}))}async function JE(e,t){ZE(e),QE(e)?(e.bu.Iu(t),GE(e)):e.bu.set("Unknown")}async function ek(e,t,n){if(e.bu.set("Online"),t instanceof pC&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){Qw("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await tk(e,n)}else if(t instanceof dC?e.Vu.Ht(t):t instanceof fC?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(vb.min()))try{const t=await vE(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(Hb.EMPTY_BYTE_STRING,r.snapshotVersion)),YE(e,t);const i=new GC(r.target,t,n,r.sequenceNumber);KE(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Qw("RemoteStore","Failed to raise snapshot:",t),await tk(e,t)}}async function tk(e,t,n){if(!Db(t))throw t;e.vu.add(1),await qE(e),e.bu.set("Offline"),n||(n=()=>vE(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Qw("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await BE(e)}))}function nk(e,t){return t().catch((n=>tk(e,n,t)))}async function rk(e){const t=tb(e),n=pk(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;ik(t);)try{const e=await bE(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,ok(t,e)}catch(e){await tk(t,e)}sk(t)&&ak(t)}function ik(e){return XE(e)&&e.Eu.length<10}function ok(e,t){e.Eu.push(t);const n=pk(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function sk(e){return XE(e)&&!pk(e).Uo()&&e.Eu.length>0}function ak(e){pk(e).start()}async function lk(e){pk(e).hu()}async function ck(e){const t=pk(e);for(const n of e.Eu)t.uu(n.mutations)}async function uk(e,t,n){const r=e.Eu.shift(),i=ZS.from(r,t,n);await nk(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await rk(e)}async function hk(e,t){t&&pk(e).ou&&await async function(e,t){if(function(e){switch(e){default:return Jw();case nb.CANCELLED:case nb.UNKNOWN:case nb.DEADLINE_EXCEEDED:case nb.RESOURCE_EXHAUSTED:case nb.INTERNAL:case nb.UNAVAILABLE:case nb.UNAUTHENTICATED:return!1;case nb.INVALID_ARGUMENT:case nb.NOT_FOUND:case nb.ALREADY_EXISTS:case nb.PERMISSION_DENIED:case nb.FAILED_PRECONDITION:case nb.ABORTED:case nb.OUT_OF_RANGE:case nb.UNIMPLEMENTED:case nb.DATA_LOSS:return!0}}(n=t.code)&&n!==nb.ABORTED){const n=e.Eu.shift();pk(e).Qo(),await nk(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await rk(e)}var n}(e,t),sk(e)&&ak(e)}async function dk(e,t){const n=tb(e);n.asyncQueue.verifyOperationInProgress(),Qw("RemoteStore","RemoteStore received new credentials");const r=XE(n);n.vu.add(3),await qE(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await BE(n)}function fk(e){return e.Su||(e.Su=function(e,t,n){const r=tb(e);return r.fu(),new FE(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:$E.bind(null,e),ao:JE.bind(null,e),nu:ek.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Qo(),QE(e)?GE(e):e.bu.set("Unknown")):(await e.Su.stop(),ZE(e))}))),e.Su}function pk(e){return e.Du||(e.Du=function(e,t,n){const r=tb(e);return r.fu(),new zE(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:lk.bind(null,e),ao:hk.bind(null,e),au:ck.bind(null,e),cu:uk.bind(null,e)}),e.Ru.push((async t=>{t?(e.Du.Qo(),await rk(e)):(await e.Du.stop(),e.Eu.length>0&&(Qw("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))}))),e.Du}class gk{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ib,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new gk(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new rb(nb.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mk(e,t){if(Xw("AsyncQueue","".concat(t,": ").concat(e)),Db(e))return new rb(nb.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class yk{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Cb.comparator(t.key,n.key):(e,t)=>Cb.comparator(e.key,t.key),this.keyedMap=uS(),this.sortedSet=new Fb(this.comparator)}static emptySet(e){return new yk(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yk))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new yk;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class vk{constructor(){this.Cu=new Fb(Cb.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Jw():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class wk{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new wk(e,t,yk.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eS(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class bk{constructor(){this.Nu=void 0,this.listeners=[]}}class _k{constructor(){this.queries=new sS((e=>tS(e)),eS),this.onlineState="Unknown",this.ku=new Set}}async function Sk(e,t){const n=tb(e),r=t.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new bk),i)try{o.Nu=await n.onListen(r)}catch(e){const n=mk(e,"Initialization of query '".concat(nS(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,o),o.listeners.push(t),t.Mu(n.onlineState),o.Nu&&t.$u(o.Nu)&&xk(n)}async function Ck(e,t){const n=tb(e),r=t.query;let i=!1;const o=n.queries.get(r);if(o){const e=o.listeners.indexOf(t);e>=0&&(o.listeners.splice(e,1),i=0===o.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Ek(e,t){const n=tb(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&xk(n)}function kk(e,t,n){const r=tb(e),i=r.queries.get(t);if(i)for(const o of i.listeners)o.onError(n);r.queries.delete(t)}function xk(e){e.ku.forEach((e=>{e.next()}))}class Tk{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new wk(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=wk.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Nk{constructor(e){this.key=e}}class Ik{constructor(e){this.key=e}}class Dk{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=yS(),this.mutatedKeys=yS(),this.tc=iS(e),this.ec=new yk(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new vk,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=rS(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.rc(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.tc(u,a)>0||l&&this.tc(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(s=!0)),f&&(u?(o=o.add(u),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:o,ic:n,zi:s,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Jw()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc))),this.oc(n);const o=t?this.uc():[],s=0===this.Zu.size&&this.current?1:0,a=s!==this.Xu;return this.Xu=s,0!==i.length||a?{snapshot:new wk(this.query,e.ec,r,i,e.mutatedKeys,0===s,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new vk,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((e=>this.Yu=this.Yu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Yu=this.Yu.delete(e))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=yS(),this.ec.forEach((e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))}));const t=[];return e.forEach((e=>{this.Zu.has(e)||t.push(new Ik(e))})),this.Zu.forEach((n=>{e.has(n)||t.push(new Nk(n))})),t}hc(e){this.Yu=e.ir,this.Zu=yS();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return wk.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Ak{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Pk{constructor(e){this.key=e,this.fc=!1}}class Mk{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new sS((e=>tS(e)),eS),this._c=new Map,this.mc=new Set,this.gc=new Fb(Cb.comparator),this.yc=new Map,this.Ic=new oE,this.Tc={},this.Ec=new Map,this.Ac=JC.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Rk(e,t){const n=function(e){const t=tb(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Fk.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zk.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Vk.bind(null,t),t.dc.nu=Ek.bind(null,t.eventManager),t.dc.Pc=kk.bind(null,t.eventManager),t}(e);let r,i;const o=n.wc.get(t);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.lc();else{const e=await function(e,t){const n=tb(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Bs.getTargetData(e,t).next((i=>i?(r=i,Ib.resolve(r)):n.Bs.allocateTargetId(e).next((i=>(r=new GC(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}(n.localStore,Z_(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await async function(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await SE(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.sc(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o);return Kk(e,t.targetId,s.cc),s.snapshot}(e,t,n,r);const o=await SE(e.localStore,t,!0),s=new Dk(t,o.ir),a=s.sc(o.documents),l=hC.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(a,e.isPrimaryClient,l);Kk(e,n,c.cc);const u=new Ak(t,n,s);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}(n,t,r,"current"===o,e.resumeToken),n.isPrimaryClient&&HE(n.remoteStore,e)}return i}async function Ok(e,t){const n=tb(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter((e=>!eS(e,t)))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await _E(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),WE(n.remoteStore,r.targetId),Hk(n,r.targetId)})).catch(Nb)):(Hk(n,r.targetId),await _E(n.localStore,r.targetId,!0))}async function Lk(e,t,n){const r=function(e){const t=tb(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=jk.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Uk.bind(null,t),t}(e);try{const e=await function(e,t){const n=tb(e),r=yb.now(),i=t.reduce(((e,t)=>e.add(t.key)),yS());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=lS(),l=yS();return n.Zi.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=US(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new HS(e.key,t,m_(t.value.mapValue),OS.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:hS(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new Fb(gb)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Qk(r,e.changes),await rk(r.remoteStore)}catch(e){const t=mk(e,"Failed to persist write");n.reject(t)}}async function Fk(e,t){const n=tb(e);try{const e=await wE(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.yc.get(t);r&&(eb(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?eb(r.fc):e.removedDocuments.size>0&&(eb(r.fc),r.fc=!1))})),await Qk(n,e,t)}catch(e){await Nb(e)}}function zk(e,t,n){const r=tb(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach(((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=tb(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)})),r&&xk(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Vk(e,t,n){const r=tb(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),o=i&&i.key;if(o){let e=new Fb(Cb.comparator);e=e.insert(o,y_.newNoDocument(o,vb.min()));const n=yS().add(o),i=new uC(vb.min(),new Map,new Fb(gb),e,n);await Fk(r,i),r.gc=r.gc.remove(o),r.yc.delete(t),Gk(r)}else await _E(r.localStore,t,!1).then((()=>Hk(r,t,n))).catch(Nb)}async function jk(e,t){const n=tb(e),r=t.batch.batchId;try{const e=await function(e,t){const n=tb(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=Ib.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);eb(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=yS();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);qk(n,r,null),Bk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qk(n,e)}catch(e){await Nb(e)}}async function Uk(e,t,n){const r=tb(e);try{const e=await function(e,t){const n=tb(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(eb(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);qk(r,t,n),Bk(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Qk(r,e)}catch(n){await Nb(n)}}function Bk(e,t){(e.Ec.get(t)||[]).forEach((e=>{e.resolve()})),e.Ec.delete(t)}function qk(e,t,n){const r=tb(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function Hk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((t=>{e.Ic.containsKey(t)||Wk(e,t)}))}function Wk(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(WE(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),Gk(e))}function Kk(e,t,n){for(const r of n)r instanceof Nk?(e.Ic.addReference(r.key,t),Yk(e,r)):r instanceof Ik?(Qw("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||Wk(e,r.key)):Jw()}function Yk(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Qw("SyncEngine","New document in limbo: "+n),e.mc.add(r),Gk(e))}function Gk(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new Cb(bb.fromString(t)),r=e.Ac.next();e.yc.set(r,new Pk(n)),e.gc=e.gc.insert(n,r),HE(e.remoteStore,new GC(Z_(W_(n.path)),r,"TargetPurposeLimboResolution",Ab.ct))}}async function Qk(e,t,n){const r=tb(e),i=[],o=[],s=[];r.wc.isEmpty()||(r.wc.forEach(((e,a)=>{s.push(r.Rc(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=pE.Li(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.dc.nu(i),await async function(e,t){const n=tb(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Ib.forEach(t,(t=>Ib.forEach(t.Fi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Ib.forEach(t.Bi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Db(e))throw e;Qw("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,o))}async function Xk(e,t){const n=tb(e);if(!n.currentUser.isEqual(t)){Qw("SyncEngine","User change. New user:",t.toKey());const e=await yE(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach((e=>{e.forEach((e=>{e.reject(new rb(nb.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Qk(n,e.er)}}function Zk(e,t){const n=tb(e),r=n.yc.get(t);if(r&&r.fc)return yS().add(r.key);{let e=yS();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}class $k{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=RE(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function(e,t,n,r){return new mE(e,t,n,r)}(this.persistence,new gE,e.initialUser,this.serializer)}createPersistence(e){return new hE(fE.zs,this.serializer)}createSharedClientState(e){return new EE}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Jk{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>zk(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xk.bind(null,this.syncEngine),await async function(e,t){const n=tb(e);t?(n.vu.delete(2),await BE(n)):t||(n.vu.add(2),await qE(n),n.bu.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new _k}createDatastore(e){const t=RE(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new PE(r));var r;return function(e,t,n,r){return new VE(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>zk(this.syncEngine,e,0),o=xE.D()?new xE:new kE,new UE(t,n,r,i,o);var t,n,r,i,o}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new Mk(e,t,n,r,i,o);return s&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=tb(e);Qw("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await qE(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class ex{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Xw("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class tx{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ww.UNAUTHENTICATED,this.clientId=pb.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Qw("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Qw("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new rb(nb.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ib;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(dM){const n=mk(dM,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function nx(e,t){e.asyncQueue.verifyOperationInProgress(),Qw("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await yE(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function rx(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Qw("FirestoreClient","Using user provided OfflineComponentProvider");try{await nx(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(e){return"FirebaseError"===e.name?e.code===nb.FAILED_PRECONDITION||e.code===nb.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(r))throw r;Zw("Error using user provided cache. Falling back to memory cache: "+r),await nx(e,new $k)}}else Qw("FirestoreClient","Using default OfflineComponentProvider"),await nx(e,new $k);return e._offlineComponents}(e);Qw("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>dk(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>dk(t.remoteStore,n))),e._onlineComponents=t}async function ix(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Qw("FirestoreClient","Using user provided OnlineComponentProvider"),await rx(e,e._uninitializedComponentsProvider._online)):(Qw("FirestoreClient","Using default OnlineComponentProvider"),await rx(e,new Jk))),e._onlineComponents}async function ox(e){const t=await ix(e),n=t.eventManager;return n.onListen=Rk.bind(null,t.syncEngine),n.onUnlisten=Ok.bind(null,t.syncEngine),n}function sx(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const ax=new Map;function lx(e,t,n){if(!n)throw new rb(nb.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function cx(e){if(!Cb.isDocumentKey(e))throw new rb(nb.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ux(e){if(Cb.isDocumentKey(e))throw new rb(nb.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function hx(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Jw()}function dx(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new rb(nb.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hx(e);throw new rb(nb.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class fx{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new rb(nb.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new rb(nb.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new rb(nb.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sx(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new rb(nb.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new rb(nb.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new rb(nb.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class px{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new rb(nb.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new rb(nb.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fx(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new sb;switch(e.type){case"firstParty":return new ub(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new rb(nb.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ax.get(e);t&&(Qw("ComponentProvider","Removing Datastore"),ax.delete(e),t.terminate())}(this),Promise.resolve()}}class gx{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yx(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gx(this.firestore,e,this._key)}}class mx{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new mx(this.firestore,e,this._query)}}class yx extends mx{constructor(e,t,n){super(e,t,W_(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gx(this.firestore,null,new Cb(e))}withConverter(e){return new yx(this.firestore,e,this._path)}}function vx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=sp(e),lx("collection","path",t),e instanceof px){const n=bb.fromString(t,...r);return ux(n),new yx(e,null,n)}{if(!(e instanceof gx||e instanceof yx))throw new rb(nb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(bb.fromString(t,...r));return ux(n),new yx(e.firestore,null,n)}}function wx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=sp(e),1===arguments.length&&(t=pb.A()),lx("doc","path",t),e instanceof px){const n=bb.fromString(t,...r);return cx(n),new gx(e,null,new Cb(n))}{if(!(e instanceof gx||e instanceof yx))throw new rb(nb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(bb.fromString(t,...r));return cx(n),new gx(e.firestore,e instanceof yx?e.converter:null,new Cb(n))}}class bx{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new OE(this,"async_queue_retry"),this.Xc=()=>{const e=ME();e&&Qw("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=ME();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=ME();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new ib;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Db(e))throw e;Qw("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Xw("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=gk.createAndSchedule(this,e,t,n,(e=>this.na(e)));return this.zc.push(r),r}Zc(){this.Wc&&Jw()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function _x(e){return function(e){if("object"!=typeof e||null===e)return!1;const t=e;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(e)}class Sx extends px{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new bx,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ex(this),this._firestoreClient.terminate()}}function Cx(e){return e._firestoreClient||Ex(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ex(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new $b(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,sx(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new tx(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class kx{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kx(Hb.fromBase64String(e))}catch(e){throw new rb(nb.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new kx(Hb.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class xx{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new rb(nb.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sb(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Tx{constructor(e){this._methodName=e}}class Nx{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new rb(nb.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new rb(nb.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return gb(this._lat,e._lat)||gb(this._long,e._long)}}const Ix=/^__.*__$/;class Dx{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new HS(e,this.data,this.fieldMask,t,this.fieldTransforms):new qS(e,this.data,t,this.fieldTransforms)}}class Ax{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new HS(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Px(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Jw()}}class Mx{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Mx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Wx(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Px(this.ca)&&Ix.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Rx{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||RE(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Mx({ca:e,methodName:t,ga:n,path:Sb.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ox(e){const t=e._freezeSettings(),n=RE(e._databaseId);return new Rx(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Lx(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.ya(o.merge||o.mergeFields?2:0,t,n,i);Ux("Data must be an object, but it was:",s,r);const a=Vx(r,s);let l,c;if(o.merge)l=new Bb(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Bx(t,r,n);if(!s.contains(i))throw new rb(nb.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Kx(e,i)||e.push(i)}l=new Bb(e),c=s.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=s.fieldTransforms;return new Dx(new g_(a),l,c)}class Fx extends Tx{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fx}}function zx(e,t){if(jx(e=sp(e)))return Ux("Unsupported field value:",t,e),Vx(e,t);if(e instanceof Tx)return function(e,t){if(!Px(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=zx(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=sp(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return _S(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=yb.fromDate(e);return{timestampValue:EC(t.serializer,n)}}if(e instanceof yb){const n=new yb(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:EC(t.serializer,n)}}if(e instanceof Nx)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof kx)return{bytesValue:kC(t.serializer,e._byteString)};if(e instanceof gx){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:NC(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(hx(e)))}(e,t)}function Vx(e,t){const n={};return Lb(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ob(e,((e,r)=>{const i=zx(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function jx(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof yb||e instanceof Nx||e instanceof kx||e instanceof gx||e instanceof Tx)}function Ux(e,t,n){if(!jx(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=hx(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function Bx(e,t,n){if((t=sp(t))instanceof xx)return t._internalPath;if("string"==typeof t)return Hx(e,t);throw Wx("Field path arguments must be of type string or ",e,!1,void 0,n)}const qx=new RegExp("[~\\*/\\[\\]]");function Hx(e,t,n){if(t.search(qx)>=0)throw Wx("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new xx(...t.split("."))._internalPath}catch(r){throw Wx("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Wx(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new rb(nb.INVALID_ARGUMENT,a+e+l)}function Kx(e,t){return e.some((e=>e.isEqual(t)))}class Yx{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new gx(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Gx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Qx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Gx extends Yx{data(){return super.data()}}function Qx(e,t){return"string"==typeof t?Hx(e,t):t instanceof xx?t._internalPath:t._delegate._internalPath}function Xx(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new rb(nb.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zx{}class $x extends Zx{}function Jx(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof Zx&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof tT)).length,n=e.filter((e=>e instanceof eT)).length;if(t>1||t>0&&n>0)throw new rb(nb.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class eT extends $x{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new eT(e,t,n)}_apply(e){const t=this._parse(e);return oT(e._query,t),new mx(e.firestore,e.converter,$_(e._query,t))}_parse(e){const t=Ox(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new rb(nb.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){iT(s,o);const t=[];for(const n of s)t.push(rT(r,e,n));a={arrayValue:{values:t}}}else a=rT(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||iT(s,o),a=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return zx(n,e.ya(r?4:3,t))}(n,"where",s,"in"===o||"not-in"===o);return E_.create(i,o,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class tT extends Zx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new tT(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:k_.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)oT(n,i),n=$_(n,i)}(e._query,t),new mx(e.firestore,e.converter,$_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class nT extends $x{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new nT(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new rb(nb.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new rb(nb.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new __(t,n);return function(e,t){if(null===Y_(e)){const n=G_(e);null!==n&&sT(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new mx(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new H_(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function rT(e,t,n){if("string"==typeof(n=sp(n))){if(""===n)throw new rb(nb.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Q_(t)&&-1!==n.indexOf("/"))throw new rb(nb.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(bb.fromString(n));if(!Cb.isDocumentKey(r))throw new rb(nb.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return l_(e,new Cb(r))}if(n instanceof gx)return l_(e,n._key);throw new rb(nb.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(hx(n),"."))}function iT(e,t){if(!Array.isArray(e)||0===e.length)throw new rb(nb.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function oT(e,t){if(t.isInequality()){const n=G_(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new rb(nb.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));const i=Y_(e);null!==i&&sT(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new rb(nb.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new rb(nb.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function sT(e,t,n){if(!n.isEqual(t))throw new rb(nb.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}class aT{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(t_(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yb(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gb(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Jw()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ob(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Nx(Yb(e.latitude),Yb(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Xb(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Zb(e));default:return null}}convertTimestamp(e){const t=Kb(e);return new yb(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=bb.fromString(e);eb(YC(n));const r=new Jb(n.get(1),n.get(3)),i=new Cb(n.popFirst(5));return r.isEqual(t)||Xw("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}class lT{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cT extends Yx{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new uT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Qx("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class uT extends cT{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class hT{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new lT(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new uT(this._firestore,this._userDataWriter,n.key,n,new lT(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new rb(nb.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new uT(e._firestore,e._userDataWriter,n.doc.key,n.doc,new lT(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new uT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new lT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:dT(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function dT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jw()}}function fT(e){e=dx(e,gx);const t=dx(e.firestore,Sx);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ib;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new ex({next:o=>{t.enqueueAndForget((()=>Ck(e,s)));const a=o.docs.has(n);!a&&o.fromCache?i.reject(new rb(nb.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new rb(nb.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new Tk(W_(n.path),o,{includeMetadataChanges:!0,Ku:!0});return Sk(e,s)}(await ox(e),e.asyncQueue,t,n,r))),r.promise}(Cx(t),e._key).then((n=>wT(t,e,n)))}class pT extends aT{constructor(e){super(),this.firestore=e}convertBytes(e){return new kx(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gx(this.firestore,null,t)}}function gT(e){e=dx(e,mx);const t=dx(e.firestore,Sx),n=Cx(t),r=new pT(t);return Xx(e._query),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ib;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new ex({next:n=>{t.enqueueAndForget((()=>Ck(e,s))),n.fromCache&&"server"===r.source?i.reject(new rb(nb.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new Tk(n,o,{includeMetadataChanges:!0,Ku:!0});return Sk(e,s)}(await ox(e),e.asyncQueue,t,n,r))),r.promise}(n,e._query).then((n=>new hT(t,r,e,n)))}function mT(e,t,n){e=dx(e,gx);const r=dx(e.firestore,Sx),i=function(e,t){let n;return n=e?e.toFirestore(t):t,n}(e.converter,t);return vT(r,[Lx(Ox(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,OS.none())])}function yT(e,t,n){e=dx(e,gx);const r=dx(e.firestore,Sx),i=Ox(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return o="string"==typeof(t=sp(t))||t instanceof xx?function(e,t,n,r,i,o){const s=e.ya(1,t,n),a=[Bx(t,r,n)],l=[i];if(o.length%2!=0)throw new rb(nb.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<o.length;d+=2)a.push(Bx(t,o[d])),l.push(o[d+1]);const c=[],u=g_.empty();for(let d=a.length-1;d>=0;--d)if(!Kx(c,a[d])){const e=a[d];let t=l[d];t=sp(t);const n=s.da(e);if(t instanceof Fx)c.push(e);else{const r=zx(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Bb(c);return new Ax(u,h,s.fieldTransforms)}(i,"updateDoc",e._key,t,n,a):function(e,t,n,r){const i=e.ya(1,t,n);Ux("Data must be an object, but it was:",i,r);const o=[],s=g_.empty();Ob(r,((e,r)=>{const a=Hx(t,e,n);r=sp(r);const l=i.da(a);if(r instanceof Fx)o.push(a);else{const e=zx(r,l);null!=e&&(o.push(a),s.set(a,e))}}));const a=new Bb(o);return new Ax(s,a,i.fieldTransforms)}(i,"updateDoc",e._key,t),vT(r,[o.toMutation(e._key,OS.exists(!0))])}function vT(e,t){return function(e,t){const n=new ib;return e.asyncQueue.enqueueAndForget((async()=>Lk(await function(e){return ix(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}(Cx(e),t)}function wT(e,t,n){const r=n.docs.get(t._key),i=new pT(e);return new cT(e,i,t._key,r,new lT(n.hasPendingWrites,n.fromCache),t.converter)}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Kw=e}(mg),dg(new ap("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new Sx(new lb(e.getProvider("auth-internal")),new db(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new rb(nb.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jb(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),wg(Hw,"3.13.0",e),wg(Hw,"3.13.0","esm2017")}();const bT="@firebase/database",_T="0.14.4";let ST="";class CT{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Qf(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Gf(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class ET{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Zf(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const kT=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new CT(t)}}catch(dM){}return new ET},xT=kT("localStorage"),TT=kT("sessionStorage"),NT=new mp("@firebase/database"),IT=function(){let e=1;return function(){return e++}}(),DT=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Nf(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new rp;n.update(t);const r=n.digest();return Af.encodeByteArray(r)},AT=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=AT.apply(null,n):e+="object"===typeof n?Qf(n):n,e+=" "}return e};let PT=null,MT=!0;const RT=function(){if(!0===MT&&(MT=!1,null===PT&&!0===TT.get("logging_enabled")&&(Nf(!0,"Can't turn on custom loggers persistently."),NT.logLevel=hp.VERBOSE,PT=NT.log.bind(NT))),PT){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=AT.apply(null,t);PT(r)}},OT=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];RT(e,...n)}},LT=function(){const e="FIREBASE INTERNAL ERROR: "+AT(...arguments);NT.error(e)},FT=function(){const e="FIREBASE FATAL ERROR: ".concat(AT(...arguments));throw NT.error(e),new Error(e)},zT=function(){const e="FIREBASE WARNING: "+AT(...arguments);NT.warn(e)},VT=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},jT="[MIN_NAME]",UT="[MAX_NAME]",BT=function(e,t){if(e===t)return 0;if(e===jT||t===UT)return-1;if(t===jT||e===UT)return 1;{const n=XT(e),r=XT(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},qT=function(e,t){return e===t?0:e<t?-1:1},HT=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Qf(t))},WT=function(e){if("object"!==typeof e||null===e)return Qf(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=Qf(t[r]),n+=":",n+=WT(e[t[r]]);return n+="}",n},KT=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function YT(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const GT=function(e){Nf(!VT(e),"Invalid JSON number");const t=1023;let n,r,i,o,s;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=o+t,i=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(s=52;s;s-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(s=0;s<64;s+=8){let e=parseInt(l.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const QT=new RegExp("^-?(0*)\\d{1,10}$"),XT=function(e){if(QT.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},ZT=function(e){try{e()}catch(dM){setTimeout((()=>{const t=dM.stack||"";throw zT("Exception was thrown by user callback.",t),dM}),Math.floor(0))}},$T=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class JT{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){zT('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class eN{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(RT("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',zT(e)}}class tN{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}tN.OWNER="owner";const nN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,rN="ac",iN="websocket",oN="long_polling";class sN{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xT.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&xT.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function aN(e,t,n){let r;if(Nf("string"===typeof t,"typeof type must == string"),Nf("object"===typeof n,"typeof params must == object"),t===iN)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==oN)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return YT(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class lN{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Zf(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Lf(this.counters_)}}const cN={},uN={};function hN(e){const t=e.toString();return cN[t]||(cN[t]=new lN),cN[t]}class dN{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&ZT((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const fN="start";class pN{constructor(e,t,n,r,i,o,s){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=OT(e),this.stats_=hN(t),this.urlFn=e=>(this.appCheckToken&&(e[rN]=this.appCheckToken),aN(t,oN,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new dN(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new gN((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o,s,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===fN)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[fN]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[rN]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&nN.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){pN.forceAllow_=!0}static forceDisallow(){pN.forceDisallow_=!0}static isAvailable(){return!!pN.forceAllow_||!pN.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI)}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Qf(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Mf(t),r=KT(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Qf(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class gN{constructor(e,t,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=IT(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=gN.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(dM){RT("frame writing exception"),dM.stack&&RT(dM.stack),RT(dM)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||RT("No IE domain setting required")}catch(dM){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{RT("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(dM){}}),Math.floor(1))}}let mN=null;"undefined"!==typeof MozWebSocket?mN=MozWebSocket:"undefined"!==typeof WebSocket&&(mN=WebSocket);class yN{constructor(e,t,n,r,i,o,s){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=OT(this.connId),this.stats_=hN(t),this.connURL=yN.connectionURL_(t,o,s,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const o={v:"5"};return"undefined"!==typeof location&&location.hostname&&nN.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o[rN]=r),i&&(o.p=i),aN(e,iN,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xT.set("previous_websocket_failure",!0);try{let e;this.mySock=new mN(this.connURL,[],e)}catch(dM){this.log_("Error instantiating WebSocket.");const t=dM.message||dM.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){yN.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==mN&&!yN.forceDisallow_}static previouslyFailed(){return xT.isInMemoryStorage||!0===xT.get("previous_websocket_failure")}markConnectionHealthy(){xT.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=Gf(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Nf(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=Qf(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=KT(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(dM){this.log_("Exception thrown from WebSocket.send():",dM.message||dM.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}yN.responsesRequiredToBeHealthy=2,yN.healthyTimeout=3e4;class vN{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[pN,yN]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=yN&&yN.isAvailable();let n=t&&!yN.previouslyFailed();if(e.webSocketOnly&&(t||zT("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[yN];else{const e=this.transports_=[];for(const t of vN.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);vN.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}vN.globalTransportInitialized_=!1;class wN{constructor(e,t,n,r,i,o,s,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=OT("c:"+this.id+":"),this.transportManager_=new vN(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=$T((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=HT("t",e),n=HT("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=HT("t",e),n=HT("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=HT("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?LT("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):LT("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&zT("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),$T((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$T((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xT.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class bN{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class _N{constructor(e){this.allowedEvents_=e,this.listeners_={},Nf(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Nf(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class SN extends _N{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Hf()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new SN}getInitialEvent(e){return Nf("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class CN{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function EN(){return new CN("")}function kN(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function xN(e){return e.pieces_.length-e.pieceNum_}function TN(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new CN(e.pieces_,t)}function NN(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function IN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function DN(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new CN(t,0)}function AN(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof CN)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new CN(n,0)}function PN(e){return e.pieceNum_>=e.pieces_.length}function MN(e,t){const n=kN(e),r=kN(t);if(null===n)return t;if(n===r)return MN(TN(e),TN(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function RN(e,t){const n=IN(e,0),r=IN(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=BT(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function ON(e,t){if(xN(e)!==xN(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function LN(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(xN(e)>xN(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class FN{constructor(e,t){this.errorPrefix_=t,this.parts_=IN(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=op(this.parts_[n]);zN(this)}}function zN(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+VN(e))}function VN(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class jN extends _N{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new jN}getInitialEvent(e){return Nf("visible"===e,"Unknown event type: "+e),[this.visible_]}}const UN=1e3;class BN extends bN{constructor(e,t,n,r,i,o,s,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=s,this.authOverride_=a,this.id=BN.nextPersistentConnectionId_++,this.log_=OT("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=UN,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");jN.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&SN.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Qf(i)),Nf(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Bf,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Nf(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Nf(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const o=i.d,s=i.s;BN.warnOnListenWarnings_(o,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==s&&this.removeListen_(n,r),e.onComplete&&e.onComplete(s,o))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&Zf(e,"w")){const n=$f(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();zT("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=Xf(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=Xf(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Nf(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Qf(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):LT("Unrecognized action received from server: "+Qf(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Nf(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=UN,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=UN,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=UN),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+BN.nextConnectionId_++,o=this.lastSessionId;let s=!1,a=null;const l=function(){a?a.close():(s=!0,r())},c=function(e){Nf(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[e,l]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);s?RT("getToken() completed but was canceled"):(RT("getToken() completed. Creating connection."),this.authToken_=e&&e.accessToken,this.appCheckToken_=l&&l.token,a=new wN(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(e=>{zT(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),o))}catch(e){this.log_("Failed to get token: "+e),s||(this.repoInfo_.nodeAdmin&&zT(e),l())}}}interrupt(e){RT("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){RT("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Jf(this.interruptReasons_)&&(this.reconnectDelay_=UN,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>WT(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new CN(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){RT("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){RT("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};e["sdk.js."+ST.replace(/\./g,"-")]=1,Hf()?e["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=SN.getInstance().currentlyOnline();return Jf(this.interruptReasons_)&&e}}BN.nextPersistentConnectionId_=0,BN.nextConnectionId_=0;class qN{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new qN(e,t)}}class HN{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new qN(jT,e),r=new qN(jT,t);return 0!==this.compare(n,r)}minPost(){return qN.MIN}}let WN;class KN extends HN{static get __EMPTY_NODE(){return WN}static set __EMPTY_NODE(e){WN=e}compare(e,t){return BT(e.name,t.name)}isDefinedOn(e){throw If("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return qN.MIN}maxPost(){return new qN(UT,WN)}makePost(e,t){return Nf("string"===typeof e,"KeyIndex indexValue must always be a string."),new qN(e,WN)}toString(){return".key"}}const YN=new KN;class GN{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class QN{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:QN.RED,this.left=null!=r?r:XN.EMPTY_NODE,this.right=null!=i?i:XN.EMPTY_NODE}copy(e,t,n,r,i){return new QN(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return XN.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return XN.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,QN.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,QN.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}QN.RED=!0,QN.BLACK=!1;class XN{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:XN.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new XN(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,QN.BLACK,null,null))}remove(e){return new XN(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,QN.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new GN(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new GN(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new GN(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new GN(this.root_,null,this.comparator_,!0,e)}}function ZN(e,t){return BT(e.name,t.name)}function $N(e,t){return BT(e,t)}let JN;XN.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new QN(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const eI=function(e){return"number"===typeof e?"number:"+GT(e):"string:"+e},tI=function(e){if(e.isLeafNode()){const t=e.val();Nf("string"===typeof t||"number"===typeof t||"object"===typeof t&&Zf(t,".sv"),"Priority must be a string or number.")}else Nf(e===JN||e.isEmpty(),"priority of unexpected type.");Nf(e===JN||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let nI,rI,iI;class oI{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oI.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Nf(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),tI(this.priorityNode_)}static set __childrenNodeConstructor(e){nI=e}static get __childrenNodeConstructor(){return nI}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new oI(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:oI.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return PN(e)?this:".priority"===kN(e)?this.priorityNode_:oI.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:oI.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=kN(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Nf(".priority"!==n||1===xN(e),".priority must be the last token in a path"),this.updateImmediateChild(n,oI.__childrenNodeConstructor.EMPTY_NODE.updateChild(TN(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+eI(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?GT(this.value_):this.value_,this.lazyHash_=DT(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===oI.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof oI.__childrenNodeConstructor?-1:(Nf(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=oI.VALUE_TYPE_ORDER.indexOf(t),i=oI.VALUE_TYPE_ORDER.indexOf(n);return Nf(r>=0,"Unknown leaf type: "+t),Nf(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}oI.VALUE_TYPE_ORDER=["object","boolean","number","string"];const sI=new class extends HN{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?BT(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return qN.MIN}maxPost(){return new qN(UT,new oI("[PRIORITY-POST]",iI))}makePost(e,t){const n=rI(e);return new qN(t,new oI("[PRIORITY-POST]",n))}toString(){return".priority"}},aI=Math.log(2);class lI{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/aI,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const cI=function(e,t,n,r){e.sort(t);const i=function(t,r){const o=r-t;let s,a;if(0===o)return null;if(1===o)return s=e[t],a=n?n(s):s,new QN(a,s.node,QN.BLACK,null,null);{const l=parseInt(o/2,10)+t,c=i(t,l),u=i(l+1,r);return s=e[l],a=n?n(s):s,new QN(a,s.node,QN.BLACK,c,u)}},o=function(t){let r=null,o=null,s=e.length;const a=function(t,r){const o=s-t,a=s;s-=t;const c=i(o+1,a),u=e[o],h=n?n(u):u;l(new QN(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(o=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,QN.BLACK):(a(r,QN.BLACK),a(r,QN.RED))}return o}(new lI(e.length));return new XN(r||t,o)};let uI;const hI={};class dI{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Nf(hI&&sI,"ChildrenNode.ts has not been loaded"),uI=uI||new dI({".priority":hI},{".priority":sI}),uI}get(e){const t=$f(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof XN?t:null}hasIndex(e){return Zf(this.indexSet_,e.toString())}addIndex(e,t){Nf(e!==YN,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(qN.Wrap);let o,s=i.getNext();for(;s;)r=r||e.isDefinedOn(s.node),n.push(s),s=i.getNext();o=r?cI(n,e.getCompare()):hI;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=o,new dI(c,l)}addToIndexes(e,t){const n=ep(this.indexes_,((n,r)=>{const i=$f(this.indexSet_,r);if(Nf(i,"Missing index implementation for "+r),n===hI){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(qN.Wrap);let o=r.getNext();for(;o;)o.name!==e.name&&n.push(o),o=r.getNext();return n.push(e),cI(n,i.getCompare())}return hI}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new qN(e.name,r))),i.insert(e,e.node)}}));return new dI(n,this.indexSet_)}removeFromIndexes(e,t){const n=ep(this.indexes_,(n=>{if(n===hI)return n;{const r=t.get(e.name);return r?n.remove(new qN(e.name,r)):n}}));return new dI(n,this.indexSet_)}}let fI;class pI{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&tI(this.priorityNode_),this.children_.isEmpty()&&Nf(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return fI||(fI=new pI(new XN($N),null,dI.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fI}updatePriority(e){return this.children_.isEmpty()?this:new pI(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?fI:t}}getChild(e){const t=kN(e);return null===t?this:this.getImmediateChild(t).getChild(TN(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Nf(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new qN(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const o=r.isEmpty()?fI:this.priorityNode_;return new pI(r,o,i)}}updateChild(e,t){const n=kN(e);if(null===n)return t;{Nf(".priority"!==kN(e)||1===xN(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(TN(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(sI,((o,s)=>{t[o]=s.val(e),n++,i&&pI.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+eI(this.getPriority().val())+":"),this.forEachChild(sI,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":DT(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new qN(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new qN(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new qN(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,qN.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,qN.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===gI?-1:0}withIndex(e){if(e===YN||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new pI(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===YN||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(sI),n=t.getIterator(sI);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===YN?null:this.indexMap_.get(e.toString())}}pI.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const gI=new class extends pI{constructor(){super(new XN($N),pI.EMPTY_NODE,dI.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return pI.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(qN,{MIN:{value:new qN(jT,pI.EMPTY_NODE)},MAX:{value:new qN(UT,gI)}}),KN.__EMPTY_NODE=pI.EMPTY_NODE,oI.__childrenNodeConstructor=pI,JN=gI,function(e){iI=e}(gI);function mI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return pI.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Nf(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new oI(e,mI(t))}if(e instanceof Array){let n=pI.EMPTY_NODE;return YT(e,((t,r)=>{if(Zf(e,t)&&"."!==t.substring(0,1)){const e=mI(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(mI(t))}{const n=[];let r=!1;if(YT(e,((e,t)=>{if("."!==e.substring(0,1)){const i=mI(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new qN(e,i)))}})),0===n.length)return pI.EMPTY_NODE;const i=cI(n,ZN,(e=>e.name),$N);if(r){const e=cI(n,sI.getCompare());return new pI(i,mI(t),new dI({".priority":e},{".priority":sI}))}return new pI(i,mI(t),dI.Default)}}!function(e){rI=e}(mI);class yI extends HN{constructor(e){super(),this.indexPath_=e,Nf(!PN(e)&&".priority"!==kN(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?BT(e.name,t.name):i}makePost(e,t){const n=mI(e),r=pI.EMPTY_NODE.updateChild(this.indexPath_,n);return new qN(t,r)}maxPost(){const e=pI.EMPTY_NODE.updateChild(this.indexPath_,gI);return new qN(UT,e)}toString(){return IN(this.indexPath_,0).join("/")}}const vI=new class extends HN{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?BT(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return qN.MIN}maxPost(){return qN.MAX}makePost(e,t){const n=mI(e);return new qN(t,n)}toString(){return".value"}};function wI(e){return{type:"value",snapshotNode:e}}function bI(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function _I(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function SI(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class CI{constructor(e){this.index_=e}updateChild(e,t,n,r,i,o){Nf(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(_I(t,s)):Nf(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(bI(t,n)):o.trackChildChange(SI(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(sI,((e,r)=>{t.hasChild(e)||n.trackChildChange(_I(e,r))})),t.isLeafNode()||t.forEachChild(sI,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(SI(t,r,i))}else n.trackChildChange(bI(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?pI.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class EI{constructor(e){this.indexedFilter_=new CI(e.getIndex()),this.index_=e.getIndex(),this.startPost_=EI.getStartPost_(e),this.endPost_=EI.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,o){return this.matches(new qN(t,n))||(n=pI.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)}updateFullNode(e,t,n){t.isLeafNode()&&(t=pI.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(pI.EMPTY_NODE);const i=this;return t.forEachChild(sI,((e,t)=>{i.matches(new qN(e,t))||(r=r.updateImmediateChild(e,pI.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class kI{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new EI(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,o){return this.rangedFilter_.matches(new qN(t,n))||(n=pI.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=pI.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=pI.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(pI.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,pI.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let o;if(this.reverse_){const e=this.index_.getCompare();o=(t,n)=>e(n,t)}else o=this.index_.getCompare();const s=e;Nf(s.numChildren()===this.limit_,"");const a=new qN(t,n),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(s.hasChild(t)){const e=s.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||s.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:o(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(SI(t,n,e)),s.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(_I(t,e));const n=s.updateImmediateChild(t,pI.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(bI(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&o(l,a)>=0?(null!=i&&(i.trackChildChange(_I(l.name,l.node)),i.trackChildChange(bI(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(l.name,pI.EMPTY_NODE)):e}}class xI{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=sI}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Nf(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Nf(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:jT}hasEnd(){return this.endSet_}getIndexEndValue(){return Nf(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Nf(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:UT}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Nf(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===sI}copy(){const e=new xI;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function TI(e){const t={};if(e.isDefault())return t;let n;if(e.index_===sI?n="$priority":e.index_===vI?n="$value":e.index_===YN?n="$key":(Nf(e.index_ instanceof yI,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Qf(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=Qf(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+Qf(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=Qf(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+Qf(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function NI(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==sI&&(t.i=e.index_.toString()),t}class II extends bN{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=OT("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Nf(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=II.getListenId_(e,n),s={};this.listens_[o]=s;const a=TI(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),$f(this.listens_,o)===s){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=II.getListenId_(e,t);delete this.listens_[n]}get(e){const t=TI(e._queryParams),n=e._path.toString(),r=new Bf;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,o]=r;i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+function(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}(t);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=Gf(a.responseText)}catch(dM){zT("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&zT("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))}}class DI{constructor(){this.rootNode_=pI.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function AI(){return{value:null,children:new Map}}function PI(e,t,n){if(PN(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=kN(t);e.children.has(r)||e.children.set(r,AI());PI(e.children.get(r),t=TN(t),n)}}function MI(e,t){if(PN(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(sI,((t,n)=>{PI(e,new CN(t),n)})),MI(e,t)}}if(e.children.size>0){const n=kN(t);if(t=TN(t),e.children.has(n)){MI(e.children.get(n),t)&&e.children.delete(n)}return 0===e.children.size}return!0}function RI(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{RI(r,new CN(t.toString()+"/"+e),n)}))}class OI{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&YT(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class LI{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new OI(e);const n=1e4+2e4*Math.random();$T(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;YT(e,((e,r)=>{r>0&&Zf(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),$T(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var FI;function zI(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(FI||(FI={}));class VI{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=FI.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(PN(this.path)){if(null!=this.affectedTree.value)return Nf(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new CN(e));return new VI(EN(),t,this.revert)}}return Nf(kN(this.path)===e,"operationForChild called for unrelated child."),new VI(TN(this.path),this.affectedTree,this.revert)}}class jI{constructor(e,t){this.source=e,this.path=t,this.type=FI.LISTEN_COMPLETE}operationForChild(e){return PN(this.path)?new jI(this.source,EN()):new jI(this.source,TN(this.path))}}class UI{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=FI.OVERWRITE}operationForChild(e){return PN(this.path)?new UI(this.source,EN(),this.snap.getImmediateChild(e)):new UI(this.source,TN(this.path),this.snap)}}class BI{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=FI.MERGE}operationForChild(e){if(PN(this.path)){const t=this.children.subtree(new CN(e));return t.isEmpty()?null:t.value?new UI(this.source,EN(),t.value):new BI(this.source,EN(),t)}return Nf(kN(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new BI(this.source,TN(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class qI{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(PN(e))return this.isFullyInitialized()&&!this.filtered_;const t=kN(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class HI{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function WI(e,t,n,r,i,o){const s=r.filter((e=>e.type===n));s.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw If("Should only compare child_ events.");const r=new qN(t.childName,t.snapshotNode),i=new qN(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),s.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function KI(e,t){return{eventCache:e,serverCache:t}}function YI(e,t,n,r){return KI(new qI(t,n,r),e.serverCache)}function GI(e,t,n,r){return KI(e.eventCache,new qI(t,n,r))}function QI(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function XI(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let ZI;class $I{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(ZI||(ZI=new XN(qT)),ZI);this.value=e,this.children=t}static fromObject(e){let t=new $I(null);return YT(e,((e,n)=>{t=t.set(new CN(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:EN(),value:this.value};if(PN(e))return null;{const n=kN(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(TN(e),t);if(null!=i){return{path:AN(new CN(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(PN(e))return this;{const t=kN(e),n=this.children.get(t);return null!==n?n.subtree(TN(e)):new $I(null)}}set(e,t){if(PN(e))return new $I(t,this.children);{const n=kN(e),r=(this.children.get(n)||new $I(null)).set(TN(e),t),i=this.children.insert(n,r);return new $I(this.value,i)}}remove(e){if(PN(e))return this.children.isEmpty()?new $I(null):new $I(null,this.children);{const t=kN(e),n=this.children.get(t);if(n){const r=n.remove(TN(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new $I(null):new $I(this.value,i)}return this}}get(e){if(PN(e))return this.value;{const t=kN(e),n=this.children.get(t);return n?n.get(TN(e)):null}}setTree(e,t){if(PN(e))return t;{const n=kN(e),r=(this.children.get(n)||new $I(null)).setTree(TN(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new $I(this.value,i)}}fold(e){return this.fold_(EN(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(AN(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,EN(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(PN(e))return null;{const r=kN(e),i=this.children.get(r);return i?i.findOnPath_(TN(e),AN(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,EN(),t)}foreachOnPath_(e,t,n){if(PN(e))return this;{this.value&&n(t,this.value);const r=kN(e),i=this.children.get(r);return i?i.foreachOnPath_(TN(e),AN(t,r),n):new $I(null)}}foreach(e){this.foreach_(EN(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(AN(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class JI{constructor(e){this.writeTree_=e}static empty(){return new JI(new $I(null))}}function eD(e,t,n){if(PN(t))return new JI(new $I(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const s=MN(i,t);return o=o.updateChild(s,n),new JI(e.writeTree_.set(i,o))}{const r=new $I(n),i=e.writeTree_.setTree(t,r);return new JI(i)}}}function tD(e,t,n){let r=e;return YT(n,((e,n)=>{r=eD(r,AN(t,e),n)})),r}function nD(e,t){if(PN(t))return JI.empty();{const n=e.writeTree_.setTree(t,new $I(null));return new JI(n)}}function rD(e,t){return null!=iD(e,t)}function iD(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(MN(n.path,t)):null}function oD(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(sI,((e,n)=>{t.push(new qN(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new qN(e,n.value))})),t}function sD(e,t){if(PN(t))return e;{const n=iD(e,t);return new JI(null!=n?new $I(n):e.writeTree_.subtree(t))}}function aD(e){return e.writeTree_.isEmpty()}function lD(e,t){return cD(EN(),e.writeTree_,t)}function cD(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Nf(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=cD(AN(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(AN(e,".priority"),r)),n}}function uD(e,t){return CD(t,e)}function hD(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Nf(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){const t=e.allWrites[s];t.visible&&(s>=n&&dD(t,r.path)?i=!1:LN(r.path,t.path)&&(o=!0)),s--}if(i){if(o)return function(e){e.visibleWrites=pD(e.allWrites,fD,EN()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=nD(e.visibleWrites,r.path);else{YT(r.children,(t=>{e.visibleWrites=nD(e.visibleWrites,AN(r.path,t))}))}return!0}return!1}function dD(e,t){if(e.snap)return LN(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&LN(AN(e.path,n),t))return!0;return!1}function fD(e){return e.visible}function pD(e,t,n){let r=JI.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const e=o.path;let t;if(o.snap)LN(n,e)?(t=MN(n,e),r=eD(r,t,o.snap)):LN(e,n)&&(t=MN(e,n),r=eD(r,EN(),o.snap.getChild(t)));else{if(!o.children)throw If("WriteRecord should have .snap or .children");if(LN(n,e))t=MN(n,e),r=tD(r,t,o.children);else if(LN(e,n))if(t=MN(e,n),PN(t))r=tD(r,EN(),o.children);else{const e=$f(o.children,kN(t));if(e){const n=e.getChild(TN(t));r=eD(r,EN(),n)}}}}}return r}function gD(e,t,n,r,i){if(r||i){const o=sD(e.visibleWrites,t);if(!i&&aD(o))return n;if(i||null!=n||rD(o,EN())){const o=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(LN(e.path,t)||LN(t,e.path))};return lD(pD(e.allWrites,o,t),n||pI.EMPTY_NODE)}return null}{const r=iD(e.visibleWrites,t);if(null!=r)return r;{const r=sD(e.visibleWrites,t);if(aD(r))return n;if(null!=n||rD(r,EN())){return lD(r,n||pI.EMPTY_NODE)}return null}}}function mD(e,t,n,r){return gD(e.writeTree,e.treePath,t,n,r)}function yD(e,t){return function(e,t,n){let r=pI.EMPTY_NODE;const i=iD(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(sI,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=sD(e.visibleWrites,t);return n.forEachChild(sI,((e,t)=>{const n=lD(sD(i,new CN(e)),t);r=r.updateImmediateChild(e,n)})),oD(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return oD(sD(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function vD(e,t,n,r){return function(e,t,n,r,i){Nf(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=AN(t,n);if(rD(e.visibleWrites,o))return null;{const t=sD(e.visibleWrites,o);return aD(t)?i.getChild(n):lD(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function wD(e,t){return function(e,t){return iD(e.visibleWrites,t)}(e.writeTree,AN(e.treePath,t))}function bD(e,t,n,r,i,o){return function(e,t,n,r,i,o,s){let a;const l=sD(e.visibleWrites,t),c=iD(l,EN());if(null!=c)a=c;else{if(null==n)return[];a=lD(l,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=s.getCompare(),n=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,o)}function _D(e,t,n){return function(e,t,n,r){const i=AN(t,n),o=iD(e.visibleWrites,i);if(null!=o)return o;if(r.isCompleteForChild(n))return lD(sD(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function SD(e,t){return CD(AN(e.treePath,t),e.writeTree)}function CD(e,t){return{treePath:e,writeTree:t}}class ED{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Nf("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Nf(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,SI(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,_I(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,bI(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw If("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,SI(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const kD=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class xD{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new qI(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _D(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:XI(this.viewCache_),i=bD(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function TD(e,t,n,r,i){const o=new ED;let s,a;if(n.type===FI.OVERWRITE){const l=n;l.source.fromUser?s=DD(e,t,l.path,l.snap,r,i,o):(Nf(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!PN(l.path),s=ID(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===FI.MERGE){const l=n;l.source.fromUser?s=function(e,t,n,r,i,o,s){let a=t;return r.foreach(((r,l)=>{const c=AN(n,r);AD(t,kN(c))&&(a=DD(e,a,c,l,i,o,s))})),r.foreach(((r,l)=>{const c=AN(n,r);AD(t,kN(c))||(a=DD(e,a,c,l,i,o,s))})),a}(e,t,l.path,l.children,r,i,o):(Nf(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=MD(e,t,l.path,l.children,r,i,a,o))}else if(n.type===FI.ACK_USER_WRITE){const a=n;s=a.revert?function(e,t,n,r,i,o){let s;if(null!=wD(r,n))return t;{const a=new xD(r,t,i),l=t.eventCache.getNode();let c;if(PN(n)||".priority"===kN(n)){let n;if(t.serverCache.isFullyInitialized())n=mD(r,XI(t));else{const e=t.serverCache.getNode();Nf(e instanceof pI,"serverChildren would be complete if leaf node"),n=yD(r,e)}c=e.filter.updateFullNode(l,n,o)}else{const i=kN(n);let u=_D(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,TN(n),a,o):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,pI.EMPTY_NODE,TN(n),a,o):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=mD(r,XI(t)),s.isLeafNode()&&(c=e.filter.updateFullNode(c,s,o)))}return s=t.serverCache.isFullyInitialized()||null!=wD(r,EN()),YI(t,c,s,e.filter.filtersNodes())}}(e,t,a.path,r,i,o):function(e,t,n,r,i,o,s){if(null!=wD(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(PN(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return ID(e,t,n,l.getNode().getChild(n),i,o,a,s);if(PN(n)){let r=new $I(null);return l.getNode().forEachChild(YN,((e,t)=>{r=r.set(new CN(e),t)})),MD(e,t,n,r,i,o,a,s)}return t}{let c=new $I(null);return r.foreach(((e,t)=>{const r=AN(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),MD(e,t,n,c,i,o,a,s)}}(e,t,a.path,a.affectedTree,r,i,o)}else{if(n.type!==FI.LISTEN_COMPLETE)throw If("Unknown operation type: "+n.type);s=function(e,t,n,r,i){const o=t.serverCache,s=GI(t,o.getNode(),o.isFullyInitialized()||PN(n),o.isFiltered());return ND(e,s,n,r,kD,i)}(e,t,n.path,r,o)}const l=o.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=QI(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(wI(QI(t)))}}(t,s,l),{viewCache:s,changes:l}}function ND(e,t,n,r,i,o){const s=t.eventCache;if(null!=wD(r,n))return t;{let a,l;if(PN(n))if(Nf(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=XI(t),i=yD(r,n instanceof pI?n:pI.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,o)}else{const n=mD(r,XI(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,o)}else{const c=kN(n);if(".priority"===c){Nf(1===xN(n),"Can't have a priority with additional path components");const i=s.getNode();l=t.serverCache.getNode();const o=vD(r,n,i,l);a=null!=o?e.filter.updatePriority(i,o):s.getNode()}else{const u=TN(n);let h;if(s.isCompleteForChild(c)){l=t.serverCache.getNode();const e=vD(r,n,s.getNode(),l);h=null!=e?s.getNode().getImmediateChild(c).updateChild(u,e):s.getNode().getImmediateChild(c)}else h=_D(r,c,t.serverCache);a=null!=h?e.filter.updateChild(s.getNode(),c,h,u,i,o):s.getNode()}}return YI(t,a,s.isFullyInitialized()||PN(n),e.filter.filtersNodes())}}function ID(e,t,n,r,i,o,s,a){const l=t.serverCache;let c;const u=s?e.filter:e.filter.getIndexedFilter();if(PN(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=kN(n);if(!l.isCompleteForPath(n)&&xN(n)>1)return t;const i=TN(n),o=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),o):u.updateChild(l.getNode(),e,o,i,kD,null)}const h=GI(t,c,l.isFullyInitialized()||PN(n),u.filtersNodes());return ND(e,h,n,i,new xD(i,h,o),a)}function DD(e,t,n,r,i,o,s){const a=t.eventCache;let l,c;const u=new xD(i,t,o);if(PN(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,s),l=YI(t,c,!0,e.filter.filtersNodes());else{const i=kN(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=YI(t,c,a.isFullyInitialized(),a.isFiltered());else{const o=TN(n),c=a.getNode().getImmediateChild(i);let h;if(PN(o))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===NN(o)&&e.getChild(DN(o)).isEmpty()?e:e.updateChild(o,r):pI.EMPTY_NODE}if(c.equals(h))l=t;else{l=YI(t,e.filter.updateChild(a.getNode(),i,h,o,u,s),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function AD(e,t){return e.eventCache.isCompleteForChild(t)}function PD(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function MD(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=PN(n)?r:new $I(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=PD(0,t.serverCache.getNode().getImmediateChild(n),r);c=ID(e,c,new CN(n),l,i,o,s,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=PD(0,t.serverCache.getNode().getImmediateChild(n),r);c=ID(e,c,new CN(n),l,i,o,s,a)}})),c}class RD{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new CI(n.getIndex()),i=(o=n).loadsAllData()?new CI(o.getIndex()):o.hasLimit()?new kI(o):new EI(o);var o;this.processor_=function(e){return{filter:e}}(i);const s=t.serverCache,a=t.eventCache,l=r.updateFullNode(pI.EMPTY_NODE,s.getNode(),null),c=i.updateFullNode(pI.EMPTY_NODE,a.getNode(),null),u=new qI(l,s.isFullyInitialized(),r.filtersNodes()),h=new qI(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=KI(h,u),this.eventGenerator_=new HI(this.query_)}get query(){return this.query_}}function OD(e,t){const n=XI(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!PN(t)&&!n.getImmediateChild(kN(t)).isEmpty())?n.getChild(t):null}function LD(e){return 0===e.eventRegistrations_.length}function FD(e,t,n){const r=[];if(n){Nf(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function zD(e,t,n,r){t.type===FI.MERGE&&null!==t.source.queryId&&(Nf(XI(e.viewCache_),"We should always have a full cache before handling merges"),Nf(QI(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=TD(e.processor_,i,t,n,r);var s,a;return s=e.processor_,a=o.viewCache,Nf(a.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),Nf(a.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed"),Nf(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,VD(e,o.changes,o.viewCache.eventCache.getNode(),null)}function VD(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],o=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),WI(e,i,"child_removed",t,r,n),WI(e,i,"child_added",t,r,n),WI(e,i,"child_moved",o,r,n),WI(e,i,"child_changed",t,r,n),WI(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let jD,UD;class BD{constructor(){this.views=new Map}}function qD(e,t,n,r){const i=t.source.queryId;if(null!==i){const o=e.views.get(i);return Nf(null!=o,"SyncTree gave us an op for an invalid query."),zD(o,t,n,r)}{let i=[];for(const o of e.views.values())i=i.concat(zD(o,t,n,r));return i}}function HD(e,t,n,r,i,o){const s=function(e,t,n,r,i){const o=t._queryIdentifier,s=e.views.get(o);if(!s){let e=mD(n,i?r:null),o=!1;e?o=!0:r instanceof pI?(e=yD(n,r),o=!1):(e=pI.EMPTY_NODE,o=!1);const s=KI(new qI(e,o,!1),new qI(r,i,!1));return new RD(t,s)}return s}(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),function(e,t){e.eventRegistrations_.push(t)}(s,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(sI,((e,t)=>{r.push(bI(e,t))}));return n.isFullyInitialized()&&r.push(wI(n.getNode())),VD(e,r,n.getNode(),t)}(s,n)}function WD(e,t,n,r){const i=t._queryIdentifier,o=[];let s=[];const a=XD(e);if("default"===i)for(const[l,c]of e.views.entries())s=s.concat(FD(c,n,r)),LD(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{const t=e.views.get(i);t&&(s=s.concat(FD(t,n,r)),LD(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||o.push(t.query)))}return a&&!XD(e)&&o.push(new(Nf(jD,"Reference.ts has not been loaded"),jD)(t._repo,t._path)),{removed:o,events:s}}function KD(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function YD(e,t){let n=null;for(const r of e.views.values())n=n||OD(r,t);return n}function GD(e,t){if(t._queryParams.loadsAllData())return ZD(e);{const n=t._queryIdentifier;return e.views.get(n)}}function QD(e,t){return null!=GD(e,t)}function XD(e){return null!=ZD(e)}function ZD(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let $D=1;class JD{constructor(e){this.listenProvider_=e,this.syncPointTree_=new $I(null),this.pendingWriteTree_={visibleWrites:JI.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function eA(e,t,n,r,i){return function(e,t,n,r,i){Nf(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=eD(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?aA(e,new UI({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function tA(e,t,n,r){!function(e,t,n,r){Nf(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=tD(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=$I.fromObject(n);return aA(e,new BI({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function nA(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(hD(e.pendingWriteTree_,t)){let t=new $I(null);return null!=r.snap?t=t.set(EN(),!0):YT(r.children,(e=>{t=t.set(new CN(e),!0)})),aA(e,new VI(r.path,t,n))}return[]}function rA(e,t,n){return aA(e,new UI({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function iA(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=t._path,s=e.syncPointTree_.get(o);let a=[];if(s&&("default"===t._queryIdentifier||QD(s,t))){const l=WD(s,t,n,r);0===s.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(o));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(o,((e,t)=>XD(t)));if(n&&!i){const t=e.syncPointTree_.subtree(o);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&XD(t)){return[ZD(t)]}{let e=[];return t&&(e=KD(t)),YT(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,o=uA(e,r);e.listenProvider_.startListening(mA(i),hA(e,i),o.hashFn,o.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(mA(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(dA(t));e.listenProvider_.stopListening(mA(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=dA(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function oA(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let o=null,s=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=MN(e,i);o=o||YD(t,n),s=s||XD(t)}));let a,l=e.syncPointTree_.get(i);if(l?(s=s||XD(l),o=o||YD(l,EN())):(l=new BD,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=o)a=!0;else{a=!1,o=pI.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=YD(t,EN());n&&(o=o.updateImmediateChild(e,n))}))}const c=QD(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=dA(t);Nf(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=$D++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=HD(l,t,n,uD(e.pendingWriteTree_,i),o,a);if(!c&&!s&&!r){const n=GD(l,t);u=u.concat(function(e,t,n){const r=t._path,i=hA(e,t),o=uA(e,n),s=e.listenProvider_.startListening(mA(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)Nf(!XD(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!PN(e)&&t&&XD(t))return[ZD(t).query];{let e=[];return t&&(e=e.concat(KD(t).map((e=>e.query)))),YT(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(mA(r),hA(e,r))}}return s}(e,t,n))}return u}function sA(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=YD(n,MN(e,t));if(r)return r}));return gD(r,t,i,n,!0)}function aA(e,t){return lA(t,e.syncPointTree_,null,uD(e.pendingWriteTree_,EN()))}function lA(e,t,n,r){if(PN(e.path))return cA(e,t,n,r);{const i=t.get(EN());null==n&&null!=i&&(n=YD(i,EN()));let o=[];const s=kN(e.path),a=e.operationForChild(s),l=t.children.get(s);if(l&&a){const e=n?n.getImmediateChild(s):null,t=SD(r,s);o=o.concat(lA(a,l,e,t))}return i&&(o=o.concat(qD(i,e,r,n))),o}}function cA(e,t,n,r){const i=t.get(EN());null==n&&null!=i&&(n=YD(i,EN()));let o=[];return t.children.inorderTraversal(((t,i)=>{const s=n?n.getImmediateChild(t):null,a=SD(r,t),l=e.operationForChild(t);l&&(o=o.concat(cA(l,i,s,a)))})),i&&(o=o.concat(qD(i,e,r,n))),o}function uA(e,t){const n=t.query,r=hA(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||pI.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=fA(e,n);if(r){const n=pA(r),i=n.path,o=n.queryId,s=MN(i,t);return gA(e,i,new jI(zI(o),s))}return[]}(e,n._path,r):function(e,t){return aA(e,new jI({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return iA(e,n,null,r)}}}}function hA(e,t){const n=dA(t);return e.queryToTagMap.get(n)}function dA(e){return e._path.toString()+"$"+e._queryIdentifier}function fA(e,t){return e.tagToQueryMap.get(t)}function pA(e){const t=e.indexOf("$");return Nf(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new CN(e.substr(0,t))}}function gA(e,t,n){const r=e.syncPointTree_.get(t);Nf(r,"Missing sync point for query tag that we're tracking");return qD(r,n,uD(e.pendingWriteTree_,t),null)}function mA(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Nf(UD,"Reference.ts has not been loaded"),UD)(e._repo,e._path):e}class yA{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new yA(t)}node(){return this.node_}}class vA{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=AN(this.path_,e);return new vA(this.syncTree_,t)}node(){return sA(this.syncTree_,this.path_)}}const wA=function(e,t,n){return e&&"object"===typeof e?(Nf(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?bA(e[".sv"],t,n):"object"===typeof e[".sv"]?_A(e[".sv"],t):void Nf(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},bA=function(e,t,n){if("timestamp"===e)return n.timestamp;Nf(!1,"Unexpected server value: "+e)},_A=function(e,t,n){e.hasOwnProperty("increment")||Nf(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Nf(!1,"Unexpected increment value: "+r);const i=t.node();if(Nf(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!==typeof o?r:o+r},SA=function(e,t,n,r){return EA(t,new vA(n,e),r)},CA=function(e,t,n){return EA(e,new yA(t),n)};function EA(e,t,n){const r=e.getPriority().val(),i=wA(r,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const r=e,o=wA(r.getValue(),t,n);return o!==r.getValue()||i!==r.getPriority().val()?new oI(o,mI(i)):e}{const r=e;return o=r,i!==r.getPriority().val()&&(o=o.updatePriority(new oI(i))),r.forEachChild(sI,((e,r)=>{const i=EA(r,t.getImmediateChild(e),n);i!==r&&(o=o.updateImmediateChild(e,i))})),o}}class kA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function xA(e,t){let n=t instanceof CN?t:new CN(t),r=e,i=kN(n);for(;null!==i;){const e=$f(r.node.children,i)||{children:{},childCount:0};r=new kA(i,r,e),n=TN(n),i=kN(n)}return r}function TA(e){return e.node.value}function NA(e,t){e.node.value=t,MA(e)}function IA(e){return e.node.childCount>0}function DA(e,t){YT(e.node.children,((n,r)=>{t(new kA(n,e,r))}))}function AA(e,t,n,r){n&&t(e),DA(e,(e=>{AA(e,t,!0)}))}function PA(e){return new CN(null===e.parent?e.name:PA(e.parent)+"/"+e.name)}function MA(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===TA(e)&&!IA(e)}(n),i=Zf(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,MA(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,MA(e))}(e.parent,e.name,e)}const RA=/[\[\].#$\/\u0000-\u001F\u007F]/,OA=/[\[\].#$\u0000-\u001F\u007F]/,LA=10485760,FA=function(e){return"string"===typeof e&&0!==e.length&&!RA.test(e)},zA=function(e){return"string"===typeof e&&0!==e.length&&!OA.test(e)},VA=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!VT(e)||e&&"object"===typeof e&&Zf(e,".sv")},jA=function(e,t,n,r){r&&void 0===t||UA(ip(e,"value"),t,n)},UA=function(e,t,n){const r=n instanceof CN?new FN(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+VN(r));if("function"===typeof t)throw new Error(e+"contains a function "+VN(r)+" with contents = "+t.toString());if(VT(t))throw new Error(e+"contains "+t.toString()+" "+VN(r));if("string"===typeof t&&t.length>LA/3&&op(t)>LA)throw new Error(e+"contains a string greater than "+LA+" utf8 bytes "+VN(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(YT(t,((t,o)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!FA(t)))throw new Error(e+" contains an invalid key ("+t+") "+VN(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=op(t),zN(e)}(r,t),UA(e,o,r),function(e){const t=e.parts_.pop();e.byteLength_-=op(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+VN(r)+" in addition to actual children.")}},BA=function(e,t,n,r){const i=ip(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const o=[];YT(t,((e,t)=>{const r=new CN(e);if(UA(i,t,AN(n,r)),".priority"===NN(r)&&!VA(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=IN(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!FA(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(RN);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&LN(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},qA=function(e,t,n,r){if(!zA(n))throw new Error(ip(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},HA=function(e,t){if(".info"===kN(t))throw new Error(e+" failed = Can't modify data under /.info/")},WA=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!FA(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),zA(e)}(n))throw new Error(ip(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class KA{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function YA(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null===n||ON(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function GA(e,t,n){YA(e,n),XA(e,(e=>ON(e,t)))}function QA(e,t,n){YA(e,n),XA(e,(e=>LN(e,t)||LN(t,e)))}function XA(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(ZA(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function ZA(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();PT&&RT("event: "+n.toString()),ZT(r)}}}class $A{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new KA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=AI(),this.transactionQueueTree_=new kA,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function JA(e,t,n){if(e.stats_=hN(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new II(e.repoInfo_,((t,n,r,i)=>{nP(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>rP(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Qf(n)}catch(dM){throw new Error("Invalid authOverride provided: "+dM)}}e.persistentConnection_=new BN(e.repoInfo_,t,((t,n,r,i)=>{nP(e,t,n,r,i)}),(t=>{rP(e,t)}),(t=>{!function(e,t){YT(t,((t,n)=>{iP(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return uN[n]||(uN[n]=t()),uN[n]}(e.repoInfo_,(()=>new LI(e.stats_,e.server_))),e.infoData_=new DI,e.infoSyncTree_=new JD({startListening:(t,n,r,i)=>{let o=[];const s=e.infoData_.getNode(t._path);return s.isEmpty()||(o=rA(e.infoSyncTree_,t._path,s),setTimeout((()=>{i("ok")}),0)),o},stopListening:()=>{}}),iP(e,"connected",!1),e.serverSyncTree_=new JD({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const o=i(n,r);QA(e.eventQueue_,t._path,o)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function eP(e){const t=e.infoData_.getNode(new CN(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function tP(e){return(t=(t={timestamp:eP(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function nP(e,t,n,r,i){e.dataUpdateCount++;const o=new CN(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){const t=ep(n,(e=>mI(e)));s=function(e,t,n,r){const i=fA(e,r);if(i){const r=pA(i),o=r.path,s=r.queryId,a=MN(o,t),l=$I.fromObject(n);return gA(e,o,new BI(zI(s),a,l))}return[]}(e.serverSyncTree_,o,t,i)}else{const t=mI(n);s=function(e,t,n,r){const i=fA(e,r);if(null!=i){const r=pA(i),o=r.path,s=r.queryId,a=MN(o,t);return gA(e,o,new UI(zI(s),a,n))}return[]}(e.serverSyncTree_,o,t,i)}else if(r){const t=ep(n,(e=>mI(e)));s=function(e,t,n){const r=$I.fromObject(n);return aA(e,new BI({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,t)}else{const t=mI(n);s=rA(e.serverSyncTree_,o,t)}let a=o;s.length>0&&(a=dP(e,o)),QA(e.eventQueue_,a,s)}function rP(e,t){iP(e,"connected",t),!1===t&&function(e){lP(e,"onDisconnectEvents");const t=tP(e),n=AI();RI(e.onDisconnect_,EN(),((r,i)=>{const o=SA(r,i,e.serverSyncTree_,t);PI(n,r,o)}));let r=[];RI(n,EN(),((t,n)=>{r=r.concat(rA(e.serverSyncTree_,t,n));const i=yP(e,t);dP(e,i)})),e.onDisconnect_=AI(),QA(e.eventQueue_,EN(),r)}(e)}function iP(e,t,n){const r=new CN("/.info/"+t),i=mI(n);e.infoData_.updateSnapshot(r,i);const o=rA(e.infoSyncTree_,r,i);QA(e.eventQueue_,r,o)}function oP(e){return e.nextWriteId_++}function sP(e,t,n){e.server_.onDisconnectCancel(t.toString(),((r,i)=>{"ok"===r&&MI(e.onDisconnect_,t),cP(e,n,r,i)}))}function aP(e,t,n,r){const i=mI(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),((n,o)=>{"ok"===n&&PI(e.onDisconnect_,t,i),cP(e,r,n,o)}))}function lP(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];RT(t,...r)}function cP(e,t,n,r){t&&ZT((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const o=new Error(i);o.code=e,t(o)}}))}function uP(e,t,n){return sA(e.serverSyncTree_,t,n)||pI.EMPTY_NODE}function hP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||mP(e,t),TA(t)){const n=pP(e,t);Nf(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=uP(e,t,r);let o=i;const s=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Nf(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=MN(t,e.path);o=o.updateChild(r,e.currentOutputSnapshotRaw)}const a=o.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{lP(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(nA(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();mP(e,xA(e.transactionQueueTree_,t)),hP(e,e.transactionQueueTree_),QA(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)ZT(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{zT("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}dP(e,t)}}),s)}(e,PA(t),n)}else IA(t)&&DA(t,(t=>{hP(e,t)}))}function dP(e,t){const n=fP(e,t),r=PA(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const o=t.filter((e=>0===e.status)),s=o.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const o=t[l],c=MN(n,o.path);let u,h=!1;if(Nf(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===o.status)h=!0,u=o.abortReason,i=i.concat(nA(e.serverSyncTree_,o.currentWriteId,!0));else if(0===o.status)if(o.retryCount>=25)h=!0,u="maxretry",i=i.concat(nA(e.serverSyncTree_,o.currentWriteId,!0));else{const n=uP(e,o.path,s);o.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){UA("transaction failed: Data returned ",r,o.path);let t=mI(r);"object"===typeof r&&null!=r&&Zf(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=o.currentWriteId,l=tP(e),c=CA(t,n,l);o.currentOutputSnapshotRaw=t,o.currentOutputSnapshotResolved=c,o.currentWriteId=oP(e),s.splice(s.indexOf(a),1),i=i.concat(eA(e.serverSyncTree_,o.path,c,o.currentWriteId,o.applyLocally)),i=i.concat(nA(e.serverSyncTree_,a,!0))}else h=!0,u="nodata",i=i.concat(nA(e.serverSyncTree_,o.currentWriteId,!0))}QA(e.eventQueue_,n,i),i=[],h&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var a;mP(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)ZT(r[l]);hP(e,e.transactionQueueTree_)}(e,pP(e,n),r),r}function fP(e,t){let n,r=e.transactionQueueTree_;for(n=kN(t);null!==n&&void 0===TA(r);)r=xA(r,n),n=kN(t=TN(t));return r}function pP(e,t){const n=[];return gP(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function gP(e,t,n){const r=TA(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);DA(t,(t=>{gP(e,t,n)}))}function mP(e,t){const n=TA(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,NA(t,n.length>0?n:void 0)}DA(t,(t=>{mP(e,t)}))}function yP(e,t){const n=PA(fP(e,t)),r=xA(e.transactionQueueTree_,t);return function(e,t){let n=e.parent;for(;null!==n;){if(t(n))return!0;n=n.parent}}(r,(t=>{vP(e,t)})),vP(e,r),AA(r,(t=>{vP(e,t)})),n}function vP(e,t){const n=TA(t);if(n){const r=[];let i=[],o=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Nf(o===t-1,"All SENT items should be at beginning of queue."),o=t,n[t].status=3,n[t].abortReason="set"):(Nf(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(nA(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===o?NA(t,void 0):n.length=o+1,QA(e.eventQueue_,PA(t),i);for(let e=0;e<r.length;e++)ZT(r[e])}}const wP=function(e,t){const n=bP(e),r=n.namespace;"firebase.com"===n.domain&&FT(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||FT("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&zT("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new sN(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new CN(n.pathString)}},bP=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(dM){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):zT("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(s="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),o=r}"ns"in d&&(o=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},_P="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",SP=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const o=new Array(8);for(i=7;i>=0;i--)o[i]=_P.charAt(n%64),n=Math.floor(n/64);Nf(0===n,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)s+=_P.charAt(t[i]);return Nf(20===s.length,"nextPushId: Length should be 20."),s}}();class CP{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Qf(this.snapshot.exportVal())}}class EP{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class kP{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Nf(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class xP{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Bf;return sP(this._repo,this._path,e.wrapCallback((()=>{}))),e.promise}remove(){HA("OnDisconnect.remove",this._path);const e=new Bf;return aP(this._repo,this._path,null,e.wrapCallback((()=>{}))),e.promise}set(e){HA("OnDisconnect.set",this._path),jA("OnDisconnect.set",e,this._path,!1);const t=new Bf;return aP(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}setWithPriority(e,t){HA("OnDisconnect.setWithPriority",this._path),jA("OnDisconnect.setWithPriority",e,this._path,!1),function(e,t){if(VT(t))throw new Error(ip(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!VA(t))throw new Error(ip(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}("OnDisconnect.setWithPriority",t);const n=new Bf;return function(e,t,n,r,i){const o=mI(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),((n,r)=>{"ok"===n&&PI(e.onDisconnect_,t,o),cP(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((()=>{}))),n.promise}update(e){HA("OnDisconnect.update",this._path),BA("OnDisconnect.update",e,this._path);const t=new Bf;return function(e,t,n,r){if(Jf(n))return RT("onDisconnect().update() called with empty data.  Don't do anything."),void cP(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,((i,o)=>{"ok"===i&&YT(n,((n,r)=>{const i=mI(r);PI(e.onDisconnect_,AN(t,n),i)})),cP(0,r,i,o)}))}(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}}class TP{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return PN(this._path)?null:NN(this._path)}get ref(){return new NP(this._repo,this._path)}get _queryIdentifier(){const e=NI(this._queryParams),t=WT(e);return"{}"===t?"default":t}get _queryObject(){return NI(this._queryParams)}isEqual(e){if(!((e=sp(e))instanceof TP))return!1;const t=this._repo===e._repo,n=ON(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class NP extends TP{constructor(e,t){super(e,t,new xI,!1)}get parent(){const e=DN(this._path);return null===e?null:new NP(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class IP{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new CN(e),n=AP(this.ref,e);return new IP(this._node.getChild(t),n,sI)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new IP(n,AP(this.ref,t),sI))))}hasChild(e){const t=new CN(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function DP(e,t){return(e=sp(e))._checkNotDeleted("ref"),void 0!==t?AP(e._root,t):e._root}function AP(e,t){var n,r,i;return null===kN((e=sp(e))._path)?(n="child",r="path",(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),qA(n,r,i)):qA("child","path",t),new NP(e._repo,AN(e._path,t))}function PP(e){return HA("remove",e._path),MP(e,null)}function MP(e,t){e=sp(e),HA("set",e._path),jA("set",t,e._path,!1);const n=new Bf;return function(e,t,n,r,i){lP(e,"set",{path:t.toString(),value:n,priority:r});const o=tP(e),s=mI(n,r),a=sA(e.serverSyncTree_,t),l=CA(s,a,o),c=oP(e),u=eA(e.serverSyncTree_,t,l,c,!0);YA(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),((n,r)=>{const o="ok"===n;o||zT("set at "+t+" failed: "+n);const s=nA(e.serverSyncTree_,c,!o);QA(e.eventQueue_,t,s),cP(0,i,n,r)}));const h=yP(e,t);dP(e,h),QA(e.eventQueue_,h,[])}(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function RP(e,t){BA("update",t,e._path);const n=new Bf;return function(e,t,n,r){lP(e,"update",{path:t.toString(),value:n});let i=!0;const o=tP(e),s={};if(YT(n,((n,r)=>{i=!1,s[n]=SA(AN(t,n),mI(r),e.serverSyncTree_,o)})),i)RT("update() called with empty data.  Don't do anything."),cP(0,r,"ok",void 0);else{const i=oP(e),o=tA(e.serverSyncTree_,t,s,i);YA(e.eventQueue_,o),e.server_.merge(t.toString(),n,((n,o)=>{const s="ok"===n;s||zT("update at "+t+" failed: "+n);const a=nA(e.serverSyncTree_,i,!s),l=a.length>0?dP(e,t):t;QA(e.eventQueue_,l,a),cP(0,r,n,o)})),YT(n,(n=>{const r=yP(e,AN(t,n));dP(e,r)})),QA(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}class OP{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new CP("value",this,new IP(e.snapshotNode,new NP(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new EP(this,e,t):null}matches(e){return e instanceof OP&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}function LP(e,t,n,r,i){const o=new kP(n,void 0),s=new OP(o);return function(e,t,n){let r;r=".info"===kN(t._path)?oA(e.infoSyncTree_,t,n):oA(e.serverSyncTree_,t,n),GA(e.eventQueue_,t._path,r)}(e._repo,e,s),()=>function(e,t,n){let r;r=".info"===kN(t._path)?iA(e.infoSyncTree_,t,n):iA(e.serverSyncTree_,t,n),GA(e.eventQueue_,t._path,r)}(e._repo,e,s)}!function(e){Nf(!jD,"__referenceConstructor has already been defined"),jD=e}(NP),function(e){Nf(!UD,"__referenceConstructor has already been defined"),UD=e}(NP);const FP={};let zP=!1;function VP(e,t,n,r,i){let o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||FT("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),RT("Using default host for project ",e.options.projectId),o="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let s,a=wP(o,i),l=a.repoInfo;"undefined"!==typeof process&&(s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),s?(o="http://".concat(s,"?ns=").concat(l.namespace),a=wP(o,i),l=a.repoInfo):a.repoInfo.secure;const c=new eN(e.name,e.options,t);WA("Invalid Firebase Database URL",a),PN(a.path)||FT("Database URL must point to the root of a Firebase Database (not including a child path).");const u=function(e,t,n,r){let i=FP[t.name];i||(i={},FP[t.name]=i);let o=i[e.toURLString()];o&&FT("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new $A(e,zP,n,r),i[e.toURLString()]=o,o}(l,e,c,new JT(e.name,n));return new jP(u,e)}class jP{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(JA(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new NP(this._repo,EN())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=FP[t];n&&n[e.key]===e||FT("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),function(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&FT("Cannot call "+e+" on a deleted database.")}}const UP={".sv":"timestamp"};BN.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},BN.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},function(e){!function(e){ST=e}(mg),dg(new ap("database",((e,t)=>{let{instanceIdentifier:n}=t;return VP(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),wg(bT,_T,e),wg(bT,_T,"esm2017")}();const BP=yg({apiKey:"AIzaSyAceVHD-tXQ6f-A_8HF3kMcSFodXaIoQcI",authDomain:"velt-crdt.firebaseapp.com",databaseURL:"https://velt-crdt-default-rtdb.firebaseio.com",projectId:"velt-crdt",storageBucket:"velt-crdt.firebasestorage.app",messagingSenderId:"1094250118122",appId:"1:1094250118122:web:c6776e1005f6ff84d5d093",measurementId:"G-ESD362FBHE"}),qP=function(e){const t="string"==typeof e?e:"(default)",n=fg("object"==typeof e?e:vg(),"firestore").getImmediate({identifier:t});if(!n._initialized){const e=jf("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=dx(e,px))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&Zw("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ww.MOCK_USER;else{t=qf(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new rb(nb.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ww(o)}e._authCredentials=new ab(new ob(t,n))}}(n,...e)}return n}(BP),HP=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vg(),t=arguments.length>1?arguments[1]:void 0;const n=fg(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=jf("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=sp(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&FT("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&FT('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new tN(tN.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:qf(r.mockUserToken,e.app.options.projectId);o=new tN(t)}!function(e,t,n,r){e.repoInfo_=new sN("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,o)}(n,...e)}return n}(BP);class WP{getDatabaseRef(){return this.dbRef}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"anonymous";this.dbRef=void 0,this.userId=void 0,this.dbRef=DP(HP,e),this.userId=t}async set(e){await MP(this.dbRef,e)}async update(e){await RP(this.dbRef,e)}async push(e){const t=function(e,t){e=sp(e),HA("push",e._path),jA("push",t,e._path,!0);const n=eP(e._repo),r=SP(n),i=AP(e,r),o=AP(e,r);let s;return s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}(this.dbRef);return await MP(t,e),t.key}onValue(e){const t=function(e,t){return LP(e,0,t)}(this.dbRef,e);return()=>t()}async remove(){await PP(this.dbRef)}}class KP{constructor(e){this.config=e,this.docRef=void 0,this.presenceRef=void 0,this.userId=void 0,this.realtimeProvider=void 0,this.userId=e.userId||"anonymous",this.docRef=wx(e.firestore,e.collection,e.id);const t="presence/".concat(e.collection,"/").concat(e.id);this.presenceRef=DP(e.realtimeDb,t),this.realtimeProvider=new WP(t,this.userId)}async initialize(e){const t=(await fT(this.docRef)).data();null!==t&&void 0!==t&&t.state&&oh(e,new Uint8Array(t.state)),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=sp(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||_x(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(_x(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[l+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let u,h,d;if(e instanceof gx)h=dx(e.firestore,Sx),d=W_(e._key.path),u={next:t=>{n[l]&&n[l](wT(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=dx(e,mx);h=dx(t.firestore,Sx),d=t._query;const r=new pT(h);u={next:e=>{n[l]&&n[l](new hT(h,r,t,e))},error:n[l+1],complete:n[l+2]},Xx(e._query)}(function(e,t,n,r){const i=new ex(r),o=new Tk(t,i,n);e.asyncQueue.enqueueAndForget((async()=>Sk(await ox(e),o)))})(Cx(h),d,c,u)}(this.docRef,(t=>{const n=t.data();null!==n&&void 0!==n&&n.state&&oh(e,new Uint8Array(n.state))})),await this.setupPresence()}async setupPresence(){const e=DP(this.config.realtimeDb,"presence/".concat(this.config.collection,"/").concat(this.config.id,"/").concat(this.userId)),t={userId:this.userId,status:"online",lastSeen:Date.now(),metadata:{type:this.config.type,collection:this.config.collection}};await MP(e,t),function(e){return e=sp(e),new xP(e._repo,e._path)}(e).update({status:"offline",lastSeen:UP})}async getDocument(){const e=await fT(this.docRef);return e.exists()?e.data():null}async setDocument(e){await mT(this.docRef,c(c({},e),{},{lastUpdate:(new Date).toISOString(),lastUpdatedBy:this.userId}))}async updateState(e){await this.setDocument({state:e})}onPresenceChange(e){return this.realtimeProvider.onValue((t=>{const n=t.val()||{};e(n)}))}destroy(){this.realtimeProvider&&PP(this.realtimeProvider.getDatabaseRef())}}class YP{constructor(e){switch(this.doc=void 0,this.provider=void 0,this.type=void 0,this.array=null,this.map=null,this.text=null,this.xml=null,this.observers=void 0,this.config=void 0,this.updateTimeout=null,this.debouncedUpdate=e=>{this.updateTimeout&&clearTimeout(this.updateTimeout),this.config.debounceMs?this.updateTimeout=setTimeout((()=>{this.provider.updateState(Array.from(e)).catch((e=>{console.error("Error syncing to Firestore:",e)}))}),this.config.debounceMs):this.provider.updateState(Array.from(e)).catch((e=>{console.error("Error syncing to Firestore:",e)}))},this.config=e,this.doc=new Yu,this.provider=new KP({firestore:qP,realtimeDb:HP,collection:e.collection,id:e.id,userId:e.userId,type:e.type}),this.observers=new Set,e.type){case"array":this.array=this.doc.getArray("content"),this.type=this.array;break;case"map":this.map=this.doc.getMap("content"),this.type=this.map;break;case"text":this.text=this.doc.getText("content"),this.type=this.text;break;case"xml":this.xml=this.doc.getXmlFragment("content"),this.type=this.xml;break;default:throw new Error("Unsupported Yjs type: ".concat(e.type))}this.type.observe((()=>{const e=this.getValue();this.observers.forEach((t=>t(e)))}));const t=new WeakMap;this.doc.on("beforeTransaction",(e=>{t.has(e)||t.set(e,"yjs")})),this.doc.on("update",((e,n,r,i)=>{if("yjs"===t.get(i)){const e=ah(r);this.debouncedUpdate(e)}}))}async initialize(){try{var e;await this.provider.initialize(this.doc),this.isEmpty()&&void 0!==(null===(e=this.config)||void 0===e?void 0:e.initialValue)&&this.doc.transact((()=>{if(this.type instanceof xd){const e=Array.isArray(this.config.initialValue)?this.config.initialValue:[this.config.initialValue];this.type.push(e)}else if(this.type instanceof Nd){const e=this.config.initialValue,t=this.type;Object.entries(e).forEach((e=>{let[n,r]=e;t.set(n,r)}))}else this.type instanceof Hd?this.type.insert(0,String(this.config.initialValue)):this.type}));const t=this.getValue();xf&&console.log("initial value",t),this.observers.forEach((e=>e(t)))}catch(t){throw console.error("Error initializing store:",t),t}}subscribe(e){return this.observers.add(e),e(this.getValue()),()=>{this.observers.delete(e)}}isEmpty(){return this.array?0===this.array.length:this.map?0===this.map.size:this.text?0===this.text.length:!this.xml||""===this.xml.toString()}getValue(){if(this.array)return this.array.toArray();if(this.map)return this.map.toJSON();if(this.text)return this.text.toString();if(this.xml)return this.xml.toString();throw new Error("Unsupported Yjs type")}update(e){const t=e(this.getValue());this.doc.transact((e=>{if((new WeakMap).set(e,"update"),"array"===this.config.type){if(!this.array)throw new Error("Array type was not properly initialized");this.array.delete(0,this.array.length);(Array.isArray(t)?t:[t]).forEach((e=>this.array.insert(this.array.length,[e])))}else if(this.type instanceof Nd){this.type.clear();const e=t,n=this.type;Object.entries(e).forEach((e=>{let[t,r]=e;n.set(t,r)}))}else if(this.type instanceof Hd){this.type.delete(0,this.type.length),this.type.insert(0,String(t));const e=Array.from(ah(this.doc));this.provider.updateState(e)}else this.type;const n=ah(this.doc);this.provider.updateState(Array.from(n))}))}destroy(){this.provider.destroy(),this.doc.destroy(),this.observers.clear()}getDoc(){return this.doc}getText(){return this.text}get docPath(){return"".concat(this.config.collection,"/").concat(this.config.id)}async storeVersion(e,t){const n=vx(wx(qP,this.docPath),"versions"),r=Date.now().toString(),i=ah(this.doc),o={id:r,name:e,timestamp:yb.now(),snapshot:{state:Array.from(i)}};return await mT(wx(n,r),o),r}async getVersionList(){const e=Jx(vx(wx(qP,this.docPath),"versions"),function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Qx("orderBy",e);return nT._create(n,t)}("timestamp","desc"));return(await gT(e)).docs.map((e=>e.data()))}async getVersion(e){const t=wx(qP,this.docPath),n=wx(vx(t,"versions"),e),r=await fT(n);return r.exists()?r.data():null}async restoreVersion(e){const t=await this.getVersion(e);if(!t)return!1;const n=wx(qP,this.docPath);return await yT(n,t.snapshot),!0}async setStateFromVersion(e){var t;if(null===e||void 0===e||null===(t=e.snapshot)||void 0===t||!t.state||!Array.isArray(e.snapshot.state))throw new Error("Invalid version data: missing or invalid state");try{const t=new Uint8Array(e.snapshot.state),n=new Yu;oh(n,t);const r=n.getText("content").toString();this.doc.transact((()=>{this.text&&(this.text.delete(0,this.text.length),r&&this.text.insert(0,r))}));const i=this.getValue(),o=wx(qP,this.docPath);await yT(o,{content:i}),this.observers.forEach((e=>e(i)))}catch(n){throw console.error("Error restoring version:",n),n}}}function GP(e){return e?e.reduce(((e,t)=>(t&&t.id&&(e[t.id]=t),e)),{}):{}}function QP(e){return e?Object.values(e):[]}function XP(e){return e?GP(e.map((e=>c(c({},e),{},{position:{x:e.position.x,y:e.position.y}})))):{}}function ZP(e){return e?GP(e):{}}const $P=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r.debounceMs;const i=new YP({collection:"reactflow",id:"appState",userId:n,type:"map",initialValue:{nodes:XP(e),edges:ZP(t)},debounceMs:r.debounceMs}),o=(s=(n,r)=>({nodes:e,edges:t,onNodesChange:e=>{const t=as(e,r().nodes);n({nodes:t}),i.getValue(),i.update((e=>c(c({},e),{},{nodes:XP(t)}))),console.log("Nodes updated:",t)},onEdgesChange:e=>{const t=i.getValue(),o=ls(e,r().edges).filter((e=>function(e,t){return void 0!==t[e.source]&&void 0!==t[e.target]}(e,t.nodes)));n({edges:o}),i.update((e=>c(c({},e),{},{edges:ZP(o)}))),console.log("Edges updated:",o)},onConnect:e=>{const t=wi(e,r().edges);n({edges:t}),i.getValue(),i.update((e=>c(c({},e),{},{edges:ZP(t)}))),console.log("Connection added:",e)},setNodes:e=>{n({nodes:e}),i.getValue(),i.update((t=>c(c({},t),{},{nodes:XP(e)}))),console.log("Nodes set:",e)},setEdges:e=>{n({edges:e}),i.getValue(),i.update((t=>c(c({},t),{},{edges:ZP(e)}))),console.log("Edges set:",e)}}),s?kl(s):kl);var s;return i.initialize().then((()=>{console.log("Flow store initialized")})),i.subscribe((e=>{var t,n;console.log("Flow state updated:",e),o.setState({nodes:(n=e.nodes,n?QP(n).map((e=>c(c({},e),{},{position:{x:e.position.x,y:e.position.y}}))):[]),edges:(t=e.edges,t?QP(t):[])})})),o},JP=e=>Symbol.iterator in e,eM=e=>"entries"in e,tM=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[i,o]of n)if(!Object.is(o,r.get(i)))return!1;return!0};function nM(e,t){return!!Object.is(e,t)||"object"===typeof e&&null!==e&&"object"===typeof t&&null!==t&&(JP(e)&&JP(t)?eM(e)&&eM(t)?tM(e,t):((e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let i=n.next(),o=r.next();for(;!i.done&&!o.done;){if(!Object.is(i.value,o.value))return!1;i=n.next(),o=r.next()}return!!i.done&&!!o.done})(e,t):tM({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}))}const rM=e=>({nodes:e.nodes,edges:e.edges,onNodesChange:e.onNodesChange,onEdgesChange:e.onEdgesChange,onConnect:e.onConnect,setNodes:e.setNodes,setEdges:e.setEdges}),iM=[{id:"0",type:"input",data:{label:"Node"},position:{x:0,y:50}}],oM=[],sM=Math.floor(100*Math.random())+1;let aM=Math.floor(1e3*Math.random())+1;const lM=[.5,0],cM=()=>{const e="user"+sM,t=(0,r.useRef)($P(iM,oM,e,{debounceMs:500})),{nodes:n,edges:i,onNodesChange:o,onEdgesChange:s,onConnect:a,setNodes:l,setEdges:c}=t.current(function(e){const t=r.useRef(void 0);return n=>{const r=e(n);return nM(t.current,r)?t.current:t.current=r}}(rM)),u=(0,r.useRef)(null),{screenToFlowPosition:d}=bs(),f=(0,r.useCallback)(((e,t)=>{if(!t.isValid){const n="".concat(aM++),{clientX:r,clientY:i}="changedTouches"in e?e.changedTouches[0]:e,a={id:n,position:d({x:r,y:i}),data:{label:"Node ".concat(n)},origin:[.5,0]},l={id:"e".concat(n),source:t.fromNode.id,target:n};o([{type:"add",item:a}]),s([{type:"add",item:l}])}}),[d,o,s]);return(0,h.jsx)("div",{className:"wrapper",ref:u,children:(0,h.jsxs)($a,{style:{backgroundColor:"#F7F9FB"},nodes:n,edges:i,onNodesChange:o,onEdgesChange:s,onConnect:a,onConnectEnd:f,fitView:!0,fitViewOptions:{padding:2},nodeOrigin:lM,children:[(0,h.jsx)(ol,{}),(0,h.jsx)(Sl,{}),(0,h.jsx)(pl,{})]})})},uM=()=>(0,h.jsx)(Qa,{children:(0,h.jsx)(cM,{})}),hM=e=>{e&&e instanceof Function&&n.e(714).then(n.bind(n,714)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:s}=t;n(e),r(e),i(e),o(e),s(e)}))};i.createRoot(document.getElementById("app")).render((0,h.jsx)(r.StrictMode,{children:(0,h.jsx)(uM,{})})),hM()})();
//# sourceMappingURL=main.66d4e9ed.js.map